!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).milque=t.milque||{},t.milque.asset={}))}(this,(function(t){"use strict";function e(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var n={},r={get exports(){return n},set exports(t){n=t}};function o(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,u=function(t){return s.exec(t).slice(1)};function a(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=o(g(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function i(t){var e=l(t),n="/"===v(t,-1);return(t=o(g(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function l(t){return"/"===t.charAt(0)}function c(){return i(g(Array.prototype.slice.call(arguments,0),(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))}function p(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=a(t).substr(1),e=a(e).substr(1);for(var r=n(t.split("/")),o=n(e.split("/")),s=Math.min(r.length,o.length),u=s,i=0;i<s;i++)if(r[i]!==o[i]){u=i;break}var l=[];for(i=u;i<r.length;i++)l.push("..");return(l=l.concat(o.slice(u))).join("/")}function f(t){var e=u(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function h(t,e){var n=u(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function A(t){return u(t)[3]}var _={extname:A,basename:h,dirname:f,sep:"/",delimiter:":",relative:p,join:c,isAbsolute:l,normalize:i,resolve:a};function g(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var v="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},R=e(Object.freeze({__proto__:null,basename:h,default:_,delimiter:":",dirname:f,extname:A,isAbsolute:l,join:c,normalize:i,relative:p,resolve:a,sep:"/"})),b={};const d=R,y="\\\\/",E=`[^${y}]`,S="\\.",C="\\/",x="[^/]",$=`(?:${C}|$)`,m=`(?:^|${C})`,H=`${S}{1,2}${$}`,T={DOT_LITERAL:S,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:C,ONE_CHAR:"(?=.)",QMARK:x,END_ANCHOR:$,DOTS_SLASH:H,NO_DOT:`(?!${S})`,NO_DOTS:`(?!${m}${H})`,NO_DOT_SLASH:`(?!${S}{0,1}${$})`,NO_DOTS_SLASH:`(?!${H})`,QMARK_NO_DOT:`[^.${C}]`,STAR:`${x}*?`,START_ANCHOR:m},k={...T,SLASH_LITERAL:`[${y}]`,QMARK:E,STAR:`${E}*?`,DOTS_SLASH:`${S}{1,2}(?:[${y}]|$)`,NO_DOT:`(?!${S})`,NO_DOTS:`(?!(?:^|[${y}])${S}{1,2}(?:[${y}]|$))`,NO_DOT_SLASH:`(?!${S}{0,1}(?:[${y}]|$))`,NO_DOTS_SLASH:`(?!${S}{1,2}(?:[${y}]|$))`,QMARK_NO_DOT:`[^.${y}]`,START_ANCHOR:`(?:^|[${y}])`,END_ANCHOR:`(?:[${y}]|$)`};var O={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:d.sep,extglobChars:t=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:t=>!0===t?k:T};!function(t){const e=R,n="win32"===process.platform,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:u}=O;t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),t.hasRegexChars=t=>s.test(t),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=t=>t.replace(u,"\\$1"),t.toPosixSlashes=t=>t.replace(r,"/"),t.removeBackslashes=t=>t.replace(o,(t=>"\\"===t?"":t)),t.supportsLookbehinds=()=>{const t=process.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=t=>t&&"boolean"==typeof t.windows?t.windows:!0===n||"\\"===e.sep,t.escapeLast=(e,n,r)=>{const o=e.lastIndexOf(n,r);return-1===o?e:"\\"===e[o-1]?t.escapeLast(e,n,o-1):`${e.slice(0,o)}\\${e.slice(o)}`},t.removePrefix=(t,e={})=>{let n=t;return n.startsWith("./")&&(n=n.slice(2),e.prefix="./"),n},t.wrapOutput=(t,e={},n={})=>{let r=`${n.contains?"":"^"}(?:${t})${n.contains?"":"$"}`;return!0===e.negated&&(r=`(?:^(?!${r}).*$)`),r}}(b);const L=b,{CHAR_ASTERISK:w,CHAR_AT:N,CHAR_BACKWARD_SLASH:M,CHAR_COMMA:I,CHAR_DOT:B,CHAR_EXCLAMATION_MARK:P,CHAR_FORWARD_SLASH:G,CHAR_LEFT_CURLY_BRACE:D,CHAR_LEFT_PARENTHESES:U,CHAR_LEFT_SQUARE_BRACKET:j,CHAR_PLUS:K,CHAR_QUESTION_MARK:F,CHAR_RIGHT_CURLY_BRACE:X,CHAR_RIGHT_PARENTHESES:Q,CHAR_RIGHT_SQUARE_BRACKET:W}=O,q=t=>t===G||t===M,z=t=>{!0!==t.isPrefix&&(t.depth=t.isGlobstar?1/0:1)};var Y=(t,e)=>{const n=e||{},r=t.length-1,o=!0===n.parts||!0===n.scanToEnd,s=[],u=[],a=[];let i,l,c=t,p=-1,f=0,h=0,A=!1,_=!1,g=!1,v=!1,R=!1,b=!1,d=!1,y=!1,E=!1,S=!1,C=0,x={value:"",depth:0,isGlob:!1};const $=()=>p>=r,m=()=>(i=l,c.charCodeAt(++p));for(;p<r;){let t;if(l=m(),l!==M){if(!0===b||l===D){for(C++;!0!==$()&&(l=m());)if(l!==M)if(l!==D){if(!0!==b&&l===B&&(l=m())===B){if(A=x.isBrace=!0,g=x.isGlob=!0,S=!0,!0===o)continue;break}if(!0!==b&&l===I){if(A=x.isBrace=!0,g=x.isGlob=!0,S=!0,!0===o)continue;break}if(l===X&&(C--,0===C)){b=!1,A=x.isBrace=!0,S=!0;break}}else C++;else d=x.backslashes=!0,m();if(!0===o)continue;break}if(l!==G){if(!0!==n.noext){if(!0===(l===K||l===N||l===w||l===F||l===P)&&c.charCodeAt(p+1)===U){if(g=x.isGlob=!0,v=x.isExtglob=!0,S=!0,l===P&&p===f&&(E=!0),!0===o){for(;!0!==$()&&(l=m());)if(l!==M){if(l===Q){g=x.isGlob=!0,S=!0;break}}else d=x.backslashes=!0,l=m();continue}break}}if(l===w){if(i===w&&(R=x.isGlobstar=!0),g=x.isGlob=!0,S=!0,!0===o)continue;break}if(l===F){if(g=x.isGlob=!0,S=!0,!0===o)continue;break}if(l===j){for(;!0!==$()&&(t=m());)if(t!==M){if(t===W){_=x.isBracket=!0,g=x.isGlob=!0,S=!0;break}}else d=x.backslashes=!0,m();if(!0===o)continue;break}if(!0===n.nonegate||l!==P||p!==f){if(!0!==n.noparen&&l===U){if(g=x.isGlob=!0,!0===o){for(;!0!==$()&&(l=m());)if(l!==U){if(l===Q){S=!0;break}}else d=x.backslashes=!0,l=m();continue}break}if(!0===g){if(S=!0,!0===o)continue;break}}else y=x.negated=!0,f++}else{if(s.push(p),u.push(x),x={value:"",depth:0,isGlob:!1},!0===S)continue;if(i===B&&p===f+1){f+=2;continue}h=p+1}}else d=x.backslashes=!0,l=m(),l===D&&(b=!0)}!0===n.noext&&(v=!1,g=!1);let H=c,T="",k="";f>0&&(T=c.slice(0,f),c=c.slice(f),h-=f),H&&!0===g&&h>0?(H=c.slice(0,h),k=c.slice(h)):!0===g?(H="",k=c):H=c,H&&""!==H&&"/"!==H&&H!==c&&q(H.charCodeAt(H.length-1))&&(H=H.slice(0,-1)),!0===n.unescape&&(k&&(k=L.removeBackslashes(k)),H&&!0===d&&(H=L.removeBackslashes(H)));const O={prefix:T,input:t,start:f,base:H,glob:k,isBrace:A,isBracket:_,isGlob:g,isExtglob:v,isGlobstar:R,negated:y,negatedExtglob:E};if(!0===n.tokens&&(O.maxDepth=0,q(l)||u.push(x),O.tokens=u),!0===n.parts||!0===n.tokens){let e;for(let r=0;r<s.length;r++){const o=e?e+1:f,i=s[r],l=t.slice(o,i);n.tokens&&(0===r&&0!==f?(u[r].isPrefix=!0,u[r].value=T):u[r].value=l,z(u[r]),O.maxDepth+=u[r].depth),0===r&&""===l||a.push(l),e=i}if(e&&e+1<t.length){const r=t.slice(e+1);a.push(r),n.tokens&&(u[u.length-1].value=r,z(u[u.length-1]),O.maxDepth+=u[u.length-1].depth)}O.slashes=s,O.parts=a}return O};const Z=O,V=b,{MAX_LENGTH:J,POSIX_REGEX_SOURCE:tt,REGEX_NON_SPECIAL_CHARS:et,REGEX_SPECIAL_CHARS_BACKREF:nt,REPLACEMENTS:rt}=Z,ot=(t,e)=>{if("function"==typeof e.expandRange)return e.expandRange(...t,e);t.sort();const n=`[${t.join("-")}]`;try{new RegExp(n)}catch(e){return t.map((t=>V.escapeRegex(t))).join("..")}return n},st=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,ut=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");t=rt[t]||t;const n={...e},r="number"==typeof n.maxLength?Math.min(J,n.maxLength):J;let o=t.length;if(o>r)throw new SyntaxError(`Input length: ${o}, exceeds maximum allowed length: ${r}`);const s={type:"bos",value:"",output:n.prepend||""},u=[s],a=n.capture?"":"?:",i=V.isWindows(e),l=Z.globChars(i),c=Z.extglobChars(l),{DOT_LITERAL:p,PLUS_LITERAL:f,SLASH_LITERAL:h,ONE_CHAR:A,DOTS_SLASH:_,NO_DOT:g,NO_DOT_SLASH:v,NO_DOTS_SLASH:R,QMARK:b,QMARK_NO_DOT:d,STAR:y,START_ANCHOR:E}=l,S=t=>`(${a}(?:(?!${E}${t.dot?_:p}).)*?)`,C=n.dot?"":g,x=n.dot?b:d;let $=!0===n.bash?S(n):y;n.capture&&($=`(${$})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const m={input:t,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};t=V.removePrefix(t,m),o=t.length;const H=[],T=[],k=[];let O,L=s;const w=()=>m.index===o-1,N=m.peek=(e=1)=>t[m.index+e],M=m.advance=()=>t[++m.index]||"",I=()=>t.slice(m.index+1),B=(t="",e=0)=>{m.consumed+=t,m.index+=e},P=t=>{m.output+=null!=t.output?t.output:t.value,B(t.value)},G=()=>{let t=1;for(;"!"===N()&&("("!==N(2)||"?"===N(3));)M(),m.start++,t++;return t%2!=0&&(m.negated=!0,m.start++,!0)},D=t=>{m[t]++,k.push(t)},U=t=>{m[t]--,k.pop()},j=t=>{if("globstar"===L.type){const e=m.braces>0&&("comma"===t.type||"brace"===t.type),n=!0===t.extglob||H.length&&("pipe"===t.type||"paren"===t.type);"slash"===t.type||"paren"===t.type||e||n||(m.output=m.output.slice(0,-L.output.length),L.type="star",L.value="*",L.output=$,m.output+=L.output)}if(H.length&&"paren"!==t.type&&(H[H.length-1].inner+=t.value),(t.value||t.output)&&P(t),L&&"text"===L.type&&"text"===t.type)return L.value+=t.value,void(L.output=(L.output||"")+t.value);t.prev=L,u.push(t),L=t},K=(t,e)=>{const r={...c[e],conditions:1,inner:""};r.prev=L,r.parens=m.parens,r.output=m.output;const o=(n.capture?"(":"")+r.open;D("parens"),j({type:t,value:e,output:m.output?"":A}),j({type:"paren",extglob:!0,value:M(),output:o}),H.push(r)},F=t=>{let r,o=t.close+(n.capture?")":"");if("negate"===t.type){let s=$;if(t.inner&&t.inner.length>1&&t.inner.includes("/")&&(s=S(n)),(s!==$||w()||/^\)+$/.test(I()))&&(o=t.close=`)$))${s}`),t.inner.includes("*")&&(r=I())&&/^\.[^\\/.]+$/.test(r)){const n=ut(r,{...e,fastpaths:!1}).output;o=t.close=`)${n})${s})`}"bos"===t.prev.type&&(m.negatedExtglob=!0)}j({type:"paren",extglob:!0,value:O,output:o}),U("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(t)){let r=!1,o=t.replace(nt,((t,e,n,o,s,u)=>"\\"===o?(r=!0,t):"?"===o?e?e+o+(s?b.repeat(s.length):""):0===u?x+(s?b.repeat(s.length):""):b.repeat(n.length):"."===o?p.repeat(n.length):"*"===o?e?e+o+(s?$:""):$:e?t:`\\${t}`));return!0===r&&(o=!0===n.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,(t=>t.length%2==0?"\\\\":t?"\\":""))),o===t&&!0===n.contains?(m.output=t,m):(m.output=V.wrapOutput(o,m,e),m)}for(;!w();){if(O=M(),"\0"===O)continue;if("\\"===O){const t=N();if("/"===t&&!0!==n.bash)continue;if("."===t||";"===t)continue;if(!t){O+="\\",j({type:"text",value:O});continue}const e=/^\\+/.exec(I());let r=0;if(e&&e[0].length>2&&(r=e[0].length,m.index+=r,r%2!=0&&(O+="\\")),!0===n.unescape?O=M():O+=M(),0===m.brackets){j({type:"text",value:O});continue}}if(m.brackets>0&&("]"!==O||"["===L.value||"[^"===L.value)){if(!1!==n.posix&&":"===O){const t=L.value.slice(1);if(t.includes("[")&&(L.posix=!0,t.includes(":"))){const t=L.value.lastIndexOf("["),e=L.value.slice(0,t),n=L.value.slice(t+2),r=tt[n];if(r){L.value=e+r,m.backtrack=!0,M(),s.output||1!==u.indexOf(L)||(s.output=A);continue}}}("["===O&&":"!==N()||"-"===O&&"]"===N())&&(O=`\\${O}`),"]"!==O||"["!==L.value&&"[^"!==L.value||(O=`\\${O}`),!0===n.posix&&"!"===O&&"["===L.value&&(O="^"),L.value+=O,P({value:O});continue}if(1===m.quotes&&'"'!==O){O=V.escapeRegex(O),L.value+=O,P({value:O});continue}if('"'===O){m.quotes=1===m.quotes?0:1,!0===n.keepQuotes&&j({type:"text",value:O});continue}if("("===O){D("parens"),j({type:"paren",value:O});continue}if(")"===O){if(0===m.parens&&!0===n.strictBrackets)throw new SyntaxError(st("opening","("));const t=H[H.length-1];if(t&&m.parens===t.parens+1){F(H.pop());continue}j({type:"paren",value:O,output:m.parens?")":"\\)"}),U("parens");continue}if("["===O){if(!0!==n.nobracket&&I().includes("]"))D("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(st("closing","]"));O=`\\${O}`}j({type:"bracket",value:O});continue}if("]"===O){if(!0===n.nobracket||L&&"bracket"===L.type&&1===L.value.length){j({type:"text",value:O,output:`\\${O}`});continue}if(0===m.brackets){if(!0===n.strictBrackets)throw new SyntaxError(st("opening","["));j({type:"text",value:O,output:`\\${O}`});continue}U("brackets");const t=L.value.slice(1);if(!0===L.posix||"^"!==t[0]||t.includes("/")||(O=`/${O}`),L.value+=O,P({value:O}),!1===n.literalBrackets||V.hasRegexChars(t))continue;const e=V.escapeRegex(L.value);if(m.output=m.output.slice(0,-L.value.length),!0===n.literalBrackets){m.output+=e,L.value=e;continue}L.value=`(${a}${e}|${L.value})`,m.output+=L.value;continue}if("{"===O&&!0!==n.nobrace){D("braces");const t={type:"brace",value:O,output:"(",outputIndex:m.output.length,tokensIndex:m.tokens.length};T.push(t),j(t);continue}if("}"===O){const t=T[T.length-1];if(!0===n.nobrace||!t){j({type:"text",value:O,output:O});continue}let e=")";if(!0===t.dots){const t=u.slice(),r=[];for(let e=t.length-1;e>=0&&(u.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&r.unshift(t[e].value);e=ot(r,n),m.backtrack=!0}if(!0!==t.comma&&!0!==t.dots){const n=m.output.slice(0,t.outputIndex),r=m.tokens.slice(t.tokensIndex);t.value=t.output="\\{",O=e="\\}",m.output=n;for(const t of r)m.output+=t.output||t.value}j({type:"brace",value:O,output:e}),U("braces"),T.pop();continue}if("|"===O){H.length>0&&H[H.length-1].conditions++,j({type:"text",value:O});continue}if(","===O){let t=O;const e=T[T.length-1];e&&"braces"===k[k.length-1]&&(e.comma=!0,t="|"),j({type:"comma",value:O,output:t});continue}if("/"===O){if("dot"===L.type&&m.index===m.start+1){m.start=m.index+1,m.consumed="",m.output="",u.pop(),L=s;continue}j({type:"slash",value:O,output:h});continue}if("."===O){if(m.braces>0&&"dot"===L.type){"."===L.value&&(L.output=p);const t=T[T.length-1];L.type="dots",L.output+=O,L.value+=O,t.dots=!0;continue}if(m.braces+m.parens===0&&"bos"!==L.type&&"slash"!==L.type){j({type:"text",value:O,output:p});continue}j({type:"dot",value:O,output:p});continue}if("?"===O){if(!(L&&"("===L.value)&&!0!==n.noextglob&&"("===N()&&"?"!==N(2)){K("qmark",O);continue}if(L&&"paren"===L.type){const t=N();let e=O;if("<"===t&&!V.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===L.value&&!/[!=<:]/.test(t)||"<"===t&&!/<([!=]|\w+>)/.test(I()))&&(e=`\\${O}`),j({type:"text",value:O,output:e});continue}if(!0!==n.dot&&("slash"===L.type||"bos"===L.type)){j({type:"qmark",value:O,output:d});continue}j({type:"qmark",value:O,output:b});continue}if("!"===O){if(!0!==n.noextglob&&"("===N()&&("?"!==N(2)||!/[!=<:]/.test(N(3)))){K("negate",O);continue}if(!0!==n.nonegate&&0===m.index){G();continue}}if("+"===O){if(!0!==n.noextglob&&"("===N()&&"?"!==N(2)){K("plus",O);continue}if(L&&"("===L.value||!1===n.regex){j({type:"plus",value:O,output:f});continue}if(L&&("bracket"===L.type||"paren"===L.type||"brace"===L.type)||m.parens>0){j({type:"plus",value:O});continue}j({type:"plus",value:f});continue}if("@"===O){if(!0!==n.noextglob&&"("===N()&&"?"!==N(2)){j({type:"at",extglob:!0,value:O,output:""});continue}j({type:"text",value:O});continue}if("*"!==O){"$"!==O&&"^"!==O||(O=`\\${O}`);const t=et.exec(I());t&&(O+=t[0],m.index+=t[0].length),j({type:"text",value:O});continue}if(L&&("globstar"===L.type||!0===L.star)){L.type="star",L.star=!0,L.value+=O,L.output=$,m.backtrack=!0,m.globstar=!0,B(O);continue}let e=I();if(!0!==n.noextglob&&/^\([^?]/.test(e)){K("star",O);continue}if("star"===L.type){if(!0===n.noglobstar){B(O);continue}const r=L.prev,o=r.prev,s="slash"===r.type||"bos"===r.type,u=o&&("star"===o.type||"globstar"===o.type);if(!0===n.bash&&(!s||e[0]&&"/"!==e[0])){j({type:"star",value:O,output:""});continue}const a=m.braces>0&&("comma"===r.type||"brace"===r.type),i=H.length&&("pipe"===r.type||"paren"===r.type);if(!s&&"paren"!==r.type&&!a&&!i){j({type:"star",value:O,output:""});continue}for(;"/**"===e.slice(0,3);){const n=t[m.index+4];if(n&&"/"!==n)break;e=e.slice(3),B("/**",3)}if("bos"===r.type&&w()){L.type="globstar",L.value+=O,L.output=S(n),m.output=L.output,m.globstar=!0,B(O);continue}if("slash"===r.type&&"bos"!==r.prev.type&&!u&&w()){m.output=m.output.slice(0,-(r.output+L.output).length),r.output=`(?:${r.output}`,L.type="globstar",L.output=S(n)+(n.strictSlashes?")":"|$)"),L.value+=O,m.globstar=!0,m.output+=r.output+L.output,B(O);continue}if("slash"===r.type&&"bos"!==r.prev.type&&"/"===e[0]){const t=void 0!==e[1]?"|$":"";m.output=m.output.slice(0,-(r.output+L.output).length),r.output=`(?:${r.output}`,L.type="globstar",L.output=`${S(n)}${h}|${h}${t})`,L.value+=O,m.output+=r.output+L.output,m.globstar=!0,B(O+M()),j({type:"slash",value:"/",output:""});continue}if("bos"===r.type&&"/"===e[0]){L.type="globstar",L.value+=O,L.output=`(?:^|${h}|${S(n)}${h})`,m.output=L.output,m.globstar=!0,B(O+M()),j({type:"slash",value:"/",output:""});continue}m.output=m.output.slice(0,-L.output.length),L.type="globstar",L.output=S(n),L.value+=O,m.output+=L.output,m.globstar=!0,B(O);continue}const r={type:"star",value:O,output:$};!0!==n.bash?!L||"bracket"!==L.type&&"paren"!==L.type||!0!==n.regex?(m.index!==m.start&&"slash"!==L.type&&"dot"!==L.type||("dot"===L.type?(m.output+=v,L.output+=v):!0===n.dot?(m.output+=R,L.output+=R):(m.output+=C,L.output+=C),"*"!==N()&&(m.output+=A,L.output+=A)),j(r)):(r.output=O,j(r)):(r.output=".*?","bos"!==L.type&&"slash"!==L.type||(r.output=C+r.output),j(r))}for(;m.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(st("closing","]"));m.output=V.escapeLast(m.output,"["),U("brackets")}for(;m.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(st("closing",")"));m.output=V.escapeLast(m.output,"("),U("parens")}for(;m.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(st("closing","}"));m.output=V.escapeLast(m.output,"{"),U("braces")}if(!0===n.strictSlashes||"star"!==L.type&&"bracket"!==L.type||j({type:"maybe_slash",value:"",output:`${h}?`}),!0===m.backtrack){m.output="";for(const t of m.tokens)m.output+=null!=t.output?t.output:t.value,t.suffix&&(m.output+=t.suffix)}return m};ut.fastpaths=(t,e)=>{const n={...e},r="number"==typeof n.maxLength?Math.min(J,n.maxLength):J,o=t.length;if(o>r)throw new SyntaxError(`Input length: ${o}, exceeds maximum allowed length: ${r}`);t=rt[t]||t;const s=V.isWindows(e),{DOT_LITERAL:u,SLASH_LITERAL:a,ONE_CHAR:i,DOTS_SLASH:l,NO_DOT:c,NO_DOTS:p,NO_DOTS_SLASH:f,STAR:h,START_ANCHOR:A}=Z.globChars(s),_=n.dot?p:c,g=n.dot?f:c,v=n.capture?"":"?:";let R=!0===n.bash?".*?":h;n.capture&&(R=`(${R})`);const b=t=>!0===t.noglobstar?R:`(${v}(?:(?!${A}${t.dot?l:u}).)*?)`,d=t=>{switch(t){case"*":return`${_}${i}${R}`;case".*":return`${u}${i}${R}`;case"*.*":return`${_}${R}${u}${i}${R}`;case"*/*":return`${_}${R}${a}${i}${g}${R}`;case"**":return _+b(n);case"**/*":return`(?:${_}${b(n)}${a})?${g}${i}${R}`;case"**/*.*":return`(?:${_}${b(n)}${a})?${g}${R}${u}${i}${R}`;case"**/.*":return`(?:${_}${b(n)}${a})?${u}${i}${R}`;default:{const e=/^(.*?)\.(\w+)$/.exec(t);if(!e)return;const n=d(e[1]);if(!n)return;return n+u+e[2]}}},y=V.removePrefix(t,{negated:!1,prefix:""});let E=d(y);return E&&!0!==n.strictSlashes&&(E+=`${a}?`),E};const at=R,it=Y,lt=ut,ct=b,pt=O,ft=(t,e,n=!1)=>{if(Array.isArray(t)){const r=t.map((t=>ft(t,e,n))),o=t=>{for(const e of r){const n=e(t);if(n)return n}return!1};return o}const r=(o=t)&&"object"==typeof o&&!Array.isArray(o)&&t.tokens&&t.input;var o;if(""===t||"string"!=typeof t&&!r)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},u=ct.isWindows(e),a=r?ft.compileRe(t,e):ft.makeRe(t,e,!1,!0),i=a.state;delete a.state;let l=()=>!1;if(s.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};l=ft(s.ignore,t,n)}const c=(n,r=!1)=>{const{isMatch:o,match:c,output:p}=ft.test(n,a,e,{glob:t,posix:u}),f={glob:t,state:i,regex:a,posix:u,input:n,output:p,match:c,isMatch:o};return"function"==typeof s.onResult&&s.onResult(f),!1===o?(f.isMatch=!1,!!r&&f):l(n)?("function"==typeof s.onIgnore&&s.onIgnore(f),f.isMatch=!1,!!r&&f):("function"==typeof s.onMatch&&s.onMatch(f),!r||f)};return n&&(c.state=i),c};ft.test=(t,e,n,{glob:r,posix:o}={})=>{if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(""===t)return{isMatch:!1,output:""};const s=n||{},u=s.format||(o?ct.toPosixSlashes:null);let a=t===r,i=a&&u?u(t):t;return!1===a&&(i=u?u(t):t,a=i===r),!1!==a&&!0!==s.capture||(a=!0===s.matchBase||!0===s.basename?ft.matchBase(t,e,n,o):e.exec(i)),{isMatch:Boolean(a),match:a,output:i}},ft.matchBase=(t,e,n,r=ct.isWindows(n))=>(e instanceof RegExp?e:ft.makeRe(e,n)).test(at.basename(t)),ft.isMatch=(t,e,n)=>ft(e,n)(t),ft.parse=(t,e)=>Array.isArray(t)?t.map((t=>ft.parse(t,e))):lt(t,{...e,fastpaths:!1}),ft.scan=(t,e)=>it(t,e),ft.compileRe=(t,e,n=!1,r=!1)=>{if(!0===n)return t.output;const o=e||{},s=o.contains?"":"^",u=o.contains?"":"$";let a=`${s}(?:${t.output})${u}`;t&&!0===t.negated&&(a=`^(?!${a}).*$`);const i=ft.toRegex(a,e);return!0===r&&(i.state=t),i},ft.makeRe=(t,e={},n=!1,r=!1)=>{if(!t||"string"!=typeof t)throw new TypeError("Expected a non-empty string");let o={negated:!1,fastpaths:!0};return!1===e.fastpaths||"."!==t[0]&&"*"!==t[0]||(o.output=lt.fastpaths(t,e)),o.output||(o=lt(t,e)),ft.compileRe(o,e,n,r)},ft.toRegex=(t,e)=>{try{const n=e||{};return new RegExp(t,n.flags||(n.nocase?"i":""))}catch(t){if(e&&!0===e.debug)throw t;return/$^/}},ft.constants=pt;var ht=ft;!function(t){t.exports=ht}(r);class At{constructor(t){let e;e="object"==typeof t&&t instanceof At?t.source:String(t),this.source=e,this._re=n.makeRe(e)}test(t){return this._re.test(t)}}const _t=/^([_\w\d]+)\:\/\//,gt=5e3;function vt(t,e,n){const{cache:r,loadings:o}=t;return r[e]=n,e in o&&(o[e].resolve(n),delete o[e]),n}async function Rt(t,e,n=gt){const{cache:r,loadings:o}=t;if(e in r)return r[e];if(e in o)return o[e].promise;{let t=new dt(n);return o[e]=t,t.promise}}function bt(t,e){return t.cache[e]}class dt{constructor(t){this.active=!1,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(t)&&t>0?setTimeout((()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)}),t):null,this._promise=new Promise(((t,e)=>{this._value?t(this._value):this._resolve=t,this._reason?e(this._reason):this._reject=e}))}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}}var yt={},Et=Uint8Array,St=Uint16Array,Ct=Uint32Array,xt=new Et([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$t=new Et([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mt=new Et([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ht=function(t,e){for(var n=new St(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var o=new Ct(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)o[s]=s-n[r]<<5|r;return[n,o]},Tt=Ht(xt,2),kt=Tt[0],Ot=Tt[1];kt[28]=258,Ot[258]=28;for(var Lt=Ht($t,0)[0],wt=new St(32768),Nt=0;Nt<32768;++Nt){var Mt=(43690&Nt)>>>1|(21845&Nt)<<1;Mt=(61680&(Mt=(52428&Mt)>>>2|(13107&Mt)<<2))>>>4|(3855&Mt)<<4,wt[Nt]=((65280&Mt)>>>8|(255&Mt)<<8)>>>1}var It=function(t,e,n){for(var r=t.length,o=0,s=new St(e);o<r;++o)t[o]&&++s[t[o]-1];var u,a=new St(e);for(o=0;o<e;++o)a[o]=a[o-1]+s[o-1]<<1;if(n){u=new St(1<<e);var i=15-e;for(o=0;o<r;++o)if(t[o])for(var l=o<<4|t[o],c=e-t[o],p=a[t[o]-1]++<<c,f=p|(1<<c)-1;p<=f;++p)u[wt[p]>>>i]=l}else for(u=new St(r),o=0;o<r;++o)t[o]&&(u[o]=wt[a[t[o]-1]++]>>>15-t[o]);return u},Bt=new Et(288);for(Nt=0;Nt<144;++Nt)Bt[Nt]=8;for(Nt=144;Nt<256;++Nt)Bt[Nt]=9;for(Nt=256;Nt<280;++Nt)Bt[Nt]=7;for(Nt=280;Nt<288;++Nt)Bt[Nt]=8;var Pt=new Et(32);for(Nt=0;Nt<32;++Nt)Pt[Nt]=5;var Gt=It(Bt,9,1),Dt=It(Pt,5,1),Ut=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},jt=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},Kt=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Ft=function(t){return(t+7)/8|0},Xt=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(2==t.BYTES_PER_ELEMENT?St:4==t.BYTES_PER_ELEMENT?Ct:Et)(n-e);return r.set(t.subarray(e,n)),r},Qt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wt=function(t,e,n){var r=new Error(e||Qt[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Wt),!n)throw r;return r},qt=function(t,e,n){var r=t.length;if(!r||n&&n.f&&!n.l)return e||new Et(0);var o=!e||n,s=!n||n.i;n||(n={}),e||(e=new Et(3*r));var u=function(t){var n=e.length;if(t>n){var r=new Et(Math.max(2*n,t));r.set(e),e=r}},a=n.f||0,i=n.p||0,l=n.b||0,c=n.l,p=n.d,f=n.m,h=n.n,A=8*r;do{if(!c){a=jt(t,i,1);var _=jt(t,i+1,3);if(i+=3,!_){var g=t[(m=Ft(i)+4)-4]|t[m-3]<<8,v=m+g;if(v>r){s&&Wt(0);break}o&&u(l+g),e.set(t.subarray(m,v),l),n.b=l+=g,n.p=i=8*v,n.f=a;continue}if(1==_)c=Gt,p=Dt,f=9,h=5;else if(2==_){var R=jt(t,i,31)+257,b=jt(t,i+10,15)+4,d=R+jt(t,i+5,31)+1;i+=14;for(var y=new Et(d),E=new Et(19),S=0;S<b;++S)E[mt[S]]=jt(t,i+3*S,7);i+=3*b;var C=Ut(E),x=(1<<C)-1,$=It(E,C,1);for(S=0;S<d;){var m,H=$[jt(t,i,x)];if(i+=15&H,(m=H>>>4)<16)y[S++]=m;else{var T=0,k=0;for(16==m?(k=3+jt(t,i,3),i+=2,T=y[S-1]):17==m?(k=3+jt(t,i,7),i+=3):18==m&&(k=11+jt(t,i,127),i+=7);k--;)y[S++]=T}}var O=y.subarray(0,R),L=y.subarray(R);f=Ut(O),h=Ut(L),c=It(O,f,1),p=It(L,h,1)}else Wt(1);if(i>A){s&&Wt(0);break}}o&&u(l+131072);for(var w=(1<<f)-1,N=(1<<h)-1,M=i;;M=i){var I=(T=c[Kt(t,i)&w])>>>4;if((i+=15&T)>A){s&&Wt(0);break}if(T||Wt(2),I<256)e[l++]=I;else{if(256==I){M=i,c=null;break}var B=I-254;if(I>264){var P=xt[S=I-257];B=jt(t,i,(1<<P)-1)+kt[S],i+=P}var G=p[Kt(t,i)&N],D=G>>>4;G||Wt(3),i+=15&G;L=Lt[D];if(D>3){P=$t[D];L+=Kt(t,i)&(1<<P)-1,i+=P}if(i>A){s&&Wt(0);break}o&&u(l+131072);for(var U=l+B;l<U;l+=4)e[l]=e[l-L],e[l+1]=e[l+1-L],e[l+2]=e[l+2-L],e[l+3]=e[l+3-L];l=U}}n.l=c,n.p=M,n.b=l,n.f=a,c&&(a=1,n.m=f,n.d=p,n.n=h)}while(!a);return l==e.length?e:Xt(e,0,l)},zt=new Et(0),Yt=function(t,e,n){for(var r=t(),o=t.toString(),s=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),u=0;u<r.length;++u){var a=r[u],i=s[u];if("function"==typeof a){e+=";"+i+"=";var l=a.toString();if(a.prototype)if(-1!=l.indexOf("[native code]")){var c=l.indexOf(" ",8)+1;e+=l.slice(c,l.indexOf("(",c))}else for(var p in e+=l,a.prototype)e+=";"+i+".prototype."+p+"="+a.prototype[p].toString();else e+=l}else n[i]=a}return[e,n]},Zt=[],Vt=function(t,e,n,r){var o;if(!Zt[n]){for(var s="",u={},a=t.length-1,i=0;i<a;++i)s=(o=Yt(t[i],s,u))[0],u=o[1];Zt[n]=Yt(t[a],s,u)}var l=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}({},Zt[n][1]);return function(t,e,n,r,o){var s=new Worker(yt[e]||(yt[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(t){var e=t.data,n=e.$e$;if(n){var r=new Error(n[0]);r.code=n[1],r.stack=n[2],o(r,null)}else o(null,e)},s.postMessage(n,r),s}(Zt[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,l,function(t){var e=[];for(var n in t)t[n].buffer&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e}(l),r)},Jt=function(){return[Et,St,Ct,xt,$t,mt,kt,Lt,Gt,Dt,wt,Qt,It,Ut,jt,Kt,Ft,Xt,Wt,qt,ue,te,ee]},te=function(t){return postMessage(t,[t.buffer])},ee=function(t){return t&&t.size&&new Et(t.size)},ne=function(t,e,n,r,o,s){var u=Vt(n,r,o,(function(t,e){u.terminate(),s(t,e)}));return u.postMessage([t,e],e.consume?[t.buffer]:[]),function(){u.terminate()}},re=function(t,e){return t[e]|t[e+1]<<8},oe=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},se=function(t,e){return oe(t,e)+4294967296*oe(t,e+4)};function ue(t,e){return qt(t,e)}var ae="undefined"!=typeof TextDecoder&&new TextDecoder;try{ae.decode(zt,{stream:!0}),1}catch(t){}var ie=function(t){for(var e="",n=0;;){var r=t[n++],o=(r>127)+(r>223)+(r>239);if(n+o>t.length)return[e,Xt(t,n-1)];o?3==o?(r=((15&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|r>>10,56320|1023&r)):e+=1&o?String.fromCharCode((31&r)<<6|63&t[n++]):String.fromCharCode((15&r)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(r)}};var le=function(t,e){return e+30+re(t,e+26)+re(t,e+28)},ce=function(t,e,n){var r=re(t,e+28),o=function(t,e){if(e){for(var n="",r=0;r<t.length;r+=16384)n+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return n}if(ae)return ae.decode(t);var o=ie(t),s=o[0];return o[1].length&&Wt(8),s}(t.subarray(e+46,e+46+r),!(2048&re(t,e+8))),s=e+46+r,u=oe(t,e+20),a=n&&4294967295==u?pe(t,s):[u,oe(t,e+24),oe(t,e+42)],i=a[0],l=a[1],c=a[2];return[re(t,e+10),i,l,o,s+re(t,e+30)+re(t,e+32),c]},pe=function(t,e){for(;1!=re(t,e);e+=4+re(t,e+2));return[se(t,e+12),se(t,e+4),se(t,e+20)]},fe="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(t){t()};function he(t,e,n){n||(n=e,e={}),"function"!=typeof n&&Wt(7);var r=[],o=function(){for(var t=0;t<r.length;++t)r[t]()},s={},u=function(t,e){fe((function(){n(t,e)}))};fe((function(){u=n}));for(var a=t.length-22;101010256!=oe(t,a);--a)if(!a||t.length-a>65558)return u(Wt(13,0,1),null),o;var i=re(t,a+8);if(i){var l=i,c=oe(t,a+16),p=4294967295==c||65535==l;if(p){var f=oe(t,a-12);(p=101075792==oe(t,f))&&(l=i=oe(t,f+32),c=oe(t,f+48))}for(var h=e&&e.filter,A=function(e){var n=ce(t,c,p),a=n[0],l=n[1],f=n[2],A=n[3],_=n[4],g=n[5],v=le(t,g);c=_;var R=function(t,e){t?(o(),u(t,null)):(e&&(s[A]=e),--i||u(null,s))};if(!h||h({name:A,size:l,originalSize:f,compression:a}))if(a)if(8==a){var b=t.subarray(v,v+l);if(l<32e4)try{R(null,ue(b,new Et(f)))}catch(t){R(t,null)}else r.push(function(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&Wt(7),ne(t,e,[Jt],(function(t){return te(ue(t.data[0],ee(t.data[1])))}),1,n)}(b,{size:f},R))}else R(Wt(14,"unknown compression type "+a,1),null);else R(null,Xt(t,v,v+l));else R(null,null)},_=0;_<l;++_)A()}else u(null,{});return o}const Ae=5e3,_e={cache:{},loadings:{},defaults:[]};function ge(t){return bt(_e,t)}var ve=Object.freeze({__proto__:null,cache:function(t,e){return vt(_e,t,e)},current:ge,get:function(t){return ge(t)},keys:function(){return t=_e,Object.keys(t.cache);var t},loadAssetPack:async function(t,e){let n=await fetch(t),r=await n.arrayBuffer();await new Promise(((t,n)=>{he(new Uint8Array(r),((r,o)=>{if(r)n(r);else{for(let[t,n]of Object.entries(o))t=t.replaceAll("\\","/"),e(n,t);t()}}))}))},loadAssetPackAsRaw:async function(t,e){let n=await fetch(t),r=await n.arrayBuffer();await new Promise(((t,n)=>{he(new Uint8Array(r),((r,o)=>{if(r)n(r);else{for(let[t,n]of Object.entries(o)){t=t.replaceAll("\\","/");let r=t.indexOf("/");r>=0&&(t=t.substring(r+1));let o="raw://"+t;vt(_e,o,n),e&&e(n,o,t)}t()}}))}))},loadAssetRefs:async function(t,e=Ae){let n=[];for(let r of t)n.push(r.preload(_e,e));await Promise.allSettled(n)}});t.AssetManager=ve,t.AssetRef=class{constructor(t,e,n){this.uri=t,this.source=e,this.loader=n,this.store=null}get current(){return bt(this.store,this.uri)}set current(t){vt(this.store,this.uri,t)}get default(){return function(t,e){const{defaults:n}=t;for(let r of n)if(r.glob.test(e))return bt(t,r.uri);return null}(this.store,this.uri)}get loaded(){return Rt(this.store,this.uri)}async preload(t,e,n){return this.store=t,void 0!==n?vt(t,this.uri,n):await async function(t,e,n,r,o=gt){const{cache:s,loadings:u}=t;if(e in s)return s[e];let a;if(e in u){if(a=u[e],a.active)return u[e].promise}else a=new dt(o),u[e]=a;let i=[a.promise];return _t.test(n)?i.push(Rt(t,n,o).then((t=>r(t))).then((n=>vt(t,e,n)))):i.push(fetch(n).then((t=>t.arrayBuffer())).then((t=>r(t))).then((n=>vt(t,e,n)))),await Promise.race(i)}(this.store,this.uri,this.source,this.loader,e),this}async unload(){return function(t,e){const{cache:n,loadings:r}=t;e in r&&(r[e].reject(new Error("Stop loading to delete asset.")),delete r[e]),e in n&&delete n[e]}(this.store,this.uri),this.store=null,this}},t.GlobExp=At}));
//# sourceMappingURL=milque-asset.umd.js.map
