{"version":3,"file":"milque-util.umd.js","sources":["../src/Eventable.js","../src/Logger.js","../src/Downloader.js","../src/PriorityQueue.js","../src/MathHelper.js","../src/TopologicalSort.js","../src/AStar.js","../src/BitHelper.js","../src/Discrete.js","../src/Shuffle.js","../src/Uploader.js","../src/uuidv4.js"],"sourcesContent":["/**\n * @typedef Eventable\n * @property {function} on\n * @property {function} off\n * @property {function} once\n * @property {function} emit\n */\n\n/**\n * @version 1.3.0\n * @description\n * # Changelog\n * ## 1.3.0\n * - Return results for emit()\n * ## 1.2.0\n * - Added named exports\n * - Added custom this context\n * - Added some needed explanations for the functions\n * ## 1.1.0\n * - Started versioning\n */\nconst EventableInstance = {\n  /**\n   * Registers an event handler to continually listen for the event.\n   *\n   * @param {string} event The name of the event to listen for.\n   * @param {function} callback The callback function to handle the event.\n   * @param {*} [handle = callback] The handle to refer to this registered callback.\n   * Used by off() to remove handlers. If none specified, it will use the callback\n   * itself as the handle. This must be unique.\n   * @return {Eventable} Self for method-chaining.\n   */\n  on(event, callback, handle = callback) {\n    let callbacks;\n    if (!this.__events.has(event)) {\n      callbacks = new Map();\n      this.__events.set(event, callbacks);\n    } else {\n      callbacks = this.__events.get(event);\n    }\n\n    if (!callbacks.has(handle)) {\n      callbacks.set(handle, callback);\n    } else {\n      throw new Error(\n        `Found callback for event '${event}' with the same handle '${handle}'.`\n      );\n    }\n    return this;\n  },\n\n  /**\n   * Unregisters an event handler to stop listening for the event.\n   *\n   * @param {string} event The name of the event listened for.\n   * @param {*} handle The registered handle to refer to the registered\n   * callback. If no handle was provided when calling on(), the callback\n   * is used as the handle instead.\n   * @return {Eventable} Self for method-chaining.\n   */\n  off(event, handle) {\n    if (this.__events.has(event)) {\n      const callbacks = this.__events.get(event);\n      if (callbacks.has(handle)) {\n        callbacks.delete(handle);\n      } else {\n        throw new Error(\n          `Unable to find callback for event '${event}' with handle '${handle}'.`\n        );\n      }\n    } else {\n      throw new Error(`Unable to find event '${event}'.`);\n    }\n    return this;\n  },\n\n  /**\n   * Registers a one-off event handler to start listening for the next,\n   * and only the next, event.\n   *\n   * @param {string} event The name of the event to listen for.\n   * @param {function} callback The callback function to handle the event.\n   * @param {*} [handle = callback] The handle to refer to this registered callback.\n   * Used by off() to remove handlers. If none specified, it will use the callback\n   * itself as the handle. This must be unique.\n   * @return {Eventable} Self for method-chaining.\n   */\n  once(event, callback, handle = callback) {\n    const func = (...args) => {\n      this.off(event, handle);\n      callback.apply(this.__context || this, args);\n    };\n    return this.on(event, func, handle);\n  },\n\n  /**\n   * Emits the event with the arguments passed on to the registered handlers.\n   * The context of the handlers, if none were initially bound, could be\n   * defined upon calling the Eventable's creation function. Otherwise, the\n   * handler is called with `this` context of the Eventable instance.\n   *\n   * @param {string} event The name of the event to emit.\n   * @param  {...any} args Any arguments to pass to registered handlers.\n   * @return {Array<any>} Array of any returned values of the callbacks.\n   */\n  emit(event, ...args) {\n    if (this.__events.has(event)) {\n      let results = [];\n      const callbacks = Array.from(this.__events.get(event).values());\n      for (const callback of callbacks) {\n        let result = callback.apply(this.__context || this, args);\n        if (result) results.push(result);\n      }\n      return results;\n    } else {\n      this.__events.set(event, new Map());\n      return [];\n    }\n  },\n};\n\n/**\n * Creates an eventable object.\n *\n * @param {Object} [context] The context used for the event handlers.\n * @return {Eventable} The created eventable object.\n */\nfunction create(context = undefined) {\n  const result = Object.create(EventableInstance);\n  result.__events = new Map();\n  result.__context = context;\n  return result;\n}\n\n/**\n * Assigns the passed-in object with eventable properties.\n *\n * @param {Object} dst The object to assign with eventable properties.\n * @param {Object} [context] The context used for the event handlers.\n * @return {Eventable} The resultant eventable object.\n */\nfunction assign(dst, context = undefined) {\n  const result = Object.assign(dst, EventableInstance);\n  result.__events = new Map();\n  result.__context = context;\n  return result;\n}\n\n/**\n * Mixins eventable properties into the passed-in class.\n *\n * @param {Class} targetClass The class to mixin eventable properties.\n * @param {Object} [context] The context used for the event handlers.\n * @return {Class<Eventable>} The resultant eventable-mixed-in class.\n */\nfunction mixin(targetClass, context = undefined) {\n  const targetPrototype = targetClass.prototype;\n  Object.assign(targetPrototype, EventableInstance);\n  targetPrototype.__events = new Map();\n  targetPrototype.__context = context;\n  return targetPrototype;\n}\n\nexport const Eventable = {\n  create,\n  assign,\n  mixin,\n};\n","/* eslint-disable no-console */\n\n// Log levels\nconst TRACE = 5;\nconst DEBUG = 4;\nconst INFO = 3;\nconst WARN = 2;\nconst ERROR = 1;\nconst OFF = 0;\n\nconst LOG_LEVEL_STYLES = {\n  [TRACE]: styledLogLevel('#7F8C8D'), // Gray\n  [DEBUG]: styledLogLevel('#2ECC71'), // Green\n  [INFO]: styledLogLevel('#4794C8'), // Blue\n  [WARN]: styledLogLevel('#F39C12'), // Yellow\n  [ERROR]: styledLogLevel('#C0392B'), // Red\n  [OFF]: [''],\n};\n\nfunction compareLogLevel(a, b) {\n  return a - b;\n}\n\nfunction styledLogLevel(color) {\n  return [\n    `background: ${color}`,\n    'border-radius: 0.5em',\n    'color: white',\n    'font-weight: bold',\n    'padding: 2px 0.5em',\n  ];\n}\n\n// Useful functions\nfunction noop() {\n  /** Do nothing. */\n}\n\nfunction getStyledMessage(message, styles) {\n  return [`%c${message}`, styles.join(';')];\n}\n\nfunction getConsoleFunction(level) {\n  switch (level) {\n    case TRACE:\n      return console.trace;\n    case DEBUG:\n      return console.log;\n    case INFO:\n      return console.log;\n    case WARN:\n      return console.warn;\n    case ERROR:\n      return console.error;\n    case OFF:\n      return noop;\n    default:\n      return console.log;\n  }\n}\n\nfunction prependMessageTags(out, name, domain, level) {\n  if (name) {\n    out.unshift(`[${name}]`);\n  }\n\n  if (domain) {\n    let tag = getStyledMessage(domain, LOG_LEVEL_STYLES[level]);\n    out.unshift(tag[0], tag[1]);\n  }\n\n  return out;\n}\n\nconst LEVEL = Symbol('level');\nconst DOMAIN = Symbol('domain');\nconst LOGGERS = {\n  /** To be populated by logger instances. */\n};\nlet DEFAULT_LEVEL = WARN;\nlet DEFAULT_DOMAIN = 'app';\nexport class Logger {\n  static get TRACE() {\n    return TRACE;\n  }\n  static get DEBUG() {\n    return DEBUG;\n  }\n  static get INFO() {\n    return INFO;\n  }\n  static get WARN() {\n    return WARN;\n  }\n  static get ERROR() {\n    return ERROR;\n  }\n  static get OFF() {\n    return OFF;\n  }\n\n  /**\n   * Creates or gets the logger for the given unique name.\n   * @param {String} name\n   * @returns {Logger} The logger with the name.\n   */\n  static getLogger(name) {\n    if (name in LOGGERS) {\n      return LOGGERS[name];\n    } else {\n      return (LOGGERS[name] = new Logger(name));\n    }\n  }\n\n  static useDefaultLevel(level) {\n    DEFAULT_LEVEL = level;\n    return this;\n  }\n\n  static useDefaultDomain(domain) {\n    DEFAULT_DOMAIN = domain;\n    return this;\n  }\n\n  constructor(name) {\n    this.name = name;\n    this[LEVEL] = DEFAULT_LEVEL;\n    this[DOMAIN] = DEFAULT_DOMAIN;\n  }\n\n  setLevel(level) {\n    this[LEVEL] = level;\n    return this;\n  }\n\n  getLevel() {\n    return this[LEVEL];\n  }\n\n  setDomain(domain) {\n    this[DOMAIN] = domain;\n    return this;\n  }\n\n  getDomain() {\n    return this[DOMAIN];\n  }\n\n  log(level, ...messages) {\n    if (compareLogLevel(this[LEVEL], level) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], level);\n    getConsoleFunction(level)(...messages);\n  }\n\n  trace(...messages) {\n    if (compareLogLevel(this[LEVEL], TRACE) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], TRACE);\n    getConsoleFunction(TRACE)(...messages);\n  }\n\n  debug(...messages) {\n    if (compareLogLevel(this[LEVEL], DEBUG) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], DEBUG);\n    getConsoleFunction(DEBUG)(...messages);\n  }\n\n  info(...messages) {\n    if (compareLogLevel(this[LEVEL], INFO) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], INFO);\n    getConsoleFunction(INFO)(...messages);\n  }\n\n  warn(...messages) {\n    if (compareLogLevel(this[LEVEL], WARN) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], WARN);\n    getConsoleFunction(WARN)(...messages);\n  }\n\n  error(...messages) {\n    if (compareLogLevel(this[LEVEL], ERROR) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], ERROR);\n    getConsoleFunction(ERROR)(...messages);\n  }\n}\n","export const FILE_TYPE_PNG = 'png';\nexport const FILE_TYPE_SVG = 'svg';\n\nexport function downloadText(filename, textData) {\n  downloadURL(filename, getTextDataURI(textData));\n}\n\nexport function downloadImageFromSVG(filename, filetype, svg, width, height) {\n  const blob = createBlobFromSVG(svg);\n  switch (filetype) {\n    case FILE_TYPE_PNG:\n      {\n        const url = URL.createObjectURL(blob);\n\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const pixelRatio = window.devicePixelRatio || 1;\n        canvas.width = width * pixelRatio;\n        canvas.height = height * pixelRatio;\n        canvas.style.width = width + 'px';\n        canvas.style.height = height + 'px';\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n        const image = new Image();\n        image.onload = () => {\n          ctx.drawImage(image, 0, 0);\n          URL.revokeObjectURL(url);\n\n          const imageURI = canvas\n            .toDataURL('image/' + filetype)\n            .replace('image/' + filetype, 'image/octet-stream');\n          downloadURL(filename, imageURI);\n        };\n        image.src = url;\n      }\n      break;\n    case FILE_TYPE_SVG:\n      {\n        const reader = new FileReader();\n        reader.onload = () => {\n          downloadURL(filename, reader.result);\n        };\n        reader.readAsDataURL(blob);\n      }\n      break;\n    default:\n      throw new Error(\"Unknown file type '\" + filetype + \"'\");\n  }\n}\n\nexport function downloadURL(filename, url) {\n  const element = document.createElement('a');\n  const headerIndex = url.indexOf(';');\n  url =\n    url.substring(0, headerIndex + 1) +\n    'headers=Content-Disposition%3A%20attachment%3B%20filename=' +\n    filename +\n    ';' +\n    url.substring(headerIndex + 1);\n  element.setAttribute('href', url);\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n  document.body.removeChild(element);\n}\n\nfunction createBlobFromSVG(svg) {\n  const styledSVG = computeSVGStyles(svg);\n  const serializer = new XMLSerializer();\n  const svgString = serializer.serializeToString(styledSVG);\n  const blob = new Blob([svgString], { type: 'image/svg+xml' });\n  return blob;\n}\n\n// SOURCE: https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser/44769098#44769098\nconst SVG_CONTAINERS = ['svg', 'g'];\nfunction computeSVGStyles(svg, dst = svg.cloneNode(true)) {\n  let sourceChildren = svg.childNodes;\n  let children = dst.childNodes;\n\n  for (var index = 0; index < children.length; index++) {\n    let child = children[index];\n    let tagName = child.tagName;\n    if (SVG_CONTAINERS.indexOf(tagName) != -1) {\n      computeSVGStyles(sourceChildren[index], child);\n    } else if (sourceChildren[index] instanceof Element) {\n      const computedStyle = window.getComputedStyle(sourceChildren[index]);\n\n      let styleAttributes = [];\n      for (let styleName of Object.keys(computedStyle)) {\n        styleAttributes.push(\n          `${styleName}:${computedStyle.getPropertyValue(styleName)};`\n        );\n      }\n\n      child.setAttribute('style', styleAttributes.join(''));\n    }\n  }\n\n  return dst;\n}\n\nfunction getTextDataURI(data) {\n  return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n}\n","const TOP_INDEX = 0;\n\n// NOTE: Uses a binary heap to sort.\n/**\n * @template T\n */\nexport class PriorityQueue {\n  /**\n   * @param {(a: T, b: T) => number} comparator \n   */\n  constructor(comparator) {\n    /** @private */\n    this._heap = [];\n    /** @private */\n    this._comparator = comparator;\n  }\n\n  get size() {\n    return this._heap.length;\n  }\n\n  clear() {\n    this._heap.length = 0;\n  }\n\n  /**\n   * @param {...T} values\n   */\n  push(...values) {\n    for (let value of values) {\n      this._heap.push(value);\n      this._shiftUp();\n    }\n  }\n\n  /**\n   * @returns {T}\n   */\n  pop() {\n    const result = this.peek();\n    let bottom = bottomIndex(this);\n    if (bottom > TOP_INDEX) {\n      this._swap(TOP_INDEX, bottom);\n    }\n    this._heap.pop();\n    this._shiftDown();\n    return result;\n  }\n\n  /**\n   * Replaces the top value with the new value.\n   * @param {T} value\n   * @returns {T}\n   */\n  replace(value) {\n    const result = this.peek();\n    this._heap[TOP_INDEX] = value;\n    this._shiftDown();\n    return result;\n  }\n\n  /**\n   * @returns {T}\n   */\n  peek() {\n    return this._heap[TOP_INDEX];\n  }\n\n  /**\n   * @param {number} index\n   * @returns {T}\n   */\n  at(index) {\n    return this._heap[index];\n  }\n\n  /**\n   * @param {T} value \n   * @param {number} [fromIndex]\n   */\n  indexOf(value, fromIndex = undefined) {\n    return this._heap.indexOf(value, fromIndex);\n  }\n\n  /**\n   * @param {number} start \n   * @param {number} [deleteCount]\n   * @returns {Array<T>}\n   */\n  splice(start, deleteCount = undefined) {\n    return this._heap.splice(start, deleteCount);\n  }\n\n  /** @private */\n  _compare(i, j) {\n    return this._comparator(this._heap[i], this._heap[j]);\n  }\n\n  /** @private */\n  _swap(i, j) {\n    let result = this._heap[i];\n    this._heap[i] = this._heap[j];\n    this._heap[j] = result;\n  }\n\n  /** @private */\n  _shiftUp() {\n    let node = this._heap.length - 1;\n    let nodeParent;\n    while (\n      node > TOP_INDEX &&\n      this._compare(node, (nodeParent = parentIndex(node)))\n    ) {\n      this._swap(node, nodeParent);\n      node = nodeParent;\n    }\n  }\n\n  /** @private */\n  _shiftDown() {\n    const length = this._heap.length;\n    let node = TOP_INDEX;\n    let nodeMax;\n\n    let nodeLeft = leftIndex(node);\n    let flagLeft = nodeLeft < length;\n    let nodeRight = rightIndex(node);\n    let flagRight = nodeRight < length;\n\n    while (\n      (flagLeft && this._compare(nodeLeft, node)) ||\n      (flagRight && this._compare(nodeRight, node))\n    ) {\n      nodeMax =\n        flagRight && this._compare(nodeRight, nodeLeft) ? nodeRight : nodeLeft;\n      this._swap(node, nodeMax);\n      node = nodeMax;\n\n      nodeLeft = leftIndex(node);\n      flagLeft = nodeLeft < length;\n      nodeRight = rightIndex(node);\n      flagRight = nodeRight < length;\n    }\n  }\n\n  /** @returns {Array<T>} */\n  values() {\n    return this._heap;\n  }\n\n  /** @returns {Iterator<T>} */\n  [Symbol.iterator]() {\n    return this._heap[Symbol.iterator]();\n  }\n}\n\nfunction bottomIndex(queue) {\n  return queue._heap.length - 1;\n}\n\nfunction parentIndex(i) {\n  return ((i + 1) >>> 1) - 1;\n}\n\nfunction leftIndex(i) {\n  return (i << 1) + 1;\n}\n\nfunction rightIndex(i) {\n  return (i + 1) << 1;\n}\n","export function lerp(a, b, t) {\n  return a + (b - a) * t;\n}\n\nexport function clamp(value, min, max) {\n  return Math.min(max, Math.max(min, value));\n}\n\nexport function cycle(value, min, max) {\n  let range = max - min;\n  let result = (value - min) % range;\n  if (result < 0) result += range;\n  return result + min;\n}\n\nexport function withinRadius(fromX, fromY, toX, toY, radius) {\n  const dx = fromX - toX;\n  const dy = fromY - toY;\n  return dx * dx + dy * dy <= radius * radius;\n}\n\nexport function distance2(fromX, fromY, toX, toY) {\n  let dx = toX - fromX;\n  let dy = toY - fromY;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function direction2(fromX, fromY, toX, toY) {\n  let dx = toX - fromX;\n  let dy = toY - fromY;\n  return Math.atan2(dy, dx);\n}\n\nexport function lookAt2(radians, target, dt) {\n  let step = cycle(target - radians, -Math.PI, Math.PI);\n  return clamp(radians + step, radians - dt, radians + dt);\n}\n\nconst TO_RAD_FACTOR = Math.PI / 180;\nconst TO_DEG_FACTOR = 180 / Math.PI;\nexport function toRadians(degrees) {\n  return degrees * TO_RAD_FACTOR;\n}\n\nexport function toDegrees(radians) {\n  return radians * TO_DEG_FACTOR;\n}\n","/**\n * @callback DependencyCallback\n * @param {Object} node The target node to get the dependencies for.\n * @returns {Array<Object>} A list of all dependencies for the given node.\n */\n\n/**\n * Sort an array topologically.\n *\n * @param {Array<Object>} nodes List of all nodes (as long as it includes the root node).\n * @param {DependencyCallback} dependencyCallback A callback to get the dependencies of a node.\n * @returns {Array<Object>} A sorted array of node objects where the dependent nodes are always listed before the dependees.\n */\nexport function topoSort(nodes, dependencyCallback) {\n  let dependencyEntries = [];\n  for (let node of nodes) {\n    let outs = dependencyCallback(node);\n    if (Array.isArray(outs)) {\n      dependencyEntries.push([node, ...outs]);\n    } else if (outs) {\n      throw new Error('Dependency callback must return an array.');\n    }\n  }\n  return computeDependencyList(\n    getNodesFromDependencyEntries(dependencyEntries),\n    getEdgesFromDependencyEntries(dependencyEntries)\n  );\n}\n\nfunction getNodesFromDependencyEntries(dependencyEntries) {\n  let result = new Set();\n  for (let dependencyEntry of dependencyEntries) {\n    for (let value of dependencyEntry) {\n      result.add(value);\n    }\n  }\n  return Array.from(result);\n}\n\nfunction getEdgesFromDependencyEntries(dependencyEntries) {\n  let result = [];\n  for (let dependencyEntry of dependencyEntries) {\n    let source = dependencyEntry[0];\n    for (let i = 1; i < dependencyEntry.length; ++i) {\n      let dependency = dependencyEntry[i];\n      result.push([source, dependency]);\n    }\n  }\n  return result;\n}\n\nfunction computeDependencyList(nodes, edges, dst = []) {\n  // Compute edge outs (more efficient lookup)\n  let edgeOuts = new Map();\n  for (let edge of edges) {\n    if (edge.length > 1) {\n      let source = edge[0];\n      let dest = edge[1];\n      if (!edgeOuts.has(source)) edgeOuts.set(source, new Set());\n      if (!edgeOuts.has(dest)) edgeOuts.set(dest, new Set());\n      edgeOuts.get(source).add(dest);\n    }\n  }\n\n  let context = {\n    edgeMap: edgeOuts,\n    index: nodes.length,\n    visited: new Set(),\n    dst,\n  };\n\n  for (let node of nodes) {\n    visit(context, node, new Set());\n  }\n\n  return dst;\n}\n\nfunction visit(context, node, prev) {\n  if (prev.has(node)) {\n    throw new Error(`Found cyclic dependency for '${node.name || node}'.`);\n  }\n\n  if (context.visited.has(node)) return;\n  context.visited.add(node);\n\n  if (context.edgeMap.has(node)) {\n    let outs = context.edgeMap.get(node);\n    if (outs.size > 0) {\n      prev.add(node);\n      for (let out of outs) {\n        visit(context, out, prev);\n      }\n      prev.delete(node);\n    }\n  }\n\n  context.dst.push(node);\n}\n","/**\n * @template T\n * @typedef NodeCache<T>\n * @property {Record<T, number>} fscore\n * @property {Record<T, number>} gscore\n * @property {Record<T, number>} hscore\n * @property {Record<T, T>} parents\n */\n\n/**\n * @template T\n * @param {T} startId The unique representation of the starting position. Must be deterministic.\n * @param {T} goalId The unique representation of the stopping position. Must be deterministic.\n * @param {(node: T) => Array<T>} neighborsCallback Get all reachable neighbors from the given node.\n * @param {(from: T, to: T) => number} heuristicCallback Get the heuristics score between the two nodes.\n * @returns {Array<T>} If the goal is not reachable from the start, it will return an empty array.\n */\nexport function astarSearch(\n  startId,\n  goalId,\n  neighborsCallback,\n  heuristicCallback\n) {\n  /** @type {NodeCache<T>} */\n  let cache = createCache();\n  cacheNode(cache, startId);\n  let opened = new Set();\n  let closed = new Set();\n  opened.add(startId);\n  while (opened.size > 0) {\n    let minNodeId;\n    for (let openNodeId of opened) {\n      if (minNodeId) {\n        if (cache.fscore[openNodeId] < cache.fscore[minNodeId]) {\n          minNodeId = openNodeId;\n        }\n      } else {\n        minNodeId = openNodeId;\n      }\n    }\n\n    let currentNodeId = minNodeId;\n    if (currentNodeId === goalId) {\n      // Completed!\n      let result = [];\n      while (cache.parents[currentNodeId]) {\n        result.push(currentNodeId);\n        currentNodeId = cache.parents[currentNodeId];\n      }\n      result.push(currentNodeId);\n      return result.reverse();\n    } else {\n      // Not there yet...\n      closed.add(currentNodeId);\n      opened.delete(currentNodeId);\n      for (let neighborNodeId of neighborsCallback(currentNodeId)) {\n        if (closed.has(neighborNodeId)) continue;\n        let g = cache.gscore[currentNodeId] + 1;\n        let flag = false;\n        if (!opened.has(neighborNodeId)) {\n          flag = true;\n          cacheNode(cache, neighborNodeId);\n          cache.hscore[neighborNodeId] = heuristicCallback(\n            neighborNodeId,\n            goalId\n          );\n          opened.add(neighborNodeId);\n        } else if (g < cache.gscore[neighborNodeId]) {\n          flag = true;\n        }\n        // Use the new g score if better\n        if (flag) {\n          cache.parents[neighborNodeId] = currentNodeId;\n          cache.gscore[neighborNodeId] = g;\n          cache.fscore[neighborNodeId] = g + cache.hscore[neighborNodeId];\n        }\n      }\n    }\n  }\n  return [];\n}\n\n/**\n * @template T\n * @returns {NodeCache<T>}\n */\nfunction createCache() {\n  return {\n    fscore: {},\n    gscore: {},\n    hscore: {},\n    parents: {},\n  };\n}\n\n/**\n * @template T\n * @param {NodeCache<T>} cache\n * @param {T} id\n * @param {number} f\n * @param {number} g\n * @param {number} h\n * @param {T} parent\n * @returns {T}\n */\nfunction cacheNode(\n  cache,\n  id,\n  f = Number.POSITIVE_INFINITY,\n  g = Number.POSITIVE_INFINITY,\n  h = Number.NaN,\n  parent = null\n) {\n  cache.fscore[id] = f;\n  cache.gscore[id] = g;\n  cache.hscore[id] = h;\n  cache.parents[id] = parent;\n  return id;\n}\n","export function bitCount(n) {\n  n = n - ((n >> 1) & 0x55555555);\n  n = (n & 0x33333333) + ((n >> 2) & 0x33333333);\n  return (((n + (n >> 4)) & 0xf0f0f0f) * 0x1010101) >> 24;\n}\n","// Bresenham's Line Algorithm\nexport function bresenhamLine(fromX, fromY, toX, toY, callback) {\n  let fx = Math.floor(fromX);\n  let fy = Math.floor(fromY);\n  let tx = Math.floor(toX);\n  let ty = Math.floor(toY);\n\n  let dx = Math.abs(toX - fromX);\n  let sx = fromX < toX ? 1 : -1;\n  let dy = -Math.abs(toY - fromY);\n  let sy = fromY < toY ? 1 : -1;\n  let er = dx + dy;\n\n  let x = fx;\n  let y = fy;\n  let flag = callback(x, y);\n  if (typeof flag !== 'undefined') return flag;\n\n  let maxLength = dx * dx + dy * dy;\n  let length = 0;\n  while (length < maxLength && (x !== tx || y !== ty)) {\n    // Make sure it doesn't go overboard.\n    ++length;\n\n    let er2 = er * 2;\n\n    if (er2 >= dy) {\n      er += dy;\n      x += sx;\n    }\n\n    if (er2 <= dx) {\n      er += dx;\n      y += sy;\n    }\n\n    flag = callback(x, y);\n    if (typeof flag !== 'undefined') return flag;\n  }\n}\n","export function fisherYatesShuffle(array) {\n  for (let i = array.length - 1; i > 0; --i) {\n    let j = Math.floor(Math.random() * (i + 1));\n    let temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n}\n","export async function uploadFile(accept = [], multiple = false) {\n  return new Promise((resolve, reject) => {\n    const element = document.createElement('input');\n    element.addEventListener('change', (e) => {\n      if (multiple) {\n        resolve(e.target.files);\n      } else {\n        resolve(e.target.files[0]);\n      }\n    });\n    element.type = 'file';\n    element.accept = accept.join(',');\n    element.style.display = 'none';\n    element.toggleAttribute('multiple', multiple);\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  });\n}\n","/**\n * Generates a uuid v4.\n *\n * @param {number} a The placeholder (serves for recursion within function).\n * @returns {string} The universally unique id.\n */\nexport function uuid(a = undefined) {\n  // https://gist.github.com/jed/982883\n  return a\n    ? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n"],"names":["EventableInstance","on","event","callback","handle","callbacks","this","__events","has","get","Map","set","Error","off","delete","once","args","apply","__context","emit","results","Array","from","values","result","push","Eventable","create","context","Object","assign","dst","mixin","targetClass","targetPrototype","prototype","TRACE","DEBUG","INFO","WARN","ERROR","OFF","LOG_LEVEL_STYLES","styledLogLevel","compareLogLevel","a","b","color","noop","getConsoleFunction","level","console","trace","log","warn","error","prependMessageTags","out","name","domain","unshift","tag","message","styles","join","LEVEL","Symbol","DOMAIN","LOGGERS","DEFAULT_LEVEL","DEFAULT_DOMAIN","Logger","static","constructor","setLevel","getLevel","setDomain","getDomain","messages","debug","info","FILE_TYPE_PNG","FILE_TYPE_SVG","downloadURL","filename","url","element","document","createElement","headerIndex","indexOf","substring","setAttribute","style","display","body","appendChild","click","removeChild","SVG_CONTAINERS","computeSVGStyles","svg","cloneNode","sourceChildren","childNodes","children","index","length","child","tagName","Element","computedStyle","window","getComputedStyle","styleAttributes","styleName","keys","getPropertyValue","PriorityQueue","comparator","_heap","_comparator","size","clear","value","_shiftUp","pop","peek","bottom","_swap","_shiftDown","replace","at","fromIndex","splice","start","deleteCount","_compare","i","j","nodeParent","node","nodeMax","nodeLeft","leftIndex","flagLeft","nodeRight","rightIndex","flagRight","iterator","clamp","min","max","Math","cycle","range","TO_RAD_FACTOR","PI","TO_DEG_FACTOR","visit","prev","visited","add","edgeMap","outs","cacheNode","cache","id","f","Number","POSITIVE_INFINITY","g","h","NaN","parent","fscore","gscore","hscore","parents","startId","goalId","neighborsCallback","heuristicCallback","opened","Set","closed","minNodeId","openNodeId","currentNodeId","reverse","neighborNodeId","flag","n","fromX","fromY","toX","toY","fx","floor","fy","tx","ty","dx","abs","sx","dy","sy","er","x","y","maxLength","er2","atan2","sqrt","filetype","width","height","blob","styledSVG","svgString","XMLSerializer","serializeToString","Blob","type","createBlobFromSVG","URL","createObjectURL","canvas","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageURI","toDataURL","src","reader","FileReader","readAsDataURL","textData","encodeURIComponent","array","random","temp","t","radians","target","dt","degrees","nodes","dependencyCallback","dependencyEntries","isArray","edges","edgeOuts","edge","source","dest","computeDependencyList","dependencyEntry","getNodesFromDependencyEntries","dependency","getEdgesFromDependencyEntries","async","accept","multiple","Promise","resolve","reject","addEventListener","e","files","toggleAttribute","uuid","toString","radius"],"mappings":"2QAqBA,MAAMA,EAAoB,CAWxBC,GAAGC,EAAOC,EAAUC,EAASD,GAC3B,IAAIE,EAQJ,GAPKC,KAAKC,SAASC,IAAIN,GAIrBG,EAAYC,KAAKC,SAASE,IAAIP,IAH9BG,EAAY,IAAIK,IAChBJ,KAAKC,SAASI,IAAIT,EAAOG,IAKtBA,EAAUG,IAAIJ,GAGjB,MAAM,IAAIQ,MACR,6BAA6BV,4BAAgCE,OAGjE,OANEC,EAAUM,IAAIP,EAAQD,GAMjBG,IACR,EAWDO,IAAIX,EAAOE,GACT,IAAIE,KAAKC,SAASC,IAAIN,GAUpB,MAAM,IAAIU,MAAM,yBAAyBV,OAVb,CAC5B,MAAMG,EAAYC,KAAKC,SAASE,IAAIP,GACpC,IAAIG,EAAUG,IAAIJ,GAGhB,MAAM,IAAIQ,MACR,sCAAsCV,mBAAuBE,OAH/DC,EAAUS,OAAOV,EAMzB,CAGI,OAAOE,IACR,EAaDS,KAAKb,EAAOC,EAAUC,EAASD,GAK7B,OAAOG,KAAKL,GAAGC,GAJF,IAAIc,KACfV,KAAKO,IAAIX,EAAOE,GAChBD,EAASc,MAAMX,KAAKY,WAAaZ,KAAMU,EAAK,GAElBZ,EAC7B,EAYDe,KAAKjB,KAAUc,GACb,GAAIV,KAAKC,SAASC,IAAIN,GAAQ,CAC5B,IAAIkB,EAAU,GACd,MAAMf,EAAYgB,MAAMC,KAAKhB,KAAKC,SAASE,IAAIP,GAAOqB,UACtD,IAAK,MAAMpB,KAAYE,EAAW,CAChC,IAAImB,EAASrB,EAASc,MAAMX,KAAKY,WAAaZ,KAAMU,GAChDQ,GAAQJ,EAAQK,KAAKD,EAC1B,CACD,OAAOJ,CACb,CAEM,OADAd,KAAKC,SAASI,IAAIT,EAAO,IAAIQ,KACtB,EAEV,GA6CS,MAACgB,EAAY,CACvBC,OArCF,SAAgBC,GACd,MAAMJ,EAASK,OAAOF,OAAO3B,GAG7B,OAFAwB,EAAOjB,SAAW,IAAIG,IACtBc,EAAON,UAAYU,EACZJ,CACT,EAiCEM,OAxBF,SAAgBC,EAAKH,GACnB,MAAMJ,EAASK,OAAOC,OAAOC,EAAK/B,GAGlC,OAFAwB,EAAOjB,SAAW,IAAIG,IACtBc,EAAON,UAAYU,EACZJ,CACT,EAoBEQ,MAXF,SAAeC,EAAaL,GAC1B,MAAMM,EAAkBD,EAAYE,UAIpC,OAHAN,OAAOC,OAAOI,EAAiBlC,GAC/BkC,EAAgB3B,SAAW,IAAIG,IAC/BwB,EAAgBhB,UAAYU,EACrBM,CACT,GC9JME,EAAQ,EACRC,EAAQ,EACRC,EAAO,EACPC,EAAO,EACPC,EAAQ,EACRC,EAAM,EAENC,EAAmB,CACvBN,CAACA,GAAQO,EAAe,WACxBN,CAACA,GAAQM,EAAe,WACxBL,CAACA,GAAOK,EAAe,WACvBJ,CAACA,GAAOI,EAAe,WACvBH,CAACA,GAAQG,EAAe,WACxBF,CAACA,GAAM,CAAC,KAGV,SAASG,EAAgBC,EAAGC,GAC1B,OAAOD,EAAIC,CACb,CAEA,SAASH,EAAeI,GACtB,MAAO,CACL,eAAeA,IACf,uBACA,eACA,oBACA,qBAEJ,CAGA,SAASC,IAET,CAMA,SAASC,EAAmBC,GAC1B,OAAQA,GACN,KAAKd,EACH,OAAOe,QAAQC,MACjB,KAAKf,EAEL,KAAKC,EACH,OAAOa,QAAQE,IACjB,KAAKd,EACH,OAAOY,QAAQG,KACjB,KAAKd,EACH,OAAOW,QAAQI,MACjB,KAAKd,EACH,OAAOO,EACT,QACE,OAAOG,QAAQE,IAErB,CAEA,SAASG,EAAmBC,EAAKC,EAAMC,EAAQT,GAK7C,GAJIQ,GACFD,EAAIG,QAAQ,IAAIF,MAGdC,EAAQ,CACV,IAAIE,GA7BkBC,EA6BKH,EA7BII,EA6BIrB,EAAiBQ,GA5B/C,CAAC,KAAKY,IAAWC,EAAOC,KAAK,OA6BlCP,EAAIG,QAAQC,EAAI,GAAIA,EAAI,GACzB,CA/BH,IAA0BC,EAASC,EAiCjC,OAAON,CACT,CAEA,MAAMQ,EAAQC,OAAO,SACfC,EAASD,OAAO,UAChBE,EAAU,CAEhB,EACA,IAAIC,EAAgB9B,EAChB+B,EAAiB,MACd,MAAMC,EACAnC,mBACT,OAAOA,CACR,CACUC,mBACT,OAAOA,CACR,CACUC,kBACT,OAAOA,CACR,CACUC,kBACT,OAAOA,CACR,CACUC,mBACT,OAAOA,CACR,CACUC,iBACT,OAAOA,CACR,CAOD+B,iBAAiBd,GACf,OAAIA,KAAQU,EACHA,EAAQV,GAEPU,EAAQV,GAAQ,IAAIa,EAAOb,EAEtC,CAEDc,uBAAuBtB,GAErB,OADAmB,EAAgBnB,EACT5C,IACR,CAEDkE,wBAAwBb,GAEtB,OADAW,EAAiBX,EACVrD,IACR,CAEDmE,YAAYf,GACVpD,KAAKoD,KAAOA,EACZpD,KAAK2D,GAASI,EACd/D,KAAK6D,GAAUG,CAChB,CAEDI,SAASxB,GAEP,OADA5C,KAAK2D,GAASf,EACP5C,IACR,CAEDqE,WACE,OAAOrE,KAAK2D,EACb,CAEDW,UAAUjB,GAER,OADArD,KAAK6D,GAAUR,EACRrD,IACR,CAEDuE,YACE,OAAOvE,KAAK6D,EACb,CAEDd,IAAIH,KAAU4B,GACZ,GAAIlC,EAAgBtC,KAAK2D,GAAQf,GAAS,EAAG,OAAO5C,KACpDkD,EAAmBsB,EAAUxE,KAAKoD,KAAMpD,KAAK6D,GAASjB,GACtDD,EAAmBC,EAAnBD,IAA6B6B,EAC9B,CAED1B,SAAS0B,GACP,GAAIlC,EAAgBtC,KAAK2D,GAAQ7B,GAAS,EAAG,OAAO9B,KACpDkD,EAAmBsB,EAAUxE,KAAKoD,KAAMpD,KAAK6D,GAAS/B,GACtDa,EAAmBb,EAAnBa,IAA6B6B,EAC9B,CAEDC,SAASD,GACP,GAAIlC,EAAgBtC,KAAK2D,GAAQ5B,GAAS,EAAG,OAAO/B,KACpDkD,EAAmBsB,EAAUxE,KAAKoD,KAAMpD,KAAK6D,GAAS9B,GACtDY,EAAmBZ,EAAnBY,IAA6B6B,EAC9B,CAEDE,QAAQF,GACN,GAAIlC,EAAgBtC,KAAK2D,GAAQ3B,GAAQ,EAAG,OAAOhC,KACnDkD,EAAmBsB,EAAUxE,KAAKoD,KAAMpD,KAAK6D,GAAS7B,GACtDW,EAAmBX,EAAnBW,IAA4B6B,EAC7B,CAEDxB,QAAQwB,GACN,GAAIlC,EAAgBtC,KAAK2D,GAAQ1B,GAAQ,EAAG,OAAOjC,KACnDkD,EAAmBsB,EAAUxE,KAAKoD,KAAMpD,KAAK6D,GAAS5B,GACtDU,EAAmBV,EAAnBU,IAA4B6B,EAC7B,CAEDvB,SAASuB,GACP,GAAIlC,EAAgBtC,KAAK2D,GAAQzB,GAAS,EAAG,OAAOlC,KACpDkD,EAAmBsB,EAAUxE,KAAKoD,KAAMpD,KAAK6D,GAAS3B,GACtDS,EAAmBT,EAAnBS,IAA6B6B,EAC9B,ECtLU,MAAAG,EAAgB,MAChBC,EAAgB,MAiDtB,SAASC,EAAYC,EAAUC,GACpC,MAAMC,EAAUC,SAASC,cAAc,KACjCC,EAAcJ,EAAIK,QAAQ,KAChCL,EACEA,EAAIM,UAAU,EAAGF,EAAc,GAC/B,6DACAL,EACA,IACAC,EAAIM,UAAUF,EAAc,GAC9BH,EAAQM,aAAa,OAAQP,GAC7BC,EAAQM,aAAa,WAAYR,GAEjCE,EAAQO,MAAMC,QAAU,OACxBP,SAASQ,KAAKC,YAAYV,GAE1BA,EAAQW,QACRV,SAASQ,KAAKG,YAAYZ,EAC5B,CAWA,MAAMa,EAAiB,CAAC,MAAO,KAC/B,SAASC,EAAiBC,EAAKtE,EAAMsE,EAAIC,WAAU,IACjD,IAAIC,EAAiBF,EAAIG,WACrBC,EAAW1E,EAAIyE,WAEnB,IAAK,IAAIE,EAAQ,EAAGA,EAAQD,EAASE,OAAQD,IAAS,CACpD,IAAIE,EAAQH,EAASC,GACjBG,EAAUD,EAAMC,QACpB,IAAwC,GAApCV,EAAeT,QAAQmB,GACzBT,EAAiBG,EAAeG,GAAQE,QACnC,GAAIL,EAAeG,aAAkBI,QAAS,CACnD,MAAMC,EAAgBC,OAAOC,iBAAiBV,EAAeG,IAE7D,IAAIQ,EAAkB,GACtB,IAAK,IAAIC,KAAatF,OAAOuF,KAAKL,GAChCG,EAAgBzF,KACd,GAAG0F,KAAaJ,EAAcM,iBAAiBF,OAInDP,EAAMhB,aAAa,QAASsB,EAAgBlD,KAAK,IAClD,CACF,CAED,OAAOjC,CACT,CCjGO,MAAMuF,EAIX7C,YAAY8C,GAEVjH,KAAKkH,MAAQ,GAEblH,KAAKmH,YAAcF,CACpB,CAEGG,WACF,OAAOpH,KAAKkH,MAAMb,MACnB,CAEDgB,QACErH,KAAKkH,MAAMb,OAAS,CACrB,CAKDlF,QAAQF,GACN,IAAK,IAAIqG,KAASrG,EAChBjB,KAAKkH,MAAM/F,KAAKmG,GAChBtH,KAAKuH,UAER,CAKDC,MACE,MAAMtG,EAASlB,KAAKyH,OACpB,IAAIC,EAAqB1H,KAqHdkH,MAAMb,OAAS,EA/G1B,OALIqB,EAzCU,GA0CZ1H,KAAK2H,MA1CO,EA0CUD,GAExB1H,KAAKkH,MAAMM,MACXxH,KAAK4H,aACE1G,CACR,CAOD2G,QAAQP,GACN,MAAMpG,EAASlB,KAAKyH,OAGpB,OAFAzH,KAAKkH,MAxDS,GAwDUI,EACxBtH,KAAK4H,aACE1G,CACR,CAKDuG,OACE,OAAOzH,KAAKkH,MAjEE,EAkEf,CAMDY,GAAG1B,GACD,OAAOpG,KAAKkH,MAAMd,EACnB,CAMDhB,QAAQkC,EAAOS,GACb,OAAO/H,KAAKkH,MAAM9B,QAAQkC,EAAOS,EAClC,CAODC,OAAOC,EAAOC,GACZ,OAAOlI,KAAKkH,MAAMc,OAAOC,EAAOC,EACjC,CAGDC,SAASC,EAAGC,GACV,OAAOrI,KAAKmH,YAAYnH,KAAKkH,MAAMkB,GAAIpI,KAAKkH,MAAMmB,GACnD,CAGDV,MAAMS,EAAGC,GACP,IAAInH,EAASlB,KAAKkH,MAAMkB,GACxBpI,KAAKkH,MAAMkB,GAAKpI,KAAKkH,MAAMmB,GAC3BrI,KAAKkH,MAAMmB,GAAKnH,CACjB,CAGDqG,WACE,IACIe,EADAC,EAAOvI,KAAKkH,MAAMb,OAAS,EAE/B,KACEkC,EA9GY,GA+GZvI,KAAKmI,SAASI,EAAOD,GAAyBC,EAkDrC,IAAO,GAAK,IAhDrBvI,KAAK2H,MAAMY,EAAMD,GACjBC,EAAOD,CAEV,CAGDV,aACE,MAAMvB,EAASrG,KAAKkH,MAAMb,OAC1B,IACImC,EADAD,EAzHU,EA4HVE,EAAWC,EAAUH,GACrBI,EAAWF,EAAWpC,EACtBuC,EAAYC,EAAWN,GACvBO,EAAYF,EAAYvC,EAE5B,KACGsC,GAAY3I,KAAKmI,SAASM,EAAUF,IACpCO,GAAa9I,KAAKmI,SAASS,EAAWL,IAEvCC,EACEM,GAAa9I,KAAKmI,SAASS,EAAWH,GAAYG,EAAYH,EAChEzI,KAAK2H,MAAMY,EAAMC,GACjBD,EAAOC,EAEPC,EAAWC,EAAUH,GACrBI,EAAWF,EAAWpC,EACtBuC,EAAYC,EAAWN,GACvBO,EAAYF,EAAYvC,CAE3B,CAGDpF,SACE,OAAOjB,KAAKkH,KACb,CAGD,CAACtD,OAAOmF,YACN,OAAO/I,KAAKkH,MAAMtD,OAAOmF,WAC1B,EAWH,SAASL,EAAUN,GACjB,OAAkB,GAAVA,GAAK,EACf,CAEA,SAASS,EAAWT,GAClB,OAAQA,EAAI,GAAM,CACpB,CCtKO,SAASY,EAAM1B,EAAO2B,EAAKC,GAChC,OAAOC,KAAKF,IAAIC,EAAKC,KAAKD,IAAID,EAAK3B,GACrC,CAEO,SAAS8B,EAAM9B,EAAO2B,EAAKC,GAChC,IAAIG,EAAQH,EAAMD,EACd/H,GAAUoG,EAAQ2B,GAAOI,EAE7B,OADInI,EAAS,IAAGA,GAAUmI,GACnBnI,EAAS+H,CAClB,CAyBA,MAAMK,EAAgBH,KAAKI,GAAK,IAC1BC,EAAgB,IAAML,KAAKI,GCuCjC,SAASE,EAAMnI,EAASiH,EAAMmB,GAC5B,GAAIA,EAAKxJ,IAAIqI,GACX,MAAM,IAAIjI,MAAM,gCAAgCiI,EAAKnF,MAAQmF,OAG/D,IAAIjH,EAAQqI,QAAQzJ,IAAIqI,GAAxB,CAGA,GAFAjH,EAAQqI,QAAQC,IAAIrB,GAEhBjH,EAAQuI,QAAQ3J,IAAIqI,GAAO,CAC7B,IAAIuB,EAAOxI,EAAQuI,QAAQ1J,IAAIoI,GAC/B,GAAIuB,EAAK1C,KAAO,EAAG,CACjBsC,EAAKE,IAAIrB,GACT,IAAK,IAAIpF,KAAO2G,EACdL,EAAMnI,EAAS6B,EAAKuG,GAEtBA,EAAKlJ,OAAO+H,EACb,CACF,CAEDjH,EAAQG,IAAIN,KAAKoH,EAdqB,CAexC,CCOA,SAASwB,EACPC,EACAC,EACAC,EAAIC,OAAOC,kBACXC,EAAIF,OAAOC,kBACXE,EAAIH,OAAOI,IACXC,EAAS,MAMT,OAJAR,EAAMS,OAAOR,GAAMC,EACnBF,EAAMU,OAAOT,GAAMI,EACnBL,EAAMW,OAAOV,GAAMK,EACnBN,EAAMY,QAAQX,GAAMO,EACbP,CACT,8FArGO,SACLY,EACAC,EACAC,EACAC,GAGA,IAAIhB,EA+DG,CACLS,OAAQ,CAAE,EACVC,OAAQ,CAAE,EACVC,OAAQ,CAAE,EACVC,QAAS,CAAE,GAlEbb,EAAUC,EAAOa,GACjB,IAAII,EAAS,IAAIC,IACbC,EAAS,IAAID,IAEjB,IADAD,EAAOrB,IAAIiB,GACJI,EAAO7D,KAAO,GAAG,CACtB,IAAIgE,EACJ,IAAK,IAAIC,KAAcJ,EACjBG,EACEpB,EAAMS,OAAOY,GAAcrB,EAAMS,OAAOW,KAC1CA,EAAYC,GAGdD,EAAYC,EAIhB,IAAIC,EAAgBF,EACpB,GAAIE,IAAkBR,EAAQ,CAE5B,IAAI5J,EAAS,GACb,KAAO8I,EAAMY,QAAQU,IACnBpK,EAAOC,KAAKmK,GACZA,EAAgBtB,EAAMY,QAAQU,GAGhC,OADApK,EAAOC,KAAKmK,GACLpK,EAAOqK,SACpB,CAEMJ,EAAOvB,IAAI0B,GACXL,EAAOzK,OAAO8K,GACd,IAAK,IAAIE,KAAkBT,EAAkBO,GAAgB,CAC3D,GAAIH,EAAOjL,IAAIsL,GAAiB,SAChC,IAAInB,EAAIL,EAAMU,OAAOY,GAAiB,EAClCG,GAAO,EACNR,EAAO/K,IAAIsL,GAQLnB,EAAIL,EAAMU,OAAOc,KAC1BC,GAAO,IARPA,GAAO,EACP1B,EAAUC,EAAOwB,GACjBxB,EAAMW,OAAOa,GAAkBR,EAC7BQ,EACAV,GAEFG,EAAOrB,IAAI4B,IAKTC,IACFzB,EAAMY,QAAQY,GAAkBF,EAChCtB,EAAMU,OAAOc,GAAkBnB,EAC/BL,EAAMS,OAAOe,GAAkBnB,EAAIL,EAAMW,OAAOa,GAEnD,CAEJ,CACD,MAAO,EACT,aChFO,SAAkBE,GAGvB,OAAuC,WADvCA,GAAS,WADTA,GAAUA,GAAK,EAAK,cACKA,GAAK,EAAK,aACpBA,GAAK,GAAM,YAA2B,EACvD,kBCHO,SAAuBC,EAAOC,EAAOC,EAAKC,EAAKjM,GACpD,IAAIkM,EAAK5C,KAAK6C,MAAML,GAChBM,EAAK9C,KAAK6C,MAAMJ,GAChBM,EAAK/C,KAAK6C,MAAMH,GAChBM,EAAKhD,KAAK6C,MAAMF,GAEhBM,EAAKjD,KAAKkD,IAAIR,EAAMF,GACpBW,EAAKX,EAAQE,EAAM,GAAK,EACxBU,GAAMpD,KAAKkD,IAAIP,EAAMF,GACrBY,EAAKZ,EAAQE,EAAM,GAAK,EACxBW,EAAKL,EAAKG,EAEVG,EAAIX,EACJY,EAAIV,EACJR,EAAO5L,EAAS6M,EAAGC,GACvB,QAAoB,IAATlB,EAAsB,OAAOA,EAExC,IAAImB,EAAYR,EAAKA,EAAKG,EAAKA,EAC3BlG,EAAS,EACb,KAAOA,EAASuG,IAAcF,IAAMR,GAAMS,IAAMR,IAAK,GAEjD9F,EAEF,IAAIwG,EAAW,EAALJ,EAaV,GAXII,GAAON,IACTE,GAAMF,EACNG,GAAKJ,GAGHO,GAAOT,IACTK,GAAML,EACNO,GAAKH,GAGPf,EAAO5L,EAAS6M,EAAGC,QACC,IAATlB,EAAsB,OAAOA,CACzC,CACH,mCJZO,SAAoBE,EAAOC,EAAOC,EAAKC,GAC5C,IAAIM,EAAKP,EAAMF,EACXY,EAAKT,EAAMF,EACf,OAAOzC,KAAK2D,MAAMP,EAAIH,EACxB,cAVO,SAAmBT,EAAOC,EAAOC,EAAKC,GAC3C,IAAIM,EAAKP,EAAMF,EACXY,EAAKT,EAAMF,EACf,OAAOzC,KAAK4D,KAAKX,EAAKA,EAAKG,EAAKA,EAClC,yBFlBO,SAA8BzH,EAAUkI,EAAUjH,EAAKkH,EAAOC,GACnE,MAAMC,EA6DR,SAA2BpH,GACzB,MAAMqH,EAAYtH,EAAiBC,GAE7BsH,GADa,IAAIC,eACMC,kBAAkBH,GACzCD,EAAO,IAAIK,KAAK,CAACH,GAAY,CAAEI,KAAM,kBAC3C,OAAON,CACT,CAnEeO,CAAkB3H,GAC/B,OAAQiH,GACN,KAAKrI,EACH,CACE,MAAMI,EAAM4I,IAAIC,gBAAgBT,GAE1BU,EAAS5I,SAASC,cAAc,UAChC4I,EAAMD,EAAOE,WAAW,MACxBC,EAAatH,OAAOuH,kBAAoB,EAC9CJ,EAAOZ,MAAQA,EAAQe,EACvBH,EAAOX,OAASA,EAASc,EACzBH,EAAOtI,MAAM0H,MAAQA,EAAQ,KAC7BY,EAAOtI,MAAM2H,OAASA,EAAS,KAC/BY,EAAII,aAAaF,EAAY,EAAG,EAAGA,EAAY,EAAG,GAElD,MAAMG,EAAQ,IAAIC,MAClBD,EAAME,OAAS,KACbP,EAAIQ,UAAUH,EAAO,EAAG,GACxBR,IAAIY,gBAAgBxJ,GAEpB,MAAMyJ,EAAWX,EACdY,UAAU,SAAWzB,GACrBnF,QAAQ,SAAWmF,EAAU,sBAChCnI,EAAYC,EAAU0J,EAAS,EAEjCL,EAAMO,IAAM3J,CACb,CACD,MACF,KAAKH,EACH,CACE,MAAM+J,EAAS,IAAIC,WACnBD,EAAON,OAAS,KACdxJ,EAAYC,EAAU6J,EAAOzN,OAAO,EAEtCyN,EAAOE,cAAc1B,EACtB,CACD,MACF,QACE,MAAM,IAAI7M,MAAM,sBAAwB0M,EAAW,KAEzD,iBA7CO,SAAsBlI,EAAUgK,GACrCjK,EAAYC,EAsGL,kCAAoCiK,mBAtGND,GACvC,uCOLO,SAA4BE,GACjC,IAAK,IAAI5G,EAAI4G,EAAM3I,OAAS,EAAG+B,EAAI,IAAKA,EAAG,CACzC,IAAIC,EAAIc,KAAK6C,MAAM7C,KAAK8F,UAAY7G,EAAI,IACpC8G,EAAOF,EAAM5G,GACjB4G,EAAM5G,GAAK4G,EAAM3G,GACjB2G,EAAM3G,GAAK6G,CACZ,CACD,OAAOF,CACT,SLRO,SAAczM,EAAGC,EAAG2M,GACzB,OAAO5M,GAAKC,EAAID,GAAK4M,CACvB,YA+BO,SAAiBC,EAASC,EAAQC,GAEvC,OAAOtG,EAAMoG,EADFhG,EAAMiG,EAASD,GAAUjG,KAAKI,GAAIJ,KAAKI,IACrB6F,EAAUE,EAAIF,EAAUE,EACvD,cAQO,SAAmBF,GACxB,OAAOA,EAAU5F,CACnB,cANO,SAAmB+F,GACxB,OAAOA,EAAUjG,CACnB,aC7BO,SAAkBkG,EAAOC,GAC9B,IAAIC,EAAoB,GACxB,IAAK,IAAInH,KAAQiH,EAAO,CACtB,IAAI1F,EAAO2F,EAAmBlH,GAC9B,GAAIxH,MAAM4O,QAAQ7F,GAChB4F,EAAkBvO,KAAK,CAACoH,KAASuB,SAC5B,GAAIA,EACT,MAAM,IAAIxJ,MAAM,4CAEnB,CACD,OA4BF,SAA+BkP,EAAOI,EAAOnO,EAAM,IAEjD,IAAIoO,EAAW,IAAIzP,IACnB,IAAK,IAAI0P,KAAQF,EACf,GAAIE,EAAKzJ,OAAS,EAAG,CACnB,IAAI0J,EAASD,EAAK,GACdE,EAAOF,EAAK,GACXD,EAAS3P,IAAI6P,IAASF,EAASxP,IAAI0P,EAAQ,IAAI7E,KAC/C2E,EAAS3P,IAAI8P,IAAOH,EAASxP,IAAI2P,EAAM,IAAI9E,KAChD2E,EAAS1P,IAAI4P,GAAQnG,IAAIoG,EAC1B,CAGH,IAAI1O,EAAU,CACZuI,QAASgG,EACTzJ,MAAOoJ,EAAMnJ,OACbsD,QAAS,IAAIuB,IACbzJ,OAGF,IAAK,IAAI8G,KAAQiH,EACf/F,EAAMnI,EAASiH,EAAM,IAAI2C,KAG3B,OAAOzJ,CACT,CArDSwO,CAMT,SAAuCP,GACrC,IAAIxO,EAAS,IAAIgK,IACjB,IAAK,IAAIgF,KAAmBR,EAC1B,IAAK,IAAIpI,KAAS4I,EAChBhP,EAAO0I,IAAItC,GAGf,OAAOvG,MAAMC,KAAKE,EACpB,CAbIiP,CAA8BT,GAelC,SAAuCA,GACrC,IAAIxO,EAAS,GACb,IAAK,IAAIgP,KAAmBR,EAAmB,CAC7C,IAAIK,EAASG,EAAgB,GAC7B,IAAK,IAAI9H,EAAI,EAAGA,EAAI8H,EAAgB7J,SAAU+B,EAAG,CAC/C,IAAIgI,EAAaF,EAAgB9H,GACjClH,EAAOC,KAAK,CAAC4O,EAAQK,GACtB,CACF,CACD,OAAOlP,CACT,CAxBImP,CAA8BX,GAElC,eK3BOY,eAA0BC,EAAS,GAAIC,GAAW,GACvD,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAM3L,EAAUC,SAASC,cAAc,SACvCF,EAAQ4L,iBAAiB,UAAWC,IAEhCH,EADEF,EACMK,EAAExB,OAAOyB,MAETD,EAAExB,OAAOyB,MAAM,GACxB,IAEH9L,EAAQyI,KAAO,OACfzI,EAAQuL,OAASA,EAAO7M,KAAK,KAC7BsB,EAAQO,MAAMC,QAAU,OACxBR,EAAQ+L,gBAAgB,WAAYP,GACpCvL,SAASQ,KAAKC,YAAYV,GAC1BA,EAAQW,QACRV,SAASQ,KAAKG,YAAYZ,EAAQ,GAEtC,SCZO,SAASgM,EAAKzO,GAEnB,OAAOA,GACFA,EAAsB,GAAhB4G,KAAK8F,UAAmB1M,EAAI,GAAK0O,SAAS,KAChD,CAAC,MAAQ,KAAO,KAAO,KAAO,MAAMpJ,QAAQ,SAAUmJ,EAC7D,iBPIO,SAAsBrF,EAAOC,EAAOC,EAAKC,EAAKoF,GACnD,MAAM9E,EAAKT,EAAQE,EACbU,EAAKX,EAAQE,EACnB,OAAOM,EAAKA,EAAKG,EAAKA,GAAM2E,EAASA,CACvC"}