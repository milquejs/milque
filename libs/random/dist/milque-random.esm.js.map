{"version":3,"file":"milque-random.esm.js","sources":["../src/generators/RandomBase.js","../src/generators/MathRandom.js","../src/generators/Mulberry32.js","../src/Random.js","../src/generators/SmallFastCounter32.js"],"sourcesContent":["/**\n * @typedef RandomGeneratorLike\n * @property {NumberFunction} next\n *\n * @callback NumberFunction Generates a pseudo-random number\n * from 0 inclusive to 1 exclusive.\n * @returns {number} A pseudo-randomly generated number.\n */\n\n/**\n * Represents a pseudo-random number generator. This is only used for\n * type information.\n *\n * All random number generator instances are expected to implement\n * {@link RandomGeneratorLike}. If using classes, you can extend\n * {@link RandomBase} to enforce this, but this should not necessary\n * nor assumed.\n */\nexport class RandomBase {\n  /**\n   * Generates a pseudo-random number from 0 inclusive to 1 exclusive.\n   *\n   * @abstract\n   * @returns {number} A pseudo-randomly generated number.\n   */\n  next() {\n    return 0;\n  }\n}\n","import { RandomBase } from './RandomBase.js';\n\nexport class MathRandom extends RandomBase {\n  /** @override */\n  next() {\n    return Math.random();\n  }\n}\n","import { RandomBase } from './RandomBase.js';\n\n/**\n * A simple and fast 32-bit PRNG.\n *\n * @see {@link https://github.com/bryc/code/blob/master/jshash/PRNGs.md}\n */\nexport class Mulberry32 extends RandomBase {\n  /**\n   * @param {number} seed An unsigned 32-bit integer.\n   */\n  constructor(seed) {\n    super();\n\n    this.seed = seed;\n\n    /** @private */\n    this.a = seed;\n  }\n\n  /** @override */\n  next() {\n    var t = (this.a += 0x6d2b79f5);\n    t = Math.imul(t ^ (t >>> 15), t | 1);\n    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);\n    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;\n  }\n}\n","import { MathRandom } from './generators/MathRandom.js';\nimport { Mulberry32 } from './generators/Mulberry32.js';\n\n/**\n * @typedef {import('./generators/RandomBase.js').RandomGeneratorLike} RandomGeneratorLike\n * @typedef {import('./generators/RandomBase.js').RandomBase} RandomBase\n */\n\nexport class Random {\n  /**\n   * The lazily-initiated, static instance of this random class.\n   */\n  static get RAND() {\n    let instance = new this();\n\n    this.next = this.next.bind(this);\n    this.choose = this.choose.bind(this);\n    this.range = this.range.bind(this);\n    this.rangeInt = this.rangeInt.bind(this);\n    this.sign = this.sign.bind(this);\n\n    Object.defineProperty(this, 'RAND', { value: instance });\n    return instance;\n  }\n\n  /**\n   * @param {RandomGeneratorLike|RandomBase|number} [randomGenerator]\n   * If number type, the param will be used as a seed for a Mulberry32 PRNG.\n   * Otherwise, it is the pseudo-random number generator object that provides\n   * the generated numbers through `next()`. By default, if undefined, this\n   * will use the browser-specific `Math.random()` implementation.\n   */\n  constructor(randomGenerator = undefined) {\n    if (typeof randomGenerator === 'number') {\n      this.generator = new Mulberry32(randomGenerator);\n    } else if (randomGenerator) {\n      this.generator = randomGenerator;\n    } else {\n      this.generator = new MathRandom();\n    }\n\n    this.next = this.next.bind(this);\n    this.choose = this.choose.bind(this);\n    this.range = this.range.bind(this);\n    this.rangeInt = this.rangeInt.bind(this);\n    this.sign = this.sign.bind(this);\n  }\n\n  static next() {\n    return this.RAND.next();\n  }\n  next() {\n    return this.generator.next();\n  }\n\n  /**\n   * @template T\n   * @param {Array<T>} list\n   * @returns {T}\n   */\n  static choose(list) {\n    return this.RAND.choose(list);\n  }\n  /**\n   * @template T\n   * @param {Array<T>} list\n   * @returns {T}\n   */\n  choose(list) {\n    return list[Math.floor(this.generator.next() * list.length)];\n  }\n\n  /**\n   * @param {number} min Min range (inclusive)\n   * @param {number} max Max range (exclusive)\n   * @returns {number}\n   */\n  static range(min, max) {\n    return this.RAND.range(min, max);\n  }\n  /**\n   * @param {number} min Min range (inclusive)\n   * @param {number} max Max range (exclusive)\n   * @returns {number}\n   */\n  range(min, max) {\n    return (max - min) * this.generator.next() + min;\n  }\n\n  /**\n   * @param {number} min Min integer range (inclusive)\n   * @param {number} max Max integer range (exclusive)\n   * @returns {number}\n   */\n  static rangeInt(min, max) {\n    return this.RAND.rangeInt(min, max);\n  }\n  /**\n   * @param {number} min Min integer range (inclusive)\n   * @param {number} max Max integer range (exclusive)\n   * @returns {number}\n   */\n  rangeInt(min, max) {\n    return Math.trunc(this.range(min, max));\n  }\n\n  /**\n   * @returns {-1|1}\n   */\n  static sign() {\n    return this.RAND.sign();\n  }\n  /**\n   * @returns {-1|1}\n   */\n  sign() {\n    return this.generator.next() < 0.5 ? -1 : 1;\n  }\n}\n","import { RandomBase } from './RandomBase.js';\n\n/**\n * A very fast 32-bit PRNG.\n *\n * @see https://github.com/bryc/code/blob/master/jshash/PRNGs.md\n */\nexport class SmallFastCounter32 extends RandomBase {\n  /**\n   * @param {number} a An unsigned 32-bit integer.\n   * @param {number} b An unsigned 32-bit integer.\n   * @param {number} c An unsigned 32-bit integer.\n   * @param {number} d An unsigned 32-bit integer.\n   */\n  constructor(a, b, c, d) {\n    super();\n\n    /** @private */\n    this.a = a;\n    /** @private */\n    this.b = b;\n    /** @private */\n    this.c = c;\n    /** @private */\n    this.d = d;\n  }\n\n  /** @override */\n  next() {\n    let { a, b, c, d } = this;\n    a |= 0;\n    b |= 0;\n    c |= 0;\n    d |= 0;\n    let t = (((a + b) | 0) + d) | 0;\n    d = (d + 1) | 0;\n    a = b ^ (b >>> 9);\n    b = (c + (c << 3)) | 0;\n    c = (c << 21) | (c >>> 11);\n    c = (c + t) | 0;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    return (t >>> 0) / 4294967296;\n  }\n}\n"],"names":[],"mappings":"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"}