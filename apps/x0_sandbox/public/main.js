(()=>{var wn=Object.create,ye=Object.defineProperty;var An=Object.getOwnPropertyDescriptor;var xn=Object.getOwnPropertyNames;var Sn=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty;var Cn=n=>ye(n,"__esModule",{value:!0});var Rn=(n,e)=>()=>(n&&(e=n(n=0)),e),te=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),lt=(n,e)=>{for(var t in e)ye(n,t,{get:e[t],enumerable:!0})},Ln=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of xn(e))!Tn.call(n,s)&&s!=="default"&&ye(n,s,{get:()=>e[s],enumerable:!(t=An(e,s))||t.enumerable});return n},In=n=>Ln(Cn(ye(n!=null?wn(Sn(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var bt={};lt(bt,{basename:()=>mt,default:()=>On,delimiter:()=>ft,dirname:()=>pt,extname:()=>gt,isAbsolute:()=>He,join:()=>ct,normalize:()=>Ne,relative:()=>ht,resolve:()=>Ee,sep:()=>dt});function ut(n,e){for(var t=0,s=n.length-1;s>=0;s--){var i=n[s];i==="."?n.splice(s,1):i===".."?(n.splice(s,1),t++):t&&(n.splice(s,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}function Ee(){for(var n="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var s=t>=0?arguments[t]:"/";if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)continue;n=s+"/"+n,e=s.charAt(0)==="/"}return n=ut(ke(n.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+n||"."}function Ne(n){var e=He(n),t=Bn(n,-1)==="/";return n=ut(ke(n.split("/"),function(s){return!!s}),!e).join("/"),!n&&!e&&(n="."),n&&t&&(n+="/"),(e?"/":"")+n}function He(n){return n.charAt(0)==="/"}function ct(){var n=Array.prototype.slice.call(arguments,0);return Ne(ke(n,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function ht(n,e){n=Ee(n).substr(1),e=Ee(e).substr(1);function t(g){for(var d=0;d<g.length&&g[d]==="";d++);for(var _=g.length-1;_>=0&&g[_]==="";_--);return d>_?[]:g.slice(d,_-d+1)}for(var s=t(n.split("/")),i=t(e.split("/")),r=Math.min(s.length,i.length),o=r,a=0;a<r;a++)if(s[a]!==i[a]){o=a;break}for(var h=[],a=o;a<s.length;a++)h.push("..");return h=h.concat(i.slice(o)),h.join("/")}function pt(n){var e=Be(n),t=e[0],s=e[1];return!t&&!s?".":(s&&(s=s.substr(0,s.length-1)),t+s)}function mt(n,e){var t=Be(n)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function gt(n){return Be(n)[3]}function ke(n,e){if(n.filter)return n.filter(e);for(var t=[],s=0;s<n.length;s++)e(n[s],s,n)&&t.push(n[s]);return t}var Mn,Be,dt,ft,On,Bn,_t=Rn(()=>{Mn=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Be=function(n){return Mn.exec(n).slice(1)};dt="/",ft=":";On={extname:gt,basename:mt,dirname:pt,sep:dt,delimiter:ft,relative:ht,join:ct,isAbsolute:He,normalize:Ne,resolve:Ee};Bn="ab".substr(-1)==="b"?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}});var we=te((yi,ve)=>{var ne=(_t(),bt);if(ne&&ne.default){ve.exports=ne.default;for(let n in ne)ve.exports[n]=ne[n]}else ne&&(ve.exports=ne)});var ue=te((Ei,At)=>{"use strict";var Nn=we(),X="\\\\/",yt=`[^${X}]`,Q="\\.",Hn="\\+",kn="\\?",Ae="\\/",Kn="(?=.)",Et="[^/]",Ke=`(?:${Ae}|$)`,vt=`(?:^|${Ae})`,De=`${Q}{1,2}${Ke}`,Dn=`(?!${Q})`,Pn=`(?!${vt}${De})`,$n=`(?!${Q}{0,1}${Ke})`,Un=`(?!${De})`,Fn=`[^.${Ae}]`,qn=`${Et}*?`,wt={DOT_LITERAL:Q,PLUS_LITERAL:Hn,QMARK_LITERAL:kn,SLASH_LITERAL:Ae,ONE_CHAR:Kn,QMARK:Et,END_ANCHOR:Ke,DOTS_SLASH:De,NO_DOT:Dn,NO_DOTS:Pn,NO_DOT_SLASH:$n,NO_DOTS_SLASH:Un,QMARK_NO_DOT:Fn,STAR:qn,START_ANCHOR:vt},Yn={...wt,SLASH_LITERAL:`[${X}]`,QMARK:yt,STAR:`${yt}*?`,DOTS_SLASH:`${Q}{1,2}(?:[${X}]|$)`,NO_DOT:`(?!${Q})`,NO_DOTS:`(?!(?:^|[${X}])${Q}{1,2}(?:[${X}]|$))`,NO_DOT_SLASH:`(?!${Q}{0,1}(?:[${X}]|$))`,NO_DOTS_SLASH:`(?!${Q}{1,2}(?:[${X}]|$))`,QMARK_NO_DOT:`[^.${X}]`,START_ANCHOR:`(?:^|[${X}])`,END_ANCHOR:`(?:[${X}]|$)`},jn={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};At.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:jn,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Nn.sep,extglobChars(n){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${n.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(n){return n===!0?Yn:wt}}});var xe=te($=>{"use strict";var zn=we(),Wn=!1,{REGEX_BACKSLASH:Gn,REGEX_REMOVE_BACKSLASH:Xn,REGEX_SPECIAL_CHARS:Vn,REGEX_SPECIAL_CHARS_GLOBAL:Qn}=ue();$.isObject=n=>n!==null&&typeof n=="object"&&!Array.isArray(n);$.hasRegexChars=n=>Vn.test(n);$.isRegexChar=n=>n.length===1&&$.hasRegexChars(n);$.escapeRegex=n=>n.replace(Qn,"\\$1");$.toPosixSlashes=n=>n.replace(Gn,"/");$.removeBackslashes=n=>n.replace(Xn,e=>e==="\\"?"":e);$.supportsLookbehinds=()=>{let n=process.version.slice(1).split(".").map(Number);return n.length===3&&n[0]>=9||n[0]===8&&n[1]>=10};$.isWindows=n=>n&&typeof n.windows=="boolean"?n.windows:Wn===!0||zn.sep==="\\";$.escapeLast=(n,e,t)=>{let s=n.lastIndexOf(e,t);return s===-1?n:n[s-1]==="\\"?$.escapeLast(n,e,s-1):`${n.slice(0,s)}\\${n.slice(s)}`};$.removePrefix=(n,e={})=>{let t=n;return t.startsWith("./")&&(t=t.slice(2),e.prefix="./"),t};$.wrapOutput=(n,e={},t={})=>{let s=t.contains?"":"^",i=t.contains?"":"$",r=`${s}(?:${n})${i}`;return e.negated===!0&&(r=`(?:^(?!${r}).*$)`),r}});var Mt=te((wi,It)=>{"use strict";var xt=xe(),{CHAR_ASTERISK:Pe,CHAR_AT:Zn,CHAR_BACKWARD_SLASH:ce,CHAR_COMMA:Jn,CHAR_DOT:$e,CHAR_EXCLAMATION_MARK:Ue,CHAR_FORWARD_SLASH:St,CHAR_LEFT_CURLY_BRACE:Fe,CHAR_LEFT_PARENTHESES:qe,CHAR_LEFT_SQUARE_BRACKET:es,CHAR_PLUS:ts,CHAR_QUESTION_MARK:Tt,CHAR_RIGHT_CURLY_BRACE:ns,CHAR_RIGHT_PARENTHESES:Ct,CHAR_RIGHT_SQUARE_BRACKET:ss}=ue(),Rt=n=>n===St||n===ce,Lt=n=>{n.isPrefix!==!0&&(n.depth=n.isGlobstar?Infinity:1)},is=(n,e)=>{let t=e||{},s=n.length-1,i=t.parts===!0||t.scanToEnd===!0,r=[],o=[],a=[],h=n,g=-1,d=0,_=0,E=!1,N=!1,S=!1,T=!1,q=!1,j=!1,Y=!1,M=!1,z=!1,k=!1,Z=0,K,y,x={value:"",depth:0,isGlob:!1},H=()=>g>=s,c=()=>h.charCodeAt(g+1),L=()=>(K=y,h.charCodeAt(++g));for(;g<s;){y=L();let D;if(y===ce){Y=x.backslashes=!0,y=L(),y===Fe&&(j=!0);continue}if(j===!0||y===Fe){for(Z++;H()!==!0&&(y=L());){if(y===ce){Y=x.backslashes=!0,L();continue}if(y===Fe){Z++;continue}if(j!==!0&&y===$e&&(y=L())===$e){if(E=x.isBrace=!0,S=x.isGlob=!0,k=!0,i===!0)continue;break}if(j!==!0&&y===Jn){if(E=x.isBrace=!0,S=x.isGlob=!0,k=!0,i===!0)continue;break}if(y===ns&&(Z--,Z===0)){j=!1,E=x.isBrace=!0,k=!0;break}}if(i===!0)continue;break}if(y===St){if(r.push(g),o.push(x),x={value:"",depth:0,isGlob:!1},k===!0)continue;if(K===$e&&g===d+1){d+=2;continue}_=g+1;continue}if(t.noext!==!0&&(y===ts||y===Zn||y===Pe||y===Tt||y===Ue)===!0&&c()===qe){if(S=x.isGlob=!0,T=x.isExtglob=!0,k=!0,y===Ue&&g===d&&(z=!0),i===!0){for(;H()!==!0&&(y=L());){if(y===ce){Y=x.backslashes=!0,y=L();continue}if(y===Ct){S=x.isGlob=!0,k=!0;break}}continue}break}if(y===Pe){if(K===Pe&&(q=x.isGlobstar=!0),S=x.isGlob=!0,k=!0,i===!0)continue;break}if(y===Tt){if(S=x.isGlob=!0,k=!0,i===!0)continue;break}if(y===es){for(;H()!==!0&&(D=L());){if(D===ce){Y=x.backslashes=!0,L();continue}if(D===ss){N=x.isBracket=!0,S=x.isGlob=!0,k=!0;break}}if(i===!0)continue;break}if(t.nonegate!==!0&&y===Ue&&g===d){M=x.negated=!0,d++;continue}if(t.noparen!==!0&&y===qe){if(S=x.isGlob=!0,i===!0){for(;H()!==!0&&(y=L());){if(y===qe){Y=x.backslashes=!0,y=L();continue}if(y===Ct){k=!0;break}}continue}break}if(S===!0){if(k=!0,i===!0)continue;break}}t.noext===!0&&(T=!1,S=!1);let C=h,J="",l="";d>0&&(J=h.slice(0,d),h=h.slice(d),_-=d),C&&S===!0&&_>0?(C=h.slice(0,_),l=h.slice(_)):S===!0?(C="",l=h):C=h,C&&C!==""&&C!=="/"&&C!==h&&Rt(C.charCodeAt(C.length-1))&&(C=C.slice(0,-1)),t.unescape===!0&&(l&&(l=xt.removeBackslashes(l)),C&&Y===!0&&(C=xt.removeBackslashes(C)));let u={prefix:J,input:n,start:d,base:C,glob:l,isBrace:E,isBracket:N,isGlob:S,isExtglob:T,isGlobstar:q,negated:M,negatedExtglob:z};if(t.tokens===!0&&(u.maxDepth=0,Rt(y)||o.push(x),u.tokens=o),t.parts===!0||t.tokens===!0){let D;for(let A=0;A<r.length;A++){let W=D?D+1:d,G=r[A],U=n.slice(W,G);t.tokens&&(A===0&&d!==0?(o[A].isPrefix=!0,o[A].value=J):o[A].value=U,Lt(o[A]),u.maxDepth+=o[A].depth),(A!==0||U!=="")&&a.push(U),D=G}if(D&&D+1<n.length){let A=n.slice(D+1);a.push(A),t.tokens&&(o[o.length-1].value=A,Lt(o[o.length-1]),u.maxDepth+=o[o.length-1].depth)}u.slashes=r,u.parts=a}return u};It.exports=is});var Nt=te((Ai,Bt)=>{"use strict";var Se=ue(),F=xe(),{MAX_LENGTH:Te,POSIX_REGEX_SOURCE:rs,REGEX_NON_SPECIAL_CHARS:os,REGEX_SPECIAL_CHARS_BACKREF:as,REPLACEMENTS:Ot}=Se,ls=(n,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...n,e);n.sort();let t=`[${n.join("-")}]`;try{new RegExp(t)}catch(s){return n.map(i=>F.escapeRegex(i)).join("..")}return t},ie=(n,e)=>`Missing ${n}: "${e}" - use "\\\\${e}" to match literal characters`,Ye=(n,e)=>{if(typeof n!="string")throw new TypeError("Expected a string");n=Ot[n]||n;let t={...e},s=typeof t.maxLength=="number"?Math.min(Te,t.maxLength):Te,i=n.length;if(i>s)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${s}`);let r={type:"bos",value:"",output:t.prepend||""},o=[r],a=t.capture?"":"?:",h=F.isWindows(e),g=Se.globChars(h),d=Se.extglobChars(g),{DOT_LITERAL:_,PLUS_LITERAL:E,SLASH_LITERAL:N,ONE_CHAR:S,DOTS_SLASH:T,NO_DOT:q,NO_DOT_SLASH:j,NO_DOTS_SLASH:Y,QMARK:M,QMARK_NO_DOT:z,STAR:k,START_ANCHOR:Z}=g,K=m=>`(${a}(?:(?!${Z}${m.dot?T:_}).)*?)`,y=t.dot?"":q,x=t.dot?M:z,H=t.bash===!0?K(t):k;t.capture&&(H=`(${H})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let c={input:n,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};n=F.removePrefix(n,c),i=n.length;let L=[],C=[],J=[],l=r,u,D=()=>c.index===i-1,A=c.peek=(m=1)=>n[c.index+m],W=c.advance=()=>n[++c.index]||"",G=()=>n.slice(c.index+1),U=(m="",R=0)=>{c.consumed+=m,c.index+=R},me=m=>{c.output+=m.output!=null?m.output:m.value,U(m.value)},En=()=>{let m=1;for(;A()==="!"&&(A(2)!=="("||A(3)==="?");)W(),c.start++,m++;return m%2==0?!1:(c.negated=!0,c.start++,!0)},ge=m=>{c[m]++,J.push(m)},ee=m=>{c[m]--,J.pop()},w=m=>{if(l.type==="globstar"){let R=c.braces>0&&(m.type==="comma"||m.type==="brace"),f=m.extglob===!0||L.length&&(m.type==="pipe"||m.type==="paren");m.type!=="slash"&&m.type!=="paren"&&!R&&!f&&(c.output=c.output.slice(0,-l.output.length),l.type="star",l.value="*",l.output=H,c.output+=l.output)}if(L.length&&m.type!=="paren"&&(L[L.length-1].inner+=m.value),(m.value||m.output)&&me(m),l&&l.type==="text"&&m.type==="text"){l.value+=m.value,l.output=(l.output||"")+m.value;return}m.prev=l,o.push(m),l=m},be=(m,R)=>{let f={...d[R],conditions:1,inner:""};f.prev=l,f.parens=c.parens,f.output=c.output;let v=(t.capture?"(":"")+f.open;ge("parens"),w({type:m,value:R,output:c.output?"":S}),w({type:"paren",extglob:!0,value:W(),output:v}),L.push(f)},vn=m=>{let R=m.close+(t.capture?")":""),f;if(m.type==="negate"){let v=H;if(m.inner&&m.inner.length>1&&m.inner.includes("/")&&(v=K(t)),(v!==H||D()||/^\)+$/.test(G()))&&(R=m.close=`)$))${v}`),m.inner.includes("*")&&(f=G())&&/^\.[^\\/.]+$/.test(f)){let I=Ye(f,{...e,fastpaths:!1}).output;R=m.close=`)${I})${v})`}m.prev.type==="bos"&&(c.negatedExtglob=!0)}w({type:"paren",extglob:!0,value:u,output:R}),ee("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(n)){let m=!1,R=n.replace(as,(f,v,I,P,B,Oe)=>P==="\\"?(m=!0,f):P==="?"?v?v+P+(B?M.repeat(B.length):""):Oe===0?x+(B?M.repeat(B.length):""):M.repeat(I.length):P==="."?_.repeat(I.length):P==="*"?v?v+P+(B?H:""):H:v?f:`\\${f}`);return m===!0&&(t.unescape===!0?R=R.replace(/\\/g,""):R=R.replace(/\\+/g,f=>f.length%2==0?"\\\\":f?"\\":"")),R===n&&t.contains===!0?(c.output=n,c):(c.output=F.wrapOutput(R,c,e),c)}for(;!D();){if(u=W(),u==="\0")continue;if(u==="\\"){let f=A();if(f==="/"&&t.bash!==!0||f==="."||f===";")continue;if(!f){u+="\\",w({type:"text",value:u});continue}let v=/^\\+/.exec(G()),I=0;if(v&&v[0].length>2&&(I=v[0].length,c.index+=I,I%2!=0&&(u+="\\")),t.unescape===!0?u=W():u+=W(),c.brackets===0){w({type:"text",value:u});continue}}if(c.brackets>0&&(u!=="]"||l.value==="["||l.value==="[^")){if(t.posix!==!1&&u===":"){let f=l.value.slice(1);if(f.includes("[")&&(l.posix=!0,f.includes(":"))){let v=l.value.lastIndexOf("["),I=l.value.slice(0,v),P=l.value.slice(v+2),B=rs[P];if(B){l.value=I+B,c.backtrack=!0,W(),!r.output&&o.indexOf(l)===1&&(r.output=S);continue}}}(u==="["&&A()!==":"||u==="-"&&A()==="]")&&(u=`\\${u}`),u==="]"&&(l.value==="["||l.value==="[^")&&(u=`\\${u}`),t.posix===!0&&u==="!"&&l.value==="["&&(u="^"),l.value+=u,me({value:u});continue}if(c.quotes===1&&u!=='"'){u=F.escapeRegex(u),l.value+=u,me({value:u});continue}if(u==='"'){c.quotes=c.quotes===1?0:1,t.keepQuotes===!0&&w({type:"text",value:u});continue}if(u==="("){ge("parens"),w({type:"paren",value:u});continue}if(u===")"){if(c.parens===0&&t.strictBrackets===!0)throw new SyntaxError(ie("opening","("));let f=L[L.length-1];if(f&&c.parens===f.parens+1){vn(L.pop());continue}w({type:"paren",value:u,output:c.parens?")":"\\)"}),ee("parens");continue}if(u==="["){if(t.nobracket===!0||!G().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(ie("closing","]"));u=`\\${u}`}else ge("brackets");w({type:"bracket",value:u});continue}if(u==="]"){if(t.nobracket===!0||l&&l.type==="bracket"&&l.value.length===1){w({type:"text",value:u,output:`\\${u}`});continue}if(c.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(ie("opening","["));w({type:"text",value:u,output:`\\${u}`});continue}ee("brackets");let f=l.value.slice(1);if(l.posix!==!0&&f[0]==="^"&&!f.includes("/")&&(u=`/${u}`),l.value+=u,me({value:u}),t.literalBrackets===!1||F.hasRegexChars(f))continue;let v=F.escapeRegex(l.value);if(c.output=c.output.slice(0,-l.value.length),t.literalBrackets===!0){c.output+=v,l.value=v;continue}l.value=`(${a}${v}|${l.value})`,c.output+=l.value;continue}if(u==="{"&&t.nobrace!==!0){ge("braces");let f={type:"brace",value:u,output:"(",outputIndex:c.output.length,tokensIndex:c.tokens.length};C.push(f),w(f);continue}if(u==="}"){let f=C[C.length-1];if(t.nobrace===!0||!f){w({type:"text",value:u,output:u});continue}let v=")";if(f.dots===!0){let I=o.slice(),P=[];for(let B=I.length-1;B>=0&&(o.pop(),I[B].type!=="brace");B--)I[B].type!=="dots"&&P.unshift(I[B].value);v=ls(P,t),c.backtrack=!0}if(f.comma!==!0&&f.dots!==!0){let I=c.output.slice(0,f.outputIndex),P=c.tokens.slice(f.tokensIndex);f.value=f.output="\\{",u=v="\\}",c.output=I;for(let B of P)c.output+=B.output||B.value}w({type:"brace",value:u,output:v}),ee("braces"),C.pop();continue}if(u==="|"){L.length>0&&L[L.length-1].conditions++,w({type:"text",value:u});continue}if(u===","){let f=u,v=C[C.length-1];v&&J[J.length-1]==="braces"&&(v.comma=!0,f="|"),w({type:"comma",value:u,output:f});continue}if(u==="/"){if(l.type==="dot"&&c.index===c.start+1){c.start=c.index+1,c.consumed="",c.output="",o.pop(),l=r;continue}w({type:"slash",value:u,output:N});continue}if(u==="."){if(c.braces>0&&l.type==="dot"){l.value==="."&&(l.output=_);let f=C[C.length-1];l.type="dots",l.output+=u,l.value+=u,f.dots=!0;continue}if(c.braces+c.parens===0&&l.type!=="bos"&&l.type!=="slash"){w({type:"text",value:u,output:_});continue}w({type:"dot",value:u,output:_});continue}if(u==="?"){if(!(l&&l.value==="(")&&t.noextglob!==!0&&A()==="("&&A(2)!=="?"){be("qmark",u);continue}if(l&&l.type==="paren"){let v=A(),I=u;if(v==="<"&&!F.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(l.value==="("&&!/[!=<:]/.test(v)||v==="<"&&!/<([!=]|\w+>)/.test(G()))&&(I=`\\${u}`),w({type:"text",value:u,output:I});continue}if(t.dot!==!0&&(l.type==="slash"||l.type==="bos")){w({type:"qmark",value:u,output:z});continue}w({type:"qmark",value:u,output:M});continue}if(u==="!"){if(t.noextglob!==!0&&A()==="("&&(A(2)!=="?"||!/[!=<:]/.test(A(3)))){be("negate",u);continue}if(t.nonegate!==!0&&c.index===0){En();continue}}if(u==="+"){if(t.noextglob!==!0&&A()==="("&&A(2)!=="?"){be("plus",u);continue}if(l&&l.value==="("||t.regex===!1){w({type:"plus",value:u,output:E});continue}if(l&&(l.type==="bracket"||l.type==="paren"||l.type==="brace")||c.parens>0){w({type:"plus",value:u});continue}w({type:"plus",value:E});continue}if(u==="@"){if(t.noextglob!==!0&&A()==="("&&A(2)!=="?"){w({type:"at",extglob:!0,value:u,output:""});continue}w({type:"text",value:u});continue}if(u!=="*"){(u==="$"||u==="^")&&(u=`\\${u}`);let f=os.exec(G());f&&(u+=f[0],c.index+=f[0].length),w({type:"text",value:u});continue}if(l&&(l.type==="globstar"||l.star===!0)){l.type="star",l.star=!0,l.value+=u,l.output=H,c.backtrack=!0,c.globstar=!0,U(u);continue}let m=G();if(t.noextglob!==!0&&/^\([^?]/.test(m)){be("star",u);continue}if(l.type==="star"){if(t.noglobstar===!0){U(u);continue}let f=l.prev,v=f.prev,I=f.type==="slash"||f.type==="bos",P=v&&(v.type==="star"||v.type==="globstar");if(t.bash===!0&&(!I||m[0]&&m[0]!=="/")){w({type:"star",value:u,output:""});continue}let B=c.braces>0&&(f.type==="comma"||f.type==="brace"),Oe=L.length&&(f.type==="pipe"||f.type==="paren");if(!I&&f.type!=="paren"&&!B&&!Oe){w({type:"star",value:u,output:""});continue}for(;m.slice(0,3)==="/**";){let _e=n[c.index+4];if(_e&&_e!=="/")break;m=m.slice(3),U("/**",3)}if(f.type==="bos"&&D()){l.type="globstar",l.value+=u,l.output=K(t),c.output=l.output,c.globstar=!0,U(u);continue}if(f.type==="slash"&&f.prev.type!=="bos"&&!P&&D()){c.output=c.output.slice(0,-(f.output+l.output).length),f.output=`(?:${f.output}`,l.type="globstar",l.output=K(t)+(t.strictSlashes?")":"|$)"),l.value+=u,c.globstar=!0,c.output+=f.output+l.output,U(u);continue}if(f.type==="slash"&&f.prev.type!=="bos"&&m[0]==="/"){let _e=m[1]!==void 0?"|$":"";c.output=c.output.slice(0,-(f.output+l.output).length),f.output=`(?:${f.output}`,l.type="globstar",l.output=`${K(t)}${N}|${N}${_e})`,l.value+=u,c.output+=f.output+l.output,c.globstar=!0,U(u+W()),w({type:"slash",value:"/",output:""});continue}if(f.type==="bos"&&m[0]==="/"){l.type="globstar",l.value+=u,l.output=`(?:^|${N}|${K(t)}${N})`,c.output=l.output,c.globstar=!0,U(u+W()),w({type:"slash",value:"/",output:""});continue}c.output=c.output.slice(0,-l.output.length),l.type="globstar",l.output=K(t),l.value+=u,c.output+=l.output,c.globstar=!0,U(u);continue}let R={type:"star",value:u,output:H};if(t.bash===!0){R.output=".*?",(l.type==="bos"||l.type==="slash")&&(R.output=y+R.output),w(R);continue}if(l&&(l.type==="bracket"||l.type==="paren")&&t.regex===!0){R.output=u,w(R);continue}(c.index===c.start||l.type==="slash"||l.type==="dot")&&(l.type==="dot"?(c.output+=j,l.output+=j):t.dot===!0?(c.output+=Y,l.output+=Y):(c.output+=y,l.output+=y),A()!=="*"&&(c.output+=S,l.output+=S)),w(R)}for(;c.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(ie("closing","]"));c.output=F.escapeLast(c.output,"["),ee("brackets")}for(;c.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(ie("closing",")"));c.output=F.escapeLast(c.output,"("),ee("parens")}for(;c.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(ie("closing","}"));c.output=F.escapeLast(c.output,"{"),ee("braces")}if(t.strictSlashes!==!0&&(l.type==="star"||l.type==="bracket")&&w({type:"maybe_slash",value:"",output:`${N}?`}),c.backtrack===!0){c.output="";for(let m of c.tokens)c.output+=m.output!=null?m.output:m.value,m.suffix&&(c.output+=m.suffix)}return c};Ye.fastpaths=(n,e)=>{let t={...e},s=typeof t.maxLength=="number"?Math.min(Te,t.maxLength):Te,i=n.length;if(i>s)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${s}`);n=Ot[n]||n;let r=F.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:h,DOTS_SLASH:g,NO_DOT:d,NO_DOTS:_,NO_DOTS_SLASH:E,STAR:N,START_ANCHOR:S}=Se.globChars(r),T=t.dot?_:d,q=t.dot?E:d,j=t.capture?"":"?:",Y={negated:!1,prefix:""},M=t.bash===!0?".*?":N;t.capture&&(M=`(${M})`);let z=y=>y.noglobstar===!0?M:`(${j}(?:(?!${S}${y.dot?g:o}).)*?)`,k=y=>{switch(y){case"*":return`${T}${h}${M}`;case".*":return`${o}${h}${M}`;case"*.*":return`${T}${M}${o}${h}${M}`;case"*/*":return`${T}${M}${a}${h}${q}${M}`;case"**":return T+z(t);case"**/*":return`(?:${T}${z(t)}${a})?${q}${h}${M}`;case"**/*.*":return`(?:${T}${z(t)}${a})?${q}${M}${o}${h}${M}`;case"**/.*":return`(?:${T}${z(t)}${a})?${o}${h}${M}`;default:{let x=/^(.*?)\.(\w+)$/.exec(y);if(!x)return;let H=k(x[1]);return H?H+o+x[2]:void 0}}},Z=F.removePrefix(n,Y),K=k(Z);return K&&t.strictSlashes!==!0&&(K+=`${a}?`),K};Bt.exports=Ye});var kt=te((xi,Ht)=>{"use strict";var us=we(),cs=Mt(),je=Nt(),ze=xe(),hs=ue(),ds=n=>n&&typeof n=="object"&&!Array.isArray(n),O=(n,e,t=!1)=>{if(Array.isArray(n)){let d=n.map(E=>O(E,e,t));return E=>{for(let N of d){let S=N(E);if(S)return S}return!1}}let s=ds(n)&&n.tokens&&n.input;if(n===""||typeof n!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},r=ze.isWindows(e),o=s?O.compileRe(n,e):O.makeRe(n,e,!1,!0),a=o.state;delete o.state;let h=()=>!1;if(i.ignore){let d={...e,ignore:null,onMatch:null,onResult:null};h=O(i.ignore,d,t)}let g=(d,_=!1)=>{let{isMatch:E,match:N,output:S}=O.test(d,o,e,{glob:n,posix:r}),T={glob:n,state:a,regex:o,posix:r,input:d,output:S,match:N,isMatch:E};return typeof i.onResult=="function"&&i.onResult(T),E===!1?(T.isMatch=!1,_?T:!1):h(d)?(typeof i.onIgnore=="function"&&i.onIgnore(T),T.isMatch=!1,_?T:!1):(typeof i.onMatch=="function"&&i.onMatch(T),_?T:!0)};return t&&(g.state=a),g};O.test=(n,e,t,{glob:s,posix:i}={})=>{if(typeof n!="string")throw new TypeError("Expected input to be a string");if(n==="")return{isMatch:!1,output:""};let r=t||{},o=r.format||(i?ze.toPosixSlashes:null),a=n===s,h=a&&o?o(n):n;return a===!1&&(h=o?o(n):n,a=h===s),(a===!1||r.capture===!0)&&(r.matchBase===!0||r.basename===!0?a=O.matchBase(n,e,t,i):a=e.exec(h)),{isMatch:Boolean(a),match:a,output:h}};O.matchBase=(n,e,t,s=ze.isWindows(t))=>(e instanceof RegExp?e:O.makeRe(e,t)).test(us.basename(n));O.isMatch=(n,e,t)=>O(e,t)(n);O.parse=(n,e)=>Array.isArray(n)?n.map(t=>O.parse(t,e)):je(n,{...e,fastpaths:!1});O.scan=(n,e)=>cs(n,e);O.compileRe=(n,e,t=!1,s=!1)=>{if(t===!0)return n.output;let i=e||{},r=i.contains?"":"^",o=i.contains?"":"$",a=`${r}(?:${n.output})${o}`;n&&n.negated===!0&&(a=`^(?!${a}).*$`);let h=O.toRegex(a,e);return s===!0&&(h.state=n),h};O.makeRe=(n,e={},t=!1,s=!1)=>{if(!n||typeof n!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(n[0]==="."||n[0]==="*")&&(i.output=je.fastpaths(n,e)),i.output||(i=je(n,e)),O.compileRe(i,e,t,s)};O.toRegex=(n,e)=>{try{let t=e||{};return new RegExp(n,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}};O.constants=hs;Ht.exports=O});var Dt=te((Si,Kt)=>{"use strict";Kt.exports=kt()});var Pt=In(Dt());var he=class{constructor(e){let t;typeof e=="object"&&e instanceof he?t=e.source:t=String(e),this.source=t,this._re=(0,Pt.makeRe)(t)}test(e){return this._re.test(e)}},fs=/^([_\w\d]+)\:\/\//;async function $t(n,e,t,s,i,r){let{loadings:o}=n,a;e in o?a=o[e]:(a=new re(r),o[e]=a);let h=re.nextAttempt(a),g=[a.promise];return fs.test(t)?g.push(Ut(n,t,r).then(d=>s(d,i)).then(d=>re.isCurrentAttempt(a,h)?Ce(n,e,d):void 0)):g.push(fetch(t).then(d=>d.arrayBuffer()).then(d=>s(d)).then(d=>re.isCurrentAttempt(a,h)?Ce(n,e,d):void 0)),await Promise.race(g)}function Ce(n,e,t){let{store:s,loadings:i}=n;return s[e]=t,e in i&&(i[e].resolve(t),delete i[e]),t}function ps(n,e,t){let{defaults:s}=n;typeof e=="string"&&(e=new he(e));let i=`__default://[${s.length}]`;return Ce(n,i,t),s.push(new Yt(e,i)),t}function ms(n,e){let{store:t,loadings:s}=n;e in s&&(s[e].reject(new Error("Stop loading to delete asset.")),delete s[e]),e in t&&delete t[e]}function gs(n,e){typeof e=="string"&&(e=new he(e));let{store:t,loadings:s}=n;for(let[i,r]of Object.entries(s))e.test(i)&&(r.reject(new Error(`Stop loading to clear assets matching ${e}`)),delete s[i]);for(let i of Object.keys(t))e.test(i)&&delete t[i]}function bs(n){let{store:e,loadings:t,defaults:s}=n;for(let[i,r]of Object.entries(t))r.reject(new Error("Stop loading to clear all assets.")),delete t[i];for(let i of Object.keys(e))delete e[i];s.length=0}function _s(n,e){let{loadings:t}=n;return e in t?t[e].promise:null}async function Ut(n,e,t){let{store:s,loadings:i}=n;if(e in s)return s[e];if(e in i)return i[e].promise;{let r=new re(t);return i[e]=r,r.promise}}function ys(n,e){let{defaults:t}=n;for(let s of t)if(s.glob.test(e))return Re(n,s.uri);return null}function Re(n,e){return n.store[e]}function Es(n,e){return Boolean(n.store[e])}function vs(n){return Object.keys(n.store)}function Ft(n,e){return e in n.store}function qt(n,e){return e in n.loadings}var Yt=class{constructor(e,t){this.glob=e,this.uri=t}},re=class{static nextAttempt(e){return++e._promiseHandle}static isCurrentAttempt(e,t){return e._promiseHandle===t}constructor(e){this._promiseHandle=0,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(e)&&e>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${e} ms.`)},e):null,this._promise=new Promise((t,s)=>{this._value?t(this._value):this._resolve=t,this._reason?s(this._reason):this._reject=s})}get promise(){return this._promise}resolve(e){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(e):this._value=e}reject(e){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(e):this._reason=e}},We=class{constructor(e=null){this.parent=e,this.store={},this.loadings={},this.defaults=[]}get(e){let t=this;if(Ft(t,e))return Re(t,e);let s=ys(t,e);return s||null}async resolve(e,t,s,i,r){return this.get(e)||await this.load(e,t,s,i,r)}fallback(e,t){return ps(this,e,t)}cache(e,t){return Ce(this,e,t)}async load(e,t,s,i,r){let o=this;return Ft(o,e)?Re(o,e):qt(o,e)?await Ut(o,e,r):await $t(o,e,t,s,i,r)}async reload(e,t,s,i,r){return await $t(this,e,t,s,i,r)}unload(e){ms(this,e)}clear(e){gs(this,e)}current(e){return Re(this,e)}exists(e){return Es(this,e)}loading(e){let t=this;return qt(t,e)?_s(t,e):null}keys(){return vs(this)}reset(){bs(this)}};var ws=`<div class="container">
  <label class="hidden" id="title">display-port</label>
  <label class="hidden" id="fps">00</label>
  <label class="hidden" id="dimension">0x0</label>
  <div class="content">
    <canvas> Oh no! Your browser does not support canvas. </canvas>
    <slot id="inner"></slot>
  </div>
  <slot name="frame"></slot>
</div>
`,As=`:host {
  display: inline-block;
  color: #555555;
}

.container {
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
}

.content {
  position: relative;
  margin: auto;
}

.content > *:not(canvas) {
  width: 100%;
  height: 100%;
}

canvas {
  background: #000000;
  image-rendering: pixelated;
}

label {
  position: absolute;
  font-family: monospace;
  color: currentColor;
}

#inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

#title {
  left: 0.5rem;
  top: 0.5rem;
}

#fps {
  right: 0.5rem;
  top: 0.5rem;
}

#dimension {
  left: 0.5rem;
  bottom: 0.5rem;
}

.hidden {
  display: none;
}

:host([debug]) .container {
  outline: 6px dashed rgba(0, 0, 0, 0.1);
  outline-offset: -4px;
  background-color: rgba(0, 0, 0, 0.1);
}

:host([mode='noscale']) canvas {
  margin: 0;
  top: 0;
  left: 0;
}

:host([mode='stretch']) canvas,
:host([mode='scale']) canvas {
  width: 100%;
  height: 100%;
}

:host([mode='fit']),
:host([mode='scale']),
:host([mode='center']),
:host([mode='stretch']),
:host([mode='fill']) {
  width: 100%;
  height: 100%;
}

:host([full]) {
  width: 100vw !important;
  height: 100vh !important;
}

:host([disabled]) {
  display: none;
}

slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

::slotted(*) {
  pointer-events: auto;
}
`,jt="noscale";var Ge="fit",zt="scale",Wt="fill",Gt="stretch",Xt=300,Vt=150,Qt=Ge,xs=200,oe=class extends HTMLElement{static create(e={}){let{root:t=document.body,id:s=void 0,mode:i=Qt,width:r=Xt,height:o=Vt,debug:a=!1}=e||{},h=new oe;return h.id=s,h.mode=i,h.width=r,h.height=o,h.debug=a,t.appendChild(h),h}static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=ws,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=As,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("display-port",this)}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(e){this.setAttribute("mode",e)}get debug(){return this._debug}set debug(e){this.toggleAttribute("debug",e)}get disabled(){return this._disabled}set disabled(e){this.toggleAttribute("disabled",e)}get width(){return this._width}set width(e){this.setAttribute("width",String(e))}get height(){return this._height}set height(e){this.setAttribute("height",String(e))}get onframe(){return this._onframe}set onframe(e){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=e,this._onframe&&this.addEventListener("frame",e)}constructor(){super();let e=this.attachShadow({mode:"open"});e.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),e.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=e.querySelector("canvas"),this._contentElement=e.querySelector(".content"),this._innerElement=e.querySelector("#inner"),this._titleElement=e.querySelector("#title"),this._fpsElement=e.querySelector("#fps"),this._dimensionElement=e.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=Xt,this._height=Vt,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this._frameEvent=new CustomEvent("frame",{composed:!0,bubbles:!1,detail:{now:0,prevTime:0,deltaTime:0,canvas:this._canvasElement}}),this._resizeEvent=new CustomEvent("resize",{composed:!0,bubbles:!1,detail:{width:0,height:0}}),this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){ae(this,"mode"),ae(this,"debug"),ae(this,"disabled"),ae(this,"width"),ae(this,"height"),ae(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",Qt),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.updateCanvasSize(!0),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(e,t,s){switch(e){case"debug":this._debug=s!==null;break;case"disabled":this._disabled=s!==null;break;case"width":this._width=Number(s);break;case"height":this._height=Number(s);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+s+"}}").bind(this);break}switch(e){case"disabled":s?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",s),this._fpsElement.classList.toggle("hidden",s),this._dimensionElement.classList.toggle("hidden",s);break}}getContext(e="2d",t=void 0){return this._canvasElement.getContext(e,t)}pause(){window.cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=window.requestAnimationFrame(this.update)}update(e){this._animationRequestHandle=window.requestAnimationFrame(this.update),this.updateCanvasSize(!1);let t=e-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=e,this._debug){let r=t<=0?"--":String(Math.round(1e3/t)).padStart(2,"0");if(this._fpsElement.textContent!==r&&(this._fpsElement.textContent=r),this.mode===jt){let a=`${this._width}x${this._height}`;this._dimensionElement.textContent!==a&&(this._dimensionElement.textContent=a)}else{let a=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==a&&(this._dimensionElement.textContent=a)}}let i=this._frameEvent.detail;i.now=e,i.prevTime=this._prevAnimationFrameTime,i.deltaTime=t,this.dispatchEvent(this._frameEvent)}onDelayCanvasResize(){this._resizeTimeoutHandle=null,this.updateCanvasSize(!0)}delayCanvasResize(e,t){(e!==this._resizeCanvasWidth||t!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=e,this._resizeCanvasHeight=t,this._resizeTimeoutHandle&&window.clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=window.setTimeout(this.onDelayCanvasResize,xs))}updateCanvasSize(e=!0){let t=this.shadowRoot.host.getBoundingClientRect(),s=t.width,i=t.height,r=this._canvasElement,o=this._width,a=this._height,h=this.mode;if(h===Gt||h===Wt)o=s,a=i;else if(h!==jt&&(s<o||i<a||h===Ge||h==zt)){let d=s/o,_=i/a;d<_?(o=s,a=a*d):(o=o*_,a=i)}if(o=Math.floor(o),a=Math.floor(a),typeof e=="undefined"&&(e=r.clientWidth!==o||r.clientHeight!==a),!e){this.delayCanvasResize(o,a);return}let g=Math.min(o/this._width,a/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${g}em`,e){h===zt?(r.width=this._width,r.height=this._height):h!==Gt&&(r.width=o,r.height=a);let d=this._contentElement.style;d.width=`${o}px`,d.height=`${a}px`,(h===Ge||h===Wt)&&(this._width=o,this._height=a);let E=this._resizeEvent.detail;E.width=o,E.height=a,this.dispatchEvent(this._resizeEvent)}}};oe.define();function ae(n,e){if(Object.prototype.hasOwnProperty.call(n,e)){let t=n[e];delete n[e],n[e]=t}}var Xe=class{get polling(){return performance.now()-this._lastPollingTime<1e3}get value(){return 0}get size(){return this._size}constructor(e){this._size=e,this._lastPollingTime=Number.MIN_SAFE_INTEGER}resize(e){this._size=e}getState(e){throw new Error("Missing implementation.")}onUpdate(e,t,s){throw new Error("Missing implementation.")}onStatus(e,t){throw new Error("Missing implementation.")}onPoll(e){this._lastPollingTime=e}onBind(e,t=void 0){e>=this._size&&this.resize(e+1)}onUnbind(){this.resize(0)}},de=class extends Xe{static createAxisBindingState(){return{value:0,delta:0,inverted:!1}}get delta(){return this._delta}get value(){return this._value}constructor(e=0){super(e);let t=new Array,s=this.constructor;for(let i=0;i<e;++i)t.push(s.createAxisBindingState());this._state=t,this._value=0,this._delta=0}resize(e){let t=this._state,s=t.length,i;if(e<=s)i=t.slice(0,e);else{i=t;let r=this.constructor;for(let o=s;o<e;++o)i.push(r.createAxisBindingState())}this._state=i,super.resize(e)}getState(e){return this._state[e].value}onPoll(e){let t=this._state,s=0,i=0,r=t.length;for(let o=0;o<r;++o){let a=t[o];s+=a.value*(a.inverted?-1:1),i+=a.delta,t[o].delta=0}this._value=s,this._delta=i,super.onPoll(e)}onUpdate(e,t,s){typeof t=="undefined"?this.onAxisChange(e,s):this.onAxisMove(e,t,s)}onStatus(e,t){this.onAxisStatus(e,t)}onBind(e,t=void 0){super.onBind(e,t);let{inverted:s=!1}=t||{},i=this._state;i[e].inverted=s}onAxisMove(e,t,s){let i=this._state[e];i.value=t,i.delta+=s}onAxisChange(e,t){let s=this._state[e];s.value+=t,s.delta+=t}onAxisStatus(e,t){let s=this._state[e],i=s.value;s.value=t,s.delta=t-i}},Ss=241,Zt=254,Ts=239,se=1,Ve=2,Qe=4,Ze=8,Je=16,Le=class extends Xe{get pressed(){return this._pressed}get repeated(){return this._repeated}get released(){return this._released}get down(){return this._down}get value(){return this._value}constructor(e=0){super(e);this._state=new Uint8Array(e),this._value=0,this._down=!1,this._pressed=!1,this._repeated=!1,this._released=!1}resize(e){let t=this._state,s=t.length,i;e<=s?i=t.slice(0,e):(i=new Uint8Array(e),i.set(t)),this._state=i,super.resize(e)}getState(e){let t=this._state[e],s=t&Je?-1:1;return(t&se?1:0)*s}onPoll(e){let t=this._state,s=0,i=0,r=0,o=0,a=0,h=t.length;for(let g=0;g<h;++g){let d=t[g],_=d&se,E=d&Je;i|=_,r|=d&Ve,o|=d&Qe,a|=d&Ze,s+=(_?1:0)*(E?-1:1),t[g]&=Ss}this._value=s,this._down=i!==0,this._pressed=r!==0,this._repeated=o!==0,this._released=a!==0,super.onPoll(e)}onUpdate(e,t,s){s>0?this.onButtonPressed(e):this.onButtonReleased(e)}onStatus(e,t){this.onButtonStatus(e,t!==0)}onBind(e,t={inverted:!1}){super.onBind(e,t);let{inverted:s=!1}=t,i=this._state;s?i[e]|=Je:i[e]&=Ts}onButtonPressed(e){let t=this._state,s=t[e];s&se||(s|=Ve,s|=se),s|=Qe,t[e]=s}onButtonReleased(e){let t=this._state,s=t[e];s&se&&(s|=Ze,s&=Zt),t[e]=s}onButtonStatus(e,t){let s=this._state,i=s[e],r=Boolean(i&se);t?i|=se:i&=Zt,r&&!t&&(i|=Ze),!r&&t&&(i|=Ve,i|=Qe),s[e]=i}},p=class{static parse(e){e=e.trim();let t=e.indexOf(".");if(t<0)throw new Error("Missing device separator for key code.");let s=e.substring(0,t);if(s.length<0)throw new Error("Missing device for key code.");let i=e.substring(t+1);if(i.length<0)throw new Error("Missing code for key code.");return new p(s,i)}constructor(e,t){this.device=e,this.code=t}toString(){return`${this.device}.${this.code}`}};var b="Keyboard",V="Mouse",Ri=new p(b,"KeyA"),Li=new p(b,"KeyB"),Ii=new p(b,"KeyC"),Mi=new p(b,"KeyD"),Oi=new p(b,"KeyE"),Bi=new p(b,"KeyF"),Ni=new p(b,"KeyG"),Hi=new p(b,"KeyH"),ki=new p(b,"KeyI"),Ki=new p(b,"KeyJ"),Di=new p(b,"KeyK"),Pi=new p(b,"KeyL"),$i=new p(b,"KeyM"),Ui=new p(b,"KeyN"),Fi=new p(b,"KeyO"),qi=new p(b,"KeyP"),Yi=new p(b,"KeyQ"),ji=new p(b,"KeyR"),zi=new p(b,"KeyS"),Wi=new p(b,"KeyT"),Gi=new p(b,"KeyU"),Xi=new p(b,"KeyV"),Vi=new p(b,"KeyW"),Qi=new p(b,"KeyX"),Zi=new p(b,"KeyY"),Ji=new p(b,"KeyZ"),er=new p(b,"Digit0"),tr=new p(b,"Digit1"),nr=new p(b,"Digit2"),sr=new p(b,"Digit3"),ir=new p(b,"Digit4"),rr=new p(b,"Digit5"),or=new p(b,"Digit6"),ar=new p(b,"Digit7"),lr=new p(b,"Digit8"),ur=new p(b,"Digit9"),cr=new p(b,"Minus"),hr=new p(b,"Equal"),dr=new p(b,"BracketLeft"),fr=new p(b,"BracketRight"),pr=new p(b,"Semicolon"),mr=new p(b,"Quote"),gr=new p(b,"Backquote"),br=new p(b,"Backslash"),_r=new p(b,"Comma"),yr=new p(b,"Period"),Er=new p(b,"Slash"),vr=new p(b,"Escape"),wr=new p(b,"Space"),Ar=new p(b,"CapsLock"),xr=new p(b,"Backspace"),Sr=new p(b,"Delete"),Tr=new p(b,"Tab"),Cr=new p(b,"Enter"),Rr=new p(b,"ArrowUp"),Lr=new p(b,"ArrowDown"),Ir=new p(b,"ArrowLeft"),Mr=new p(b,"ArrowRight"),Or=new p(V,"Button0"),Br=new p(V,"Button1"),Nr=new p(V,"Button2"),Hr=new p(V,"Button3"),kr=new p(V,"Button4"),Kr=new p(V,"PosX"),Dr=new p(V,"PosY"),Pr=new p(V,"WheelX"),$r=new p(V,"WheelY"),Ur=new p(V,"WheelZ");var et=class{static isAxis(e){return!1}static isButton(e){return!1}constructor(e,t){if(!t)throw new Error(`Missing event target for device ${e}.`);this.name=e,this.eventTarget=t,this.listeners={input:[]}}setEventTarget(e){if(!e)throw new Error(`Missing event target for device ${this.name}.`);this.eventTarget=e}destroy(){let e=this.listeners;for(let t in e)e[t].length=0}addEventListener(e,t){let s=this.listeners;e in s?s[e].push(t):s[e]=[t]}removeEventListener(e,t){let s=this.listeners;if(e in s){let i=s[e],r=i.indexOf(t);r>=0&&i.splice(r,1)}}dispatchInputEvent(e){let t=0;for(let s of this.listeners.input)t|=s(e);return Boolean(t)}},Jt=class extends et{static isAxis(e){return!1}static isButton(e){return!0}constructor(e,t,s={}){super(e,t);let{ignoreRepeat:i=!0}=s;this.ignoreRepeat=i,this._eventObject={target:t,device:e,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}setEventTarget(e){this.eventTarget&&this.destroy(),super.setEventTarget(e),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let e=this.eventTarget;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(e){if(e.repeat&&this.ignoreRepeat)return e.preventDefault(),e.stopPropagation(),!1;let t=this._eventObject;if(t.code=e.code,t.event="pressed",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t))return e.preventDefault(),e.stopPropagation(),!1}onKeyUp(e){let t=this._eventObject;if(t.code=e.code,t.event="released",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t))return e.preventDefault(),e.stopPropagation(),!1}},tt=10,nt=100,en=class extends et{static isAxis(e){return e==="PosX"||e==="PosY"||e==="WheelX"||e==="WheelY"||e==="WheelZ"}static isButton(e){return!this.isAxis(e)}constructor(e,t,s={}){super(e,t);let{eventsOnFocus:i=!0}=s;this.eventsOnFocus=i,this.canvasTarget=this.getCanvasFromEventTarget(t),this._downHasFocus=!1,this._eventObject={target:t,device:e,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:t,device:e,code:"",event:"move",value:0,movement:0},this._wheelObject={target:t,device:e,code:"",event:"wheel",movement:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}setEventTarget(e){this.eventTarget&&this.destroy(),super.setEventTarget(e),this.canvasTarget=this.getCanvasFromEventTarget(e),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("contextmenu",this.onContextMenu),e.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let e=this.eventTarget;e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("contextmenu",this.onContextMenu),e.removeEventListener("wheel",this.onWheel),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(e=!0){e?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(e){this._downHasFocus=!0;let t=this._eventObject;if(t.code="Button"+e.button,t.event="pressed",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t)&&document.activeElement===this.eventTarget)return e.preventDefault(),e.stopPropagation(),!1}onContextMenu(e){return e.preventDefault(),e.stopPropagation(),!1}onWheel(e){let t,s,i;switch(e.deltaMode){case WheelEvent.DOM_DELTA_LINE:t=e.deltaX*tt,s=e.deltaY*tt,i=e.deltaZ*tt;break;case WheelEvent.DOM_DELTA_PAGE:t=e.deltaX*nt,s=e.deltaY*nt,i=e.deltaZ*nt;break;case WheelEvent.DOM_DELTA_PIXEL:default:t=e.deltaX,s=e.deltaY,i=e.deltaZ;break}let r=0,o=this._wheelObject;if(o.code="WheelX",o.movement=t,r|=this.dispatchInputEvent(o),o.code="WheelY",o.movement=s,r|=this.dispatchInputEvent(o),o.code="WheelZ",o.movement=i,r|=this.dispatchInputEvent(o),r)return e.preventDefault(),e.stopPropagation(),!1}onMouseUp(e){if(!this._downHasFocus)return;this._downHasFocus=!1;let t=this._eventObject;if(t.code="Button"+e.button,t.event="released",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t))return e.preventDefault(),e.stopPropagation(),!1}onMouseMove(e){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;let t=this.canvasTarget,{clientWidth:s,clientHeight:i}=t,r=t.getBoundingClientRect(),o=e.movementX/s,a=e.movementY/i,h=(e.clientX-r.left)/s,g=(e.clientY-r.top)/i,d=this._positionObject;d.code="PosX",d.value=h,d.movement=o,this.dispatchInputEvent(d),d.code="PosY",d.value=g,d.movement=a,this.dispatchInputEvent(d)}getCanvasFromEventTarget(e){return e instanceof HTMLCanvasElement?e:e.canvas||e.querySelector("canvas")||e.shadowRoot&&e.shadowRoot.querySelector("canvas")||e}},Cs=`<kbd>
  <span id="name"><slot></slot></span>
  <span id="value" class="hidden"></span>
</kbd>
`,Rs=`kbd {
  position: relative;
  display: inline-block;
  border-radius: 3px;
  border: 1px solid #888888;
  font-size: 0.85em;
  font-weight: 700;
  text-rendering: optimizeLegibility;
  line-height: 12px;
  height: 14px;
  padding: 2px 4px;
  color: #444444;
  background-color: #eeeeee;
  box-shadow: inset 0 -3px 0 #aaaaaa;
  overflow: hidden;
}

kbd:empty::after {
  content: '<?>';
  opacity: 0.6;
}

.disabled {
  opacity: 0.6;
  box-shadow: none;
  background-color: #aaaaaa;
}

.hidden {
  display: none;
}

#value {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  font-size: 0.85em;
  padding: 0 4px;
  padding-top: 2px;
  color: #cccccc;
  background-color: #333333;
  box-shadow: inset 0 3px 0 #222222;
}
`,st=class extends HTMLElement{static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=Cs,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=Rs,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("input-code",this)}static get observedAttributes(){return["name","value","disabled"]}get disabled(){return this._disabled}set disabled(e){this.toggleAttribute("disabled",e)}get value(){return this._value}set value(e){this.setAttribute("value",e)}get name(){return this._name}set name(e){this.setAttribute("name",e)}constructor(){super();let e=this.constructor,t=this.attachShadow({mode:"open"});t.appendChild(e[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(e[Symbol.for("styleNode")].cloneNode(!0)),this._name="",this._value="",this._disabled=!1,this._kbdElement=t.querySelector("kbd"),this._nameElement=t.querySelector("#name"),this._valueElement=t.querySelector("#value")}attributeChangedCallback(e,t,s){switch(e){case"name":this._name=s,this._nameElement.textContent=s;break;case"value":this._value=s,s!==null?(this._valueElement.classList.toggle("hidden",!1),this._valueElement.textContent=s,this._kbdElement.style.paddingRight=`${this._valueElement.clientWidth+4}px`):this._valueElement.classList.toggle("hidden",!0);break;case"disabled":this._disabled=s!==null,this._kbdElement.classList.toggle("disabled",s!==null);break}}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"name")){let e=this.name;delete this.name,this.name=e}if(Object.prototype.hasOwnProperty.call(this,"value")){let e=this.value;delete this.value,this.value=e}if(Object.prototype.hasOwnProperty.call(this,"disabled")){let e=this.disabled;delete this.disabled,this.disabled=e}}};st.define();var Ls=`<table>
  <thead>
    <tr class="tableHeader">
      <th colspan="3">
        <span class="tableTitle">
          <label id="title"> input-source </label>
          <span id="slotContainer">
            <slot></slot>
          </span>
          <p>
            <label for="poll">poll</label>
            <output id="poll"></output>
          </p>
          <p>
            <label for="focus">focus</label>
            <output id="focus"></output>
          </p>
        </span>
      </th>
    </tr>
    <tr class="colHeader">
      <th>name</th>
      <th>value</th>
      <th>key</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
`,Is=`:host {
  display: block;
}

table {
  border-collapse: collapse;
  font-family: monospace;
}

table,
th,
td {
  border: 1px solid #666666;
}

th,
td {
  padding: 5px 10px;
}

td {
  text-align: center;
}

thead th {
  padding: 0;
}

.colHeader > th {
  font-size: 0.8em;
  padding: 0 10px;
  letter-spacing: 3px;
  background-color: #aaaaaa;
  color: #666666;
}

tbody output {
  border-radius: 0.3em;
  padding: 3px;
}

tr:not(.primary) .name,
tr:not(.primary) .value {
  opacity: 0.3;
}

tr:nth-child(2n) {
  background-color: #eeeeee;
}

.tableHeader {
  color: #666666;
}

.tableTitle {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px;
}

#slotContainer {
  flex: 1;
}

p {
  display: inline;
  margin: 0;
  padding: 0;
  padding-right: 10px;
}

#poll:empty::after,
#focus:empty::after {
  content: '\u2717';
  color: #ff0000;
}
`,tn=class{constructor(e){this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null,this.pollable=e}get running(){return this.animationFrameHandle!==null}start(){let e=this.animationFrameHandle;e&&cancelAnimationFrame(e),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}stop(){let e=this.animationFrameHandle;e&&cancelAnimationFrame(e),this.animationFrameHandle=null}onAnimationFrame(e){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.pollable.onPoll(e)}},nn=class{constructor(e){this.onInput=this.onInput.bind(this),this.onPoll=this.onPoll.bind(this),this.bindings=e}onPoll(e){for(let t of this.bindings.getInputs())t.onPoll(e)}onInput(e){let{device:t,code:s,event:i,value:r,movement:o,control:a,shift:h,alt:g}=e,d=this.bindings.getBindings(t,s);switch(i){case"pressed":for(let{input:_,index:E}of d)_.onUpdate(E,1,1);break;case"released":for(let{input:_,index:E}of d)_.onUpdate(E,0,-1);break;case"move":for(let{input:_,index:E}of d)_.onUpdate(E,r,o);break;case"wheel":for(let{input:_,index:E}of d)_.onUpdate(E,void 0,o);break}return d.length>0}},it=class{constructor(e,t,s,i){this.device=e,this.code=t,this.input=s,this.index=i}},sn=class{constructor(){this.bindingMap={},this.inputMap=new Map}clear(){for(let e of this.inputMap.keys())e.onUnbind();this.inputMap.clear(),this.bindingMap={}}bind(e,t,s,i={inverted:!1}){let r,o=this.inputMap;if(o.has(e)){let h=o.get(e),g=e.size;e.onBind(g,i),r=new it(t,s,e,g),h.push(r)}else{let h=[];o.set(e,h);let g=0;e.onBind(g,i),r=new it(t,s,e,g),h.push(r)}let a=this.bindingMap;t in a?s in a[t]?a[t][s].push(r):a[t][s]=[r]:a[t]={[s]:[r]}}unbind(e){let t=this.inputMap;if(t.has(e)){let s=this.bindingMap,i=t.get(e);for(let r of i){let{device:o,code:a}=r,h=s[o][a],g=h.indexOf(r);h.splice(g,1)}i.length=0,e.onUnbind(),t.delete(e)}}isBound(e){return this.inputMap.has(e)}getInputs(){return this.inputMap.keys()}getBindingsByInput(e){return this.inputMap.get(e)}getBindings(e,t){let s=this.bindingMap;if(e in s){let i=s[e];if(t in i)return i[t]}return[]}},rn=class{constructor(e,t=void 0){this.inputs={},this.devices=[new en("Mouse",e),new Jt("Keyboard",e)],this.bindings=new sn,this.adapter=new nn(this.bindings),this.autopoller=new tn(this.adapter),this.eventTarget=e,this.anyButton=new Le(1),this.anyButtonDevice="",this.anyButtonCode="",this.anyAxis=new de(1),this.anyAxisDevice="",this.anyAxisCode="",this.listeners={bind:[],unbind:[],focus:[],blur:[]},this.onInput=this.onInput.bind(this),this.onEventTargetBlur=this.onEventTargetBlur.bind(this),this.onEventTargetFocus=this.onEventTargetFocus.bind(this),e.addEventListener("focus",this.onEventTargetFocus),e.addEventListener("blur",this.onEventTargetBlur);for(let s of this.devices)s.addEventListener("input",this.onInput)}get autopoll(){return this.autopoller.running}set autopoll(e){this.toggleAutoPoll(e)}destroy(){let e=this.listeners;for(let s in e)e[s].length=0;this.autopoller.running&&this.autopoller.stop();for(let s of this.devices)s.removeEventListener("input",this.onInput),s.destroy();let t=this.eventTarget;t.removeEventListener("focus",this.onEventTargetFocus),t.removeEventListener("blur",this.onEventTargetBlur)}setEventTarget(e){let t=this.eventTarget;t.removeEventListener("focus",this.onEventTargetFocus),t.removeEventListener("blur",this.onEventTargetBlur),this.eventTarget=e;for(let s of this.devices)s.setEventTarget(e);e.addEventListener("focus",this.onEventTargetFocus),e.addEventListener("blur",this.onEventTargetBlur)}toggleAutoPoll(e=void 0){let t=this.autopoller.running,s=typeof e=="undefined"?!t:Boolean(e);s!==t&&(s?this.autopoller.start():this.autopoller.stop())}addEventListener(e,t){let s=this.listeners;e in s?s[e].push(t):s[e]=[t]}removeEventListener(e,t){let s=this.listeners;if(e in s){let i=s[e],r=i.indexOf(t);r>=0&&i.splice(r,1)}}dispatchEvent(e){let{type:t}=e,s=0;for(let i of this.listeners[t])s|=i(e)?1:0;return Boolean(s)}poll(e=performance.now()){if(this.autopoller.running)throw new Error("Should not manually poll() while autopolling.");this.onPoll(e)}onInput(e){let t=this.adapter.onInput(e);switch(e.event){case"pressed":this.anyButtonDevice=e.device,this.anyButtonCode=e.code,this.anyButton.onUpdate(0,1,1);break;case"released":this.anyButtonDevice=e.device,this.anyButtonCode=e.code,this.anyButton.onUpdate(0,0,-1);break;case"move":case"wheel":this.anyAxisDevice=e.device,this.anyAxisCode=e.code,this.anyAxis.onUpdate(0,e.value,e.movement);break}return t}onPoll(e){this.adapter.onPoll(e),this.anyButton.onPoll(e),this.anyAxis.onPoll(e)}onBind(){this.dispatchEvent({type:"bind"})}onUnbind(){this.dispatchEvent({type:"unbind"})}onEventTargetFocus(){this.dispatchEvent({type:"focus"})}onEventTargetBlur(){for(let e of this.bindings.getInputs())e.onStatus(0,0);this.anyButton.onStatus(0,0),this.anyAxis.onStatus(0,0),this.dispatchEvent({type:"blur"})}bindBindings(e){Array.isArray(e)||(e=Object.values(e));for(let t of e)t.bindTo(this)}bindBinding(e){e.bindTo(this)}bindButton(e,t,s,i=void 0){let r;this.hasButton(e)?r=this.getButton(e):(r=new Le(1),this.inputs[e]=r),this.bindings.bind(r,t,s,i),this.onBind()}bindAxis(e,t,s,i=void 0){let r;this.hasAxis(e)?r=this.getAxis(e):(r=new de(1),this.inputs[e]=r),this.bindings.bind(r,t,s,i),this.onBind()}bindAxisButtons(e,t,s,i){let r;this.hasAxis(e)?r=this.getAxis(e):(r=new de(2),this.inputs[e]=r),this.bindings.bind(r,t,i),this.bindings.bind(r,t,s,{inverted:!0}),this.onBind()}unbindButton(e){if(this.hasButton(e)){let t=this.getButton(e);delete this.inputs[e],this.bindings.unbind(t),this.onUnbind()}}unbindAxis(e){if(this.hasAxis(e)){let t=this.getAxis(e);delete this.inputs[e],this.bindings.unbind(t),this.onUnbind()}}getInput(e){return this.inputs[e]}getButton(e){return this.inputs[e]}getAxis(e){return this.inputs[e]}hasButton(e){return e in this.inputs&&this.inputs[e]instanceof Le}hasAxis(e){return e in this.inputs&&this.inputs[e]instanceof de}isButtonDown(e){return this.inputs[e].down}isButtonPressed(e){return this.inputs[e].pressed}isButtonReleased(e){return this.inputs[e].released}getInputValue(e){return this.inputs[e].value}getButtonValue(e){return this.inputs[e].value}getAxisValue(e){return this.inputs[e].value}getAxisDelta(e){return this.inputs[e].delta}isAnyButtonDown(e=void 0){if(typeof e=="undefined")return this.anyButton.down;{let t=this.inputs;for(let s of e)if(t[s].down)return!0}return!1}isAnyButtonPressed(e=void 0){if(typeof e=="undefined")return this.anyButton.pressed;{let t=this.inputs;for(let s of e)if(t[s].pressed)return!0}return!1}isAnyButtonReleased(e=void 0){if(typeof e=="undefined")return this.anyButton.released;{let t=this.inputs;for(let s of e)if(t[s].released)return!0}return!1}getAnyAxisValue(e=void 0){if(typeof e=="undefined")return this.anyAxis.value;{let t=this.inputs;for(let s of e){let i=t[s];if(i.value)return i.value}}return 0}getAnyAxisDelta(e=void 0){if(typeof e=="undefined")return this.anyAxis.delta;{let t=this.inputs;for(let s of e){let i=t[s];if(i.delta)return i.delta}}return 0}getLastButtonDevice(){return this.anyButtonDevice}getLastButtonCode(){return this.anyButtonCode}getLastAxisDevice(){return this.anyAxisDevice}getLastAxisCode(){return this.anyAxisCode}getMouse(){return this.devices[0]}getKeyboard(){return this.devices[1]}},le=class extends HTMLElement{static create(e={}){let{root:t=document.body,id:s=void 0,for:i=void 0,autopoll:r=!1}=e||{},o=new le;return o.id=s,o.for=i,o.autopoll=r,t.appendChild(o),o}static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=Ls,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=Is,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("input-port",this)}static get observedAttributes(){return["autopoll","for"]}get autopoll(){return this._autopoll}set autopoll(e){this.toggleAttribute("autopoll",e)}get for(){return this._for}set for(e){this.setAttribute("for",e)}constructor(){super();let e=this.attachShadow({mode:"open"});e.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),e.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._titleElement=e.querySelector("#title"),this._pollElement=e.querySelector("#poll"),this._focusElement=e.querySelector("#focus"),this._bodyElement=e.querySelector("tbody"),this._outputElements={},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null;let t=this;this._for="",this._eventTarget=t,this._autopoll=!1,this._context=null,this.onInputContextBind=this.onInputContextBind.bind(this),this.onInputContextUnbind=this.onInputContextUnbind.bind(this),this.onInputContextFocus=this.onInputContextFocus.bind(this),this.onInputContextBlur=this.onInputContextBlur.bind(this)}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"for")){let e=this.for;delete this.for,this.for=e}if(Object.prototype.hasOwnProperty.call(this,"autopoll")){let e=this.autopoll;delete this.autopoll,this.autopoll=e}this.updateTable(),this.updateTableValues(),this.animationFrameHandle=window.requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){let e=this._context;e&&(e.removeEventListener("bind",this.onInputContextBind),e.removeEventListener("unbind",this.onInputContextUnbind),e.removeEventListener("blur",this.onInputContextBlur),e.removeEventListener("focus",this.onInputContextFocus),e.destroy(),this._context=null)}attributeChangedCallback(e,t,s){switch(e){case"for":{this._for=s;let i,r;s?(i=document.getElementById(s),r=`${i.tagName.toLowerCase()}#${s}`):(i=this,r="input-port"),this._eventTarget=i,this._context&&this._context.setEventTarget(this._eventTarget),this._titleElement.innerHTML=`for ${r}`}break;case"autopoll":this._autopoll=s!==null,this._context&&this._context.toggleAutoPoll(this._autopoll);break}}onAnimationFrame(){this.animationFrameHandle=window.requestAnimationFrame(this.onAnimationFrame),this.updateTableValues(),this.updatePollStatus()}onInputContextBind(){return this.updateTable(),!0}onInputContextUnbind(){return this.updateTable(),!0}onInputContextFocus(){return this._focusElement.innerHTML="\u2713",!0}onInputContextBlur(){return this._focusElement.innerHTML="",!0}getContext(e="axisbutton",t=void 0){switch(e){case"axisbutton":if(!this._context){let s=new rn(this._eventTarget,t);s.addEventListener("bind",this.onInputContextBind),s.addEventListener("unbind",this.onInputContextUnbind),s.addEventListener("blur",this.onInputContextBlur),s.addEventListener("focus",this.onInputContextFocus),this._autopoll&&s.toggleAutoPoll(!0),this._context=s}return this._context;default:throw new Error(`Input context id '${e}' is not supported.`)}}updateTable(){if(this.isConnected)if(this._context){let e=this._context,t=e.inputs,s=e.bindings,i={},r=[];for(let o of Object.keys(t)){let a=t[o],h=!0;for(let g of s.getBindingsByInput(a)){let d=Ms(`${a.constructor.name}.${o}`,`${g.device}.${g.code}`,0,h);r.push(d),h&&(i[o]=d.querySelector("output"),h=!1)}}this._outputElements=i,this._bodyElement.innerHTML="";for(let o of r)this._bodyElement.appendChild(o)}else{this._outputElements={},this._bodyElement.innerHTML="";return}else return}updateTableValues(){if(this.isConnected)if(this._context){let t=this._context.inputs;for(let s of Object.keys(this._outputElements)){let i=this._outputElements[s],r=t[s].value;i.innerText=Number(r).toFixed(2)}}else{for(let e of Object.keys(this._outputElements)){let t=this._outputElements[e];t.innerText="---"}return}else return}updatePollStatus(){if(this.isConnected)if(this._context){let t=this._context.inputs;for(let s of Object.values(t))if(!s.polling){this._pollElement.innerHTML="";return}this._pollElement.innerHTML="\u2713"}else{this._pollElement.innerHTML="-";return}else return}};le.define();function Ms(n,e,t,s=!0){let i=document.createElement("tr");s&&i.classList.add("primary");{let r=document.createElement("td");r.textContent=n,r.classList.add("name"),i.appendChild(r)}{let r=document.createElement("td"),o=document.createElement("output");s?o.innerText=Number(t).toFixed(2):o.innerText="---",o.classList.add("value"),r.appendChild(o),i.appendChild(r)}{let r=document.createElement("td");r.classList.add("key");let o=new st;o.innerText=e,r.appendChild(o),i.appendChild(r)}return i}var Fr=Symbol("keyboardSource");var qr=Symbol("mouseSource");var Ie=1e-6,fe=typeof Float32Array!="undefined"?Float32Array:Array,rt=Math.random;var jr=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Me={};lt(Me,{add:()=>ks,angle:()=>ii,bezier:()=>Vs,ceil:()=>Ks,clone:()=>Os,copy:()=>Ns,create:()=>on,cross:()=>Ws,dist:()=>di,distance:()=>hn,div:()=>hi,divide:()=>cn,dot:()=>pn,equals:()=>li,exactEquals:()=>ai,floor:()=>Ds,forEach:()=>gi,fromValues:()=>Bs,hermite:()=>Xs,inverse:()=>js,len:()=>pi,length:()=>an,lerp:()=>Gs,max:()=>$s,min:()=>Ps,mul:()=>ci,multiply:()=>un,negate:()=>Ys,normalize:()=>zs,random:()=>Qs,rotateX:()=>ti,rotateY:()=>ni,rotateZ:()=>si,round:()=>Us,scale:()=>Fs,scaleAndAdd:()=>qs,set:()=>Hs,sqrDist:()=>fi,sqrLen:()=>mi,squaredDistance:()=>dn,squaredLength:()=>fn,str:()=>oi,sub:()=>ui,subtract:()=>ln,transformMat3:()=>Js,transformMat4:()=>Zs,transformQuat:()=>ei,zero:()=>ri});function on(){var n=new fe(3);return fe!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Os(n){var e=new fe(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function an(n){var e=n[0],t=n[1],s=n[2];return Math.hypot(e,t,s)}function Bs(n,e,t){var s=new fe(3);return s[0]=n,s[1]=e,s[2]=t,s}function Ns(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function Hs(n,e,t,s){return n[0]=e,n[1]=t,n[2]=s,n}function ks(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function ln(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function un(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function cn(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function Ks(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n[2]=Math.ceil(e[2]),n}function Ds(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n[2]=Math.floor(e[2]),n}function Ps(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}function $s(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}function Us(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n[2]=Math.round(e[2]),n}function Fs(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function qs(n,e,t,s){return n[0]=e[0]+t[0]*s,n[1]=e[1]+t[1]*s,n[2]=e[2]+t[2]*s,n}function hn(n,e){var t=e[0]-n[0],s=e[1]-n[1],i=e[2]-n[2];return Math.hypot(t,s,i)}function dn(n,e){var t=e[0]-n[0],s=e[1]-n[1],i=e[2]-n[2];return t*t+s*s+i*i}function fn(n){var e=n[0],t=n[1],s=n[2];return e*e+t*t+s*s}function Ys(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function js(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function zs(n,e){var t=e[0],s=e[1],i=e[2],r=t*t+s*s+i*i;return r>0&&(r=1/Math.sqrt(r)),n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function pn(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Ws(n,e,t){var s=e[0],i=e[1],r=e[2],o=t[0],a=t[1],h=t[2];return n[0]=i*h-r*a,n[1]=r*o-s*h,n[2]=s*a-i*o,n}function Gs(n,e,t,s){var i=e[0],r=e[1],o=e[2];return n[0]=i+s*(t[0]-i),n[1]=r+s*(t[1]-r),n[2]=o+s*(t[2]-o),n}function Xs(n,e,t,s,i,r){var o=r*r,a=o*(2*r-3)+1,h=o*(r-2)+r,g=o*(r-1),d=o*(3-2*r);return n[0]=e[0]*a+t[0]*h+s[0]*g+i[0]*d,n[1]=e[1]*a+t[1]*h+s[1]*g+i[1]*d,n[2]=e[2]*a+t[2]*h+s[2]*g+i[2]*d,n}function Vs(n,e,t,s,i,r){var o=1-r,a=o*o,h=r*r,g=a*o,d=3*r*a,_=3*h*o,E=h*r;return n[0]=e[0]*g+t[0]*d+s[0]*_+i[0]*E,n[1]=e[1]*g+t[1]*d+s[1]*_+i[1]*E,n[2]=e[2]*g+t[2]*d+s[2]*_+i[2]*E,n}function Qs(n,e){e=e||1;var t=rt()*2*Math.PI,s=rt()*2-1,i=Math.sqrt(1-s*s)*e;return n[0]=Math.cos(t)*i,n[1]=Math.sin(t)*i,n[2]=s*e,n}function Zs(n,e,t){var s=e[0],i=e[1],r=e[2],o=t[3]*s+t[7]*i+t[11]*r+t[15];return o=o||1,n[0]=(t[0]*s+t[4]*i+t[8]*r+t[12])/o,n[1]=(t[1]*s+t[5]*i+t[9]*r+t[13])/o,n[2]=(t[2]*s+t[6]*i+t[10]*r+t[14])/o,n}function Js(n,e,t){var s=e[0],i=e[1],r=e[2];return n[0]=s*t[0]+i*t[3]+r*t[6],n[1]=s*t[1]+i*t[4]+r*t[7],n[2]=s*t[2]+i*t[5]+r*t[8],n}function ei(n,e,t){var s=t[0],i=t[1],r=t[2],o=t[3],a=e[0],h=e[1],g=e[2],d=i*g-r*h,_=r*a-s*g,E=s*h-i*a,N=i*E-r*_,S=r*d-s*E,T=s*_-i*d,q=o*2;return d*=q,_*=q,E*=q,N*=2,S*=2,T*=2,n[0]=a+d+N,n[1]=h+_+S,n[2]=g+E+T,n}function ti(n,e,t,s){var i=[],r=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],r[0]=i[0],r[1]=i[1]*Math.cos(s)-i[2]*Math.sin(s),r[2]=i[1]*Math.sin(s)+i[2]*Math.cos(s),n[0]=r[0]+t[0],n[1]=r[1]+t[1],n[2]=r[2]+t[2],n}function ni(n,e,t,s){var i=[],r=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],r[0]=i[2]*Math.sin(s)+i[0]*Math.cos(s),r[1]=i[1],r[2]=i[2]*Math.cos(s)-i[0]*Math.sin(s),n[0]=r[0]+t[0],n[1]=r[1]+t[1],n[2]=r[2]+t[2],n}function si(n,e,t,s){var i=[],r=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],r[0]=i[0]*Math.cos(s)-i[1]*Math.sin(s),r[1]=i[0]*Math.sin(s)+i[1]*Math.cos(s),r[2]=i[2],n[0]=r[0]+t[0],n[1]=r[1]+t[1],n[2]=r[2]+t[2],n}function ii(n,e){var t=n[0],s=n[1],i=n[2],r=e[0],o=e[1],a=e[2],h=Math.sqrt(t*t+s*s+i*i),g=Math.sqrt(r*r+o*o+a*a),d=h*g,_=d&&pn(n,e)/d;return Math.acos(Math.min(Math.max(_,-1),1))}function ri(n){return n[0]=0,n[1]=0,n[2]=0,n}function oi(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function ai(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}function li(n,e){var t=n[0],s=n[1],i=n[2],r=e[0],o=e[1],a=e[2];return Math.abs(t-r)<=Ie*Math.max(1,Math.abs(t),Math.abs(r))&&Math.abs(s-o)<=Ie*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(i-a)<=Ie*Math.max(1,Math.abs(i),Math.abs(a))}var ui=ln,ci=un,hi=cn,di=hn,fi=dn,pi=an,mi=fn,gi=function(){var n=on();return function(e,t,s,i,r,o){var a,h;for(t||(t=3),s||(s=0),i?h=Math.min(i*t+s,e.length):h=e.length,a=s;a<h;a+=t)n[0]=e[a],n[1]=e[a+1],n[2]=e[a+2],r(n,n,o),e[a]=n[0],e[a+1]=n[1],e[a+2]=n[2];return e}}();var Jr=Me.fromValues(0,1,0);var eo=Math.PI/3;var to=Math.PI/180;function pe(n,e){let t=n.components;if(e in t)return t[e];{let s={};return t[e]=s,s}}function bi(n,e){let t=n.components,s={};return t[e]=s,s}function mn(n,e,t,s){let i=t.name,r=pe(n,i);return r[e]=s,s}function gn(n,e,t){let s=t.name,i=pe(n,s),r=i[e];delete i[e],t.delete(r)}function bn(n,e){let t=e.name,s=pe(n,t),i=Object.values(s);bi(n,t);for(let r of i)e.delete(r)}var ot=Symbol("nextAvailableEntityId");function _n(n){return++n[ot]}var at=class{constructor(){this.components={},this[ot]=1,this.queue=[]}flush(){for(;this.queue.length>0;){let[e,...t]=this.queue.shift();switch(e){case"attach":{let[s,i,r]=t;mn(this,s,i,r)}break;case"detach":{let[s,i]=t;gn(this,s,i)}break;case"clear":{let[s]=t;bn(this,s)}break}}}createAndAttach(...e){let t=_n(this),s=[t];for(let i of e){let r=this.attach(t,i);s.push(r)}return s}create(){return _n(this)}destroy(e){for(let t of Object.values(this.components))e in t&&delete t[e]}exists(e){for(let t of Object.values(this.components))if(e in t)return!0;return!1}attach(e,t){let s=t.new();return this.queue.push(["attach",e,t,s]),s}attachImmediately(e,t){let s=t.new();return mn(this,e,t,s)}detach(e,t){this.queue.push(["detach",e,t])}detachImmediately(e,t){gn(this,e,t)}clear(e){this.queue.push(["clear",e])}clearImmediately(e){bn(this,e)}get(e,t){let s=t.name,i=pe(this,s);return i?null:i[e]||null}count(e){let t=e.name,s=pe(this,t);return s?0:Object.keys(s).length}reset(){this.components={},this[ot]=1,this.queue.length=0}};async function yn(){let n=oe.create({id:"display",mode:"fill"}),e=le.create({for:"display"}),t=new We,s=new at}yn();})();
//# sourceMappingURL=main.js.map
