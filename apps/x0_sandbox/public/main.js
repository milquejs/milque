(()=>{var Er=Object.create,Re=Object.defineProperty,br=Object.getPrototypeOf,wr=Object.prototype.hasOwnProperty,Mr=Object.getOwnPropertyNames,Sr=Object.getOwnPropertyDescriptor;var Tr=e=>Re(e,"__esModule",{value:!0});var Rr=(e,t)=>()=>(e&&(t=e(e=0)),t),fe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ye=(e,t)=>{for(var n in t)Re(e,n,{get:t[n],enumerable:!0})},Lr=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Mr(t))!wr.call(e,r)&&r!=="default"&&Re(e,r,{get:()=>t[r],enumerable:!(n=Sr(t,r))||n.enumerable});return e},Cr=e=>Lr(Tr(Re(e!=null?Er(br(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var un={};Ye(un,{basename:()=>mn,default:()=>oi,delimiter:()=>dn,dirname:()=>vn,extname:()=>xn,isAbsolute:()=>pt,join:()=>cn,normalize:()=>dt,relative:()=>fn,resolve:()=>De,sep:()=>pn});function hn(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];i==="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function De(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=hn(ft(e.split("/"),function(i){return!!i}),!t).join("/"),(t?"/":"")+e||"."}function dt(e){var t=pt(e),n=ai(e,-1)==="/";return e=hn(ft(e.split("/"),function(r){return!!r}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function pt(e){return e.charAt(0)==="/"}function cn(){var e=Array.prototype.slice.call(arguments,0);return dt(ft(e,function(t,n){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function fn(e,t){e=De(e).substr(1),t=De(t).substr(1);function n(u){for(var h=0;h<u.length&&u[h]==="";h++);for(var c=u.length-1;c>=0&&u[c]==="";c--);return h>c?[]:u.slice(h,c-h+1)}for(var r=n(e.split("/")),i=n(t.split("/")),s=Math.min(r.length,i.length),a=s,o=0;o<s;o++)if(r[o]!==i[o]){a=o;break}for(var l=[],o=a;o<r.length;o++)l.push("..");return l=l.concat(i.slice(a)),l.join("/")}function vn(e){var t=ct(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)}function mn(e,t){var n=ct(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function xn(e){return ct(e)[3]}function ft(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var si,ct,pn,dn,oi,ai,_n=Rr(()=>{si=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ct=function(e){return si.exec(e).slice(1)};pn="/",dn=":";oi={extname:xn,basename:mn,dirname:vn,sep:pn,delimiter:dn,relative:fn,join:cn,isAbsolute:pt,normalize:dt,resolve:De};ai="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}});var Fe=fe((ro,Pe)=>{var he=(_n(),un);he&&he.default?Pe.exports=he.default:he&&(Pe.exports=he);if(he)for(let e in he)Pe.exports[e]=he[e]});var Ee=fe((io,yn)=>{"use strict";var li=Fe(),se="\\\\/",An=`[^${se}]`,oe="\\.",ui="\\+",hi="\\?",He="\\/",ci="(?=.)",gn="[^/]",vt=`(?:${He}|$)`,En=`(?:^|${He})`,mt=`${oe}{1,2}${vt}`,fi=`(?!${oe})`,pi=`(?!${En}${mt})`,di=`(?!${oe}{0,1}${vt})`,vi=`(?!${mt})`,mi=`[^.${He}]`,xi=`${gn}*?`,bn={DOT_LITERAL:oe,PLUS_LITERAL:ui,QMARK_LITERAL:hi,SLASH_LITERAL:He,ONE_CHAR:ci,QMARK:gn,END_ANCHOR:vt,DOTS_SLASH:mt,NO_DOT:fi,NO_DOTS:pi,NO_DOT_SLASH:di,NO_DOTS_SLASH:vi,QMARK_NO_DOT:mi,STAR:xi,START_ANCHOR:En},_i={...bn,SLASH_LITERAL:`[${se}]`,QMARK:An,STAR:`${An}*?`,DOTS_SLASH:`${oe}{1,2}(?:[${se}]|$)`,NO_DOT:`(?!${oe})`,NO_DOTS:`(?!(?:^|[${se}])${oe}{1,2}(?:[${se}]|$))`,NO_DOT_SLASH:`(?!${oe}{0,1}(?:[${se}]|$))`,NO_DOTS_SLASH:`(?!${oe}{1,2}(?:[${se}]|$))`,QMARK_NO_DOT:`[^.${se}]`,START_ANCHOR:`(?:^|[${se}])`,END_ANCHOR:`(?:[${se}]|$)`},yi={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};yn.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:yi,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:li.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?_i:bn}}});var Ue=fe(X=>{"use strict";var Ai=Fe(),gi=!1,{REGEX_BACKSLASH:Ei,REGEX_REMOVE_BACKSLASH:bi,REGEX_SPECIAL_CHARS:wi,REGEX_SPECIAL_CHARS_GLOBAL:Mi}=Ee();X.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);X.hasRegexChars=e=>wi.test(e);X.isRegexChar=e=>e.length===1&&X.hasRegexChars(e);X.escapeRegex=e=>e.replace(Mi,"\\$1");X.toPosixSlashes=e=>e.replace(Ei,"/");X.removeBackslashes=e=>e.replace(bi,t=>t==="\\"?"":t);X.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};X.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:gi===!0||Ai.sep==="\\";X.escapeLast=(e,t,n)=>{let r=e.lastIndexOf(t,n);return r===-1?e:e[r-1]==="\\"?X.escapeLast(e,t,r-1):`${e.slice(0,r)}\\${e.slice(r)}`};X.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n};X.wrapOutput=(e,t={},n={})=>{let r=n.contains?"":"^",i=n.contains?"":"$",s=`${r}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var Nn=fe((ao,wn)=>{"use strict";var Mn=Ue(),{CHAR_ASTERISK:xt,CHAR_AT:Si,CHAR_BACKWARD_SLASH:be,CHAR_COMMA:Ti,CHAR_DOT:_t,CHAR_EXCLAMATION_MARK:yt,CHAR_FORWARD_SLASH:Sn,CHAR_LEFT_CURLY_BRACE:At,CHAR_LEFT_PARENTHESES:gt,CHAR_LEFT_SQUARE_BRACKET:Ri,CHAR_PLUS:Li,CHAR_QUESTION_MARK:Tn,CHAR_RIGHT_CURLY_BRACE:Ci,CHAR_RIGHT_PARENTHESES:Rn,CHAR_RIGHT_SQUARE_BRACKET:Ni}=Ee(),Ln=e=>e===Sn||e===be,Cn=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?Infinity:1)},Ii=(e,t)=>{let n=t||{},r=e.length-1,i=n.parts===!0||n.scanToEnd===!0,s=[],a=[],o=[],l=e,u=-1,h=0,c=0,p=!1,v=!1,d=!1,m=!1,f=!1,A=!1,L=!1,g=!1,M=!1,S=!1,T=0,C,E,b={value:"",depth:0,isGlob:!1},B=()=>u>=r,y=()=>l.charCodeAt(u+1),I=()=>(C=E,l.charCodeAt(++u));for(;u<r;){E=I();let k;if(E===be){L=b.backslashes=!0,E=I(),E===At&&(A=!0);continue}if(A===!0||E===At){for(T++;B()!==!0&&(E=I());){if(E===be){L=b.backslashes=!0,I();continue}if(E===At){T++;continue}if(A!==!0&&E===_t&&(E=I())===_t){if(p=b.isBrace=!0,d=b.isGlob=!0,S=!0,i===!0)continue;break}if(A!==!0&&E===Ti){if(p=b.isBrace=!0,d=b.isGlob=!0,S=!0,i===!0)continue;break}if(E===Ci&&(T--,T===0)){A=!1,p=b.isBrace=!0,S=!0;break}}if(i===!0)continue;break}if(E===Sn){if(s.push(u),a.push(b),b={value:"",depth:0,isGlob:!1},S===!0)continue;if(C===_t&&u===h+1){h+=2;continue}c=u+1;continue}if(n.noext!==!0&&(E===Li||E===Si||E===xt||E===Tn||E===yt)===!0&&y()===gt){if(d=b.isGlob=!0,m=b.isExtglob=!0,S=!0,E===yt&&u===h&&(M=!0),i===!0){for(;B()!==!0&&(E=I());){if(E===be){L=b.backslashes=!0,E=I();continue}if(E===Rn){d=b.isGlob=!0,S=!0;break}}continue}break}if(E===xt){if(C===xt&&(f=b.isGlobstar=!0),d=b.isGlob=!0,S=!0,i===!0)continue;break}if(E===Tn){if(d=b.isGlob=!0,S=!0,i===!0)continue;break}if(E===Ri){for(;B()!==!0&&(k=I());){if(k===be){L=b.backslashes=!0,I();continue}if(k===Ni){v=b.isBracket=!0,d=b.isGlob=!0,S=!0;break}}if(i===!0)continue;break}if(n.nonegate!==!0&&E===yt&&u===h){g=b.negated=!0,h++;continue}if(n.noparen!==!0&&E===gt){if(d=b.isGlob=!0,i===!0){for(;B()!==!0&&(E=I());){if(E===gt){L=b.backslashes=!0,E=I();continue}if(E===Rn){S=!0;break}}continue}break}if(d===!0){if(S=!0,i===!0)continue;break}}n.noext===!0&&(m=!1,d=!1);let N=l,O="",x="";h>0&&(O=l.slice(0,h),l=l.slice(h),c-=h),N&&d===!0&&c>0?(N=l.slice(0,c),x=l.slice(c)):d===!0?(N="",x=l):N=l,N&&N!==""&&N!=="/"&&N!==l&&Ln(N.charCodeAt(N.length-1))&&(N=N.slice(0,-1)),n.unescape===!0&&(x&&(x=Mn.removeBackslashes(x)),N&&L===!0&&(N=Mn.removeBackslashes(N)));let _={prefix:O,input:e,start:h,base:N,glob:x,isBrace:p,isBracket:v,isGlob:d,isExtglob:m,isGlobstar:f,negated:g,negatedExtglob:M};if(n.tokens===!0&&(_.maxDepth=0,Ln(E)||a.push(b),_.tokens=a),n.parts===!0||n.tokens===!0){let k;for(let F=0;F<s.length;F++){let j=k?k+1:h,K=s[F],Y=e.slice(j,K);n.tokens&&(F===0&&h!==0?(a[F].isPrefix=!0,a[F].value=O):a[F].value=Y,Cn(a[F]),_.maxDepth+=a[F].depth),(F!==0||Y!=="")&&o.push(Y),k=K}if(k&&k+1<e.length){let F=e.slice(k+1);o.push(F),n.tokens&&(a[a.length-1].value=F,Cn(a[a.length-1]),_.maxDepth+=a[a.length-1].depth)}_.slashes=s,_.parts=o}return _};wn.exports=Ii});var Dn=fe((oo,In)=>{"use strict";var ze=Ee(),Z=Ue(),{MAX_LENGTH:ke,POSIX_REGEX_SOURCE:Oi,REGEX_NON_SPECIAL_CHARS:Bi,REGEX_SPECIAL_CHARS_BACKREF:Di,REPLACEMENTS:On}=ze,Pi=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let n=`[${e.join("-")}]`;try{new RegExp(n)}catch(r){return e.map(i=>Z.escapeRegex(i)).join("..")}return n},me=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,Bn=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=On[e]||e;let n={...t},r=typeof n.maxLength=="number"?Math.min(ke,n.maxLength):ke,i=e.length;if(i>r)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${r}`);let s={type:"bos",value:"",output:n.prepend||""},a=[s],o=n.capture?"":"?:",l=Z.isWindows(t),u=ze.globChars(l),h=ze.extglobChars(u),{DOT_LITERAL:c,PLUS_LITERAL:p,SLASH_LITERAL:v,ONE_CHAR:d,DOTS_SLASH:m,NO_DOT:f,NO_DOT_SLASH:A,NO_DOTS_SLASH:L,QMARK:g,QMARK_NO_DOT:M,STAR:S,START_ANCHOR:T}=u,C=R=>`(${o}(?:(?!${T}${R.dot?m:c}).)*?)`,E=n.dot?"":f,b=n.dot?g:M,B=n.bash===!0?C(n):S;n.capture&&(B=`(${B})`),typeof n.noext=="boolean"&&(n.noextglob=n.noext);let y={input:e,index:-1,start:0,dot:n.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=Z.removePrefix(e,y),i=e.length;let I=[],N=[],O=[],x=s,_,k=()=>y.index===i-1,F=y.peek=(R=1)=>e[y.index+R],j=y.advance=()=>e[++y.index]||"",K=()=>e.slice(y.index+1),Y=(R="",U=0)=>{y.consumed+=R,y.index+=U},te=R=>{y.output+=R.output!=null?R.output:R.value,Y(R.value)},_e=()=>{let R=1;for(;F()==="!"&&(F(2)!=="("||F(3)==="?");)j(),y.start++,R++;return R%2==0?!1:(y.negated=!0,y.start++,!0)},ue=R=>{y[R]++,O.push(R)},ne=R=>{y[R]--,O.pop()},D=R=>{if(x.type==="globstar"){let U=y.braces>0&&(R.type==="comma"||R.type==="brace"),w=R.extglob===!0||I.length&&(R.type==="pipe"||R.type==="paren");R.type!=="slash"&&R.type!=="paren"&&!U&&!w&&(y.output=y.output.slice(0,-x.output.length),x.type="star",x.value="*",x.output=B,y.output+=x.output)}if(I.length&&R.type!=="paren"&&(I[I.length-1].inner+=R.value),(R.value||R.output)&&te(R),x&&x.type==="text"&&R.type==="text"){x.value+=R.value,x.output=(x.output||"")+R.value;return}R.prev=x,a.push(R),x=R},ce=(R,U)=>{let w={...h[U],conditions:1,inner:""};w.prev=x,w.parens=y.parens,w.output=y.output;let P=(n.capture?"(":"")+w.open;ue("parens"),D({type:R,value:U,output:y.output?"":d}),D({type:"paren",extglob:!0,value:j(),output:P}),I.push(w)},Se=R=>{let U=R.close+(n.capture?")":""),w;if(R.type==="negate"){let P=B;R.inner&&R.inner.length>1&&R.inner.includes("/")&&(P=C(n)),(P!==B||k()||/^\)+$/.test(K()))&&(U=R.close=`)$))${P}`),R.inner.includes("*")&&(w=K())&&/^\.[^\\/.]+$/.test(w)&&(U=R.close=`)${w})${P})`),R.prev.type==="bos"&&(y.negatedExtglob=!0)}D({type:"paren",extglob:!0,value:_,output:U}),ne("parens")};if(n.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let R=!1,U=e.replace(Di,(w,P,$,W,V,Ke)=>W==="\\"?(R=!0,w):W==="?"?P?P+W+(V?g.repeat(V.length):""):Ke===0?b+(V?g.repeat(V.length):""):g.repeat($.length):W==="."?c.repeat($.length):W==="*"?P?P+W+(V?B:""):B:P?w:`\\${w}`);return R===!0&&(n.unescape===!0?U=U.replace(/\\/g,""):U=U.replace(/\\+/g,w=>w.length%2==0?"\\\\":w?"\\":"")),U===e&&n.contains===!0?(y.output=e,y):(y.output=Z.wrapOutput(U,y,t),y)}for(;!k();){if(_=j(),_==="\0")continue;if(_==="\\"){let w=F();if(w==="/"&&n.bash!==!0||w==="."||w===";")continue;if(!w){_+="\\",D({type:"text",value:_});continue}let P=/^\\+/.exec(K()),$=0;if(P&&P[0].length>2&&($=P[0].length,y.index+=$,$%2!=0&&(_+="\\")),n.unescape===!0?_=j():_+=j(),y.brackets===0){D({type:"text",value:_});continue}}if(y.brackets>0&&(_!=="]"||x.value==="["||x.value==="[^")){if(n.posix!==!1&&_===":"){let w=x.value.slice(1);if(w.includes("[")&&(x.posix=!0,w.includes(":"))){let P=x.value.lastIndexOf("["),$=x.value.slice(0,P),W=x.value.slice(P+2),V=Oi[W];if(V){x.value=$+V,y.backtrack=!0,j(),!s.output&&a.indexOf(x)===1&&(s.output=d);continue}}}(_==="["&&F()!==":"||_==="-"&&F()==="]")&&(_=`\\${_}`),_==="]"&&(x.value==="["||x.value==="[^")&&(_=`\\${_}`),n.posix===!0&&_==="!"&&x.value==="["&&(_="^"),x.value+=_,te({value:_});continue}if(y.quotes===1&&_!=='"'){_=Z.escapeRegex(_),x.value+=_,te({value:_});continue}if(_==='"'){y.quotes=y.quotes===1?0:1,n.keepQuotes===!0&&D({type:"text",value:_});continue}if(_==="("){ue("parens"),D({type:"paren",value:_});continue}if(_===")"){if(y.parens===0&&n.strictBrackets===!0)throw new SyntaxError(me("opening","("));let w=I[I.length-1];if(w&&y.parens===w.parens+1){Se(I.pop());continue}D({type:"paren",value:_,output:y.parens?")":"\\)"}),ne("parens");continue}if(_==="["){if(n.nobracket===!0||!K().includes("]")){if(n.nobracket!==!0&&n.strictBrackets===!0)throw new SyntaxError(me("closing","]"));_=`\\${_}`}else ue("brackets");D({type:"bracket",value:_});continue}if(_==="]"){if(n.nobracket===!0||x&&x.type==="bracket"&&x.value.length===1){D({type:"text",value:_,output:`\\${_}`});continue}if(y.brackets===0){if(n.strictBrackets===!0)throw new SyntaxError(me("opening","["));D({type:"text",value:_,output:`\\${_}`});continue}ne("brackets");let w=x.value.slice(1);if(x.posix!==!0&&w[0]==="^"&&!w.includes("/")&&(_=`/${_}`),x.value+=_,te({value:_}),n.literalBrackets===!1||Z.hasRegexChars(w))continue;let P=Z.escapeRegex(x.value);if(y.output=y.output.slice(0,-x.value.length),n.literalBrackets===!0){y.output+=P,x.value=P;continue}x.value=`(${o}${P}|${x.value})`,y.output+=x.value;continue}if(_==="{"&&n.nobrace!==!0){ue("braces");let w={type:"brace",value:_,output:"(",outputIndex:y.output.length,tokensIndex:y.tokens.length};N.push(w),D(w);continue}if(_==="}"){let w=N[N.length-1];if(n.nobrace===!0||!w){D({type:"text",value:_,output:_});continue}let P=")";if(w.dots===!0){let $=a.slice(),W=[];for(let V=$.length-1;V>=0&&(a.pop(),$[V].type!=="brace");V--)$[V].type!=="dots"&&W.unshift($[V].value);P=Pi(W,n),y.backtrack=!0}if(w.comma!==!0&&w.dots!==!0){let $=y.output.slice(0,w.outputIndex),W=y.tokens.slice(w.tokensIndex);w.value=w.output="\\{",_=P="\\}",y.output=$;for(let V of W)y.output+=V.output||V.value}D({type:"brace",value:_,output:P}),ne("braces"),N.pop();continue}if(_==="|"){I.length>0&&I[I.length-1].conditions++,D({type:"text",value:_});continue}if(_===","){let w=_,P=N[N.length-1];P&&O[O.length-1]==="braces"&&(P.comma=!0,w="|"),D({type:"comma",value:_,output:w});continue}if(_==="/"){if(x.type==="dot"&&y.index===y.start+1){y.start=y.index+1,y.consumed="",y.output="",a.pop(),x=s;continue}D({type:"slash",value:_,output:v});continue}if(_==="."){if(y.braces>0&&x.type==="dot"){x.value==="."&&(x.output=c);let w=N[N.length-1];x.type="dots",x.output+=_,x.value+=_,w.dots=!0;continue}if(y.braces+y.parens===0&&x.type!=="bos"&&x.type!=="slash"){D({type:"text",value:_,output:c});continue}D({type:"dot",value:_,output:c});continue}if(_==="?"){if(!(x&&x.value==="(")&&n.noextglob!==!0&&F()==="("&&F(2)!=="?"){ce("qmark",_);continue}if(x&&x.type==="paren"){let P=F(),$=_;if(P==="<"&&!Z.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(x.value==="("&&!/[!=<:]/.test(P)||P==="<"&&!/<([!=]|\w+>)/.test(K()))&&($=`\\${_}`),D({type:"text",value:_,output:$});continue}if(n.dot!==!0&&(x.type==="slash"||x.type==="bos")){D({type:"qmark",value:_,output:M});continue}D({type:"qmark",value:_,output:g});continue}if(_==="!"){if(n.noextglob!==!0&&F()==="("&&(F(2)!=="?"||!/[!=<:]/.test(F(3)))){ce("negate",_);continue}if(n.nonegate!==!0&&y.index===0){_e();continue}}if(_==="+"){if(n.noextglob!==!0&&F()==="("&&F(2)!=="?"){ce("plus",_);continue}if(x&&x.value==="("||n.regex===!1){D({type:"plus",value:_,output:p});continue}if(x&&(x.type==="bracket"||x.type==="paren"||x.type==="brace")||y.parens>0){D({type:"plus",value:_});continue}D({type:"plus",value:p});continue}if(_==="@"){if(n.noextglob!==!0&&F()==="("&&F(2)!=="?"){D({type:"at",extglob:!0,value:_,output:""});continue}D({type:"text",value:_});continue}if(_!=="*"){(_==="$"||_==="^")&&(_=`\\${_}`);let w=Bi.exec(K());w&&(_+=w[0],y.index+=w[0].length),D({type:"text",value:_});continue}if(x&&(x.type==="globstar"||x.star===!0)){x.type="star",x.star=!0,x.value+=_,x.output=B,y.backtrack=!0,y.globstar=!0,Y(_);continue}let R=K();if(n.noextglob!==!0&&/^\([^?]/.test(R)){ce("star",_);continue}if(x.type==="star"){if(n.noglobstar===!0){Y(_);continue}let w=x.prev,P=w.prev,$=w.type==="slash"||w.type==="bos",W=P&&(P.type==="star"||P.type==="globstar");if(n.bash===!0&&(!$||R[0]&&R[0]!=="/")){D({type:"star",value:_,output:""});continue}let V=y.braces>0&&(w.type==="comma"||w.type==="brace"),Ke=I.length&&(w.type==="pipe"||w.type==="paren");if(!$&&w.type!=="paren"&&!V&&!Ke){D({type:"star",value:_,output:""});continue}for(;R.slice(0,3)==="/**";){let Te=e[y.index+4];if(Te&&Te!=="/")break;R=R.slice(3),Y("/**",3)}if(w.type==="bos"&&k()){x.type="globstar",x.value+=_,x.output=C(n),y.output=x.output,y.globstar=!0,Y(_);continue}if(w.type==="slash"&&w.prev.type!=="bos"&&!W&&k()){y.output=y.output.slice(0,-(w.output+x.output).length),w.output=`(?:${w.output}`,x.type="globstar",x.output=C(n)+(n.strictSlashes?")":"|$)"),x.value+=_,y.globstar=!0,y.output+=w.output+x.output,Y(_);continue}if(w.type==="slash"&&w.prev.type!=="bos"&&R[0]==="/"){let Te=R[1]!==void 0?"|$":"";y.output=y.output.slice(0,-(w.output+x.output).length),w.output=`(?:${w.output}`,x.type="globstar",x.output=`${C(n)}${v}|${v}${Te})`,x.value+=_,y.output+=w.output+x.output,y.globstar=!0,Y(_+j()),D({type:"slash",value:"/",output:""});continue}if(w.type==="bos"&&R[0]==="/"){x.type="globstar",x.value+=_,x.output=`(?:^|${v}|${C(n)}${v})`,y.output=x.output,y.globstar=!0,Y(_+j()),D({type:"slash",value:"/",output:""});continue}y.output=y.output.slice(0,-x.output.length),x.type="globstar",x.output=C(n),x.value+=_,y.output+=x.output,y.globstar=!0,Y(_);continue}let U={type:"star",value:_,output:B};if(n.bash===!0){U.output=".*?",(x.type==="bos"||x.type==="slash")&&(U.output=E+U.output),D(U);continue}if(x&&(x.type==="bracket"||x.type==="paren")&&n.regex===!0){U.output=_,D(U);continue}(y.index===y.start||x.type==="slash"||x.type==="dot")&&(x.type==="dot"?(y.output+=A,x.output+=A):n.dot===!0?(y.output+=L,x.output+=L):(y.output+=E,x.output+=E),F()!=="*"&&(y.output+=d,x.output+=d)),D(U)}for(;y.brackets>0;){if(n.strictBrackets===!0)throw new SyntaxError(me("closing","]"));y.output=Z.escapeLast(y.output,"["),ne("brackets")}for(;y.parens>0;){if(n.strictBrackets===!0)throw new SyntaxError(me("closing",")"));y.output=Z.escapeLast(y.output,"("),ne("parens")}for(;y.braces>0;){if(n.strictBrackets===!0)throw new SyntaxError(me("closing","}"));y.output=Z.escapeLast(y.output,"{"),ne("braces")}if(n.strictSlashes!==!0&&(x.type==="star"||x.type==="bracket")&&D({type:"maybe_slash",value:"",output:`${v}?`}),y.backtrack===!0){y.output="";for(let R of y.tokens)y.output+=R.output!=null?R.output:R.value,R.suffix&&(y.output+=R.suffix)}return y};Bn.fastpaths=(e,t)=>{let n={...t},r=typeof n.maxLength=="number"?Math.min(ke,n.maxLength):ke,i=e.length;if(i>r)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${r}`);e=On[e]||e;let s=Z.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:l,DOTS_SLASH:u,NO_DOT:h,NO_DOTS:c,NO_DOTS_SLASH:p,STAR:v,START_ANCHOR:d}=ze.globChars(s),m=n.dot?c:h,f=n.dot?p:h,A=n.capture?"":"?:",L={negated:!1,prefix:""},g=n.bash===!0?".*?":v;n.capture&&(g=`(${g})`);let M=E=>E.noglobstar===!0?g:`(${A}(?:(?!${d}${E.dot?u:a}).)*?)`,S=E=>{switch(E){case"*":return`${m}${l}${g}`;case".*":return`${a}${l}${g}`;case"*.*":return`${m}${g}${a}${l}${g}`;case"*/*":return`${m}${g}${o}${l}${f}${g}`;case"**":return m+M(n);case"**/*":return`(?:${m}${M(n)}${o})?${f}${l}${g}`;case"**/*.*":return`(?:${m}${M(n)}${o})?${f}${g}${a}${l}${g}`;case"**/.*":return`(?:${m}${M(n)}${o})?${a}${l}${g}`;default:{let b=/^(.*?)\.(\w+)$/.exec(E);if(!b)return;let B=S(b[1]);return B?B+a+b[2]:void 0}}},T=Z.removePrefix(e,L),C=S(T);return C&&n.strictSlashes!==!0&&(C+=`${o}?`),C};In.exports=Bn});var Fn=fe((lo,Pn)=>{"use strict";var Fi=Fe(),Hi=Nn(),Et=Dn(),bt=Ue(),Ui=Ee(),zi=e=>e&&typeof e=="object"&&!Array.isArray(e),G=(e,t,n=!1)=>{if(Array.isArray(e)){let h=e.map(p=>G(p,t,n));return p=>{for(let v of h){let d=v(p);if(d)return d}return!1}}let r=zi(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!r)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=bt.isWindows(t),a=r?G.compileRe(e,t):G.makeRe(e,t,!1,!0),o=a.state;delete a.state;let l=()=>!1;if(i.ignore){let h={...t,ignore:null,onMatch:null,onResult:null};l=G(i.ignore,h,n)}let u=(h,c=!1)=>{let{isMatch:p,match:v,output:d}=G.test(h,a,t,{glob:e,posix:s}),m={glob:e,state:o,regex:a,posix:s,input:h,output:d,match:v,isMatch:p};return typeof i.onResult=="function"&&i.onResult(m),p===!1?(m.isMatch=!1,c?m:!1):l(h)?(typeof i.onIgnore=="function"&&i.onIgnore(m),m.isMatch=!1,c?m:!1):(typeof i.onMatch=="function"&&i.onMatch(m),c?m:!0)};return n&&(u.state=o),u};G.test=(e,t,n,{glob:r,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=n||{},a=s.format||(i?bt.toPosixSlashes:null),o=e===r,l=o&&a?a(e):e;return o===!1&&(l=a?a(e):e,o=l===r),(o===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?o=G.matchBase(e,t,n,i):o=t.exec(l)),{isMatch:Boolean(o),match:o,output:l}};G.matchBase=(e,t,n,r=bt.isWindows(n))=>(t instanceof RegExp?t:G.makeRe(t,n)).test(Fi.basename(e));G.isMatch=(e,t,n)=>G(t,n)(e);G.parse=(e,t)=>Array.isArray(e)?e.map(n=>G.parse(n,t)):Et(e,{...t,fastpaths:!1});G.scan=(e,t)=>Hi(e,t);G.compileRe=(e,t,n=!1,r=!1)=>{if(n===!0)return e.output;let i=t||{},s=i.contains?"":"^",a=i.contains?"":"$",o=`${s}(?:${e.output})${a}`;e&&e.negated===!0&&(o=`^(?!${o}).*$`);let l=G.toRegex(o,t);return r===!0&&(l.state=e),l};G.makeRe=(e,t={},n=!1,r=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=Et.fastpaths(e,t)),i.output||(i=Et(e,t)),G.compileRe(i,t,n,r)};G.toRegex=(e,t)=>{try{let n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(n){if(t&&t.debug===!0)throw n;return/$^/}};G.constants=Ui;Pn.exports=G});var Un=fe((uo,Hn)=>{"use strict";Hn.exports=Fn()});var Nr=`<div class="container">
    <label class="hidden" id="title">display-port</label>
    <label class="hidden" id="fps">00</label>
    <label class="hidden" id="dimension">0x0</label>
    <div class="content">
        <canvas>
            Oh no! Your browser does not support canvas.
        </canvas>
        <slot id="inner"></slot>
    </div>
    <slot name="frame"></slot>
</div>`,Ir=`:host {
    display: inline-block;
    color: #555555;
}

.container {
    display: flex;
    position: relative;
    width: 100%;
    height: 100%;
}

.content {
    position: relative;
    margin: auto;
}

.content > *:not(canvas) {
    width: 100%;
    height: 100%;
}

canvas {
    background: #000000;
    image-rendering: pixelated;
}

label {
    position: absolute;
    font-family: monospace;
    color: currentColor;
}

#inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
}

#title {
    left: 0.5rem;
    top: 0.5rem;
}

#fps {
    right: 0.5rem;
    top: 0.5rem;
}

#dimension {
    left: 0.5rem;
    bottom: 0.5rem;
}

.hidden {
    display: none;
}

:host([debug]) .container {
    outline: 6px dashed rgba(0, 0, 0, 0.1);
    outline-offset: -4px;
    background-color: rgba(0, 0, 0, 0.1);
}

:host([mode="noscale"]) canvas {
    margin: 0;
    top: 0;
    left: 0;
}

:host([mode="stretch"]) canvas,
:host([mode="scale"]) canvas {
    width: 100%;
    height: 100%;
}

:host([mode="fit"]),
:host([mode="scale"]),
:host([mode="center"]),
:host([mode="stretch"]),
:host([mode="fill"]) {
    width: 100%;
    height: 100%;
}

:host([full]) {
    width: 100vw !important;
    height: 100vh !important;
}

:host([disabled]) {
    display: none;
}

slot {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
}

::slotted(*) {
    pointer-events: auto;
}
`,Bt="noscale",qe="fit",Dt="scale",Pt="fill",Ft="stretch",Or=300,Br=150,Dr=qe,Pr=200,Ht=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Nr,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=Ir,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("display-port",this)}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(t){this.setAttribute("mode",t)}get debug(){return this._debug}set debug(t){this.toggleAttribute("debug",t)}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get width(){return this._width}set width(t){this.setAttribute("width",String(t))}get height(){return this._height}set height(t){this.setAttribute("height",String(t))}get onframe(){return this._onframe}set onframe(t){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=t,this._onframe&&this.addEventListener("frame",t)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=this.shadowRoot.querySelector("canvas"),this._contentElement=this.shadowRoot.querySelector(".content"),this._innerElement=this.shadowRoot.querySelector("#inner"),this._titleElement=this.shadowRoot.querySelector("#title"),this._fpsElement=this.shadowRoot.querySelector("#fps"),this._dimensionElement=this.shadowRoot.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=Or,this._height=Br,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){de(this,"mode"),de(this,"debug"),de(this,"disabled"),de(this,"width"),de(this,"height"),de(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",Dr),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.updateCanvasSize(!0),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(t,n,r){switch(t){case"debug":this._debug=r!==null;break;case"disabled":this._disabled=r!==null;break;case"width":this._width=Number(r);break;case"height":this._height=Number(r);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+r+"}}").bind(this);break}switch(t){case"disabled":r?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",r),this._fpsElement.classList.toggle("hidden",r),this._dimensionElement.classList.toggle("hidden",r);break}}getContext(t="2d",n=void 0){return this._canvasElement.getContext(t,n)}pause(){cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=requestAnimationFrame(this.update)}update(t){this._animationRequestHandle=requestAnimationFrame(this.update),this.updateCanvasSize(!1);let n=t-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=t,this._debug){let r=n<=0?"--":String(Math.round(1e3/n)).padStart(2,"0");if(this._fpsElement.textContent!==r&&(this._fpsElement.textContent=r),this.mode===Bt){let s=`${this._width}x${this._height}`;this._dimensionElement.textContent!==s&&(this._dimensionElement.textContent=s)}else{let s=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==s&&(this._dimensionElement.textContent=s)}}this.dispatchEvent(new CustomEvent("frame",{detail:{now:t,prevTime:this._prevAnimationFrameTime,deltaTime:n,canvas:this._canvasElement},bubbles:!1,composed:!0}))}onDelayCanvasResize(){this._resizeTimeoutHandle=0,this.updateCanvasSize(!0)}delayCanvasResize(t,n){(t!==this._resizeCanvasWidth||n!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=t,this._resizeCanvasHeight=n,this._resizeTimeoutHandle&&clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=setTimeout(this.onDelayCanvasResize,Pr))}updateCanvasSize(t=!0){let n=this.shadowRoot.host.getBoundingClientRect(),r=n.width,i=n.height,s=this._canvasElement,a=this._width,o=this._height,l=this.mode;if(l===Ft||l===Pt)a=r,o=i;else if(l!==Bt&&(r<a||i<o||l===qe||l==Dt)){let h=r/a,c=i/o;h<c?(a=r,o=o*h):(a=a*c,o=i)}if(a=Math.floor(a),o=Math.floor(o),typeof t=="undefined"&&(t=s.clientWidth!==a||s.clientHeight!==o),!t){this.delayCanvasResize(a,o);return}let u=Math.min(a/this._width,o/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${u}em`,t){l===Dt?(s.width=this._width,s.height=this._height):l!==Ft&&(s.width=a,s.height=o);let h=this._contentElement.style;h.width=`${a}px`,h.height=`${o}px`,(l===qe||l===Pt)&&(this._width=a,this._height=o),this.dispatchEvent(new CustomEvent("resize",{detail:{width:a,height:o},bubbles:!1,composed:!0}))}}};Ht.define();function de(e,t){if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];delete e[t],e[t]=n}}var We=class{get polling(){return performance.now()-this._lastPollingTime<1e3}get value(){return 0}get size(){return this._size}constructor(t){this._size=t,this._lastPollingTime=Number.MIN_SAFE_INTEGER}resize(t){this._size=t}getState(t){throw new Error("Missing implementation.")}onUpdate(t,n,r){throw new Error("Missing implementation.")}onStatus(t,n){throw new Error("Missing implementation.")}onPoll(t){this._lastPollingTime=t}onBind(t,n={}){t>=this._size&&this.resize(t+1)}onUnbind(){this.resize(0)}},ye=class extends We{static createAxisBindingState(){return{value:0,delta:0,inverted:!1}}get delta(){return this._delta}get value(){return this._value}constructor(t=0){super(t);let n=new Array;for(let r=0;r<t;++r)n.push(this.constructor.createAxisBindingState());this._state=n,this._value=0,this._delta=0}resize(t){let n=this._state,r=n.length,i;if(t<=r)i=n.slice(0,t);else{i=n;for(let s=r;s<t;++s)i.push(this.constructor.createAxisBindingState())}this._state=i,super.resize(t)}getState(t){return this._state[t].value}onPoll(t){let n=this._state,r=0,i=0,s=n.length;for(let a=0;a<s;++a){let o=n[a];r+=o.value*(o.inverted?-1:1),i+=o.delta,n[a].delta=0}this._value=r,this._delta=i,super.onPoll(t)}onUpdate(t,n,r){typeof n=="undefined"?this.onAxisChange(t,r):this.onAxisMove(t,n,r)}onStatus(t,n){this.onAxisStatus(t,n)}onBind(t,n={}){super.onBind(t,n);let{inverted:r=!1}=n,i=this._state;i[t].inverted=r}onAxisMove(t,n,r){let i=this._state[t];i.value=n,i.delta+=r}onAxisChange(t,n){let r=this._state[t];r.value+=n,r.delta+=n}onAxisStatus(t,n){let r=this._state[t],i=r.value;r.value=n,r.delta=n-i}},Fr=241,Ut=254,Hr=239,pe=1,Xe=2,Ze=4,Qe=8,Je=16,Le=class extends We{get pressed(){return this._pressed}get repeated(){return this._repeated}get released(){return this._released}get down(){return this._down}get value(){return this._value}constructor(t=0){super(t);this._state=new Uint8Array(t),this._value=0,this._down=!1,this._pressed=!1,this._repeated=!1,this._released=!1}resize(t){let n=this._state,r=n.length,i;t<=r?i=n.slice(0,t):(i=new Uint8Array(t),i.set(n)),this._state=i,super.resize(t)}getState(t){let n=this._state[t],r=n&Je?-1:1;return(n&pe?1:0)*r}onPoll(t){let n=this._state,r=0,i=0,s=0,a=0,o=0,l=n.length;for(let u=0;u<l;++u){let h=n[u],c=h&pe,p=h&Je;i|=c,s|=h&Xe,a|=h&Ze,o|=h&Qe,r+=(c?1:0)*(p?-1:1),n[u]&=Fr}this._value=r,this._down=i!==0,this._pressed=s!==0,this._repeated=a!==0,this._released=o!==0,super.onPoll(t)}onUpdate(t,n,r){r>0?this.onButtonPressed(t):this.onButtonReleased(t)}onStatus(t,n){this.onButtonStatus(t,n!==0)}onBind(t,n={}){super.onBind(t,n);let{inverted:r=!1}=n,i=this._state;r?i[t]|=Je:i[t]&=Hr}onButtonPressed(t){let n=this._state,r=n[t];r&pe||(r|=Xe,r|=pe),r|=Ze,n[t]=r}onButtonReleased(t){let n=this._state,r=n[t];r&pe&&(r|=Qe,r&=Ut),n[t]=r}onButtonStatus(t,n){let r=this._state,i=r[t],s=Boolean(i&pe);n?i|=pe:i&=Ut,s&&!n&&(i|=Qe),!s&&n&&(i|=Xe,i|=Ze),r[t]=i}},et=class{static isAxis(t){return!1}static isButton(t){return!1}constructor(t,n){if(!n)throw new Error(`Missing event target for device ${t}.`);this.name=t,this.eventTarget=n,this.listeners={input:[]}}setEventTarget(t){if(!t)throw new Error(`Missing event target for device ${this.name}.`);this.eventTarget=t}destroy(){let t=this.listeners;for(let n in t)t[n].length=0}addEventListener(t,n){let r=this.listeners;t in r?r[t].push(n):r[t]=[n]}removeEventListener(t,n){let r=this.listeners;if(t in r){let i=r[t],s=i.indexOf(n);s>=0&&i.splice(s,1)}}dispatchInputEvent(t){let n=0;for(let r of this.listeners.input)n|=r(t);return Boolean(n)}},zt=class extends et{static isAxis(t){return!1}static isButton(t){return!0}constructor(t,n,r={}){super(t,n);let{ignoreRepeat:i=!0}=r;this.ignoreRepeat=i,this._eventObject={target:n,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),n.addEventListener("keydown",this.onKeyDown),n.addEventListener("keyup",this.onKeyUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let t=this.eventTarget;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(t){if(t.repeat&&this.ignoreRepeat)return t.preventDefault(),t.stopPropagation(),!1;let n=this._eventObject;if(n.code=t.code,n.event="pressed",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n))return t.preventDefault(),t.stopPropagation(),!1}onKeyUp(t){let n=this._eventObject;if(n.code=t.code,n.event="released",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n))return t.preventDefault(),t.stopPropagation(),!1}},tt=10,nt=100,kt=class extends et{static isAxis(t){return t==="PosX"||t==="PosY"||t==="WheelX"||t==="WheelY"||t==="WheelZ"}static isButton(t){return!this.isAxis(t)}constructor(t,n,r={}){super(t,n);let{eventsOnFocus:i=!0}=r;this.eventsOnFocus=i,this.canvasTarget=this.getCanvasFromEventTarget(n),this._downHasFocus=!1,this._eventObject={target:n,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:n,device:t,code:"",event:"move",value:0,movement:0},this._wheelObject={target:n,device:t,code:"",event:"wheel",movement:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("contextmenu",this.onContextMenu),n.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),this.canvasTarget=this.getCanvasFromEventTarget(t),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let t=this.eventTarget;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("contextmenu",this.onContextMenu),t.removeEventListener("wheel",this.onWheel),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(t=!0){t?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(t){this._downHasFocus=!0;let n=this._eventObject;if(n.code="Button"+t.button,n.event="pressed",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n)&&document.activeElement===this.eventTarget)return t.preventDefault(),t.stopPropagation(),!1}onContextMenu(t){return t.preventDefault(),t.stopPropagation(),!1}onWheel(t){let n,r,i;switch(t.deltaMode){case WheelEvent.DOM_DELTA_LINE:n=t.deltaX*tt,r=t.deltaY*tt,i=t.deltaZ*tt;break;case WheelEvent.DOM_DELTA_PAGE:n=t.deltaX*nt,r=t.deltaY*nt,i=t.deltaZ*nt;break;case WheelEvent.DOM_DELTA_PIXEL:default:n=t.deltaX,r=t.deltaY,i=t.deltaZ;break}let s=0,a=this._wheelObject;if(a.code="WheelX",a.movement=n,s|=this.dispatchInputEvent(a),a.code="WheelY",a.movement=r,s|=this.dispatchInputEvent(a),a.code="WheelZ",a.movement=i,s|=this.dispatchInputEvent(a),s)return t.preventDefault(),t.stopPropagation(),!1}onMouseUp(t){if(!this._downHasFocus)return;this._downHasFocus=!1;let n=this._eventObject;if(n.code="Button"+t.button,n.event="released",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n))return t.preventDefault(),t.stopPropagation(),!1}onMouseMove(t){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;let n=this.canvasTarget,{clientWidth:r,clientHeight:i}=n,s=n.getBoundingClientRect(),a=t.movementX/r,o=t.movementY/i,l=(t.clientX-s.left)/r,u=(t.clientY-s.top)/i,h=this._positionObject;h.code="PosX",h.value=l,h.movement=a,this.dispatchInputEvent(h),h.code="PosY",h.value=u,h.movement=o,this.dispatchInputEvent(h)}getCanvasFromEventTarget(t){return t instanceof HTMLCanvasElement?t:t.canvas||t.querySelector("canvas")||t.shadowRoot&&t.shadowRoot.querySelector("canvas")||t}},Ur=`<kbd>
    <span id="name"><slot></slot></span>
    <span id="value" class="hidden"></span>
</kbd>
`,zr=`kbd {
    position: relative;
    display: inline-block;
    border-radius: 3px;
    border: 1px solid #888888;
    font-size: 0.85em;
    font-weight: 700;
    text-rendering: optimizeLegibility;
    line-height: 12px;
    height: 14px;
    padding: 2px 4px;
    color: #444444;
    background-color: #eeeeee;
    box-shadow: inset 0 -3px 0 #aaaaaa;
    overflow: hidden;
}

kbd:empty::after {
    content: "<?>";
    opacity: 0.6;
}

.disabled {
    opacity: 0.6;
    box-shadow: none;
    background-color: #aaaaaa;
}

.hidden {
    display: none;
}

#value {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    font-size: 0.85em;
    padding: 0 4px;
    padding-top: 2px;
    color: #cccccc;
    background-color: #333333;
    box-shadow: inset 0 3px 0 #222222;
}
`,rt=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Ur,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=zr,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-code",this)}static get observedAttributes(){return["name","value","disabled"]}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get value(){return this._value}set value(t){this.setAttribute("value",t)}get name(){return this._name}set name(t){this.setAttribute("name",t)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._name="",this._value="",this._disabled=!1,this._kbdElement=this.shadowRoot.querySelector("kbd"),this._nameElement=this.shadowRoot.querySelector("#name"),this._valueElement=this.shadowRoot.querySelector("#value")}attributeChangedCallback(t,n,r){switch(t){case"name":this._name=r,this._nameElement.textContent=r;break;case"value":this._value=r,r!==null?(this._valueElement.classList.toggle("hidden",!1),this._valueElement.textContent=r,this._kbdElement.style.paddingRight=`${this._valueElement.clientWidth+4}px`):this._valueElement.classList.toggle("hidden",!0);break;case"disabled":this._disabled=r!==null,this._kbdElement.classList.toggle("disabled",r!==null);break}}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"name")){let t=this.name;delete this.name,this.name=t}if(Object.prototype.hasOwnProperty.call(this,"value")){let t=this.value;delete this.value,this.value=t}if(Object.prototype.hasOwnProperty.call(this,"disabled")){let t=this.disabled;delete this.disabled,this.disabled=t}}};rt.define();var kr=`<table>
    <thead>
        <tr class="tableHeader">
            <th colspan=3>
                <span class="tableTitle">
                    <label id="title">
                        input-source
                    </label>
                    <span id="slotContainer">
                        <slot></slot>
                    </span>
                    <p>
                        <label for="poll">poll</label>
                        <output id="poll"></output>
                    </p>
                    <p>
                        <label for="focus">focus</label>
                        <output id="focus"></output>
                    </p>
                </span>
            </th>
        </tr>
        <tr class="colHeader">
            <th>name</th>
            <th>value</th>
            <th>key</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
`,$r=`:host {
    display: block;
}

table {
    border-collapse: collapse;
    font-family: monospace;
}

table,
th,
td {
    border: 1px solid #666666;
}

th,
td {
    padding: 5px 10px;
}

td {
    text-align: center;
}

thead th {
    padding: 0;
}

.colHeader > th {
    font-size: 0.8em;
    padding: 0 10px;
    letter-spacing: 3px;
    background-color: #aaaaaa;
    color: #666666;
}

tbody output {
    border-radius: 0.3em;
    padding: 3px;
}

tr:not(.primary) .name,
tr:not(.primary) .value {
    opacity: 0.3;
}

tr:nth-child(2n) {
    background-color: #eeeeee;
}

.tableHeader {
    color: #666666;
}

.tableTitle {
    display: flex;
    flex-direction: row;
    align-items: center;
    padding: 4px;
}

#slotContainer {
    flex: 1;
}

p {
    display: inline;
    margin: 0;
    padding: 0;
    padding-right: 10px;
}

#poll:empty::after,
#focus:empty::after {
    content: "\u2717";
    color: #ff0000;
}
`,$t=class{constructor(t){this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null,this.pollable=t}get running(){return this.animationFrameHandle!==null}start(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}stop(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=null}onAnimationFrame(t){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.pollable.onPoll(t)}},Gt=class{constructor(t){this.onInput=this.onInput.bind(this),this.onPoll=this.onPoll.bind(this),this.bindings=t}onPoll(t){for(let n of this.bindings.getInputs())n.onPoll(t)}onInput(t){let{device:n,code:r,event:i,value:s,movement:a,control:o,shift:l,alt:u}=t,h=this.bindings.getBindings(n,r);switch(i){case"pressed":for(let{input:c,index:p}of h)c.onUpdate(p,1,1);break;case"released":for(let{input:c,index:p}of h)c.onUpdate(p,0,-1);break;case"move":for(let{input:c,index:p}of h)c.onUpdate(p,s,a);break;case"wheel":for(let{input:c,index:p}of h)c.onUpdate(p,void 0,a);break}return h.length>0}},it=class{constructor(t,n,r,i){this.device=t,this.code=n,this.input=r,this.index=i}},Vt=class{constructor(){this.bindingMap={},this.inputMap=new Map}clear(){for(let t of this.inputMap.keys())t.onUnbind();this.inputMap.clear(),this.bindingMap={}}bind(t,n,r,i={}){let s,a=this.inputMap;if(a.has(t)){let l=a.get(t),u=t.size;t.onBind(u,i),s=new it(n,r,t,u),l.push(s)}else{let l=[];a.set(t,l);let u=0;t.onBind(u,i),s=new it(n,r,t,u),l.push(s)}let o=this.bindingMap;n in o?r in o[n]?o[n][r].push(s):o[n][r]=[s]:o[n]={[r]:[s]}}unbind(t){let n=this.inputMap;if(n.has(t)){let r=this.bindingMap,i=n.get(t);for(let s of i){let{device:a,code:o}=s,l=r[a][o],u=l.indexOf(s);l.splice(u,1)}i.length=0,t.onUnbind(),n.delete(t)}}isBound(t){return this.inputMap.has(t)}getInputs(){return this.inputMap.keys()}getBindingsByInput(t){return this.inputMap.get(t)}getBindings(t,n){let r=this.bindingMap;if(t in r){let i=r[t];if(n in i)return i[n]}return[]}},jt=class{constructor(t,n={}){this.inputs={},this.devices=[new kt("Mouse",t),new zt("Keyboard",t)],this.bindings=new Vt,this.adapter=new Gt(this.bindings),this.autopoller=new $t(this.adapter),this.eventTarget=t,this.anyButton=new Le(1),this.anyButtonDevice="",this.anyButtonCode="",this.anyAxis=new ye(1),this.anyAxisDevice="",this.anyAxisCode="",this.listeners={bind:[],unbind:[],focus:[],blur:[]},this.onInput=this.onInput.bind(this),this.onEventTargetBlur=this.onEventTargetBlur.bind(this),this.onEventTargetFocus=this.onEventTargetFocus.bind(this),t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur);for(let r of this.devices)r.addEventListener("input",this.onInput)}get autopoll(){return this.autopoller.running}set autopoll(t=void 0){this.toggleAutoPoll(t)}destroy(){let t=this.listeners;for(let r in t)t[r].length=0;this.autopoller.running&&this.autopoller.stop();for(let r of this.devices)r.removeEventListener("input",this.onInput),r.destroy();let n=this.eventTarget;n.removeEventListener("focus",this.onEventTargetFocus),n.removeEventListener("blur",this.onEventTargetBlur)}setEventTarget(t){let n=this.eventTarget;n.removeEventListener("focus",this.onEventTargetFocus),n.removeEventListener("blur",this.onEventTargetBlur),this.eventTarget=t;for(let r of this.devices)r.setEventTarget(t);t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur)}toggleAutoPoll(t=void 0){let n=this.autopoller.running,r=typeof t=="undefined"?!n:Boolean(t);r!==n&&(r?this.autopoller.start():this.autopoller.stop())}addEventListener(t,n){let r=this.listeners;t in r?r[t].push(n):r[t]=[n]}removeEventListener(t,n){let r=this.listeners;if(t in r){let i=r[t],s=i.indexOf(n);s>=0&&i.splice(s,1)}}dispatchEvent(t){let{type:n}=t,r=0;for(let i of this.listeners[n])r|=i(t);return Boolean(r)}poll(t=performance.now()){if(this.autopoller.running)throw new Error("Should not manually poll() while autopolling.");this.onPoll(t)}onInput(t){let n=this.adapter.onInput(t);switch(t.event){case"pressed":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,1,1);break;case"released":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,0,-1);break;case"move":case"wheel":this.anyAxisDevice=t.device,this.anyAxisCode=t.code,this.anyAxis.onUpdate(0,t.value,t.movement);break}return n}onPoll(t){this.adapter.onPoll(t),this.anyButton.onPoll(t),this.anyAxis.onPoll(t)}onBind(){this.dispatchEvent({type:"bind"})}onUnbind(){this.dispatchEvent({type:"unbind"})}onEventTargetFocus(){this.dispatchEvent({type:"focus"})}onEventTargetBlur(){for(let t of this.bindings.getInputs())t.onStatus(0,0);this.anyButton.onStatus(0,0),this.anyAxis.onStatus(0,0),this.dispatchEvent({type:"blur"})}bindButton(t,n,r,i=void 0){let s;this.hasButton(t)?s=this.getButton(t):(s=new Le(1),this.inputs[t]=s),this.bindings.bind(s,n,r,i),this.onBind()}bindAxis(t,n,r,i=void 0){let s;this.hasAxis(t)?s=this.getAxis(t):(s=new ye(1),this.inputs[t]=s),this.bindings.bind(s,n,r,i),this.onBind()}bindAxisButtons(t,n,r,i){let s;this.hasAxis(t)?s=this.getAxis(t):(s=new ye(2),this.inputs[t]=s),this.bindings.bind(s,n,i),this.bindings.bind(s,n,r,{inverted:!0}),this.onBind()}unbindButton(t){if(this.hasButton(t)){let n=this.getButton(t);delete this.inputs[t],this.bindings.unbind(n),this.onUnbind()}}unbindAxis(t){if(this.hasAxis(t)){let n=this.getAxis(t);delete this.inputs[t],this.bindings.unbind(n),this.onUnbind()}}getInput(t){return this.inputs[t]}getButton(t){return this.inputs[t]}getAxis(t){return this.inputs[t]}hasButton(t){return t in this.inputs&&this.inputs[t]instanceof Le}hasAxis(t){return t in this.inputs&&this.inputs[t]instanceof ye}isButtonDown(t){return this.inputs[t].down}isButtonPressed(t){return this.inputs[t].pressed}isButtonReleased(t){return this.inputs[t].released}getInputValue(t){return this.inputs[t].value}getButtonValue(t){return this.inputs[t].value}getAxisValue(t){return this.inputs[t].value}getAxisDelta(t){return this.inputs[t].delta}isAnyButtonDown(t=void 0){if(typeof t=="undefined")return this.anyButton.down;{let n=this.inputs;for(let r of t)if(n[r].down)return!0}return!1}isAnyButtonPressed(t=void 0){if(typeof t=="undefined")return this.anyButton.pressed;{let n=this.inputs;for(let r of t)if(n[r].pressed)return!0}return!1}isAnyButtonReleased(t=void 0){if(typeof t=="undefined")return this.anyButton.released;{let n=this.inputs;for(let r of t)if(n[r].released)return!0}return!1}getAnyAxisValue(t=void 0){if(typeof t=="undefined")return this.anyAxis.value;{let n=this.inputs;for(let r of t){let i=n[r];if(i.value)return i.value}}return 0}getAnyAxisDelta(t=void 0){if(typeof t=="undefined")return this.anyAxis.delta;{let n=this.inputs;for(let r of t){let i=n[r];if(i.delta)return i.delta}}return 0}getLastButtonDevice(){return this.anyButtonDevice}getLastButtonCode(){return this.anyButtonCode}getLastAxisDevice(){return this.anyAxisDevice}getLastAxisCode(){return this.anyAxisCode}getMouse(){return this.devices[0]}getKeyboard(){return this.devices[1]}},Kt=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=kr,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=$r,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-port",this)}static get observedAttributes(){return["autopoll","for"]}get autopoll(){return this._autopoll}set autopoll(t){this.toggleAttribute("autopoll",t)}get for(){return this._for}set for(t){this.setAttribute("for",t)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._titleElement=this.shadowRoot.querySelector("#title"),this._pollElement=this.shadowRoot.querySelector("#poll"),this._focusElement=this.shadowRoot.querySelector("#focus"),this._bodyElement=this.shadowRoot.querySelector("tbody"),this._outputElements={},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null;let t=this;this._for="",this._eventTarget=t,this._autopoll=!1,this._context=null,this.onInputContextBind=this.onInputContextBind.bind(this),this.onInputContextUnbind=this.onInputContextUnbind.bind(this),this.onInputContextFocus=this.onInputContextFocus.bind(this),this.onInputContextBlur=this.onInputContextBlur.bind(this)}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"for")){let t=this.for;delete this.for,this.for=t}if(Object.prototype.hasOwnProperty.call(this,"autopoll")){let t=this.autopoll;delete this.autopoll,this.autopoll=t}this.updateTable(),this.updateTableValues(),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){this._context&&(this._context.removeEventListener("bind",this.onInputContextBind),this._context.removeEventListener("unbind",this.onInputContextUnbind),this._context.removeEventListener("blur",this.onInputContextBlur),this._context.removeEventListener("focus",this.onInputContextFocus),this._context.destroy(),this._context=null)}attributeChangedCallback(t,n,r){switch(t){case"for":{this._for=r;let i,s;r?(i=document.getElementById(r),s=`${i.tagName.toLowerCase()}#${r}`):(i=this,s="input-port"),this._eventTarget=i,this._context&&this._context.setEventTarget(this._eventTarget),this._titleElement.innerHTML=`for ${s}`}break;case"autopoll":this._autopoll=r!==null,this._context&&this._context.toggleAutoPoll(this._autopoll);break}}onAnimationFrame(){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.updateTableValues(),this.updatePollStatus()}onInputContextBind(){this.updateTable()}onInputContextUnbind(){this.updateTable()}onInputContextFocus(){this._focusElement.innerHTML="\u2713"}onInputContextBlur(){this._focusElement.innerHTML=""}getContext(t="axisbutton",n=void 0){switch(t){case"axisbutton":return this._context||(this._context=new jt(this._eventTarget,n),this._context.addEventListener("bind",this.onInputContextBind),this._context.addEventListener("unbind",this.onInputContextUnbind),this._context.addEventListener("blur",this.onInputContextBlur),this._context.addEventListener("focus",this.onInputContextFocus),this._autopoll&&this._context.toggleAutoPoll(!0)),this._context;default:throw new Error(`Input context id '${t}' is not supported.`)}}updateTable(){if(this.isConnected)if(this._context){let t=this._context,n=t.inputs,r=t.bindings,i={},s=[];for(let a of Object.keys(n)){let o=n[a],l=!0;for(let u of r.getBindingsByInput(o)){let h=Gr(`${o.constructor.name}.${a}`,`${u.device}.${u.code}`,0,l);s.push(h),l&&(i[a]=h.querySelector("output"),l=!1)}}this._outputElements=i,this._bodyElement.innerHTML="";for(let a of s)this._bodyElement.appendChild(a)}else{this._outputElements={},this._bodyElement.innerHTML="";return}else return}updateTableValues(){if(this.isConnected)if(this._context){let n=this._context.inputs;for(let r of Object.keys(this._outputElements)){let i=this._outputElements[r],s=n[r].value;i.innerText=Number(s).toFixed(2)}}else{for(let t of Object.keys(this._outputElements)){let n=this._outputElements[t];n.innerText="---"}return}else return}updatePollStatus(){if(this.isConnected)if(this._context){let n=this._context.inputs;for(let r of Object.values(n))if(!r.polling){this._pollElement.innerHTML="";return}this._pollElement.innerHTML="\u2713"}else{this._pollElement.innerHTML="-";return}else return}};Kt.define();function Gr(e,t,n,r=!0){let i=document.createElement("tr");r&&i.classList.add("primary");{let s=document.createElement("td");s.textContent=e,s.classList.add("name"),i.appendChild(s)}{let s=document.createElement("td"),a=document.createElement("output");r?a.innerText=Number(n).toFixed(2):a.innerText="---",a.classList.add("value"),s.appendChild(a),i.appendChild(s)}{let s=document.createElement("td");s.classList.add("key");let a=new rt;a.innerText=t,s.appendChild(a),i.appendChild(s)}return i}var Qa=Symbol("keyboardSource");var Ja=Symbol("mouseSource");var Yt={},Vr=function(e,t,n,r,i){var s=new Worker(Yt[t]||(Yt[t]=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))));return s.onerror=function(a){return i(a.error,null)},s.onmessage=function(a){return i(null,a.data)},s.postMessage(n,r),s},q=Uint8Array,re=Uint16Array,Ae=Uint32Array,st=new q([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),at=new q([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qt=new q([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wt=function(e,t){for(var n=new re(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new Ae(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Xt=Wt(st,2),ot=Xt[0],jr=Xt[1];ot[28]=258,jr[258]=28;var Zt=Wt(at,0),Qt=Zt[0],to=Zt[1],Ce=new re(32768);for(var z=0;z<32768;++z)ae=(z&43690)>>>1|(z&21845)<<1,ae=(ae&52428)>>>2|(ae&13107)<<2,ae=(ae&61680)>>>4|(ae&3855)<<4,Ce[z]=((ae&65280)>>>8|(ae&255)<<8)>>>1;var ae,ve=function(e,t,n){for(var r=e.length,i=0,s=new re(t);i<r;++i)++s[e[i]-1];var a=new re(t);for(i=0;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new re(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],h=t-e[i],c=a[e[i]-1]++<<h,p=c|(1<<h)-1;c<=p;++c)o[Ce[c]>>>l]=u}else for(o=new re(r),i=0;i<r;++i)e[i]&&(o[i]=Ce[a[e[i]-1]++]>>>15-e[i]);return o},ge=new q(288);for(var z=0;z<144;++z)ge[z]=8;for(var z=144;z<256;++z)ge[z]=9;for(var z=256;z<280;++z)ge[z]=7;for(var z=280;z<288;++z)ge[z]=8;var Jt=new q(32);for(var z=0;z<32;++z)Jt[z]=5;var en=ve(ge,9,1);var tn=ve(Jt,5,1),Ne=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Q=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Ie=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},nn=function(e){return(e/8|0)+(e&7&&1)},Oe=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof re?re:e instanceof Ae?Ae:q)(n-t);return r.set(e.subarray(t,n)),r},rn=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new q(0);var i=!t||n,s=!n||n.i;n||(n={}),t||(t=new q(r*3));var a=function(D){var ce=t.length;if(D>ce){var Se=new q(Math.max(ce*2,D));Se.set(t),t=Se}},o=n.f||0,l=n.p||0,u=n.b||0,h=n.l,c=n.d,p=n.m,v=n.n,d=r*8;do{if(!h){n.f=o=Q(e,l,1);var m=Q(e,l+1,3);if(l+=3,m)if(m==1)h=en,c=tn,p=9,v=5;else if(m==2){var g=Q(e,l,31)+257,M=Q(e,l+10,15)+4,S=g+Q(e,l+5,31)+1;l+=14;for(var T=new q(S),C=new q(19),E=0;E<M;++E)C[qt[E]]=Q(e,l+E*3,7);l+=M*3;for(var b=Ne(C),B=(1<<b)-1,y=ve(C,b,1),E=0;E<S;){var I=y[Q(e,l,B)];l+=I&15;var f=I>>>4;if(f<16)T[E++]=f;else{var N=0,O=0;for(f==16?(O=3+Q(e,l,3),l+=2,N=T[E-1]):f==17?(O=3+Q(e,l,7),l+=3):f==18&&(O=11+Q(e,l,127),l+=7);O--;)T[E++]=N}}var x=T.subarray(0,g),_=T.subarray(g);p=Ne(x),v=Ne(_),h=ve(x,p,1),c=ve(_,v,1)}else throw"invalid block type";else{var f=nn(l)+4,A=e[f-4]|e[f-3]<<8,L=f+A;if(L>r){if(s)throw"unexpected EOF";break}i&&a(u+A),t.set(e.subarray(f,L),u),n.b=u+=A,n.p=l=L*8;continue}if(l>d){if(s)throw"unexpected EOF";break}}i&&a(u+131072);for(var k=(1<<p)-1,F=(1<<v)-1,j=l;;j=l){var N=h[Ie(e,l)&k],K=N>>>4;if(l+=N&15,l>d){if(s)throw"unexpected EOF";break}if(!N)throw"invalid length/literal";if(K<256)t[u++]=K;else if(K==256){j=l,h=null;break}else{var Y=K-254;if(K>264){var E=K-257,te=st[E];Y=Q(e,l,(1<<te)-1)+ot[E],l+=te}var _e=c[Ie(e,l)&F],ue=_e>>>4;if(!_e)throw"invalid distance";l+=_e&15;var _=Qt[ue];if(ue>3){var te=at[ue];_+=Ie(e,l)&(1<<te)-1,l+=te}if(l>d){if(s)throw"unexpected EOF";break}i&&a(u+131072);for(var ne=u+Y;u<ne;u+=4)t[u]=t[u-_],t[u+1]=t[u+1-_],t[u+2]=t[u+2-_],t[u+3]=t[u+3-_];u=ne}}n.l=h,n.p=j,n.b=u,h&&(o=1,n.m=p,n.d=c,n.n=v)}while(!o);return u==t.length?t:Oe(t,0,u)};var Kr=new q(0);var Yr=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},sn=function(e,t,n){for(var r=e(),i=e.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<r.length;++a){var o=r[a],l=s[a];if(typeof o=="function"){t+=";"+l+"=";var u=o.toString();if(o.prototype)if(u.indexOf("[native code]")!=-1){var h=u.indexOf(" ",8)+1;t+=u.slice(h,u.indexOf("(",h))}else{t+=u;for(var c in o.prototype)t+=";"+l+".prototype."+c+"="+o.prototype[c].toString()}else t+=u}else n[l]=o}return[t,n]},Be=[],qr=function(e){var t=[];for(var n in e)(e[n]instanceof q||e[n]instanceof re||e[n]instanceof Ae)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},Wr=function(e,t,n,r){var i;if(!Be[n]){for(var s="",a={},o=e.length-1,l=0;l<o;++l)i=sn(e[l],s,a),s=i[0],a=i[1];Be[n]=sn(e[o],s,a)}var u=Yr({},Be[n][1]);return Vr(Be[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,u,qr(u),r)},Xr=function(){return[q,re,Ae,st,at,qt,ot,Qt,en,tn,Ce,ve,Ne,Q,Ie,nn,Oe,rn,lt,an,on]};var an=function(e){return postMessage(e,[e.buffer])},on=function(e){return e&&e.size&&new q(e.size)},Zr=function(e,t,n,r,i,s){var a=Wr(n,r,i,function(o,l){a.terminate(),s(o,l)});return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}};var ie=function(e,t){return e[t]|e[t+1]<<8},ee=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ut=function(e,t){return ee(e,t)+ee(e,t+4)*4294967296};function Qr(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return Zr(e,t,[Xr],function(r){return an(lt(r.data[0],on(r.data[1])))},1,n)}function lt(e,t){return rn(e,t)}var no=typeof TextEncoder!="undefined"&&new TextEncoder,ht=typeof TextDecoder!="undefined"&&new TextDecoder,Jr=0;try{ht.decode(Kr,{stream:!0}),Jr=1}catch(e){}var ei=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,Oe(e,n-1)];i?i==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}};function ti(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(ht)return ht.decode(e);var i=ei(e),s=i[0],a=i[1];if(a.length)throw"invalid utf-8 data";return s}}var ni=function(e,t){return t+30+ie(e,t+26)+ie(e,t+28)},ii=function(e,t,n){var r=ie(e,t+28),i=ti(e.subarray(t+46,t+46+r),!(ie(e,t+8)&2048)),s=t+46+r,a=ee(e,t+20),o=n&&a==4294967295?ri(e,s):[a,ee(e,t+24),ee(e,t+42)],l=o[0],u=o[1],h=o[2];return[ie(e,t+10),l,u,i,s+ie(e,t+30)+ie(e,t+32),h]},ri=function(e,t){for(;ie(e,t)!=1;t+=4+ie(e,t+2));return[ut(e,t+12),ut(e,t+4),ut(e,t+20)]};function ln(e,t){if(typeof t!="function")throw"no callback";for(var n=[],r=function(){for(var p=0;p<n.length;++p)n[p]()},i={},s=e.length-22;ee(e,s)!=101010256;--s)if(!s||e.length-s>65558){t("invalid zip file",null);return}var a=ie(e,s+8);a||t(null,{});var o=a,l=ee(e,s+16),u=l==4294967295;if(u){if(s=ee(e,s-12),ee(e,s)!=101075792){t("invalid zip file",null);return}o=a=ee(e,s+32),l=ee(e,s+48)}for(var h=function(p){var v=ii(e,l,u),d=v[0],m=v[1],f=v[2],A=v[3],L=v[4],g=v[5],M=ni(e,g);l=L;var S=function(C,E){C?(r(),t(C,null)):(i[A]=E,--a||t(null,i))};if(!d)S(null,Oe(e,M,M+m));else if(d==8){var T=e.subarray(M,M+m);if(m<32e4)try{S(null,lt(T,new q(f)))}catch(C){S(C,null)}else n.push(Qr(T,{size:f},S))}else S("unknown compression type "+d,null)},c=0;c<o;++c)h(c);return r}var zn=Cr(Un()),kn=class{constructor(){this._buffers={}}clear(){this._buffers={}}put(t,n){this._buffers[t]=n}get(t){return this._buffers[t]}keys(){return Object.keys(this._buffers)}},ki="",$i="",Gi=5e3,$e=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=ki,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=$i,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("asset-pack",$e)}static get observedAttributes(){return["src"]}set src(t){this.setAttribute("src",t)}get src(){return this._src}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._src="",this._files=new kn,this._cache={},this._loading={},this._pipeline={},this.onLoad=this.onLoad.bind(this)}get files(){return this._files}async pipe(t,n){let r;if(typeof t=="string")r=t,r in this._pipeline||(t=(0,zn.makeRe)(t));else if(t instanceof RegExp)r=t.source;else throw new Error("Filter must be either a RegExp or glob string.");let i;r in this._pipeline?i=this._pipeline[r]:(i=new $n(t),this._pipeline[r]=i),i.addHandler(n),await Promise.all(Object.entries(this._cache).map(([s,a])=>i.matches(s)?n(a,s):null))}async cache(t,n,r={}){let{ephemeral:i}=r,s=this._cache[t],a=this._loading[t];this._cache[t]=n,await Promise.all(Object.values(this._pipeline).map(o=>o.matches(t)?o.process(t,n):null)),a&&(a.resolve(n),delete this._loading[n]),i&&this._cache[n]===n&&(s?this._cache[n]=s:delete this._cache[n])}async loadAsset(t,n=Gi){let r=this._cache[t];if(r)return r;if(t in this._loading)return this._loading[t].promise;{let i=new Gn(n);return this._loading[t]=i,i.promise}}clearAssets(){for(let t of Object.values(this._loading))t.reject(new Error("Stop loading to clear all assets."));this._loading={},this._cache={}}deleteAsset(t){t in this._loading&&(this._loading[t].reject(new Error("Stop loading to delete asset.")),delete this._loading[t]),t in this._cache&&delete this._cache[t]}getAsset(t){return this._cache[t]}hasAsset(t){let n=this._cache[t];return n||!1}connectedCallback(){Vi(this,"src")}attributeChangedCallback(t,n,r){switch(t){case"src":this._src=r,r&&fetch(r).then(this.onLoad).catch(i=>console.error(`Failed to load asset pack: ${i}`));break}}async onLoad(t){let n=await t.arrayBuffer();await new Promise((r,i)=>{ln(new Uint8Array(n),(s,a)=>{if(s)i(s);else{let o=this._files;Promise.all(Object.entries(a).map(([l,u])=>(o.put(l,u),this.cache(l,u)))).then(()=>r()).catch(i)}})}),this.dispatchEvent(new CustomEvent("load",{composed:!0}))}};$e.define();function Vi(e,t){if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];delete e[t],e[t]=n}}var $n=class{constructor(t){this.filter=t,this.handlers=[]}matches(t){return this.filter.test(t)}async process(t,n){return Promise.all(this.handlers.map(r=>r(t,n)))}addHandler(t){this.handlers.push(t)}},Gn=class{constructor(t){this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=t>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)},t):null,this._promise=new Promise((n,r)=>{this._value?n(this._value):this._resolve=n,this._reason?r(this._reason):this._reject=r})}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}};window.addEventListener("error",Ge,!0);window.addEventListener("unhandledrejection",Ge,!0);function Ge(e){typeof e=="object"?e instanceof PromiseRejectionEvent?Ge(e.reason):e instanceof ErrorEvent?Ge(e.error):e instanceof Error?window.alert(e.stack):window.alert(JSON.stringify(e)):window.alert(e)}var wt={on(e,t,n=t){let r;if(this.__events.has(e)?r=this.__events.get(e):(r=new Map,this.__events.set(e,r)),!r.has(n))r.set(n,t);else throw new Error(`Found callback for event '${e}' with the same handle '${n}'.`);return this},off(e,t){if(this.__events.has(e)){let n=this.__events.get(e);if(n.has(t))n.delete(t);else throw new Error(`Unable to find callback for event '${e}' with handle '${t}'.`)}else throw new Error(`Unable to find event '${e}'.`);return this},once(e,t,n=t){let r=(...i)=>{this.off(e,n),t.apply(this.__context||this,i)};return this.on(e,r,n)},emit(e,...t){if(this.__events.has(e)){let n=[],r=Array.from(this.__events.get(e).values());for(let i of r){let s=i.apply(this.__context||this,t);s&&n.push(s)}return n}else return this.__events.set(e,new Map),[]}};function ji(e=void 0){let t=Object.create(wt);return t.__events=new Map,t.__context=e,t}function Ki(e,t=void 0){let n=Object.assign(e,wt);return n.__events=new Map,n.__context=t,n}function Yi(e,t=void 0){let n=e.prototype;return Object.assign(n,wt),n.__events=new Map,n.__context=t,n}var Vn={create:ji,assign:Ki,mixin:Yi},qi=5,Wi=4,Xi=3,Zi=2,Qi=1,Ji=0,vo={[qi]:we("#7F8C8D"),[Wi]:we("#2ECC71"),[Xi]:we("#4794C8"),[Zi]:we("#F39C12"),[Qi]:we("#C0392B"),[Ji]:[""]};function we(e){return[`background: ${e}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em"]}var mo=Symbol("level"),xo=Symbol("domain");var xe=0,es=class{constructor(t){this._heap=[],this._comparator=t}get size(){return this._heap.length}clear(){this._heap.length=0}push(...t){for(let n of t)this._heap.push(n),this._shiftUp()}pop(){let t=this.peek(),n=ts(this);return n>xe&&this._swap(xe,n),this._heap.pop(),this._shiftDown(),t}replace(t){let n=this.peek();return this._heap[xe]=t,this._shiftDown(),n}peek(){return this._heap[xe]}_compare(t,n){return this._comparator(this._heap[t],this._heap[n])}_swap(t,n){let r=this._heap[t];this._heap[t]=this._heap[n],this._heap[n]=r}_shiftUp(){let t=this._heap.length-1,n;for(;t>xe&&this._compare(t,n=ns(t));)this._swap(t,n),t=n}_shiftDown(){let t=this._heap.length,n=xe,r,i=jn(n),s=i<t,a=Kn(n),o=a<t;for(;s&&this._compare(i,n)||o&&this._compare(a,n);)r=o&&this._compare(a,i)?a:i,this._swap(n,r),n=r,i=jn(n),s=i<t,a=Kn(n),o=a<t}values(){return this._heap}[Symbol.iterator](){return this._heap[Symbol.iterator]()}};function ts(e){return e._heap.length-1}function ns(e){return(e+1>>>1)-1}function jn(e){return(e<<1)+1}function Kn(e){return e+1<<1}var _o=Math.PI/180,yo=180/Math.PI;var Mt=class{constructor(t,n,r){this.display=t,this.inputs=n,this.assets=r,this.deltaTime=0,this.prevTime=0,this.now=0,this.events=Vn.create()}on(t,n){return this.events.on(t,n),this}off(t,n){return this.events.off(t,n),this}once(t,n){return this.events.once(t,n),this}emit(t,...n){this.events.emit(t,...n)}};async function St(e,t=void 0){if(typeof e=="string"){let o=await(await fetch(e)).arrayBuffer();if(typeof t=="undefined"){let l=e.lastIndexOf(".");if(l<0)throw new Error("Cannot load from url - unknown image type.");t="image/"+e.slice(l+1)}return St(o,t)}else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let n=e;typeof t=="undefined"&&(t="image/png");let r=new Blob([n],{type:t}),i=URL.createObjectURL(r),s=new Image;return new Promise((a,o)=>{s.addEventListener("load",()=>{a(s)}),s.addEventListener("error",l=>{o(l)}),s.src=i})}async function Tt(e){if(typeof e=="string"){let r=await(await fetch(e)).arrayBuffer();return Tt(r)}else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let t=e;return rs(new TextDecoder().decode(t))}function rs(e){let t=[],n=[],r=[],i=[],s=[],a=[],o=/^#.*/g,l=/v\s+(\S+)\s+(\S+)\s+(\S+)/g,u=/vn\s+(\S+)\s+(\S+)\s+(\S+)/g,h=/vt\s+(\S+)\s+(\S+)/g,c=/f\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*))\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*))\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*))(\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*)))?/g,p=/f\s+([^/\s]+)\s+([^/\s]+)\s+([^/\s]+)/g,v=!1,d=null,m,f,A,L;for(e=e.replace(o,"");(d=l.exec(e))!=null;)m=Number.parseFloat(d[1]),f=Number.parseFloat(d[2]),A=Number.parseFloat(d[3]),t.push(m),t.push(f),t.push(A);for(;(d=u.exec(e))!=null;)m=Number.parseFloat(d[1]),f=Number.parseFloat(d[2]),A=Number.parseFloat(d[3]),r.push(m),r.push(f),r.push(A);for(;(d=h.exec(e))!=null;)m=Number.parseFloat(d[1]),f=Number.parseFloat(d[2]),n.push(m),n.push(f);for(;(d=c.exec(e))!=null;)m=Number.parseInt(d[2]),Number.isNaN(m)&&(m=1),f=Number.parseInt(d[6]),Number.isNaN(f)&&(f=1),A=Number.parseInt(d[10]),Number.isNaN(A)&&(A=1),i.push(m),i.push(f),i.push(A),m=Number.parseInt(d[4]),Number.isNaN(m)?(m=Number.parseInt(d[3]),f=Number.parseInt(d[7]),A=Number.parseInt(d[11]),a.push(m),a.push(f),a.push(A),s.push(1),s.push(1),s.push(1)):(f=Number.parseInt(d[8]),Number.isNaN(f)&&(f=1),A=Number.parseInt(d[12]),Number.isNaN(A)&&(A=1),a.push(m),a.push(f),a.push(A),m=Number.parseInt(d[3]),Number.isNaN(m)&&(m=1),f=Number.parseInt(d[7]),Number.isNaN(f)&&(f=1),A=Number.parseInt(d[11]),Number.isNaN(A)&&(A=1),s.push(m),s.push(f),s.push(A)),typeof d[13]!="undefined"&&(L=Number.parseInt(d[15]),Number.isNaN(L)&&(L=1),i.push(L),L=Number.parseInt(d[17]),Number.isNaN(L)?(L=Number.parseInt(d[16]),a.push(L),s.push(1)):(a.push(L),L=Number.parseInt(d[16]),s.push(L)),v=!0);for(;(d=p.exec(e))!=null;)m=Number.parseInt(d[2]),f=Number.parseInt(d[6]),A=Number.parseInt(d[10]),i.push(m),i.push(f),i.push(A),s.push(1),s.push(1),s.push(1),a.push(1),a.push(1),a.push(1),typeof d[13]!="undefined"&&(L=Number.parseInt(d[14]),i.push(L),s.push(1),a.push(1),v=!0);let g,M;M=i.length;let S=new Float32Array(M*3);for(let b=0;b<M;++b)g=i[b]-1,S[b*3+0]=t[g*3+0],S[b*3+1]=t[g*3+1],S[b*3+2]=t[g*3+2];M=s.length;let T=new Float32Array(M*2);for(let b=0;b<M;++b)g=s[b]-1,T[b*2+0]=n[g*2+0],T[b*2+1]=n[g*2+1];M=a.length;let C=new Float32Array(M*3);for(let b=0;b<M;++b)g=a[b]-1,C[b*3+0]=r[g*3+0],C[b*3+1]=r[g*3+1],C[b*3+2]=r[g*3+2];M=i.length;let E=new Uint16Array(M);for(let b=0;b<M;++b)E[b]=b;return v&&console.warn("WebGL does not support quad faces, only triangles."),{positions:S,texcoords:T,normals:C,indices:E}}async function Rt(e){if(typeof e=="string"){let s=await(await fetch(e)).arrayBuffer();return Rt(s)}else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let t=e,n=new TextDecoder().decode(t),r={};for(let i of n.split(`
`)){if(i=i.trim(),i<=0||i.startsWith("#")||i.startsWith("//"))continue;let s=[],a=0,o=i.indexOf(" ");for(;o>=0;)s.push(i.substring(a,o)),a=o+1,o=i.indexOf(" ",a);s.push(i.substring(a));let l=s[0],u=Number.parseInt(s[1]),h=Number.parseInt(s[2]),c=Number.parseInt(s[3]),p=Number.parseInt(s[4]),v=s.length>=6?Number.parseInt(s[5]):1,d=s.length>=7?Number.parseInt(s[6]):v,m=s.length>=8?Number.parseInt(s[7]):v>d?Math.ceil(v/d):1;r[l]={u,v:h,w:c,h:p,frames:v,cols:d,rows:m,name:l}}return r}async function Lt(e,t){if(typeof e=="string"){let a=await(await fetch(e)).arrayBuffer();return Lt(a)}else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let n=e,r=new ArrayBuffer(n.byteLength);return new Uint8Array(r).set(n),await t.decodeAudioData(r)}var Ct=Symbol("audioContext"),Ve=class{static getAudioContext(){if(Ct in this)return this[Ct];{let t=new AudioContext;return is(t),this[Ct]=t,t}}constructor(t,n){this.audioContext=t,this.audioBuffer=n,this._playing=!1,this._started=!1,this._source=null,this.onAudioSourceEnded=this.onAudioSourceEnded.bind(this)}destroy(){this._source&&this._source.disconnect(),this._source=null,this._started=!1,this._playing=!1}onAudioSourceEnded(){this._playing=!1}play(t={}){let n=this.audioBuffer;if(!n)return;this._source&&this.destroy();let{pitch:r=void 0,gain:i=void 0,pan:s=void 0,loop:a=!1}=t,o=this.audioContext,l=o.createBufferSource();l.addEventListener("ended",this.onAudioSourceEnded),l.buffer=n,l.loop=a;let u=l;if(r&&(l.detune.value=r*100),i){let h=o.createGain();h.gain.value=i,u=u.connect(h)}if(s){let h=o.createStereoPanner();h.pan.value=s,u=u.connect(h)}u.connect(o.destination),l.start(),this._source=l,this._started=!0,this._playing=!0}pause(){this._source.stop(),this._playing=!1}isStarted(){return this._started}isPlaying(){return this._playing}isPaused(){return this._started&&!this._playing}};function is(e){let t=()=>{e.state==="suspended"&&e.resume()};document.addEventListener("click",t)}function Yn(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext}function ss(e,t,n){let r=qn(e,t);return new r(n)}function as(e,t,n,r=void 0){let i=e.createBuffer();if(e.bindBuffer(t,i),!ArrayBuffer.isView(n))throw new Error("Source data must be a typed array.");return e.bufferData(t,n,r||e.STATIC_DRAW),i}function qn(e,t){switch(t){case e.BYTE:return Int8Array;case e.UNSIGNED_BYTE:return Uint8Array;case e.SHORT:return Int16Array;case e.UNSIGNED_SHORT:return Uint16Array;case e.INT:return Int32Array;case e.UNSIGNED_INT:return Uint32Array;case e.FLOAT:return Float32Array;default:throw new Error("Cannot find valid typed array for buffer type.")}}function os(e,t){switch(t){case Int8Array:return e.BYTE;case Uint8Array:return e.UNSIGNED_BYTE;case Int16Array:return e.SHORT;case Uint16Array:return e.UNSIGNED_SHORT;case Int32Array:return e.INT;case Uint32Array:return e.UNSIGNED_INT;case Float32Array:return e.FLOAT;default:throw new Error("Cannot find valid buffer type for typed array.")}}function ls(e,t,n){return e.bindBuffer(t,n),e.getBufferParameter(t,e.BUFFER_USAGE)}var Nt=Object.freeze({__proto__:null,createBufferSource:ss,createBuffer:as,getBufferTypedArray:qn,getTypedArrayBufferType:os,getBufferUsage:ls});function us(e,t){switch(t){case e.FLOAT:return 1;case e.FLOAT_VEC2:return 2;case e.FLOAT_VEC3:return 3;case e.FLOAT_VEC4:return 4;case e.FLOAT_MAT2:return 4;case e.FLOAT_MAT3:return 9;case e.FLOAT_MAT4:return 16;default:throw new Error("Invalid vertex attribute type.")}}function Wn(e,t){let n=[],r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){let s=e.getActiveUniform(t,i);if(!s)break;n.push(s)}return n}function Xn(e,t){let n=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;++i){let s=e.getActiveAttrib(t,i);!s||n.push(s)}return n}function hs(e,t){let n={},r=Xn(e,t);for(let i of r){let s=i.name,a=i.size,o=i.type,l=e.getAttribLocation(t,s),u=us(e,o);n[s]={type:o,length:a,location:l,size:u}}return n}function cs(e,t){switch(t){case e.FLOAT:return e.uniform1f;case e.FLOAT_VEC2:return e.uniform2fv;case e.FLOAT_VEC3:return e.uniform3fv;case e.FLOAT_VEC4:return e.uniform4fv;case e.INT:return e.uniform1i;case e.INT_VEC2:return e.uniform2iv;case e.INT_VEC3:return e.uniform3iv;case e.INT_VEC4:return e.uniform4iv;case e.BOOL:return e.uniform1i;case e.BOOL_VEC2:return e.uniform2iv;case e.BOOL_VEC3:return e.uniform3iv;case e.BOOL_VEC4:return e.uniform4iv;case e.FLOAT_MAT2:return Zn;case e.FLOAT_MAT3:return Qn;case e.FLOAT_MAT4:return Jn;case e.SAMPLER_2D:case e.SAMPLER_CUBE:return e.uniform1i}if(Yn(e))switch(t){case e.UNSIGNED_INT:return e.uniform1ui;case e.UNSIGNED_INT_VEC2:return e.uniform2uiv;case e.UNSIGNED_INT_VEC3:return e.uniform3uiv;case e.UNSIGNED_INT_VEC4:return e.uniform4uiv;case e.FLOAT_MAT2x3:return er;case e.FLOAT_MAT2x4:return tr;case e.FLOAT_MAT3x2:return nr;case e.FLOAT_MAT3x4:return rr;case e.FLOAT_MAT4x2:return ir;case e.FLOAT_MAT4x3:return sr;case e.SAMPLER_3D:case e.SAMPLER_2D_SHADOW:case e.SAMPLER_2D_ARRAY:case e.SAMPLER_2D_ARRAY_SHADOW:case e.SAMPLER_CUBE_SHADOW:case e.INT_SAMPLER_2D:case e.INT_SAMPLER_3D:case e.INT_SAMPLER_CUBE:case e.INT_SAMPLER_2D_ARRAY:case e.UNSIGNED_INT_SAMPLER_2D:case e.UNSIGNED_INT_SAMPLER_3D:case e.UNSIGNED_INT_SAMPLER_CUBE:case e.UNSIGNED_INT_SAMPLER_2D_ARRAY:return e.uniform1i}throw new Error("Cannot find uniform function for gl enum.")}function fs(e,t){switch(t){case e.FLOAT:return e.uniform1fv;case e.FLOAT_VEC2:return e.uniform2fv;case e.FLOAT_VEC3:return e.uniform3fv;case e.FLOAT_VEC4:return e.uniform4fv;case e.INT:return e.uniform1iv;case e.INT_VEC2:return e.uniform2iv;case e.INT_VEC3:return e.uniform3iv;case e.INT_VEC4:return e.uniform4iv;case e.BOOL:return e.uniform1iv;case e.BOOL_VEC2:return e.uniform2iv;case e.BOOL_VEC3:return e.uniform3iv;case e.BOOL_VEC4:return e.uniform4iv;case e.FLOAT_MAT2:return Zn;case e.FLOAT_MAT3:return Qn;case e.FLOAT_MAT4:return Jn;case e.SAMPLER_2D:case e.SAMPLER_CUBE:return e.uniform1iv}if(Yn(e))switch(t){case e.UNSIGNED_INT:return e.uniform1uiv;case e.UNSIGNED_INT_VEC2:return e.uniform2uiv;case e.UNSIGNED_INT_VEC3:return e.uniform3uiv;case e.UNSIGNED_INT_VEC4:return e.uniform4uiv;case e.FLOAT_MAT2x3:return er;case e.FLOAT_MAT2x4:return tr;case e.FLOAT_MAT3x2:return nr;case e.FLOAT_MAT3x4:return rr;case e.FLOAT_MAT4x2:return ir;case e.FLOAT_MAT4x3:return sr;case e.SAMPLER_3D:case e.SAMPLER_2D_SHADOW:case e.SAMPLER_2D_ARRAY:case e.SAMPLER_2D_ARRAY_SHADOW:case e.SAMPLER_CUBE_SHADOW:case e.INT_SAMPLER_2D:case e.INT_SAMPLER_3D:case e.INT_SAMPLER_CUBE:case e.INT_SAMPLER_2D_ARRAY:case e.UNSIGNED_INT_SAMPLER_2D:case e.UNSIGNED_INT_SAMPLER_3D:case e.UNSIGNED_INT_SAMPLER_CUBE:case e.UNSIGNED_INT_SAMPLER_2D_ARRAY:return e.uniform1iv}throw new Error("Cannot find array uniform function for gl enum.")}function Zn(e,t){this.uniformMatrix2fv(e,!1,t)}function Qn(e,t){this.uniformMatrix3fv(e,!1,t)}function Jn(e,t){this.uniformMatrix4fv(e,!1,t)}function er(e,t){this.uniformMatrix2x3fv(e,!1,t)}function tr(e,t){this.uniformMatrix2x4fv(e,!1,t)}function nr(e,t){this.uniformMatrix3x2fv(e,!1,t)}function rr(e,t){this.uniformMatrix3x4fv(e,!1,t)}function ir(e,t){this.uniformMatrix4x2fv(e,!1,t)}function sr(e,t){this.uniformMatrix4x3fv(e,!1,t)}function ps(e,t){let n={},r=Wn(e,t);for(let i of r){let s=i.name,a=i.size,o=i.type,l=e.getUniformLocation(t,s),u;a<=1?u=cs(e,o):u=fs(e,o),n[s]={type:o,length:a,location:l,set:u}}return n}function ds(e,t,n){let r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){let s=e.getShaderInfoLog(r)+`
Failed to compile shader:
${n}`;throw e.deleteShader(r),new Error(s)}return r}function vs(e,t,n){for(let i of n)e.attachShader(t,i);e.linkProgram(t);for(let i of n)e.detachShader(t,i),e.deleteShader(i);if(!e.getProgramParameter(t,e.LINK_STATUS)){let i=e.getProgramInfoLog(t);throw e.deleteProgram(t),new Error(i)}return t}function ms(e,t){return{handle:t,linkStatus:e.getProgramParameter(t,e.LINK_STATUS),deleteStatus:e.getProgramParameter(t,e.DELETE_STATUS),validateStatus:e.getProgramParameter(t,e.VALIDATE_STATUS),validationLog:e.getProgramInfoLog(t),activeUniforms:ps(e,t),activeAttributes:hs(e,t)}}var Me=Object.freeze({__proto__:null,createShader:ds,createShaderProgram:vs,getProgramInfo:ms,getActiveUniforms:Wn,getActiveAttribs:Xn});var H=1e-6,J=typeof Float32Array!="undefined"?Float32Array:Array,It=Math.random;var Lo=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var le={};Ye(le,{add:()=>Qs,adjoint:()=>ws,clone:()=>_s,copy:()=>ys,create:()=>xs,determinant:()=>Ms,equals:()=>na,exactEquals:()=>ta,frob:()=>Zs,fromQuat:()=>Gs,fromQuat2:()=>Hs,fromRotation:()=>Bs,fromRotationTranslation:()=>lr,fromRotationTranslationScale:()=>ks,fromRotationTranslationScaleOrigin:()=>$s,fromScaling:()=>Os,fromTranslation:()=>Is,fromValues:()=>As,fromXRotation:()=>Ds,fromYRotation:()=>Ps,fromZRotation:()=>Fs,frustum:()=>Vs,getRotation:()=>zs,getScaling:()=>ur,getTranslation:()=>Us,identity:()=>ar,invert:()=>bs,lookAt:()=>qs,mul:()=>ra,multiply:()=>or,multiplyScalar:()=>Js,multiplyScalarAndAdd:()=>ea,ortho:()=>Ys,perspective:()=>js,perspectiveFromFieldOfView:()=>Ks,rotate:()=>Rs,rotateX:()=>Ls,rotateY:()=>Cs,rotateZ:()=>Ns,scale:()=>Ts,set:()=>gs,str:()=>Xs,sub:()=>ia,subtract:()=>hr,targetTo:()=>Ws,translate:()=>Ss,transpose:()=>Es});function xs(){var e=new J(16);return J!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function _s(e){var t=new J(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ys(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function As(e,t,n,r,i,s,a,o,l,u,h,c,p,v,d,m){var f=new J(16);return f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=i,f[5]=s,f[6]=a,f[7]=o,f[8]=l,f[9]=u,f[10]=h,f[11]=c,f[12]=p,f[13]=v,f[14]=d,f[15]=m,f}function gs(e,t,n,r,i,s,a,o,l,u,h,c,p,v,d,m,f){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=l,e[8]=u,e[9]=h,e[10]=c,e[11]=p,e[12]=v,e[13]=d,e[14]=m,e[15]=f,e}function ar(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Es(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function bs(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],h=t[8],c=t[9],p=t[10],v=t[11],d=t[12],m=t[13],f=t[14],A=t[15],L=n*o-r*a,g=n*l-i*a,M=n*u-s*a,S=r*l-i*o,T=r*u-s*o,C=i*u-s*l,E=h*m-c*d,b=h*f-p*d,B=h*A-v*d,y=c*f-p*m,I=c*A-v*m,N=p*A-v*f,O=L*N-g*I+M*y+S*B-T*b+C*E;return O?(O=1/O,e[0]=(o*N-l*I+u*y)*O,e[1]=(i*I-r*N-s*y)*O,e[2]=(m*C-f*T+A*S)*O,e[3]=(p*T-c*C-v*S)*O,e[4]=(l*B-a*N-u*b)*O,e[5]=(n*N-i*B+s*b)*O,e[6]=(f*M-d*C-A*g)*O,e[7]=(h*C-p*M+v*g)*O,e[8]=(a*I-o*B+u*E)*O,e[9]=(r*B-n*I-s*E)*O,e[10]=(d*T-m*M+A*L)*O,e[11]=(c*M-h*T-v*L)*O,e[12]=(o*b-a*y-l*E)*O,e[13]=(n*y-r*b+i*E)*O,e[14]=(m*g-d*S-f*L)*O,e[15]=(h*S-c*g+p*L)*O,e):null}function ws(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],h=t[8],c=t[9],p=t[10],v=t[11],d=t[12],m=t[13],f=t[14],A=t[15];return e[0]=o*(p*A-v*f)-c*(l*A-u*f)+m*(l*v-u*p),e[1]=-(r*(p*A-v*f)-c*(i*A-s*f)+m*(i*v-s*p)),e[2]=r*(l*A-u*f)-o*(i*A-s*f)+m*(i*u-s*l),e[3]=-(r*(l*v-u*p)-o*(i*v-s*p)+c*(i*u-s*l)),e[4]=-(a*(p*A-v*f)-h*(l*A-u*f)+d*(l*v-u*p)),e[5]=n*(p*A-v*f)-h*(i*A-s*f)+d*(i*v-s*p),e[6]=-(n*(l*A-u*f)-a*(i*A-s*f)+d*(i*u-s*l)),e[7]=n*(l*v-u*p)-a*(i*v-s*p)+h*(i*u-s*l),e[8]=a*(c*A-v*m)-h*(o*A-u*m)+d*(o*v-u*c),e[9]=-(n*(c*A-v*m)-h*(r*A-s*m)+d*(r*v-s*c)),e[10]=n*(o*A-u*m)-a*(r*A-s*m)+d*(r*u-s*o),e[11]=-(n*(o*v-u*c)-a*(r*v-s*c)+h*(r*u-s*o)),e[12]=-(a*(c*f-p*m)-h*(o*f-l*m)+d*(o*p-l*c)),e[13]=n*(c*f-p*m)-h*(r*f-i*m)+d*(r*p-i*c),e[14]=-(n*(o*f-l*m)-a*(r*f-i*m)+d*(r*l-i*o)),e[15]=n*(o*p-l*c)-a*(r*p-i*c)+h*(r*l-i*o),e}function Ms(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],h=e[9],c=e[10],p=e[11],v=e[12],d=e[13],m=e[14],f=e[15],A=t*a-n*s,L=t*o-r*s,g=t*l-i*s,M=n*o-r*a,S=n*l-i*a,T=r*l-i*o,C=u*d-h*v,E=u*m-c*v,b=u*f-p*v,B=h*m-c*d,y=h*f-p*d,I=c*f-p*m;return A*I-L*y+g*B+M*b-S*E+T*C}function or(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],p=t[9],v=t[10],d=t[11],m=t[12],f=t[13],A=t[14],L=t[15],g=n[0],M=n[1],S=n[2],T=n[3];return e[0]=g*r+M*o+S*c+T*m,e[1]=g*i+M*l+S*p+T*f,e[2]=g*s+M*u+S*v+T*A,e[3]=g*a+M*h+S*d+T*L,g=n[4],M=n[5],S=n[6],T=n[7],e[4]=g*r+M*o+S*c+T*m,e[5]=g*i+M*l+S*p+T*f,e[6]=g*s+M*u+S*v+T*A,e[7]=g*a+M*h+S*d+T*L,g=n[8],M=n[9],S=n[10],T=n[11],e[8]=g*r+M*o+S*c+T*m,e[9]=g*i+M*l+S*p+T*f,e[10]=g*s+M*u+S*v+T*A,e[11]=g*a+M*h+S*d+T*L,g=n[12],M=n[13],S=n[14],T=n[15],e[12]=g*r+M*o+S*c+T*m,e[13]=g*i+M*l+S*p+T*f,e[14]=g*s+M*u+S*v+T*A,e[15]=g*a+M*h+S*d+T*L,e}function Ss(e,t,n){var r=n[0],i=n[1],s=n[2],a,o,l,u,h,c,p,v,d,m,f,A;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],u=t[3],h=t[4],c=t[5],p=t[6],v=t[7],d=t[8],m=t[9],f=t[10],A=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=u,e[4]=h,e[5]=c,e[6]=p,e[7]=v,e[8]=d,e[9]=m,e[10]=f,e[11]=A,e[12]=a*r+h*i+d*s+t[12],e[13]=o*r+c*i+m*s+t[13],e[14]=l*r+p*i+f*s+t[14],e[15]=u*r+v*i+A*s+t[15]),e}function Ts(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Rs(e,t,n,r){var i=r[0],s=r[1],a=r[2],o=Math.hypot(i,s,a),l,u,h,c,p,v,d,m,f,A,L,g,M,S,T,C,E,b,B,y,I,N,O,x;return o<H?null:(o=1/o,i*=o,s*=o,a*=o,l=Math.sin(n),u=Math.cos(n),h=1-u,c=t[0],p=t[1],v=t[2],d=t[3],m=t[4],f=t[5],A=t[6],L=t[7],g=t[8],M=t[9],S=t[10],T=t[11],C=i*i*h+u,E=s*i*h+a*l,b=a*i*h-s*l,B=i*s*h-a*l,y=s*s*h+u,I=a*s*h+i*l,N=i*a*h+s*l,O=s*a*h-i*l,x=a*a*h+u,e[0]=c*C+m*E+g*b,e[1]=p*C+f*E+M*b,e[2]=v*C+A*E+S*b,e[3]=d*C+L*E+T*b,e[4]=c*B+m*y+g*I,e[5]=p*B+f*y+M*I,e[6]=v*B+A*y+S*I,e[7]=d*B+L*y+T*I,e[8]=c*N+m*O+g*x,e[9]=p*N+f*O+M*x,e[10]=v*N+A*O+S*x,e[11]=d*N+L*O+T*x,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Ls(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],a=t[5],o=t[6],l=t[7],u=t[8],h=t[9],c=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+u*r,e[5]=a*i+h*r,e[6]=o*i+c*r,e[7]=l*i+p*r,e[8]=u*i-s*r,e[9]=h*i-a*r,e[10]=c*i-o*r,e[11]=p*i-l*r,e}function Cs(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],u=t[8],h=t[9],c=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-u*r,e[1]=a*i-h*r,e[2]=o*i-c*r,e[3]=l*i-p*r,e[8]=s*r+u*i,e[9]=a*r+h*i,e[10]=o*r+c*i,e[11]=l*r+p*i,e}function Ns(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],u=t[4],h=t[5],c=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+u*r,e[1]=a*i+h*r,e[2]=o*i+c*r,e[3]=l*i+p*r,e[4]=u*i-s*r,e[5]=h*i-a*r,e[6]=c*i-o*r,e[7]=p*i-l*r,e}function Is(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Os(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bs(e,t,n){var r=n[0],i=n[1],s=n[2],a=Math.hypot(r,i,s),o,l,u;return a<H?null:(a=1/a,r*=a,i*=a,s*=a,o=Math.sin(t),l=Math.cos(t),u=1-l,e[0]=r*r*u+l,e[1]=i*r*u+s*o,e[2]=s*r*u-i*o,e[3]=0,e[4]=r*i*u-s*o,e[5]=i*i*u+l,e[6]=s*i*u+r*o,e[7]=0,e[8]=r*s*u+i*o,e[9]=i*s*u-r*o,e[10]=s*s*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ds(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ps(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fs(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lr(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=r+r,l=i+i,u=s+s,h=r*o,c=r*l,p=r*u,v=i*l,d=i*u,m=s*u,f=a*o,A=a*l,L=a*u;return e[0]=1-(v+m),e[1]=c+L,e[2]=p-A,e[3]=0,e[4]=c-L,e[5]=1-(h+m),e[6]=d+f,e[7]=0,e[8]=p+A,e[9]=d-f,e[10]=1-(h+v),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Hs(e,t){var n=new J(3),r=-t[0],i=-t[1],s=-t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=r*r+i*i+s*s+a*a;return c>0?(n[0]=(o*a+h*r+l*s-u*i)*2/c,n[1]=(l*a+h*i+u*r-o*s)*2/c,n[2]=(u*a+h*s+o*i-l*r)*2/c):(n[0]=(o*a+h*r+l*s-u*i)*2,n[1]=(l*a+h*i+u*r-o*s)*2,n[2]=(u*a+h*s+o*i-l*r)*2),lr(e,t,n),e}function Us(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ur(e,t){var n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],l=t[8],u=t[9],h=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,u,h),e}function zs(e,t){var n=new J(3);ur(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],a=t[0]*r,o=t[1]*i,l=t[2]*s,u=t[4]*r,h=t[5]*i,c=t[6]*s,p=t[8]*r,v=t[9]*i,d=t[10]*s,m=a+h+d,f=0;return m>0?(f=Math.sqrt(m+1)*2,e[3]=.25*f,e[0]=(c-v)/f,e[1]=(p-l)/f,e[2]=(o-u)/f):a>h&&a>d?(f=Math.sqrt(1+a-h-d)*2,e[3]=(c-v)/f,e[0]=.25*f,e[1]=(o+u)/f,e[2]=(p+l)/f):h>d?(f=Math.sqrt(1+h-a-d)*2,e[3]=(p-l)/f,e[0]=(o+u)/f,e[1]=.25*f,e[2]=(c+v)/f):(f=Math.sqrt(1+d-a-h)*2,e[3]=(o-u)/f,e[0]=(p+l)/f,e[1]=(c+v)/f,e[2]=.25*f),e}function ks(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=t[3],l=i+i,u=s+s,h=a+a,c=i*l,p=i*u,v=i*h,d=s*u,m=s*h,f=a*h,A=o*l,L=o*u,g=o*h,M=r[0],S=r[1],T=r[2];return e[0]=(1-(d+f))*M,e[1]=(p+g)*M,e[2]=(v-L)*M,e[3]=0,e[4]=(p-g)*S,e[5]=(1-(c+f))*S,e[6]=(m+A)*S,e[7]=0,e[8]=(v+L)*T,e[9]=(m-A)*T,e[10]=(1-(c+d))*T,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function $s(e,t,n,r,i){var s=t[0],a=t[1],o=t[2],l=t[3],u=s+s,h=a+a,c=o+o,p=s*u,v=s*h,d=s*c,m=a*h,f=a*c,A=o*c,L=l*u,g=l*h,M=l*c,S=r[0],T=r[1],C=r[2],E=i[0],b=i[1],B=i[2],y=(1-(m+A))*S,I=(v+M)*S,N=(d-g)*S,O=(v-M)*T,x=(1-(p+A))*T,_=(f+L)*T,k=(d+g)*C,F=(f-L)*C,j=(1-(p+m))*C;return e[0]=y,e[1]=I,e[2]=N,e[3]=0,e[4]=O,e[5]=x,e[6]=_,e[7]=0,e[8]=k,e[9]=F,e[10]=j,e[11]=0,e[12]=n[0]+E-(y*E+O*b+k*B),e[13]=n[1]+b-(I*E+x*b+F*B),e[14]=n[2]+B-(N*E+_*b+j*B),e[15]=1,e}function Gs(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,l=i+i,u=n*a,h=r*a,c=r*o,p=i*a,v=i*o,d=i*l,m=s*a,f=s*o,A=s*l;return e[0]=1-c-d,e[1]=h+A,e[2]=p-f,e[3]=0,e[4]=h-A,e[5]=1-u-d,e[6]=v+m,e[7]=0,e[8]=p+f,e[9]=v-m,e[10]=1-u-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vs(e,t,n,r,i,s,a){var o=1/(n-t),l=1/(i-r),u=1/(s-a);return e[0]=s*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*l,e[10]=(a+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*u,e[15]=0,e}function js(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==Infinity?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function Ks(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+o),u=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((a-o)*l*.5),e[9]=(i-s)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Ys(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),u=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=(a+s)*u,e[15]=1,e}function qs(e,t,n,r){var i,s,a,o,l,u,h,c,p,v,d=t[0],m=t[1],f=t[2],A=r[0],L=r[1],g=r[2],M=n[0],S=n[1],T=n[2];return Math.abs(d-M)<H&&Math.abs(m-S)<H&&Math.abs(f-T)<H?ar(e):(h=d-M,c=m-S,p=f-T,v=1/Math.hypot(h,c,p),h*=v,c*=v,p*=v,i=L*p-g*c,s=g*h-A*p,a=A*c-L*h,v=Math.hypot(i,s,a),v?(v=1/v,i*=v,s*=v,a*=v):(i=0,s=0,a=0),o=c*a-p*s,l=p*i-h*a,u=h*s-c*i,v=Math.hypot(o,l,u),v?(v=1/v,o*=v,l*=v,u*=v):(o=0,l=0,u=0),e[0]=i,e[1]=o,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=c,e[7]=0,e[8]=a,e[9]=u,e[10]=p,e[11]=0,e[12]=-(i*d+s*m+a*f),e[13]=-(o*d+l*m+u*f),e[14]=-(h*d+c*m+p*f),e[15]=1,e)}function Ws(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=r[0],l=r[1],u=r[2],h=i-n[0],c=s-n[1],p=a-n[2],v=h*h+c*c+p*p;v>0&&(v=1/Math.sqrt(v),h*=v,c*=v,p*=v);var d=l*p-u*c,m=u*h-o*p,f=o*c-l*h;return v=d*d+m*m+f*f,v>0&&(v=1/Math.sqrt(v),d*=v,m*=v,f*=v),e[0]=d,e[1]=m,e[2]=f,e[3]=0,e[4]=c*f-p*m,e[5]=p*d-h*f,e[6]=h*m-c*d,e[7]=0,e[8]=h,e[9]=c,e[10]=p,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function Xs(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Zs(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Qs(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function hr(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Js(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function ea(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function ta(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function na(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],h=e[8],c=e[9],p=e[10],v=e[11],d=e[12],m=e[13],f=e[14],A=e[15],L=t[0],g=t[1],M=t[2],S=t[3],T=t[4],C=t[5],E=t[6],b=t[7],B=t[8],y=t[9],I=t[10],N=t[11],O=t[12],x=t[13],_=t[14],k=t[15];return Math.abs(n-L)<=H*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(r-g)<=H*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(i-M)<=H*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(s-S)<=H*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(a-T)<=H*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-C)<=H*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(l-E)<=H*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(u-b)<=H*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(h-B)<=H*Math.max(1,Math.abs(h),Math.abs(B))&&Math.abs(c-y)<=H*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(p-I)<=H*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(v-N)<=H*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(d-O)<=H*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(m-x)<=H*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(f-_)<=H*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(A-k)<=H*Math.max(1,Math.abs(A),Math.abs(k))}var ra=or,ia=hr;var je={};Ye(je,{add:()=>ua,angle:()=>Na,bezier:()=>ba,ceil:()=>ha,clone:()=>sa,copy:()=>oa,create:()=>cr,cross:()=>Aa,dist:()=>Ua,distance:()=>mr,div:()=>Ha,divide:()=>vr,dot:()=>yr,equals:()=>Da,exactEquals:()=>Ba,floor:()=>ca,forEach:()=>Ga,fromValues:()=>aa,hermite:()=>Ea,inverse:()=>_a,len:()=>ka,length:()=>fr,lerp:()=>ga,max:()=>pa,min:()=>fa,mul:()=>Fa,multiply:()=>dr,negate:()=>xa,normalize:()=>ya,random:()=>wa,rotateX:()=>Ra,rotateY:()=>La,rotateZ:()=>Ca,round:()=>da,scale:()=>va,scaleAndAdd:()=>ma,set:()=>la,sqrDist:()=>za,sqrLen:()=>$a,squaredDistance:()=>xr,squaredLength:()=>_r,str:()=>Oa,sub:()=>Pa,subtract:()=>pr,transformMat3:()=>Sa,transformMat4:()=>Ma,transformQuat:()=>Ta,zero:()=>Ia});function cr(){var e=new J(3);return J!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function sa(e){var t=new J(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function fr(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function aa(e,t,n){var r=new J(3);return r[0]=e,r[1]=t,r[2]=n,r}function oa(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function la(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ua(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function pr(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function dr(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function vr(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function ha(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ca(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function fa(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function pa(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function da(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function va(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function ma(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function mr(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function xr(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function _r(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function xa(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function _a(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ya(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function yr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Aa(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function ga(e,t,n,r){var i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function Ea(e,t,n,r,i,s){var a=s*s,o=a*(2*s-3)+1,l=a*(s-2)+s,u=a*(s-1),h=a*(3-2*s);return e[0]=t[0]*o+n[0]*l+r[0]*u+i[0]*h,e[1]=t[1]*o+n[1]*l+r[1]*u+i[1]*h,e[2]=t[2]*o+n[2]*l+r[2]*u+i[2]*h,e}function ba(e,t,n,r,i,s){var a=1-s,o=a*a,l=s*s,u=o*a,h=3*s*o,c=3*l*a,p=l*s;return e[0]=t[0]*u+n[0]*h+r[0]*c+i[0]*p,e[1]=t[1]*u+n[1]*h+r[1]*c+i[1]*p,e[2]=t[2]*u+n[2]*h+r[2]*c+i[2]*p,e}function wa(e,t){t=t||1;var n=It()*2*Math.PI,r=It()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function Ma(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function Sa(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function Ta(e,t,n){var r=n[0],i=n[1],s=n[2],a=n[3],o=t[0],l=t[1],u=t[2],h=i*u-s*l,c=s*o-r*u,p=r*l-i*o,v=i*p-s*c,d=s*h-r*p,m=r*c-i*h,f=a*2;return h*=f,c*=f,p*=f,v*=2,d*=2,m*=2,e[0]=o+h+v,e[1]=l+c+d,e[2]=u+p+m,e}function Ra(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function La(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Ca(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Na(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2],l=Math.sqrt(n*n+r*r+i*i),u=Math.sqrt(s*s+a*a+o*o),h=l*u,c=h&&yr(e,t)/h;return Math.acos(Math.min(Math.max(c,-1),1))}function Ia(e){return e[0]=0,e[1]=0,e[2]=0,e}function Oa(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Ba(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Da(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2];return Math.abs(n-s)<=H*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=H*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-o)<=H*Math.max(1,Math.abs(i),Math.abs(o))}var Pa=pr,Fa=dr,Ha=vr,Ua=mr,za=xr,ka=fr,$a=_r,Ga=function(){var e=cr();return function(t,n,r,i,s,a){var o,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,o=r;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],s(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}}();var Fo=je.fromValues(0,1,0);var Ar=class{constructor(t,n){this.projectionMatrix=t,this.viewMatrix=n}resize(t=void 0,n=void 0){return this}},Ho=Math.PI/3;var Ot=class extends Ar{constructor(t=void 0,n=void 0,r=void 0,i=void 0,s=-1e3,a=1e3){super(le.create(),le.create());this.orthoBounds={left:typeof t=="undefined"?void 0:Number(t),top:typeof n=="undefined"?void 0:Number(n),right:typeof r=="undefined"?void 0:Number(r),bottom:typeof i=="undefined"?void 0:Number(i)},this.clippingPlane={near:Number(s),far:Number(a)}}resize(t=void 0,n=void 0){let{near:r,far:i}=this.clippingPlane,{left:s,top:a,right:o,bottom:l}=this.orthoBounds,u=this.projectionMatrix,h=typeof t!="undefined",c=typeof s!="undefined";if(h)if(c){let p=t/n;le.ortho(u,s*p,o*p,l,a,r,i)}else le.ortho(u,0,t,n,0,r,i);else c?le.ortho(u,s,o,l,a,r,i):le.ortho(u,-1,1,1,-1,-1,1);return this}},Uo=Math.PI/180;var Va=`#version 300 es

in vec2 a_position;

void main()
{
    gl_Position = vec4(a_position.xy, 0, 1);
}
`,ja=`#version 300 es

precision highp float;

out vec4 fragColor;

void main()
{
    fragColor = vec4(1, 0, 0.5, 1);
}
`;async function gr(e){let t=e.display.getContext("webgl2");if(!t)throw new Error("Sorry, your browser does not support WebGL2!");let n=new Ot,r=Me.createShader(t,t.VERTEX_SHADER,Va),i=Me.createShader(t,t.FRAGMENT_SHADER,ja),s=Me.createShaderProgram(t,t.createProgram(),[r,i]),a=Me.getProgramInfo(t,s),o=Nt.createBufferSource(t,t.FLOAT,[0,0,0,.5,.7,0]),l=Nt.createBuffer(t,t.ARRAY_BUFFER,o,t.STATIC_DRAW),u=Ka(t,s);Ya(t,a.activeAttributes.a_position.location,l,2,t.FLOAT),e.on("frame",()=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.useProgram(s),t.bindVertexArray(u),t.drawArrays(t.TRIANGLES,0,3)})}function Ka(e,t){let n=e.createVertexArray();return e.useProgram(t),e.bindVertexArray(n),n}function Ya(e,t,n,r,i,s=!1,a=0,o=0){e.enableVertexAttribArray(t),e.bindBuffer(e.ARRAY_BUFFER,n),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r,i,s,a,o)}window.addEventListener("DOMContentLoaded",qa);async function qa(){let e=document.querySelector("#display"),t=document.querySelector("#inputs").getContext("axisbutton"),n=document.querySelector("#assets"),r=new Promise((s,a)=>{n.addEventListener("load",s),n.addEventListener("error",a)});n.src="res.pack",await r,await n.pipe("res/**/*.png",async(s,a)=>n.cache("image:"+a.substring(4),await St(s,"image/png"))),await n.pipe("res/**/*.obj",async(s,a)=>n.cache("obj:"+a.substring(4),await Tt(s))),await n.pipe("res/**/*.atlas",async(s,a)=>n.cache("atlas:"+a.substring(4),await Rt(s))),await n.pipe("res/**/*.wav",async(s,a)=>{let o=Ve.getAudioContext(),l=await Lt(s,o),u=new Ve(o,l);return n.cache("sound:"+a.substring(4),u)});let i=new Mt(e,t,n);e.addEventListener("frame",s=>{let{deltaTime:a,prevTime:o,now:l}=s.detail;i.deltaTime=a,i.prevTime=o,i.now=l,t.poll(l),i.emit("frame")}),await gr(i)}})();
//# sourceMappingURL=main.js.map
