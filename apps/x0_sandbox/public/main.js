(()=>{var Tr=Object.create,Oe=Object.defineProperty,Sr=Object.getPrototypeOf,Rr=Object.prototype.hasOwnProperty,Mr=Object.getOwnPropertyNames,Lr=Object.getOwnPropertyDescriptor;var Cr=n=>Oe(n,"__esModule",{value:!0});var Ir=(n,e)=>()=>(n&&(e=n(n=0)),e),de=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Je=(n,e)=>{for(var t in e)Oe(n,t,{get:e[t],enumerable:!0})},Or=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Mr(e))!Rr.call(n,r)&&r!=="default"&&Oe(n,r,{get:()=>e[r],enumerable:!(t=Lr(e,r))||t.enumerable});return n},Nr=n=>Or(Cr(Oe(n!=null?Tr(Sr(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var Mn={};Je(Mn,{basename:()=>Dn,default:()=>Ri,delimiter:()=>Nn,dirname:()=>Bn,extname:()=>Fn,isAbsolute:()=>Et,join:()=>Cn,normalize:()=>yt,relative:()=>In,resolve:()=>He,sep:()=>On});function Ln(n,e){for(var t=0,r=n.length-1;r>=0;r--){var s=n[r];s==="."?n.splice(r,1):s===".."?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}function He(){for(var n="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;n=r+"/"+n,e=r.charAt(0)==="/"}return n=Ln(xt(n.split("/"),function(s){return!!s}),!e).join("/"),(e?"/":"")+n||"."}function yt(n){var e=Et(n),t=Si(n,-1)==="/";return n=Ln(xt(n.split("/"),function(r){return!!r}),!e).join("/"),!n&&!e&&(n="."),n&&t&&(n+="/"),(e?"/":"")+n}function Et(n){return n.charAt(0)==="/"}function Cn(){var n=Array.prototype.slice.call(arguments,0);return yt(xt(n,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function In(n,e){n=He(n).substr(1),e=He(e).substr(1);function t(c){for(var p=0;p<c.length&&c[p]==="";p++);for(var _=c.length-1;_>=0&&c[_]==="";_--);return p>_?[]:c.slice(p,_-p+1)}for(var r=t(n.split("/")),s=t(e.split("/")),i=Math.min(r.length,s.length),o=i,a=0;a<i;a++)if(r[a]!==s[a]){o=a;break}for(var u=[],a=o;a<r.length;a++)u.push("..");return u=u.concat(s.slice(o)),u.join("/")}function Bn(n){var e=gt(n),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function Dn(n,e){var t=gt(n)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function Fn(n){return gt(n)[3]}function xt(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}var Ti,gt,On,Nn,Ri,Si,Pn=Ir(()=>{Ti=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,gt=function(n){return Ti.exec(n).slice(1)};On="/",Nn=":";Ri={extname:Fn,basename:Dn,dirname:Bn,sep:On,delimiter:Nn,relative:In,join:Cn,isAbsolute:Et,normalize:yt,resolve:He};Si="ab".substr(-1)==="b"?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}});var je=de((Pa,Ke)=>{var fe=(Pn(),Mn);fe&&fe.default?Ke.exports=fe.default:fe&&(Ke.exports=fe);if(fe)for(let n in fe)Ke.exports[n]=fe[n]});var be=de((Ua,Un)=>{"use strict";var Mi=je(),ue="\\\\/",kn=`[^${ue}]`,he="\\.",Li="\\+",Ci="\\?",ze="\\/",Ii="(?=.)",Hn="[^/]",At=`(?:${ze}|$)`,Kn=`(?:^|${ze})`,wt=`${he}{1,2}${At}`,Oi=`(?!${he})`,Ni=`(?!${Kn}${wt})`,Bi=`(?!${he}{0,1}${At})`,Di=`(?!${wt})`,Fi=`[^.${ze}]`,Pi=`${Hn}*?`,jn={DOT_LITERAL:he,PLUS_LITERAL:Li,QMARK_LITERAL:Ci,SLASH_LITERAL:ze,ONE_CHAR:Ii,QMARK:Hn,END_ANCHOR:At,DOTS_SLASH:wt,NO_DOT:Oi,NO_DOTS:Ni,NO_DOT_SLASH:Bi,NO_DOTS_SLASH:Di,QMARK_NO_DOT:Fi,STAR:Pi,START_ANCHOR:Kn},Ui={...jn,SLASH_LITERAL:`[${ue}]`,QMARK:kn,STAR:`${kn}*?`,DOTS_SLASH:`${he}{1,2}(?:[${ue}]|$)`,NO_DOT:`(?!${he})`,NO_DOTS:`(?!(?:^|[${ue}])${he}{1,2}(?:[${ue}]|$))`,NO_DOT_SLASH:`(?!${he}{0,1}(?:[${ue}]|$))`,NO_DOTS_SLASH:`(?!${he}{1,2}(?:[${ue}]|$))`,QMARK_NO_DOT:`[^.${ue}]`,START_ANCHOR:`(?:^|[${ue}])`,END_ANCHOR:`(?:[${ue}]|$)`},ki={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Un.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ki,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Mi.sep,extglobChars(n){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${n.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(n){return n===!0?Ui:jn}}});var $e=de(Z=>{"use strict";var Hi=je(),Ki=!1,{REGEX_BACKSLASH:ji,REGEX_REMOVE_BACKSLASH:zi,REGEX_SPECIAL_CHARS:$i,REGEX_SPECIAL_CHARS_GLOBAL:Gi}=be();Z.isObject=n=>n!==null&&typeof n=="object"&&!Array.isArray(n);Z.hasRegexChars=n=>$i.test(n);Z.isRegexChar=n=>n.length===1&&Z.hasRegexChars(n);Z.escapeRegex=n=>n.replace(Gi,"\\$1");Z.toPosixSlashes=n=>n.replace(ji,"/");Z.removeBackslashes=n=>n.replace(zi,e=>e==="\\"?"":e);Z.supportsLookbehinds=()=>{let n=process.version.slice(1).split(".").map(Number);return n.length===3&&n[0]>=9||n[0]===8&&n[1]>=10};Z.isWindows=n=>n&&typeof n.windows=="boolean"?n.windows:Ki===!0||Hi.sep==="\\";Z.escapeLast=(n,e,t)=>{let r=n.lastIndexOf(e,t);return r===-1?n:n[r-1]==="\\"?Z.escapeLast(n,e,r-1):`${n.slice(0,r)}\\${n.slice(r)}`};Z.removePrefix=(n,e={})=>{let t=n;return t.startsWith("./")&&(t=t.slice(2),e.prefix="./"),t};Z.wrapOutput=(n,e={},t={})=>{let r=t.contains?"":"^",s=t.contains?"":"$",i=`${r}(?:${n})${s}`;return e.negated===!0&&(i=`(?:^(?!${i}).*$)`),i}});var qn=de((Ha,zn)=>{"use strict";var $n=$e(),{CHAR_ASTERISK:bt,CHAR_AT:Yi,CHAR_BACKWARD_SLASH:Te,CHAR_COMMA:Vi,CHAR_DOT:Tt,CHAR_EXCLAMATION_MARK:St,CHAR_FORWARD_SLASH:Gn,CHAR_LEFT_CURLY_BRACE:Rt,CHAR_LEFT_PARENTHESES:Mt,CHAR_LEFT_SQUARE_BRACKET:Xi,CHAR_PLUS:Wi,CHAR_QUESTION_MARK:Yn,CHAR_RIGHT_CURLY_BRACE:qi,CHAR_RIGHT_PARENTHESES:Vn,CHAR_RIGHT_SQUARE_BRACKET:Zi}=be(),Xn=n=>n===Gn||n===Te,Wn=n=>{n.isPrefix!==!0&&(n.depth=n.isGlobstar?Infinity:1)},Qi=(n,e)=>{let t=e||{},r=n.length-1,s=t.parts===!0||t.scanToEnd===!0,i=[],o=[],a=[],u=n,c=-1,p=0,_=0,w=!1,T=!1,m=!1,y=!1,b=!1,L=!1,O=!1,S=!1,N=!1,B=!1,k=0,D,x,A={value:"",depth:0,isGlob:!1},j=()=>c>=r,f=()=>u.charCodeAt(c+1),F=()=>(D=x,u.charCodeAt(++c));for(;c<r;){x=F();let $;if(x===Te){O=A.backslashes=!0,x=F(),x===Rt&&(L=!0);continue}if(L===!0||x===Rt){for(k++;j()!==!0&&(x=F());){if(x===Te){O=A.backslashes=!0,F();continue}if(x===Rt){k++;continue}if(L!==!0&&x===Tt&&(x=F())===Tt){if(w=A.isBrace=!0,m=A.isGlob=!0,B=!0,s===!0)continue;break}if(L!==!0&&x===Vi){if(w=A.isBrace=!0,m=A.isGlob=!0,B=!0,s===!0)continue;break}if(x===qi&&(k--,k===0)){L=!1,w=A.isBrace=!0,B=!0;break}}if(s===!0)continue;break}if(x===Gn){if(i.push(c),o.push(A),A={value:"",depth:0,isGlob:!1},B===!0)continue;if(D===Tt&&c===p+1){p+=2;continue}_=c+1;continue}if(t.noext!==!0&&(x===Wi||x===Yi||x===bt||x===Yn||x===St)===!0&&f()===Mt){if(m=A.isGlob=!0,y=A.isExtglob=!0,B=!0,x===St&&c===p&&(N=!0),s===!0){for(;j()!==!0&&(x=F());){if(x===Te){O=A.backslashes=!0,x=F();continue}if(x===Vn){m=A.isGlob=!0,B=!0;break}}continue}break}if(x===bt){if(D===bt&&(b=A.isGlobstar=!0),m=A.isGlob=!0,B=!0,s===!0)continue;break}if(x===Yn){if(m=A.isGlob=!0,B=!0,s===!0)continue;break}if(x===Xi){for(;j()!==!0&&($=F());){if($===Te){O=A.backslashes=!0,F();continue}if($===Zi){T=A.isBracket=!0,m=A.isGlob=!0,B=!0;break}}if(s===!0)continue;break}if(t.nonegate!==!0&&x===St&&c===p){S=A.negated=!0,p++;continue}if(t.noparen!==!0&&x===Mt){if(m=A.isGlob=!0,s===!0){for(;j()!==!0&&(x=F());){if(x===Mt){O=A.backslashes=!0,x=F();continue}if(x===Vn){B=!0;break}}continue}break}if(m===!0){if(B=!0,s===!0)continue;break}}t.noext===!0&&(y=!1,m=!1);let I=u,Q="",h="";p>0&&(Q=u.slice(0,p),u=u.slice(p),_-=p),I&&m===!0&&_>0?(I=u.slice(0,_),h=u.slice(_)):m===!0?(I="",h=u):I=u,I&&I!==""&&I!=="/"&&I!==u&&Xn(I.charCodeAt(I.length-1))&&(I=I.slice(0,-1)),t.unescape===!0&&(h&&(h=$n.removeBackslashes(h)),I&&O===!0&&(I=$n.removeBackslashes(I)));let l={prefix:Q,input:n,start:p,base:I,glob:h,isBrace:w,isBracket:T,isGlob:m,isExtglob:y,isGlobstar:b,negated:S,negatedExtglob:N};if(t.tokens===!0&&(l.maxDepth=0,Xn(x)||o.push(A),l.tokens=o),t.parts===!0||t.tokens===!0){let $;for(let C=0;C<i.length;C++){let W=$?$+1:p,G=i[C],Y=n.slice(W,G);t.tokens&&(C===0&&p!==0?(o[C].isPrefix=!0,o[C].value=Q):o[C].value=Y,Wn(o[C]),l.maxDepth+=o[C].depth),(C!==0||Y!=="")&&a.push(Y),$=G}if($&&$+1<n.length){let C=n.slice($+1);a.push(C),t.tokens&&(o[o.length-1].value=C,Wn(o[o.length-1]),l.maxDepth+=o[o.length-1].depth)}l.slashes=i,l.parts=a}return l};zn.exports=Qi});var er=de((Ka,Zn)=>{"use strict";var Ge=be(),J=$e(),{MAX_LENGTH:Ye,POSIX_REGEX_SOURCE:Ji,REGEX_NON_SPECIAL_CHARS:eo,REGEX_SPECIAL_CHARS_BACKREF:to,REPLACEMENTS:Qn}=Ge,no=(n,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...n,e);n.sort();let t=`[${n.join("-")}]`;try{new RegExp(t)}catch(r){return n.map(s=>J.escapeRegex(s)).join("..")}return t},ge=(n,e)=>`Missing ${n}: "${e}" - use "\\\\${e}" to match literal characters`,Jn=(n,e)=>{if(typeof n!="string")throw new TypeError("Expected a string");n=Qn[n]||n;let t={...e},r=typeof t.maxLength=="number"?Math.min(Ye,t.maxLength):Ye,s=n.length;if(s>r)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${r}`);let i={type:"bos",value:"",output:t.prepend||""},o=[i],a=t.capture?"":"?:",u=J.isWindows(e),c=Ge.globChars(u),p=Ge.extglobChars(c),{DOT_LITERAL:_,PLUS_LITERAL:w,SLASH_LITERAL:T,ONE_CHAR:m,DOTS_SLASH:y,NO_DOT:b,NO_DOT_SLASH:L,NO_DOTS_SLASH:O,QMARK:S,QMARK_NO_DOT:N,STAR:B,START_ANCHOR:k}=c,D=g=>`(${a}(?:(?!${k}${g.dot?y:_}).)*?)`,x=t.dot?"":b,A=t.dot?S:N,j=t.bash===!0?D(t):B;t.capture&&(j=`(${j})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let f={input:n,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};n=J.removePrefix(n,f),s=n.length;let F=[],I=[],Q=[],h=i,l,$=()=>f.index===s-1,C=f.peek=(g=1)=>n[f.index+g],W=f.advance=()=>n[++f.index]||"",G=()=>n.slice(f.index+1),Y=(g="",P=0)=>{f.consumed+=g,f.index+=P},re=g=>{f.output+=g.output!=null?g.output:g.value,Y(g.value)},Ee=()=>{let g=1;for(;C()==="!"&&(C(2)!=="("||C(3)==="?");)W(),f.start++,g++;return g%2==0?!1:(f.negated=!0,f.start++,!0)},ce=g=>{f[g]++,Q.push(g)},se=g=>{f[g]--,Q.pop()},R=g=>{if(h.type==="globstar"){let P=f.braces>0&&(g.type==="comma"||g.type==="brace"),d=g.extglob===!0||F.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!P&&!d&&(f.output=f.output.slice(0,-h.output.length),h.type="star",h.value="*",h.output=j,f.output+=h.output)}if(F.length&&g.type!=="paren"&&(F[F.length-1].inner+=g.value),(g.value||g.output)&&re(g),h&&h.type==="text"&&g.type==="text"){h.value+=g.value,h.output=(h.output||"")+g.value;return}g.prev=h,o.push(g),h=g},pe=(g,P)=>{let d={...p[P],conditions:1,inner:""};d.prev=h,d.parens=f.parens,d.output=f.output;let M=(t.capture?"(":"")+d.open;ce("parens"),R({type:g,value:P,output:f.output?"":m}),R({type:"paren",extglob:!0,value:W(),output:M}),F.push(d)},Ce=g=>{let P=g.close+(t.capture?")":""),d;if(g.type==="negate"){let M=j;g.inner&&g.inner.length>1&&g.inner.includes("/")&&(M=D(t)),(M!==j||$()||/^\)+$/.test(G()))&&(P=g.close=`)$))${M}`),g.inner.includes("*")&&(d=G())&&/^\.[^\\/.]+$/.test(d)&&(P=g.close=`)${d})${M})`),g.prev.type==="bos"&&(f.negatedExtglob=!0)}R({type:"paren",extglob:!0,value:l,output:P}),se("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(n)){let g=!1,P=n.replace(to,(d,M,H,X,z,Qe)=>X==="\\"?(g=!0,d):X==="?"?M?M+X+(z?S.repeat(z.length):""):Qe===0?A+(z?S.repeat(z.length):""):S.repeat(H.length):X==="."?_.repeat(H.length):X==="*"?M?M+X+(z?j:""):j:M?d:`\\${d}`);return g===!0&&(t.unescape===!0?P=P.replace(/\\/g,""):P=P.replace(/\\+/g,d=>d.length%2==0?"\\\\":d?"\\":"")),P===n&&t.contains===!0?(f.output=n,f):(f.output=J.wrapOutput(P,f,e),f)}for(;!$();){if(l=W(),l==="\0")continue;if(l==="\\"){let d=C();if(d==="/"&&t.bash!==!0||d==="."||d===";")continue;if(!d){l+="\\",R({type:"text",value:l});continue}let M=/^\\+/.exec(G()),H=0;if(M&&M[0].length>2&&(H=M[0].length,f.index+=H,H%2!=0&&(l+="\\")),t.unescape===!0?l=W():l+=W(),f.brackets===0){R({type:"text",value:l});continue}}if(f.brackets>0&&(l!=="]"||h.value==="["||h.value==="[^")){if(t.posix!==!1&&l===":"){let d=h.value.slice(1);if(d.includes("[")&&(h.posix=!0,d.includes(":"))){let M=h.value.lastIndexOf("["),H=h.value.slice(0,M),X=h.value.slice(M+2),z=Ji[X];if(z){h.value=H+z,f.backtrack=!0,W(),!i.output&&o.indexOf(h)===1&&(i.output=m);continue}}}(l==="["&&C()!==":"||l==="-"&&C()==="]")&&(l=`\\${l}`),l==="]"&&(h.value==="["||h.value==="[^")&&(l=`\\${l}`),t.posix===!0&&l==="!"&&h.value==="["&&(l="^"),h.value+=l,re({value:l});continue}if(f.quotes===1&&l!=='"'){l=J.escapeRegex(l),h.value+=l,re({value:l});continue}if(l==='"'){f.quotes=f.quotes===1?0:1,t.keepQuotes===!0&&R({type:"text",value:l});continue}if(l==="("){ce("parens"),R({type:"paren",value:l});continue}if(l===")"){if(f.parens===0&&t.strictBrackets===!0)throw new SyntaxError(ge("opening","("));let d=F[F.length-1];if(d&&f.parens===d.parens+1){Ce(F.pop());continue}R({type:"paren",value:l,output:f.parens?")":"\\)"}),se("parens");continue}if(l==="["){if(t.nobracket===!0||!G().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(ge("closing","]"));l=`\\${l}`}else ce("brackets");R({type:"bracket",value:l});continue}if(l==="]"){if(t.nobracket===!0||h&&h.type==="bracket"&&h.value.length===1){R({type:"text",value:l,output:`\\${l}`});continue}if(f.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(ge("opening","["));R({type:"text",value:l,output:`\\${l}`});continue}se("brackets");let d=h.value.slice(1);if(h.posix!==!0&&d[0]==="^"&&!d.includes("/")&&(l=`/${l}`),h.value+=l,re({value:l}),t.literalBrackets===!1||J.hasRegexChars(d))continue;let M=J.escapeRegex(h.value);if(f.output=f.output.slice(0,-h.value.length),t.literalBrackets===!0){f.output+=M,h.value=M;continue}h.value=`(${a}${M}|${h.value})`,f.output+=h.value;continue}if(l==="{"&&t.nobrace!==!0){ce("braces");let d={type:"brace",value:l,output:"(",outputIndex:f.output.length,tokensIndex:f.tokens.length};I.push(d),R(d);continue}if(l==="}"){let d=I[I.length-1];if(t.nobrace===!0||!d){R({type:"text",value:l,output:l});continue}let M=")";if(d.dots===!0){let H=o.slice(),X=[];for(let z=H.length-1;z>=0&&(o.pop(),H[z].type!=="brace");z--)H[z].type!=="dots"&&X.unshift(H[z].value);M=no(X,t),f.backtrack=!0}if(d.comma!==!0&&d.dots!==!0){let H=f.output.slice(0,d.outputIndex),X=f.tokens.slice(d.tokensIndex);d.value=d.output="\\{",l=M="\\}",f.output=H;for(let z of X)f.output+=z.output||z.value}R({type:"brace",value:l,output:M}),se("braces"),I.pop();continue}if(l==="|"){F.length>0&&F[F.length-1].conditions++,R({type:"text",value:l});continue}if(l===","){let d=l,M=I[I.length-1];M&&Q[Q.length-1]==="braces"&&(M.comma=!0,d="|"),R({type:"comma",value:l,output:d});continue}if(l==="/"){if(h.type==="dot"&&f.index===f.start+1){f.start=f.index+1,f.consumed="",f.output="",o.pop(),h=i;continue}R({type:"slash",value:l,output:T});continue}if(l==="."){if(f.braces>0&&h.type==="dot"){h.value==="."&&(h.output=_);let d=I[I.length-1];h.type="dots",h.output+=l,h.value+=l,d.dots=!0;continue}if(f.braces+f.parens===0&&h.type!=="bos"&&h.type!=="slash"){R({type:"text",value:l,output:_});continue}R({type:"dot",value:l,output:_});continue}if(l==="?"){if(!(h&&h.value==="(")&&t.noextglob!==!0&&C()==="("&&C(2)!=="?"){pe("qmark",l);continue}if(h&&h.type==="paren"){let M=C(),H=l;if(M==="<"&&!J.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(h.value==="("&&!/[!=<:]/.test(M)||M==="<"&&!/<([!=]|\w+>)/.test(G()))&&(H=`\\${l}`),R({type:"text",value:l,output:H});continue}if(t.dot!==!0&&(h.type==="slash"||h.type==="bos")){R({type:"qmark",value:l,output:N});continue}R({type:"qmark",value:l,output:S});continue}if(l==="!"){if(t.noextglob!==!0&&C()==="("&&(C(2)!=="?"||!/[!=<:]/.test(C(3)))){pe("negate",l);continue}if(t.nonegate!==!0&&f.index===0){Ee();continue}}if(l==="+"){if(t.noextglob!==!0&&C()==="("&&C(2)!=="?"){pe("plus",l);continue}if(h&&h.value==="("||t.regex===!1){R({type:"plus",value:l,output:w});continue}if(h&&(h.type==="bracket"||h.type==="paren"||h.type==="brace")||f.parens>0){R({type:"plus",value:l});continue}R({type:"plus",value:w});continue}if(l==="@"){if(t.noextglob!==!0&&C()==="("&&C(2)!=="?"){R({type:"at",extglob:!0,value:l,output:""});continue}R({type:"text",value:l});continue}if(l!=="*"){(l==="$"||l==="^")&&(l=`\\${l}`);let d=eo.exec(G());d&&(l+=d[0],f.index+=d[0].length),R({type:"text",value:l});continue}if(h&&(h.type==="globstar"||h.star===!0)){h.type="star",h.star=!0,h.value+=l,h.output=j,f.backtrack=!0,f.globstar=!0,Y(l);continue}let g=G();if(t.noextglob!==!0&&/^\([^?]/.test(g)){pe("star",l);continue}if(h.type==="star"){if(t.noglobstar===!0){Y(l);continue}let d=h.prev,M=d.prev,H=d.type==="slash"||d.type==="bos",X=M&&(M.type==="star"||M.type==="globstar");if(t.bash===!0&&(!H||g[0]&&g[0]!=="/")){R({type:"star",value:l,output:""});continue}let z=f.braces>0&&(d.type==="comma"||d.type==="brace"),Qe=F.length&&(d.type==="pipe"||d.type==="paren");if(!H&&d.type!=="paren"&&!z&&!Qe){R({type:"star",value:l,output:""});continue}for(;g.slice(0,3)==="/**";){let Ie=n[f.index+4];if(Ie&&Ie!=="/")break;g=g.slice(3),Y("/**",3)}if(d.type==="bos"&&$()){h.type="globstar",h.value+=l,h.output=D(t),f.output=h.output,f.globstar=!0,Y(l);continue}if(d.type==="slash"&&d.prev.type!=="bos"&&!X&&$()){f.output=f.output.slice(0,-(d.output+h.output).length),d.output=`(?:${d.output}`,h.type="globstar",h.output=D(t)+(t.strictSlashes?")":"|$)"),h.value+=l,f.globstar=!0,f.output+=d.output+h.output,Y(l);continue}if(d.type==="slash"&&d.prev.type!=="bos"&&g[0]==="/"){let Ie=g[1]!==void 0?"|$":"";f.output=f.output.slice(0,-(d.output+h.output).length),d.output=`(?:${d.output}`,h.type="globstar",h.output=`${D(t)}${T}|${T}${Ie})`,h.value+=l,f.output+=d.output+h.output,f.globstar=!0,Y(l+W()),R({type:"slash",value:"/",output:""});continue}if(d.type==="bos"&&g[0]==="/"){h.type="globstar",h.value+=l,h.output=`(?:^|${T}|${D(t)}${T})`,f.output=h.output,f.globstar=!0,Y(l+W()),R({type:"slash",value:"/",output:""});continue}f.output=f.output.slice(0,-h.output.length),h.type="globstar",h.output=D(t),h.value+=l,f.output+=h.output,f.globstar=!0,Y(l);continue}let P={type:"star",value:l,output:j};if(t.bash===!0){P.output=".*?",(h.type==="bos"||h.type==="slash")&&(P.output=x+P.output),R(P);continue}if(h&&(h.type==="bracket"||h.type==="paren")&&t.regex===!0){P.output=l,R(P);continue}(f.index===f.start||h.type==="slash"||h.type==="dot")&&(h.type==="dot"?(f.output+=L,h.output+=L):t.dot===!0?(f.output+=O,h.output+=O):(f.output+=x,h.output+=x),C()!=="*"&&(f.output+=m,h.output+=m)),R(P)}for(;f.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(ge("closing","]"));f.output=J.escapeLast(f.output,"["),se("brackets")}for(;f.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(ge("closing",")"));f.output=J.escapeLast(f.output,"("),se("parens")}for(;f.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(ge("closing","}"));f.output=J.escapeLast(f.output,"{"),se("braces")}if(t.strictSlashes!==!0&&(h.type==="star"||h.type==="bracket")&&R({type:"maybe_slash",value:"",output:`${T}?`}),f.backtrack===!0){f.output="";for(let g of f.tokens)f.output+=g.output!=null?g.output:g.value,g.suffix&&(f.output+=g.suffix)}return f};Jn.fastpaths=(n,e)=>{let t={...e},r=typeof t.maxLength=="number"?Math.min(Ye,t.maxLength):Ye,s=n.length;if(s>r)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${r}`);n=Qn[n]||n;let i=J.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:p,NO_DOTS:_,NO_DOTS_SLASH:w,STAR:T,START_ANCHOR:m}=Ge.globChars(i),y=t.dot?_:p,b=t.dot?w:p,L=t.capture?"":"?:",O={negated:!1,prefix:""},S=t.bash===!0?".*?":T;t.capture&&(S=`(${S})`);let N=x=>x.noglobstar===!0?S:`(${L}(?:(?!${m}${x.dot?c:o}).)*?)`,B=x=>{switch(x){case"*":return`${y}${u}${S}`;case".*":return`${o}${u}${S}`;case"*.*":return`${y}${S}${o}${u}${S}`;case"*/*":return`${y}${S}${a}${u}${b}${S}`;case"**":return y+N(t);case"**/*":return`(?:${y}${N(t)}${a})?${b}${u}${S}`;case"**/*.*":return`(?:${y}${N(t)}${a})?${b}${S}${o}${u}${S}`;case"**/.*":return`(?:${y}${N(t)}${a})?${o}${u}${S}`;default:{let A=/^(.*?)\.(\w+)$/.exec(x);if(!A)return;let j=B(A[1]);return j?j+o+A[2]:void 0}}},k=J.removePrefix(n,O),D=B(k);return D&&t.strictSlashes!==!0&&(D+=`${a}?`),D};Zn.exports=Jn});var nr=de((ja,tr)=>{"use strict";var ro=je(),so=qn(),Lt=er(),Ct=$e(),io=be(),oo=n=>n&&typeof n=="object"&&!Array.isArray(n),K=(n,e,t=!1)=>{if(Array.isArray(n)){let p=n.map(w=>K(w,e,t));return w=>{for(let T of p){let m=T(w);if(m)return m}return!1}}let r=oo(n)&&n.tokens&&n.input;if(n===""||typeof n!="string"&&!r)throw new TypeError("Expected pattern to be a non-empty string");let s=e||{},i=Ct.isWindows(e),o=r?K.compileRe(n,e):K.makeRe(n,e,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(s.ignore){let p={...e,ignore:null,onMatch:null,onResult:null};u=K(s.ignore,p,t)}let c=(p,_=!1)=>{let{isMatch:w,match:T,output:m}=K.test(p,o,e,{glob:n,posix:i}),y={glob:n,state:a,regex:o,posix:i,input:p,output:m,match:T,isMatch:w};return typeof s.onResult=="function"&&s.onResult(y),w===!1?(y.isMatch=!1,_?y:!1):u(p)?(typeof s.onIgnore=="function"&&s.onIgnore(y),y.isMatch=!1,_?y:!1):(typeof s.onMatch=="function"&&s.onMatch(y),_?y:!0)};return t&&(c.state=a),c};K.test=(n,e,t,{glob:r,posix:s}={})=>{if(typeof n!="string")throw new TypeError("Expected input to be a string");if(n==="")return{isMatch:!1,output:""};let i=t||{},o=i.format||(s?Ct.toPosixSlashes:null),a=n===r,u=a&&o?o(n):n;return a===!1&&(u=o?o(n):n,a=u===r),(a===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?a=K.matchBase(n,e,t,s):a=e.exec(u)),{isMatch:Boolean(a),match:a,output:u}};K.matchBase=(n,e,t,r=Ct.isWindows(t))=>(e instanceof RegExp?e:K.makeRe(e,t)).test(ro.basename(n));K.isMatch=(n,e,t)=>K(e,t)(n);K.parse=(n,e)=>Array.isArray(n)?n.map(t=>K.parse(t,e)):Lt(n,{...e,fastpaths:!1});K.scan=(n,e)=>so(n,e);K.compileRe=(n,e,t=!1,r=!1)=>{if(t===!0)return n.output;let s=e||{},i=s.contains?"":"^",o=s.contains?"":"$",a=`${i}(?:${n.output})${o}`;n&&n.negated===!0&&(a=`^(?!${a}).*$`);let u=K.toRegex(a,e);return r===!0&&(u.state=n),u};K.makeRe=(n,e={},t=!1,r=!1)=>{if(!n||typeof n!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(n[0]==="."||n[0]==="*")&&(s.output=Lt.fastpaths(n,e)),s.output||(s=Lt(n,e)),K.compileRe(s,e,t,r)};K.toRegex=(n,e)=>{try{let t=e||{};return new RegExp(n,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}};K.constants=io;tr.exports=K});var sr=de((za,rr)=>{"use strict";rr.exports=nr()});var Br=`<div class="container">
    <label class="hidden" id="title">display-port</label>
    <label class="hidden" id="fps">00</label>
    <label class="hidden" id="dimension">0x0</label>
    <div class="content">
        <canvas>
            Oh no! Your browser does not support canvas.
        </canvas>
        <slot id="inner"></slot>
    </div>
    <slot name="frame"></slot>
</div>`,Dr=`:host {
    display: inline-block;
    color: #555555;
}

.container {
    display: flex;
    position: relative;
    width: 100%;
    height: 100%;
}

.content {
    position: relative;
    margin: auto;
}

.content > *:not(canvas) {
    width: 100%;
    height: 100%;
}

canvas {
    background: #000000;
    image-rendering: pixelated;
}

label {
    position: absolute;
    font-family: monospace;
    color: currentColor;
}

#inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
}

#title {
    left: 0.5rem;
    top: 0.5rem;
}

#fps {
    right: 0.5rem;
    top: 0.5rem;
}

#dimension {
    left: 0.5rem;
    bottom: 0.5rem;
}

.hidden {
    display: none;
}

:host([debug]) .container {
    outline: 6px dashed rgba(0, 0, 0, 0.1);
    outline-offset: -4px;
    background-color: rgba(0, 0, 0, 0.1);
}

:host([mode="noscale"]) canvas {
    margin: 0;
    top: 0;
    left: 0;
}

:host([mode="stretch"]) canvas,
:host([mode="scale"]) canvas {
    width: 100%;
    height: 100%;
}

:host([mode="fit"]),
:host([mode="scale"]),
:host([mode="center"]),
:host([mode="stretch"]),
:host([mode="fill"]) {
    width: 100%;
    height: 100%;
}

:host([full]) {
    width: 100vw !important;
    height: 100vh !important;
}

:host([disabled]) {
    display: none;
}

slot {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
}

::slotted(*) {
    pointer-events: auto;
}
`,qt="noscale",et="fit",Zt="scale",Qt="fill",Jt="stretch",Fr=300,Pr=150,Ur=et,kr=200,en=class extends HTMLElement{static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=Br,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=Dr,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("display-port",this)}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(e){this.setAttribute("mode",e)}get debug(){return this._debug}set debug(e){this.toggleAttribute("debug",e)}get disabled(){return this._disabled}set disabled(e){this.toggleAttribute("disabled",e)}get width(){return this._width}set width(e){this.setAttribute("width",String(e))}get height(){return this._height}set height(e){this.setAttribute("height",String(e))}get onframe(){return this._onframe}set onframe(e){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=e,this._onframe&&this.addEventListener("frame",e)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=this.shadowRoot.querySelector("canvas"),this._contentElement=this.shadowRoot.querySelector(".content"),this._innerElement=this.shadowRoot.querySelector("#inner"),this._titleElement=this.shadowRoot.querySelector("#title"),this._fpsElement=this.shadowRoot.querySelector("#fps"),this._dimensionElement=this.shadowRoot.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=Fr,this._height=Pr,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){ve(this,"mode"),ve(this,"debug"),ve(this,"disabled"),ve(this,"width"),ve(this,"height"),ve(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",Ur),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.updateCanvasSize(!0),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(e,t,r){switch(e){case"debug":this._debug=r!==null;break;case"disabled":this._disabled=r!==null;break;case"width":this._width=Number(r);break;case"height":this._height=Number(r);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+r+"}}").bind(this);break}switch(e){case"disabled":r?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",r),this._fpsElement.classList.toggle("hidden",r),this._dimensionElement.classList.toggle("hidden",r);break}}getContext(e="2d",t=void 0){return this._canvasElement.getContext(e,t)}pause(){cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=requestAnimationFrame(this.update)}update(e){this._animationRequestHandle=requestAnimationFrame(this.update),this.updateCanvasSize(!1);let t=e-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=e,this._debug){let r=t<=0?"--":String(Math.round(1e3/t)).padStart(2,"0");if(this._fpsElement.textContent!==r&&(this._fpsElement.textContent=r),this.mode===qt){let i=`${this._width}x${this._height}`;this._dimensionElement.textContent!==i&&(this._dimensionElement.textContent=i)}else{let i=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==i&&(this._dimensionElement.textContent=i)}}this.dispatchEvent(new CustomEvent("frame",{detail:{now:e,prevTime:this._prevAnimationFrameTime,deltaTime:t,canvas:this._canvasElement},bubbles:!1,composed:!0}))}onDelayCanvasResize(){this._resizeTimeoutHandle=0,this.updateCanvasSize(!0)}delayCanvasResize(e,t){(e!==this._resizeCanvasWidth||t!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=e,this._resizeCanvasHeight=t,this._resizeTimeoutHandle&&clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=setTimeout(this.onDelayCanvasResize,kr))}updateCanvasSize(e=!0){let t=this.shadowRoot.host.getBoundingClientRect(),r=t.width,s=t.height,i=this._canvasElement,o=this._width,a=this._height,u=this.mode;if(u===Jt||u===Qt)o=r,a=s;else if(u!==qt&&(r<o||s<a||u===et||u==Zt)){let p=r/o,_=s/a;p<_?(o=r,a=a*p):(o=o*_,a=s)}if(o=Math.floor(o),a=Math.floor(a),typeof e=="undefined"&&(e=i.clientWidth!==o||i.clientHeight!==a),!e){this.delayCanvasResize(o,a);return}let c=Math.min(o/this._width,a/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${c}em`,e){u===Zt?(i.width=this._width,i.height=this._height):u!==Jt&&(i.width=o,i.height=a);let p=this._contentElement.style;p.width=`${o}px`,p.height=`${a}px`,(u===et||u===Qt)&&(this._width=o,this._height=a),this.dispatchEvent(new CustomEvent("resize",{detail:{width:o,height:a},bubbles:!1,composed:!0}))}}};en.define();function ve(n,e){if(Object.prototype.hasOwnProperty.call(n,e)){let t=n[e];delete n[e],n[e]=t}}var tt=class{get polling(){return performance.now()-this._lastPollingTime<1e3}get value(){return 0}get size(){return this._size}constructor(e){this._size=e,this._lastPollingTime=Number.MIN_SAFE_INTEGER}resize(e){this._size=e}getState(e){throw new Error("Missing implementation.")}onUpdate(e,t,r){throw new Error("Missing implementation.")}onStatus(e,t){throw new Error("Missing implementation.")}onPoll(e){this._lastPollingTime=e}onBind(e,t={}){e>=this._size&&this.resize(e+1)}onUnbind(){this.resize(0)}},ye=class extends tt{static createAxisBindingState(){return{value:0,delta:0,inverted:!1}}get delta(){return this._delta}get value(){return this._value}constructor(e=0){super(e);let t=new Array;for(let r=0;r<e;++r)t.push(this.constructor.createAxisBindingState());this._state=t,this._value=0,this._delta=0}resize(e){let t=this._state,r=t.length,s;if(e<=r)s=t.slice(0,e);else{s=t;for(let i=r;i<e;++i)s.push(this.constructor.createAxisBindingState())}this._state=s,super.resize(e)}getState(e){return this._state[e].value}onPoll(e){let t=this._state,r=0,s=0,i=t.length;for(let o=0;o<i;++o){let a=t[o];r+=a.value*(a.inverted?-1:1),s+=a.delta,t[o].delta=0}this._value=r,this._delta=s,super.onPoll(e)}onUpdate(e,t,r){typeof t=="undefined"?this.onAxisChange(e,r):this.onAxisMove(e,t,r)}onStatus(e,t){this.onAxisStatus(e,t)}onBind(e,t={}){super.onBind(e,t);let{inverted:r=!1}=t,s=this._state;s[e].inverted=r}onAxisMove(e,t,r){let s=this._state[e];s.value=t,s.delta+=r}onAxisChange(e,t){let r=this._state[e];r.value+=t,r.delta+=t}onAxisStatus(e,t){let r=this._state[e],s=r.value;r.value=t,r.delta=t-s}},Hr=241,tn=254,Kr=239,me=1,nt=2,rt=4,st=8,it=16,Ne=class extends tt{get pressed(){return this._pressed}get repeated(){return this._repeated}get released(){return this._released}get down(){return this._down}get value(){return this._value}constructor(e=0){super(e);this._state=new Uint8Array(e),this._value=0,this._down=!1,this._pressed=!1,this._repeated=!1,this._released=!1}resize(e){let t=this._state,r=t.length,s;e<=r?s=t.slice(0,e):(s=new Uint8Array(e),s.set(t)),this._state=s,super.resize(e)}getState(e){let t=this._state[e],r=t&it?-1:1;return(t&me?1:0)*r}onPoll(e){let t=this._state,r=0,s=0,i=0,o=0,a=0,u=t.length;for(let c=0;c<u;++c){let p=t[c],_=p&me,w=p&it;s|=_,i|=p&nt,o|=p&rt,a|=p&st,r+=(_?1:0)*(w?-1:1),t[c]&=Hr}this._value=r,this._down=s!==0,this._pressed=i!==0,this._repeated=o!==0,this._released=a!==0,super.onPoll(e)}onUpdate(e,t,r){r>0?this.onButtonPressed(e):this.onButtonReleased(e)}onStatus(e,t){this.onButtonStatus(e,t!==0)}onBind(e,t={}){super.onBind(e,t);let{inverted:r=!1}=t,s=this._state;r?s[e]|=it:s[e]&=Kr}onButtonPressed(e){let t=this._state,r=t[e];r&me||(r|=nt,r|=me),r|=rt,t[e]=r}onButtonReleased(e){let t=this._state,r=t[e];r&me&&(r|=st,r&=tn),t[e]=r}onButtonStatus(e,t){let r=this._state,s=r[e],i=Boolean(s&me);t?s|=me:s&=tn,i&&!t&&(s|=st),!i&&t&&(s|=nt,s|=rt),r[e]=s}},Be=class{static parse(e){e=e.trim();let t=e.indexOf(".");if(t<0)throw new Error("Missing device separator for key code.");let r=e.substring(0,t);if(r.length<0)throw new Error("Missing device for key code.");let s=e.substring(t+1);if(s.length<0)throw new Error("Missing code for key code.");return new Be(r,s)}constructor(e,t){this.device=e,this.code=t}toString(){return`${this.device}.${this.code}`}};function jr(n,e){return new Be(n,e)}var ot=class{get polling(){return this.ref?this.ref.polling:!1}get value(){return this.ref?this.ref.value:0}constructor(e){this.name=e,this.ref=null}register(e){throw new Error("Unsupported operation.")}getState(e){return this.ref?this.ref.getState(e):0}},v=class{static parse(e){e=e.trim();let t=e.indexOf(".");if(t<0)throw new Error("Missing device separator for key code.");let r=e.substring(0,t);if(r.length<0)throw new Error("Missing device for key code.");let s=e.substring(t+1);if(s.length<0)throw new Error("Missing code for key code.");return new v(r,s)}constructor(e,t){this.device=e,this.code=t}toString(){return`${this.device}.${this.code}`}};function nn(n,e){return new v(n,e)}function zr(n){return"device"in n&&"code"in n}var E="Keyboard",te="Mouse",$r=new v(E,"KeyA"),Gr=new v(E,"KeyB"),Yr=new v(E,"KeyC"),Vr=new v(E,"KeyD"),Xr=new v(E,"KeyE"),Wr=new v(E,"KeyF"),qr=new v(E,"KeyG"),Zr=new v(E,"KeyH"),Qr=new v(E,"KeyI"),Jr=new v(E,"KeyJ"),es=new v(E,"KeyK"),ts=new v(E,"KeyL"),ns=new v(E,"KeyM"),rs=new v(E,"KeyN"),ss=new v(E,"KeyO"),is=new v(E,"KeyP"),os=new v(E,"KeyQ"),as=new v(E,"KeyR"),us=new v(E,"KeyS"),ls=new v(E,"KeyT"),hs=new v(E,"KeyU"),cs=new v(E,"KeyV"),fs=new v(E,"KeyW"),ps=new v(E,"KeyX"),ds=new v(E,"KeyY"),ms=new v(E,"KeyZ"),vs=new v(E,"Digit0"),_s=new v(E,"Digit1"),gs=new v(E,"Digit2"),xs=new v(E,"Digit3"),Es=new v(E,"Digit4"),ys=new v(E,"Digit5"),As=new v(E,"Digit6"),ws=new v(E,"Digit7"),bs=new v(E,"Digit8"),Ts=new v(E,"Digit9"),Ss=new v(E,"Minus"),Rs=new v(E,"Equal"),Ms=new v(E,"BracketLeft"),Ls=new v(E,"BracketRight"),Cs=new v(E,"Semicolon"),Is=new v(E,"Quote"),Os=new v(E,"Backquote"),Ns=new v(E,"Backslash"),Bs=new v(E,"Comma"),Ds=new v(E,"Period"),Fs=new v(E,"Slash"),Ps=new v(E,"Escape"),Us=new v(E,"Space"),ks=new v(E,"CapsLock"),Hs=new v(E,"Backspace"),Ks=new v(E,"Delete"),js=new v(E,"Tab"),zs=new v(E,"Enter"),$s=new v(E,"ArrowUp"),Gs=new v(E,"ArrowDown"),Ys=new v(E,"ArrowLeft"),Vs=new v(E,"ArrowRight"),Xs=new v(te,"Button0"),Ws=new v(te,"Button1"),qs=new v(te,"Button2"),Zs=new v(te,"Button3"),Qs=new v(te,"Button4"),Js=new v(te,"PosX"),ei=new v(te,"PosY"),ti=new v(te,"WheelX"),ni=new v(te,"WheelY"),ri=new v(te,"WheelZ"),rn=Object.freeze({__proto__:null,from:nn,isKeyCode:zr,KEYBOARD:E,MOUSE:te,KEY_A:$r,KEY_B:Gr,KEY_C:Yr,KEY_D:Vr,KEY_E:Xr,KEY_F:Wr,KEY_G:qr,KEY_H:Zr,KEY_I:Qr,KEY_J:Jr,KEY_K:es,KEY_L:ts,KEY_M:ns,KEY_N:rs,KEY_O:ss,KEY_P:is,KEY_Q:os,KEY_R:as,KEY_S:us,KEY_T:ls,KEY_U:hs,KEY_V:cs,KEY_W:fs,KEY_X:ps,KEY_Y:ds,KEY_Z:ms,DIGIT_0:vs,DIGIT_1:_s,DIGIT_2:gs,DIGIT_3:xs,DIGIT_4:Es,DIGIT_5:ys,DIGIT_6:As,DIGIT_7:ws,DIGIT_8:bs,DIGIT_9:Ts,MINUS:Ss,EQUAL:Rs,BRACKET_LEFT:Ms,BRACKET_RIGHT:Ls,SEMICOLON:Cs,QUOTE:Is,BACKQUOTE:Os,BACKSLASH:Ns,COMMA:Bs,PERIOD:Ds,SLASH:Fs,ESCAPE:Ps,SPACE:Us,CAPS_LOCK:ks,BACKSPACE:Hs,DELETE:Ks,TAB:js,ENTER:zs,ARROW_UP:$s,ARROW_DOWN:Gs,ARROW_LEFT:Ys,ARROW_RIGHT:Vs,MOUSE_BUTTON_0:Xs,MOUSE_BUTTON_1:Ws,MOUSE_BUTTON_2:qs,MOUSE_BUTTON_3:Zs,MOUSE_BUTTON_4:Qs,MOUSE_POS_X:Js,MOUSE_POS_Y:ei,MOUSE_WHEEL_X:ti,MOUSE_WHEEL_Y:ni,MOUSE_WHEEL_Z:ri});function sn(n){Array.isArray(n)||(n=[n]);let e=[];for(let t of n){let r;try{r=v.parse(t)}catch(s){let i=si(t).toUpperCase();if(!(i in rn))throw new Error("Invalid key code string - "+s);r=rn[i]}e.push(r)}return e}function si(n){return n.replace(/([a-z]|(?:[A-Z0-9]+))([A-Z0-9]|$)/g,function(e,t,r){return t+(r&&"_"+r)}).toLowerCase()}var ie=class extends ot{static fromBind(e,t,r,s=void 0){return new ie(e,jr(t,r),s)}static fromString(e,...t){let r=sn(t);return new ie(e,r)}get delta(){return this.ref?this.ref.delta:0}constructor(e,t,r=void 0){super(e);this.keyCodes=Array.isArray(t)?t:[t],this.opts=r}register(e){let t=this.name,r=this.opts;for(let s of this.keyCodes)e.bindAxis(t,s.device,s.code,r);return this.ref=e.getAxis(t),this}},q=class extends ot{static fromBind(e,t,r,s=void 0){return new q(e,nn(t,r),s)}static fromString(e,...t){let r=sn(t);return new q(e,r)}get pressed(){return this.ref?this.ref.pressed:!1}get repeated(){return this.ref?this.ref.repeated:!1}get released(){return this.ref?this.ref.released:!1}get down(){return this.ref?this.ref.down:!1}constructor(e,t,r=void 0){super(e);this.keyCodes=Array.isArray(t)?t:[t],this.opts=r}register(e){let t=this.name,r=this.opts;for(let s of this.keyCodes)e.bindButton(t,s.device,s.code,r);return this.ref=e.getButton(t),this}};var at=class{static isAxis(e){return!1}static isButton(e){return!1}constructor(e,t){if(!t)throw new Error(`Missing event target for device ${e}.`);this.name=e,this.eventTarget=t,this.listeners={input:[]}}setEventTarget(e){if(!e)throw new Error(`Missing event target for device ${this.name}.`);this.eventTarget=e}destroy(){let e=this.listeners;for(let t in e)e[t].length=0}addEventListener(e,t){let r=this.listeners;e in r?r[e].push(t):r[e]=[t]}removeEventListener(e,t){let r=this.listeners;if(e in r){let s=r[e],i=s.indexOf(t);i>=0&&s.splice(i,1)}}dispatchInputEvent(e){let t=0;for(let r of this.listeners.input)t|=r(e);return Boolean(t)}},on=class extends at{static isAxis(e){return!1}static isButton(e){return!0}constructor(e,t,r={}){super(e,t);let{ignoreRepeat:s=!0}=r;this.ignoreRepeat=s,this._eventObject={target:t,device:e,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}setEventTarget(e){this.eventTarget&&this.destroy(),super.setEventTarget(e),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let e=this.eventTarget;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(e){if(e.repeat&&this.ignoreRepeat)return e.preventDefault(),e.stopPropagation(),!1;let t=this._eventObject;if(t.code=e.code,t.event="pressed",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t))return e.preventDefault(),e.stopPropagation(),!1}onKeyUp(e){let t=this._eventObject;if(t.code=e.code,t.event="released",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t))return e.preventDefault(),e.stopPropagation(),!1}},ut=10,lt=100,an=class extends at{static isAxis(e){return e==="PosX"||e==="PosY"||e==="WheelX"||e==="WheelY"||e==="WheelZ"}static isButton(e){return!this.isAxis(e)}constructor(e,t,r={}){super(e,t);let{eventsOnFocus:s=!0}=r;this.eventsOnFocus=s,this.canvasTarget=this.getCanvasFromEventTarget(t),this._downHasFocus=!1,this._eventObject={target:t,device:e,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:t,device:e,code:"",event:"move",value:0,movement:0},this._wheelObject={target:t,device:e,code:"",event:"wheel",movement:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}setEventTarget(e){this.eventTarget&&this.destroy(),super.setEventTarget(e),this.canvasTarget=this.getCanvasFromEventTarget(e),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("contextmenu",this.onContextMenu),e.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let e=this.eventTarget;e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("contextmenu",this.onContextMenu),e.removeEventListener("wheel",this.onWheel),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(e=!0){e?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(e){this._downHasFocus=!0;let t=this._eventObject;if(t.code="Button"+e.button,t.event="pressed",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t)&&document.activeElement===this.eventTarget)return e.preventDefault(),e.stopPropagation(),!1}onContextMenu(e){return e.preventDefault(),e.stopPropagation(),!1}onWheel(e){let t,r,s;switch(e.deltaMode){case WheelEvent.DOM_DELTA_LINE:t=e.deltaX*ut,r=e.deltaY*ut,s=e.deltaZ*ut;break;case WheelEvent.DOM_DELTA_PAGE:t=e.deltaX*lt,r=e.deltaY*lt,s=e.deltaZ*lt;break;case WheelEvent.DOM_DELTA_PIXEL:default:t=e.deltaX,r=e.deltaY,s=e.deltaZ;break}let i=0,o=this._wheelObject;if(o.code="WheelX",o.movement=t,i|=this.dispatchInputEvent(o),o.code="WheelY",o.movement=r,i|=this.dispatchInputEvent(o),o.code="WheelZ",o.movement=s,i|=this.dispatchInputEvent(o),i)return e.preventDefault(),e.stopPropagation(),!1}onMouseUp(e){if(!this._downHasFocus)return;this._downHasFocus=!1;let t=this._eventObject;if(t.code="Button"+e.button,t.event="released",t.value=1,t.control=e.ctrlKey,t.shift=e.shiftKey,t.alt=e.altKey,this.dispatchInputEvent(t))return e.preventDefault(),e.stopPropagation(),!1}onMouseMove(e){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;let t=this.canvasTarget,{clientWidth:r,clientHeight:s}=t,i=t.getBoundingClientRect(),o=e.movementX/r,a=e.movementY/s,u=(e.clientX-i.left)/r,c=(e.clientY-i.top)/s,p=this._positionObject;p.code="PosX",p.value=u,p.movement=o,this.dispatchInputEvent(p),p.code="PosY",p.value=c,p.movement=a,this.dispatchInputEvent(p)}getCanvasFromEventTarget(e){return e instanceof HTMLCanvasElement?e:e.canvas||e.querySelector("canvas")||e.shadowRoot&&e.shadowRoot.querySelector("canvas")||e}},ii=`<kbd>
    <span id="name"><slot></slot></span>
    <span id="value" class="hidden"></span>
</kbd>
`,oi=`kbd {
    position: relative;
    display: inline-block;
    border-radius: 3px;
    border: 1px solid #888888;
    font-size: 0.85em;
    font-weight: 700;
    text-rendering: optimizeLegibility;
    line-height: 12px;
    height: 14px;
    padding: 2px 4px;
    color: #444444;
    background-color: #eeeeee;
    box-shadow: inset 0 -3px 0 #aaaaaa;
    overflow: hidden;
}

kbd:empty::after {
    content: "<?>";
    opacity: 0.6;
}

.disabled {
    opacity: 0.6;
    box-shadow: none;
    background-color: #aaaaaa;
}

.hidden {
    display: none;
}

#value {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    font-size: 0.85em;
    padding: 0 4px;
    padding-top: 2px;
    color: #cccccc;
    background-color: #333333;
    box-shadow: inset 0 3px 0 #222222;
}
`,ht=class extends HTMLElement{static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=ii,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=oi,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("input-code",this)}static get observedAttributes(){return["name","value","disabled"]}get disabled(){return this._disabled}set disabled(e){this.toggleAttribute("disabled",e)}get value(){return this._value}set value(e){this.setAttribute("value",e)}get name(){return this._name}set name(e){this.setAttribute("name",e)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._name="",this._value="",this._disabled=!1,this._kbdElement=this.shadowRoot.querySelector("kbd"),this._nameElement=this.shadowRoot.querySelector("#name"),this._valueElement=this.shadowRoot.querySelector("#value")}attributeChangedCallback(e,t,r){switch(e){case"name":this._name=r,this._nameElement.textContent=r;break;case"value":this._value=r,r!==null?(this._valueElement.classList.toggle("hidden",!1),this._valueElement.textContent=r,this._kbdElement.style.paddingRight=`${this._valueElement.clientWidth+4}px`):this._valueElement.classList.toggle("hidden",!0);break;case"disabled":this._disabled=r!==null,this._kbdElement.classList.toggle("disabled",r!==null);break}}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"name")){let e=this.name;delete this.name,this.name=e}if(Object.prototype.hasOwnProperty.call(this,"value")){let e=this.value;delete this.value,this.value=e}if(Object.prototype.hasOwnProperty.call(this,"disabled")){let e=this.disabled;delete this.disabled,this.disabled=e}}};ht.define();var ai=`<table>
    <thead>
        <tr class="tableHeader">
            <th colspan=3>
                <span class="tableTitle">
                    <label id="title">
                        input-source
                    </label>
                    <span id="slotContainer">
                        <slot></slot>
                    </span>
                    <p>
                        <label for="poll">poll</label>
                        <output id="poll"></output>
                    </p>
                    <p>
                        <label for="focus">focus</label>
                        <output id="focus"></output>
                    </p>
                </span>
            </th>
        </tr>
        <tr class="colHeader">
            <th>name</th>
            <th>value</th>
            <th>key</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
`,ui=`:host {
    display: block;
}

table {
    border-collapse: collapse;
    font-family: monospace;
}

table,
th,
td {
    border: 1px solid #666666;
}

th,
td {
    padding: 5px 10px;
}

td {
    text-align: center;
}

thead th {
    padding: 0;
}

.colHeader > th {
    font-size: 0.8em;
    padding: 0 10px;
    letter-spacing: 3px;
    background-color: #aaaaaa;
    color: #666666;
}

tbody output {
    border-radius: 0.3em;
    padding: 3px;
}

tr:not(.primary) .name,
tr:not(.primary) .value {
    opacity: 0.3;
}

tr:nth-child(2n) {
    background-color: #eeeeee;
}

.tableHeader {
    color: #666666;
}

.tableTitle {
    display: flex;
    flex-direction: row;
    align-items: center;
    padding: 4px;
}

#slotContainer {
    flex: 1;
}

p {
    display: inline;
    margin: 0;
    padding: 0;
    padding-right: 10px;
}

#poll:empty::after,
#focus:empty::after {
    content: "\u2717";
    color: #ff0000;
}
`,un=class{constructor(e){this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null,this.pollable=e}get running(){return this.animationFrameHandle!==null}start(){let e=this.animationFrameHandle;e&&cancelAnimationFrame(e),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}stop(){let e=this.animationFrameHandle;e&&cancelAnimationFrame(e),this.animationFrameHandle=null}onAnimationFrame(e){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.pollable.onPoll(e)}},ln=class{constructor(e){this.onInput=this.onInput.bind(this),this.onPoll=this.onPoll.bind(this),this.bindings=e}onPoll(e){for(let t of this.bindings.getInputs())t.onPoll(e)}onInput(e){let{device:t,code:r,event:s,value:i,movement:o,control:a,shift:u,alt:c}=e,p=this.bindings.getBindings(t,r);switch(s){case"pressed":for(let{input:_,index:w}of p)_.onUpdate(w,1,1);break;case"released":for(let{input:_,index:w}of p)_.onUpdate(w,0,-1);break;case"move":for(let{input:_,index:w}of p)_.onUpdate(w,i,o);break;case"wheel":for(let{input:_,index:w}of p)_.onUpdate(w,void 0,o);break}return p.length>0}},ct=class{constructor(e,t,r,s){this.device=e,this.code=t,this.input=r,this.index=s}},hn=class{constructor(){this.bindingMap={},this.inputMap=new Map}clear(){for(let e of this.inputMap.keys())e.onUnbind();this.inputMap.clear(),this.bindingMap={}}bind(e,t,r,s={}){let i,o=this.inputMap;if(o.has(e)){let u=o.get(e),c=e.size;e.onBind(c,s),i=new ct(t,r,e,c),u.push(i)}else{let u=[];o.set(e,u);let c=0;e.onBind(c,s),i=new ct(t,r,e,c),u.push(i)}let a=this.bindingMap;t in a?r in a[t]?a[t][r].push(i):a[t][r]=[i]:a[t]={[r]:[i]}}unbind(e){let t=this.inputMap;if(t.has(e)){let r=this.bindingMap,s=t.get(e);for(let i of s){let{device:o,code:a}=i,u=r[o][a],c=u.indexOf(i);u.splice(c,1)}s.length=0,e.onUnbind(),t.delete(e)}}isBound(e){return this.inputMap.has(e)}getInputs(){return this.inputMap.keys()}getBindingsByInput(e){return this.inputMap.get(e)}getBindings(e,t){let r=this.bindingMap;if(e in r){let s=r[e];if(t in s)return s[t]}return[]}},cn=class{constructor(e,t={}){this.inputs={},this.devices=[new an("Mouse",e),new on("Keyboard",e)],this.bindings=new hn,this.adapter=new ln(this.bindings),this.autopoller=new un(this.adapter),this.eventTarget=e,this.anyButton=new Ne(1),this.anyButtonDevice="",this.anyButtonCode="",this.anyAxis=new ye(1),this.anyAxisDevice="",this.anyAxisCode="",this.listeners={bind:[],unbind:[],focus:[],blur:[]},this.onInput=this.onInput.bind(this),this.onEventTargetBlur=this.onEventTargetBlur.bind(this),this.onEventTargetFocus=this.onEventTargetFocus.bind(this),e.addEventListener("focus",this.onEventTargetFocus),e.addEventListener("blur",this.onEventTargetBlur);for(let r of this.devices)r.addEventListener("input",this.onInput)}get autopoll(){return this.autopoller.running}set autopoll(e=void 0){this.toggleAutoPoll(e)}destroy(){let e=this.listeners;for(let r in e)e[r].length=0;this.autopoller.running&&this.autopoller.stop();for(let r of this.devices)r.removeEventListener("input",this.onInput),r.destroy();let t=this.eventTarget;t.removeEventListener("focus",this.onEventTargetFocus),t.removeEventListener("blur",this.onEventTargetBlur)}setEventTarget(e){let t=this.eventTarget;t.removeEventListener("focus",this.onEventTargetFocus),t.removeEventListener("blur",this.onEventTargetBlur),this.eventTarget=e;for(let r of this.devices)r.setEventTarget(e);e.addEventListener("focus",this.onEventTargetFocus),e.addEventListener("blur",this.onEventTargetBlur)}toggleAutoPoll(e=void 0){let t=this.autopoller.running,r=typeof e=="undefined"?!t:Boolean(e);r!==t&&(r?this.autopoller.start():this.autopoller.stop())}addEventListener(e,t){let r=this.listeners;e in r?r[e].push(t):r[e]=[t]}removeEventListener(e,t){let r=this.listeners;if(e in r){let s=r[e],i=s.indexOf(t);i>=0&&s.splice(i,1)}}dispatchEvent(e){let{type:t}=e,r=0;for(let s of this.listeners[t])r|=s(e);return Boolean(r)}poll(e=performance.now()){if(this.autopoller.running)throw new Error("Should not manually poll() while autopolling.");this.onPoll(e)}onInput(e){let t=this.adapter.onInput(e);switch(e.event){case"pressed":this.anyButtonDevice=e.device,this.anyButtonCode=e.code,this.anyButton.onUpdate(0,1,1);break;case"released":this.anyButtonDevice=e.device,this.anyButtonCode=e.code,this.anyButton.onUpdate(0,0,-1);break;case"move":case"wheel":this.anyAxisDevice=e.device,this.anyAxisCode=e.code,this.anyAxis.onUpdate(0,e.value,e.movement);break}return t}onPoll(e){this.adapter.onPoll(e),this.anyButton.onPoll(e),this.anyAxis.onPoll(e)}onBind(){this.dispatchEvent({type:"bind"})}onUnbind(){this.dispatchEvent({type:"unbind"})}onEventTargetFocus(){this.dispatchEvent({type:"focus"})}onEventTargetBlur(){for(let e of this.bindings.getInputs())e.onStatus(0,0);this.anyButton.onStatus(0,0),this.anyAxis.onStatus(0,0),this.dispatchEvent({type:"blur"})}bindBindings(e){for(let t of e)t.register(this)}bindButton(e,t,r,s=void 0){let i;this.hasButton(e)?i=this.getButton(e):(i=new Ne(1),this.inputs[e]=i),this.bindings.bind(i,t,r,s),this.onBind()}bindAxis(e,t,r,s=void 0){let i;this.hasAxis(e)?i=this.getAxis(e):(i=new ye(1),this.inputs[e]=i),this.bindings.bind(i,t,r,s),this.onBind()}bindAxisButtons(e,t,r,s){let i;this.hasAxis(e)?i=this.getAxis(e):(i=new ye(2),this.inputs[e]=i),this.bindings.bind(i,t,s),this.bindings.bind(i,t,r,{inverted:!0}),this.onBind()}unbindButton(e){if(this.hasButton(e)){let t=this.getButton(e);delete this.inputs[e],this.bindings.unbind(t),this.onUnbind()}}unbindAxis(e){if(this.hasAxis(e)){let t=this.getAxis(e);delete this.inputs[e],this.bindings.unbind(t),this.onUnbind()}}getInput(e){return this.inputs[e]}getButton(e){return this.inputs[e]}getAxis(e){return this.inputs[e]}hasButton(e){return e in this.inputs&&this.inputs[e]instanceof Ne}hasAxis(e){return e in this.inputs&&this.inputs[e]instanceof ye}isButtonDown(e){return this.inputs[e].down}isButtonPressed(e){return this.inputs[e].pressed}isButtonReleased(e){return this.inputs[e].released}getInputValue(e){return this.inputs[e].value}getButtonValue(e){return this.inputs[e].value}getAxisValue(e){return this.inputs[e].value}getAxisDelta(e){return this.inputs[e].delta}isAnyButtonDown(e=void 0){if(typeof e=="undefined")return this.anyButton.down;{let t=this.inputs;for(let r of e)if(t[r].down)return!0}return!1}isAnyButtonPressed(e=void 0){if(typeof e=="undefined")return this.anyButton.pressed;{let t=this.inputs;for(let r of e)if(t[r].pressed)return!0}return!1}isAnyButtonReleased(e=void 0){if(typeof e=="undefined")return this.anyButton.released;{let t=this.inputs;for(let r of e)if(t[r].released)return!0}return!1}getAnyAxisValue(e=void 0){if(typeof e=="undefined")return this.anyAxis.value;{let t=this.inputs;for(let r of e){let s=t[r];if(s.value)return s.value}}return 0}getAnyAxisDelta(e=void 0){if(typeof e=="undefined")return this.anyAxis.delta;{let t=this.inputs;for(let r of e){let s=t[r];if(s.delta)return s.delta}}return 0}getLastButtonDevice(){return this.anyButtonDevice}getLastButtonCode(){return this.anyButtonCode}getLastAxisDevice(){return this.anyAxisDevice}getLastAxisCode(){return this.anyAxisCode}getMouse(){return this.devices[0]}getKeyboard(){return this.devices[1]}},fn=class extends HTMLElement{static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=ai,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=ui,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("input-port",this)}static get observedAttributes(){return["autopoll","for"]}get autopoll(){return this._autopoll}set autopoll(e){this.toggleAttribute("autopoll",e)}get for(){return this._for}set for(e){this.setAttribute("for",e)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._titleElement=this.shadowRoot.querySelector("#title"),this._pollElement=this.shadowRoot.querySelector("#poll"),this._focusElement=this.shadowRoot.querySelector("#focus"),this._bodyElement=this.shadowRoot.querySelector("tbody"),this._outputElements={},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null;let e=this;this._for="",this._eventTarget=e,this._autopoll=!1,this._context=null,this.onInputContextBind=this.onInputContextBind.bind(this),this.onInputContextUnbind=this.onInputContextUnbind.bind(this),this.onInputContextFocus=this.onInputContextFocus.bind(this),this.onInputContextBlur=this.onInputContextBlur.bind(this)}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"for")){let e=this.for;delete this.for,this.for=e}if(Object.prototype.hasOwnProperty.call(this,"autopoll")){let e=this.autopoll;delete this.autopoll,this.autopoll=e}this.updateTable(),this.updateTableValues(),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){this._context&&(this._context.removeEventListener("bind",this.onInputContextBind),this._context.removeEventListener("unbind",this.onInputContextUnbind),this._context.removeEventListener("blur",this.onInputContextBlur),this._context.removeEventListener("focus",this.onInputContextFocus),this._context.destroy(),this._context=null)}attributeChangedCallback(e,t,r){switch(e){case"for":{this._for=r;let s,i;r?(s=document.getElementById(r),i=`${s.tagName.toLowerCase()}#${r}`):(s=this,i="input-port"),this._eventTarget=s,this._context&&this._context.setEventTarget(this._eventTarget),this._titleElement.innerHTML=`for ${i}`}break;case"autopoll":this._autopoll=r!==null,this._context&&this._context.toggleAutoPoll(this._autopoll);break}}onAnimationFrame(){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.updateTableValues(),this.updatePollStatus()}onInputContextBind(){this.updateTable()}onInputContextUnbind(){this.updateTable()}onInputContextFocus(){this._focusElement.innerHTML="\u2713"}onInputContextBlur(){this._focusElement.innerHTML=""}getContext(e="axisbutton",t=void 0){switch(e){case"axisbutton":return this._context||(this._context=new cn(this._eventTarget,t),this._context.addEventListener("bind",this.onInputContextBind),this._context.addEventListener("unbind",this.onInputContextUnbind),this._context.addEventListener("blur",this.onInputContextBlur),this._context.addEventListener("focus",this.onInputContextFocus),this._autopoll&&this._context.toggleAutoPoll(!0)),this._context;default:throw new Error(`Input context id '${e}' is not supported.`)}}updateTable(){if(this.isConnected)if(this._context){let e=this._context,t=e.inputs,r=e.bindings,s={},i=[];for(let o of Object.keys(t)){let a=t[o],u=!0;for(let c of r.getBindingsByInput(a)){let p=li(`${a.constructor.name}.${o}`,`${c.device}.${c.code}`,0,u);i.push(p),u&&(s[o]=p.querySelector("output"),u=!1)}}this._outputElements=s,this._bodyElement.innerHTML="";for(let o of i)this._bodyElement.appendChild(o)}else{this._outputElements={},this._bodyElement.innerHTML="";return}else return}updateTableValues(){if(this.isConnected)if(this._context){let t=this._context.inputs;for(let r of Object.keys(this._outputElements)){let s=this._outputElements[r],i=t[r].value;s.innerText=Number(i).toFixed(2)}}else{for(let e of Object.keys(this._outputElements)){let t=this._outputElements[e];t.innerText="---"}return}else return}updatePollStatus(){if(this.isConnected)if(this._context){let t=this._context.inputs;for(let r of Object.values(t))if(!r.polling){this._pollElement.innerHTML="";return}this._pollElement.innerHTML="\u2713"}else{this._pollElement.innerHTML="-";return}else return}};fn.define();function li(n,e,t,r=!0){let s=document.createElement("tr");r&&s.classList.add("primary");{let i=document.createElement("td");i.textContent=n,i.classList.add("name"),s.appendChild(i)}{let i=document.createElement("td"),o=document.createElement("output");r?o.innerText=Number(t).toFixed(2):o.innerText="---",o.classList.add("value"),i.appendChild(o),s.appendChild(i)}{let i=document.createElement("td");i.classList.add("key");let o=new ht;o.innerText=e,i.appendChild(o),s.appendChild(i)}return s}var Oa=Symbol("keyboardSource");var Na=Symbol("mouseSource");var pn={},hi=function(n,e,t,r,s){var i=new Worker(pn[e]||(pn[e]=URL.createObjectURL(new Blob([n],{type:"text/javascript"}))));return i.onerror=function(o){return s(o.error,null)},i.onmessage=function(o){return s(null,o.data)},i.postMessage(t,r),i},V=Uint8Array,oe=Uint16Array,Ae=Uint32Array,ft=new V([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pt=new V([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dn=new V([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mn=function(n,e){for(var t=new oe(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var s=new Ae(t[30]),r=1;r<30;++r)for(var i=t[r];i<t[r+1];++i)s[i]=i-t[r]<<5|r;return[t,s]},vn=mn(ft,2),dt=vn[0],ci=vn[1];dt[28]=258,ci[258]=28;var _n=mn(pt,0),gn=_n[0],Da=_n[1],De=new oe(32768);for(var U=0;U<32768;++U)le=(U&43690)>>>1|(U&21845)<<1,le=(le&52428)>>>2|(le&13107)<<2,le=(le&61680)>>>4|(le&3855)<<4,De[U]=((le&65280)>>>8|(le&255)<<8)>>>1;var le,_e=function(n,e,t){for(var r=n.length,s=0,i=new oe(e);s<r;++s)++i[n[s]-1];var o=new oe(e);for(s=0;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(t){a=new oe(1<<e);var u=15-e;for(s=0;s<r;++s)if(n[s])for(var c=s<<4|n[s],p=e-n[s],_=o[n[s]-1]++<<p,w=_|(1<<p)-1;_<=w;++_)a[De[_]>>>u]=c}else for(a=new oe(r),s=0;s<r;++s)n[s]&&(a[s]=De[o[n[s]-1]++]>>>15-n[s]);return a},we=new V(288);for(var U=0;U<144;++U)we[U]=8;for(var U=144;U<256;++U)we[U]=9;for(var U=256;U<280;++U)we[U]=7;for(var U=280;U<288;++U)we[U]=8;var xn=new V(32);for(var U=0;U<32;++U)xn[U]=5;var En=_e(we,9,1);var yn=_e(xn,5,1),Fe=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ee=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Pe=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},An=function(n){return(n/8|0)+(n&7&&1)},Ue=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof oe?oe:n instanceof Ae?Ae:V)(t-e);return r.set(n.subarray(e,t)),r},wn=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new V(0);var s=!e||t,i=!t||t.i;t||(t={}),e||(e=new V(r*3));var o=function(R){var pe=e.length;if(R>pe){var Ce=new V(Math.max(pe*2,R));Ce.set(e),e=Ce}},a=t.f||0,u=t.p||0,c=t.b||0,p=t.l,_=t.d,w=t.m,T=t.n,m=r*8;do{if(!p){t.f=a=ee(n,u,1);var y=ee(n,u+1,3);if(u+=3,y)if(y==1)p=En,_=yn,w=9,T=5;else if(y==2){var S=ee(n,u,31)+257,N=ee(n,u+10,15)+4,B=S+ee(n,u+5,31)+1;u+=14;for(var k=new V(B),D=new V(19),x=0;x<N;++x)D[dn[x]]=ee(n,u+x*3,7);u+=N*3;for(var A=Fe(D),j=(1<<A)-1,f=_e(D,A,1),x=0;x<B;){var F=f[ee(n,u,j)];u+=F&15;var b=F>>>4;if(b<16)k[x++]=b;else{var I=0,Q=0;for(b==16?(Q=3+ee(n,u,3),u+=2,I=k[x-1]):b==17?(Q=3+ee(n,u,7),u+=3):b==18&&(Q=11+ee(n,u,127),u+=7);Q--;)k[x++]=I}}var h=k.subarray(0,S),l=k.subarray(S);w=Fe(h),T=Fe(l),p=_e(h,w,1),_=_e(l,T,1)}else throw"invalid block type";else{var b=An(u)+4,L=n[b-4]|n[b-3]<<8,O=b+L;if(O>r){if(i)throw"unexpected EOF";break}s&&o(c+L),e.set(n.subarray(b,O),c),t.b=c+=L,t.p=u=O*8;continue}if(u>m){if(i)throw"unexpected EOF";break}}s&&o(c+131072);for(var $=(1<<w)-1,C=(1<<T)-1,W=u;;W=u){var I=p[Pe(n,u)&$],G=I>>>4;if(u+=I&15,u>m){if(i)throw"unexpected EOF";break}if(!I)throw"invalid length/literal";if(G<256)e[c++]=G;else if(G==256){W=u,p=null;break}else{var Y=G-254;if(G>264){var x=G-257,re=ft[x];Y=ee(n,u,(1<<re)-1)+dt[x],u+=re}var Ee=_[Pe(n,u)&C],ce=Ee>>>4;if(!Ee)throw"invalid distance";u+=Ee&15;var l=gn[ce];if(ce>3){var re=pt[ce];l+=Pe(n,u)&(1<<re)-1,u+=re}if(u>m){if(i)throw"unexpected EOF";break}s&&o(c+131072);for(var se=c+Y;c<se;c+=4)e[c]=e[c-l],e[c+1]=e[c+1-l],e[c+2]=e[c+2-l],e[c+3]=e[c+3-l];c=se}}t.l=p,t.p=W,t.b=c,p&&(a=1,t.m=w,t.d=_,t.n=T)}while(!a);return c==e.length?e:Ue(e,0,c)};var fi=new V(0);var pi=function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},bn=function(n,e,t){for(var r=n(),s=n.toString(),i=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var a=r[o],u=i[o];if(typeof a=="function"){e+=";"+u+"=";var c=a.toString();if(a.prototype)if(c.indexOf("[native code]")!=-1){var p=c.indexOf(" ",8)+1;e+=c.slice(p,c.indexOf("(",p))}else{e+=c;for(var _ in a.prototype)e+=";"+u+".prototype."+_+"="+a.prototype[_].toString()}else e+=c}else t[u]=a}return[e,t]},ke=[],di=function(n){var e=[];for(var t in n)(n[t]instanceof V||n[t]instanceof oe||n[t]instanceof Ae)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},mi=function(n,e,t,r){var s;if(!ke[t]){for(var i="",o={},a=n.length-1,u=0;u<a;++u)s=bn(n[u],i,o),i=s[0],o=s[1];ke[t]=bn(n[a],i,o)}var c=pi({},ke[t][1]);return hi(ke[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,di(c),r)},vi=function(){return[V,oe,Ae,ft,pt,dn,dt,gn,En,yn,De,_e,Fe,ee,Pe,An,Ue,wn,mt,Tn,Sn]};var Tn=function(n){return postMessage(n,[n.buffer])},Sn=function(n){return n&&n.size&&new V(n.size)},_i=function(n,e,t,r,s,i){var o=mi(t,r,s,function(a,u){o.terminate(),i(a,u)});return o.postMessage([n,e],e.consume?[n.buffer]:[]),function(){o.terminate()}};var ae=function(n,e){return n[e]|n[e+1]<<8},ne=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},vt=function(n,e){return ne(n,e)+ne(n,e+4)*4294967296};function gi(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return _i(n,e,[vi],function(r){return Tn(mt(r.data[0],Sn(r.data[1])))},1,t)}function mt(n,e){return wn(n,e)}var Fa=typeof TextEncoder!="undefined"&&new TextEncoder,_t=typeof TextDecoder!="undefined"&&new TextDecoder,xi=0;try{_t.decode(fi,{stream:!0}),xi=1}catch(n){}var Ei=function(n){for(var e="",t=0;;){var r=n[t++],s=(r>127)+(r>223)+(r>239);if(t+s>n.length)return[e,Ue(n,t-1)];s?s==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):s&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}};function yi(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(_t)return _t.decode(n);var s=Ei(n),i=s[0],o=s[1];if(o.length)throw"invalid utf-8 data";return i}}var Ai=function(n,e){return e+30+ae(n,e+26)+ae(n,e+28)},bi=function(n,e,t){var r=ae(n,e+28),s=yi(n.subarray(e+46,e+46+r),!(ae(n,e+8)&2048)),i=e+46+r,o=ne(n,e+20),a=t&&o==4294967295?wi(n,i):[o,ne(n,e+24),ne(n,e+42)],u=a[0],c=a[1],p=a[2];return[ae(n,e+10),u,c,s,i+ae(n,e+30)+ae(n,e+32),p]},wi=function(n,e){for(;ae(n,e)!=1;e+=4+ae(n,e+2));return[vt(n,e+12),vt(n,e+4),vt(n,e+20)]};function Rn(n,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var w=0;w<t.length;++w)t[w]()},s={},i=n.length-22;ne(n,i)!=101010256;--i)if(!i||n.length-i>65558){e("invalid zip file",null);return}var o=ae(n,i+8);o||e(null,{});var a=o,u=ne(n,i+16),c=u==4294967295;if(c){if(i=ne(n,i-12),ne(n,i)!=101075792){e("invalid zip file",null);return}a=o=ne(n,i+32),u=ne(n,i+48)}for(var p=function(w){var T=bi(n,u,c),m=T[0],y=T[1],b=T[2],L=T[3],O=T[4],S=T[5],N=Ai(n,S);u=O;var B=function(D,x){D?(r(),e(D,null)):(s[L]=x,--o||e(null,s))};if(!m)B(null,Ue(n,N,N+y));else if(m==8){var k=n.subarray(N,N+y);if(y<32e4)try{B(null,mt(k,new V(b)))}catch(D){B(D,null)}else t.push(gi(k,{size:b},B))}else B("unknown compression type "+m,null)},_=0;_<a;++_)p(_);return r}var ir=Nr(sr()),or=class{constructor(){this._buffers={}}clear(){this._buffers={}}put(e,t){this._buffers[e]=t}get(e){return this._buffers[e]}keys(){return Object.keys(this._buffers)}},ao="",uo="",lo=5e3,Ve=class extends HTMLElement{static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=ao,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=uo,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static define(e=window.customElements){e.define("asset-pack",Ve)}static get observedAttributes(){return["src"]}set src(e){this.setAttribute("src",e)}get src(){return this._src}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._src="",this._files=new or,this._cache={},this._loading={},this._pipeline={},this.onLoad=this.onLoad.bind(this)}get files(){return this._files}async pipe(e,t){let r;if(typeof e=="string")r=e,r in this._pipeline||(e=(0,ir.makeRe)(e));else if(e instanceof RegExp)r=e.source;else throw new Error("Filter must be either a RegExp or glob string.");let s;r in this._pipeline?s=this._pipeline[r]:(s=new ar(e),this._pipeline[r]=s),s.addHandler(t),await Promise.all(Object.entries(this._cache).map(([i,o])=>s.matches(i)?t(o,i):null))}async cache(e,t,r={}){let{ephemeral:s}=r,i=this._cache[e],o=this._loading[e];this._cache[e]=t,await Promise.all(Object.values(this._pipeline).map(a=>a.matches(e)?a.process(e,t):null)),o&&(o.resolve(t),delete this._loading[t]),s&&this._cache[t]===t&&(i?this._cache[t]=i:delete this._cache[t])}async loadAsset(e,t=lo){let r=this._cache[e];if(r)return r;if(e in this._loading)return this._loading[e].promise;{let s=new ur(t);return this._loading[e]=s,s.promise}}clearAssets(){for(let e of Object.values(this._loading))e.reject(new Error("Stop loading to clear all assets."));this._loading={},this._cache={}}deleteAsset(e){e in this._loading&&(this._loading[e].reject(new Error("Stop loading to delete asset.")),delete this._loading[e]),e in this._cache&&delete this._cache[e]}getAsset(e){return this._cache[e]}hasAsset(e){let t=this._cache[e];return t||!1}connectedCallback(){ho(this,"src")}attributeChangedCallback(e,t,r){switch(e){case"src":this._src=r,r&&fetch(r).then(this.onLoad).catch(s=>console.error(`Failed to load asset pack: ${s}`));break}}async onLoad(e){let t=await e.arrayBuffer();await new Promise((r,s)=>{Rn(new Uint8Array(t),(i,o)=>{if(i)s(i);else{let a=this._files;Promise.all(Object.entries(o).map(([u,c])=>(a.put(u,c),this.cache(u,c)))).then(()=>r()).catch(s)}})}),this.dispatchEvent(new CustomEvent("load",{composed:!0}))}};Ve.define();function ho(n,e){if(Object.prototype.hasOwnProperty.call(n,e)){let t=n[e];delete n[e],n[e]=t}}var ar=class{constructor(e){this.filter=e,this.handlers=[]}matches(e){return this.filter.test(e)}async process(e,t){return Promise.all(this.handlers.map(r=>r(e,t)))}addHandler(e){this.handlers.push(e)}},ur=class{constructor(e){this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=e>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${e} ms.`)},e):null,this._promise=new Promise((t,r)=>{this._value?t(this._value):this._resolve=t,this._reason?r(this._reason):this._reject=r})}get promise(){return this._promise}resolve(e){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(e):this._value=e}reject(e){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(e):this._reason=e}};window.addEventListener("error",Xe,!0);window.addEventListener("unhandledrejection",Xe,!0);function Xe(n){typeof n=="object"?n instanceof PromiseRejectionEvent?Xe(n.reason):n instanceof ErrorEvent?Xe(n.error):n instanceof Error?window.alert(n.stack):window.alert(JSON.stringify(n)):window.alert(n)}var It={on(n,e,t=e){let r;if(this.__events.has(n)?r=this.__events.get(n):(r=new Map,this.__events.set(n,r)),!r.has(t))r.set(t,e);else throw new Error(`Found callback for event '${n}' with the same handle '${t}'.`);return this},off(n,e){if(this.__events.has(n)){let t=this.__events.get(n);if(t.has(e))t.delete(e);else throw new Error(`Unable to find callback for event '${n}' with handle '${e}'.`)}else throw new Error(`Unable to find event '${n}'.`);return this},once(n,e,t=e){let r=(...s)=>{this.off(n,t),e.apply(this.__context||this,s)};return this.on(n,r,t)},emit(n,...e){if(this.__events.has(n)){let t=[],r=Array.from(this.__events.get(n).values());for(let s of r){let i=s.apply(this.__context||this,e);i&&t.push(i)}return t}else return this.__events.set(n,new Map),[]}};function co(n=void 0){let e=Object.create(It);return e.__events=new Map,e.__context=n,e}function fo(n,e=void 0){let t=Object.assign(n,It);return t.__events=new Map,t.__context=e,t}function po(n,e=void 0){let t=n.prototype;return Object.assign(t,It),t.__events=new Map,t.__context=e,t}var lr={create:co,assign:fo,mixin:po},mo=5,vo=4,_o=3,go=2,xo=1,Eo=0,Xa={[mo]:Se("#7F8C8D"),[vo]:Se("#2ECC71"),[_o]:Se("#4794C8"),[go]:Se("#F39C12"),[xo]:Se("#C0392B"),[Eo]:[""]};function Se(n){return[`background: ${n}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em"]}var Wa=Symbol("level"),qa=Symbol("domain");var xe=0,yo=class{constructor(e){this._heap=[],this._comparator=e}get size(){return this._heap.length}clear(){this._heap.length=0}push(...e){for(let t of e)this._heap.push(t),this._shiftUp()}pop(){let e=this.peek(),t=Ao(this);return t>xe&&this._swap(xe,t),this._heap.pop(),this._shiftDown(),e}replace(e){let t=this.peek();return this._heap[xe]=e,this._shiftDown(),t}peek(){return this._heap[xe]}_compare(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){let r=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=r}_shiftUp(){let e=this._heap.length-1,t;for(;e>xe&&this._compare(e,t=wo(e));)this._swap(e,t),e=t}_shiftDown(){let e=this._heap.length,t=xe,r,s=hr(t),i=s<e,o=cr(t),a=o<e;for(;i&&this._compare(s,t)||a&&this._compare(o,t);)r=a&&this._compare(o,s)?o:s,this._swap(t,r),t=r,s=hr(t),i=s<e,o=cr(t),a=o<e}values(){return this._heap}[Symbol.iterator](){return this._heap[Symbol.iterator]()}};function Ao(n){return n._heap.length-1}function wo(n){return(n+1>>>1)-1}function hr(n){return(n<<1)+1}function cr(n){return n+1<<1}var Za=Math.PI/180,Qa=180/Math.PI;var Ot=class{constructor(e,t,r){this.display=e,this.inputs=t,this.assets=r,this.deltaTime=0,this.prevTime=0,this.now=0,this.events=lr.create()}on(e,t){return this.events.on(e,t),this}off(e,t){return this.events.off(e,t),this}once(e,t){return this.events.once(e,t),this}emit(e,...t){this.events.emit(e,...t)}};async function Nt(n,e=void 0){if(typeof n=="string"){let a=await(await fetch(n)).arrayBuffer();if(typeof e=="undefined"){let u=n.lastIndexOf(".");if(u<0)throw new Error("Cannot load from url - unknown image type.");e="image/"+n.slice(u+1)}return Nt(a,e)}else if(!(n instanceof ArrayBuffer||ArrayBuffer.isView(n)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let t=n;typeof e=="undefined"&&(e="image/png");let r=new Blob([t],{type:e}),s=URL.createObjectURL(r),i=new Image;return new Promise((o,a)=>{i.addEventListener("load",()=>{o(i)}),i.addEventListener("error",u=>{a(u)}),i.src=s})}async function Bt(n){if(typeof n=="string"){let r=await(await fetch(n)).arrayBuffer();return Bt(r)}else if(!(n instanceof ArrayBuffer||ArrayBuffer.isView(n)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let e=n;return bo(new TextDecoder().decode(e))}function bo(n){let e=[],t=[],r=[],s=[],i=[],o=[],a=/^#.*/g,u=/v\s+(\S+)\s+(\S+)\s+(\S+)/g,c=/vn\s+(\S+)\s+(\S+)\s+(\S+)/g,p=/vt\s+(\S+)\s+(\S+)/g,_=/f\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*))\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*))\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*))(\s+(([^/\s]*)\/([^/\s]*)\/?([^/\s]*)))?/g,w=/f\s+([^/\s]+)\s+([^/\s]+)\s+([^/\s]+)/g,T=!1,m=null,y,b,L,O;for(n=n.replace(a,"");(m=u.exec(n))!=null;)y=Number.parseFloat(m[1]),b=Number.parseFloat(m[2]),L=Number.parseFloat(m[3]),e.push(y),e.push(b),e.push(L);for(;(m=c.exec(n))!=null;)y=Number.parseFloat(m[1]),b=Number.parseFloat(m[2]),L=Number.parseFloat(m[3]),r.push(y),r.push(b),r.push(L);for(;(m=p.exec(n))!=null;)y=Number.parseFloat(m[1]),b=Number.parseFloat(m[2]),t.push(y),t.push(b);for(;(m=_.exec(n))!=null;)y=Number.parseInt(m[2]),Number.isNaN(y)&&(y=1),b=Number.parseInt(m[6]),Number.isNaN(b)&&(b=1),L=Number.parseInt(m[10]),Number.isNaN(L)&&(L=1),s.push(y),s.push(b),s.push(L),y=Number.parseInt(m[4]),Number.isNaN(y)?(y=Number.parseInt(m[3]),b=Number.parseInt(m[7]),L=Number.parseInt(m[11]),o.push(y),o.push(b),o.push(L),i.push(1),i.push(1),i.push(1)):(b=Number.parseInt(m[8]),Number.isNaN(b)&&(b=1),L=Number.parseInt(m[12]),Number.isNaN(L)&&(L=1),o.push(y),o.push(b),o.push(L),y=Number.parseInt(m[3]),Number.isNaN(y)&&(y=1),b=Number.parseInt(m[7]),Number.isNaN(b)&&(b=1),L=Number.parseInt(m[11]),Number.isNaN(L)&&(L=1),i.push(y),i.push(b),i.push(L)),typeof m[13]!="undefined"&&(O=Number.parseInt(m[15]),Number.isNaN(O)&&(O=1),s.push(O),O=Number.parseInt(m[17]),Number.isNaN(O)?(O=Number.parseInt(m[16]),o.push(O),i.push(1)):(o.push(O),O=Number.parseInt(m[16]),i.push(O)),T=!0);for(;(m=w.exec(n))!=null;)y=Number.parseInt(m[2]),b=Number.parseInt(m[6]),L=Number.parseInt(m[10]),s.push(y),s.push(b),s.push(L),i.push(1),i.push(1),i.push(1),o.push(1),o.push(1),o.push(1),typeof m[13]!="undefined"&&(O=Number.parseInt(m[14]),s.push(O),i.push(1),o.push(1),T=!0);let S,N;N=s.length;let B=new Float32Array(N*3);for(let A=0;A<N;++A)S=s[A]-1,B[A*3+0]=e[S*3+0],B[A*3+1]=e[S*3+1],B[A*3+2]=e[S*3+2];N=i.length;let k=new Float32Array(N*2);for(let A=0;A<N;++A)S=i[A]-1,k[A*2+0]=t[S*2+0],k[A*2+1]=t[S*2+1];N=o.length;let D=new Float32Array(N*3);for(let A=0;A<N;++A)S=o[A]-1,D[A*3+0]=r[S*3+0],D[A*3+1]=r[S*3+1],D[A*3+2]=r[S*3+2];N=s.length;let x=new Uint16Array(N);for(let A=0;A<N;++A)x[A]=A;return T&&console.warn("WebGL does not support quad faces, only triangles."),{positions:B,texcoords:k,normals:D,indices:x}}async function Dt(n){if(typeof n=="string"){let i=await(await fetch(n)).arrayBuffer();return Dt(i)}else if(!(n instanceof ArrayBuffer||ArrayBuffer.isView(n)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let e=n,t=new TextDecoder().decode(e),r={};for(let s of t.split(`
`)){if(s=s.trim(),s<=0||s.startsWith("#")||s.startsWith("//"))continue;let i=[],o=0,a=s.indexOf(" ");for(;a>=0;)i.push(s.substring(o,a)),o=a+1,a=s.indexOf(" ",o);i.push(s.substring(o));let u=i[0],c=Number.parseInt(i[1]),p=Number.parseInt(i[2]),_=Number.parseInt(i[3]),w=Number.parseInt(i[4]),T=i.length>=6?Number.parseInt(i[5]):1,m=i.length>=7?Number.parseInt(i[6]):T,y=i.length>=8?Number.parseInt(i[7]):T>m?Math.ceil(T/m):1;r[u]={u:c,v:p,w:_,h:w,frames:T,cols:m,rows:y,name:u}}return r}async function Ft(n,e){if(typeof n=="string"){let o=await(await fetch(n)).arrayBuffer();return Ft(o)}else if(!(n instanceof ArrayBuffer||ArrayBuffer.isView(n)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let t=n,r=new ArrayBuffer(t.byteLength);return new Uint8Array(r).set(t),await e.decodeAudioData(r)}var Pt=Symbol("audioContext"),We=class{static getAudioContext(){if(Pt in this)return this[Pt];{let e=new AudioContext;return To(e),this[Pt]=e,e}}constructor(e,t){this.audioContext=e,this.audioBuffer=t,this._playing=!1,this._started=!1,this._source=null,this.onAudioSourceEnded=this.onAudioSourceEnded.bind(this)}destroy(){this._source&&this._source.disconnect(),this._source=null,this._started=!1,this._playing=!1}onAudioSourceEnded(){this._playing=!1}play(e={}){let t=this.audioBuffer;if(!t)return;this._source&&this.destroy();let{pitch:r=void 0,gain:s=void 0,pan:i=void 0,loop:o=!1}=e,a=this.audioContext,u=a.createBufferSource();u.addEventListener("ended",this.onAudioSourceEnded),u.buffer=t,u.loop=o;let c=u;if(r&&(u.detune.value=r*100),s){let p=a.createGain();p.gain.value=s,c=c.connect(p)}if(i){let p=a.createStereoPanner();p.pan.value=i,c=c.connect(p)}c.connect(a.destination),u.start(),this._source=u,this._started=!0,this._playing=!0}pause(){this._source.stop(),this._playing=!1}isStarted(){return this._started}isPlaying(){return this._playing}isPaused(){return this._started&&!this._playing}};function To(n){let e=()=>{n.state==="suspended"&&n.resume()};document.addEventListener("click",e)}var au=ie.fromString("cursorX","Mouse.PosX"),uu=ie.fromString("cursorY","Mouse.PosY"),lu=q.fromString("activate","Mouse.Button0"),hu=q.fromString("mark","Mouse.Button2"),cu=q.fromString("restart","Keyboard.KeyR");var pu=Symbol("IslandRendererInfo");document.title="Archaea";document.title="Architect";var Ut={};Je(Ut,{CursorX:()=>Ro,CursorY:()=>Mo,MoveDown:()=>jt,MoveLeft:()=>kt,MoveRight:()=>Ht,MoveUp:()=>Kt,Shoot:()=>zt});var kt=q.fromString("moveLeft","Keyboard.KeyA"),Ht=q.fromString("moveRight","Keyboard.KeyD"),Kt=q.fromString("moveUp","Keyboard.KeyW"),jt=q.fromString("moveDown","Keyboard.KeyS"),Ro=ie.fromString("cursorX","Mouse.PosX"),Mo=ie.fromString("cursorY","Mouse.PosY"),zt=q.fromString("shoot","Keyboard.Space");var $t=class{constructor(e,t,r=[]){this.width=e,this.height=t,this.initials=r,this.instances=[]}start(){for(let e of this.initials)e.object?this.createInstance(e.x||0,e.y||0,e.object):this.instances.push({x:e.x||0,y:e.y||0,room:this})}createInstance(e,t,r){let s=new r;return s.x=e,s.y=t,s.room=this,s.onCreate&&s.onCreate.call(s),this.instances.push(s),s}update(e){let t=[];for(let r of this.instances)r.dead?(r.onDestroy&&r.onDestroy(),t.push(r)):r.onUpdate&&r.onUpdate.call(r,e);for(let r of t)this.instances.splice(this.instances.indexOf(r),1)}render(e){for(let t of this.instances)t.onRender&&(e.translate(t.x,t.y),t.onRender.call(t,e),e.translate(-t.x,-t.y))}stop(){this.instances.length=0}},Re=class{constructor(){this.name="object",this.sprite=null,this.mask=null,this.dead=!1}onCreate(){}onDestroy(){}onUpdate(e){}onRender(e){this.sprite&&this.sprite.render(e,e.assets)}},Gt=class{constructor(e){this.src=e,this.offsetX=0,this.offsetY=0}render(e,t){let r=t.getAsset(this.src);r?e.drawImage(r,this.offsetX,this.offsetY):(e.fillStyle="white",e.fillRect(this.offsetX,this.offsetY,16,16))}};var fr=4,Lo=100,Me=class extends Re{constructor(){super();this.dx=0,this.dy=0,this.age=0}onCreate(){}onUpdate(e){this.x+=this.dx*e,this.y+=this.dy*e,this.age+=e,this.age>Lo&&(this.dead=!0)}onRender(e){e.fillStyle="red",e.fillRect(0,0,4,4)}};var pr=1,Co=10,Yt=class extends Re{constructor(){super();this.name="player",this.sprite=new Gt("image:toast.png"),this.facing=1,this.shootCooldown=0}onUpdate(e){let t=Ht.value-kt.value,r=jt.value-Kt.value;if(this.x+=pr*t*e,this.y+=pr*r*e,this.shootCooldown>0&&(this.shootCooldown-=e),zt.value){if(this.shootCooldown<=0){this.shootCooldown=Co;let s=this.room.createInstance(this.x,this.y,Me);s.dx=fr*this.facing}}else t!==0&&(this.facing=Math.sign(t))}onRender(e){e.fillStyle="white",e.fillRect(0,0,16,16),super.onRender(e)}};document.title="Bioform";async function dr(n){let e=n.display,t=e.canvas.getContext("2d");t.imageSmoothingEnabled=!1,t.assets=n.assets,n.inputs.bindBindings(Object.values(Ut));let s=new $t(e.width,e.height,[{x:0,y:0,object:Yt},{x:0,y:0,object:Me}]);s.start(),e.addEventListener("frame",i=>{let o=i.detail.deltaTime/1e3*60;s.update(o),t.clearRect(0,0,e.width,e.height),s.render(t)})}var qe=1e-6,Le=typeof Float32Array!="undefined"?Float32Array:Array,Vt=Math.random;var ll=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Ze={};Je(Ze,{add:()=>Do,angle:()=>ra,bezier:()=>Wo,ceil:()=>Fo,clone:()=>Io,copy:()=>No,create:()=>mr,cross:()=>Yo,dist:()=>ca,distance:()=>Er,div:()=>ha,divide:()=>xr,dot:()=>wr,equals:()=>aa,exactEquals:()=>oa,floor:()=>Po,forEach:()=>ma,fromValues:()=>Oo,hermite:()=>Xo,inverse:()=>$o,len:()=>pa,length:()=>vr,lerp:()=>Vo,max:()=>ko,min:()=>Uo,mul:()=>la,multiply:()=>gr,negate:()=>zo,normalize:()=>Go,random:()=>qo,rotateX:()=>ea,rotateY:()=>ta,rotateZ:()=>na,round:()=>Ho,scale:()=>Ko,scaleAndAdd:()=>jo,set:()=>Bo,sqrDist:()=>fa,sqrLen:()=>da,squaredDistance:()=>yr,squaredLength:()=>Ar,str:()=>ia,sub:()=>ua,subtract:()=>_r,transformMat3:()=>Qo,transformMat4:()=>Zo,transformQuat:()=>Jo,zero:()=>sa});function mr(){var n=new Le(3);return Le!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Io(n){var e=new Le(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function vr(n){var e=n[0],t=n[1],r=n[2];return Math.hypot(e,t,r)}function Oo(n,e,t){var r=new Le(3);return r[0]=n,r[1]=e,r[2]=t,r}function No(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function Bo(n,e,t,r){return n[0]=e,n[1]=t,n[2]=r,n}function Do(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function _r(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function gr(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function xr(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function Fo(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n[2]=Math.ceil(e[2]),n}function Po(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n[2]=Math.floor(e[2]),n}function Uo(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}function ko(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}function Ho(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n[2]=Math.round(e[2]),n}function Ko(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function jo(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n}function Er(n,e){var t=e[0]-n[0],r=e[1]-n[1],s=e[2]-n[2];return Math.hypot(t,r,s)}function yr(n,e){var t=e[0]-n[0],r=e[1]-n[1],s=e[2]-n[2];return t*t+r*r+s*s}function Ar(n){var e=n[0],t=n[1],r=n[2];return e*e+t*t+r*r}function zo(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function $o(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function Go(n,e){var t=e[0],r=e[1],s=e[2],i=t*t+r*r+s*s;return i>0&&(i=1/Math.sqrt(i)),n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n}function wr(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Yo(n,e,t){var r=e[0],s=e[1],i=e[2],o=t[0],a=t[1],u=t[2];return n[0]=s*u-i*a,n[1]=i*o-r*u,n[2]=r*a-s*o,n}function Vo(n,e,t,r){var s=e[0],i=e[1],o=e[2];return n[0]=s+r*(t[0]-s),n[1]=i+r*(t[1]-i),n[2]=o+r*(t[2]-o),n}function Xo(n,e,t,r,s,i){var o=i*i,a=o*(2*i-3)+1,u=o*(i-2)+i,c=o*(i-1),p=o*(3-2*i);return n[0]=e[0]*a+t[0]*u+r[0]*c+s[0]*p,n[1]=e[1]*a+t[1]*u+r[1]*c+s[1]*p,n[2]=e[2]*a+t[2]*u+r[2]*c+s[2]*p,n}function Wo(n,e,t,r,s,i){var o=1-i,a=o*o,u=i*i,c=a*o,p=3*i*a,_=3*u*o,w=u*i;return n[0]=e[0]*c+t[0]*p+r[0]*_+s[0]*w,n[1]=e[1]*c+t[1]*p+r[1]*_+s[1]*w,n[2]=e[2]*c+t[2]*p+r[2]*_+s[2]*w,n}function qo(n,e){e=e||1;var t=Vt()*2*Math.PI,r=Vt()*2-1,s=Math.sqrt(1-r*r)*e;return n[0]=Math.cos(t)*s,n[1]=Math.sin(t)*s,n[2]=r*e,n}function Zo(n,e,t){var r=e[0],s=e[1],i=e[2],o=t[3]*r+t[7]*s+t[11]*i+t[15];return o=o||1,n[0]=(t[0]*r+t[4]*s+t[8]*i+t[12])/o,n[1]=(t[1]*r+t[5]*s+t[9]*i+t[13])/o,n[2]=(t[2]*r+t[6]*s+t[10]*i+t[14])/o,n}function Qo(n,e,t){var r=e[0],s=e[1],i=e[2];return n[0]=r*t[0]+s*t[3]+i*t[6],n[1]=r*t[1]+s*t[4]+i*t[7],n[2]=r*t[2]+s*t[5]+i*t[8],n}function Jo(n,e,t){var r=t[0],s=t[1],i=t[2],o=t[3],a=e[0],u=e[1],c=e[2],p=s*c-i*u,_=i*a-r*c,w=r*u-s*a,T=s*w-i*_,m=i*p-r*w,y=r*_-s*p,b=o*2;return p*=b,_*=b,w*=b,T*=2,m*=2,y*=2,n[0]=a+p+T,n[1]=u+_+m,n[2]=c+w+y,n}function ea(n,e,t,r){var s=[],i=[];return s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],i[0]=s[0],i[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),i[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),n[0]=i[0]+t[0],n[1]=i[1]+t[1],n[2]=i[2]+t[2],n}function ta(n,e,t,r){var s=[],i=[];return s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],i[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),i[1]=s[1],i[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),n[0]=i[0]+t[0],n[1]=i[1]+t[1],n[2]=i[2]+t[2],n}function na(n,e,t,r){var s=[],i=[];return s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],i[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),i[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),i[2]=s[2],n[0]=i[0]+t[0],n[1]=i[1]+t[1],n[2]=i[2]+t[2],n}function ra(n,e){var t=n[0],r=n[1],s=n[2],i=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+r*r+s*s),c=Math.sqrt(i*i+o*o+a*a),p=u*c,_=p&&wr(n,e)/p;return Math.acos(Math.min(Math.max(_,-1),1))}function sa(n){return n[0]=0,n[1]=0,n[2]=0,n}function ia(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function oa(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}function aa(n,e){var t=n[0],r=n[1],s=n[2],i=e[0],o=e[1],a=e[2];return Math.abs(t-i)<=qe*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(r-o)<=qe*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=qe*Math.max(1,Math.abs(s),Math.abs(a))}var ua=_r,la=gr,ha=xr,ca=Er,fa=yr,pa=vr,da=Ar,ma=function(){var n=mr();return function(e,t,r,s,i,o){var a,u;for(t||(t=3),r||(r=0),s?u=Math.min(s*t+r,e.length):u=e.length,a=r;a<u;a+=t)n[0]=e[a],n[1]=e[a+1],n[2]=e[a+2],i(n,n,o),e[a]=n[0],e[a+1]=n[1],e[a+2]=n[2];return e}}();var _l=Ze.fromValues(0,1,0);var gl=Math.PI/3;var xl=Math.PI/180;var br=16,Aa=(()=>{let n=[],e=br,t=Math.PI*2/e,r=1,s=0,i,o;for(let a=0;a<=e;++a)i=Math.cos(a*t),o=Math.sin(a*t),n.push(0,0),n.push(r,s),n.push(i,o),r=i,s=o;return n})(),Ml=Math.trunc(Aa.length/2),wa=(()=>{let n=[],e=br,t=Math.PI*2/e,r=1,s=0,i,o;for(let a=0;a<=e;++a)i=Math.cos(a*t),o=Math.sin(a*t),n.push(r,s),n.push(i,o),r=i,s=o;return n})(),Ll=Math.trunc(wa.length/2);var ba=16,Xt=16,Fl=Xt/2,Ta=ba*Xt,Pl=1/Ta;var Sa=.3,uh=1-Sa;var Ra=60,gh=1e3/Ra;window.addEventListener("DOMContentLoaded",Ma);async function Ma(){let n=document.querySelector("#display"),e=document.querySelector("#inputs").getContext("axisbutton"),t=document.querySelector("#assets"),r=new Promise((i,o)=>{t.addEventListener("load",i),t.addEventListener("error",o)});t.src="res.pack",await r,await t.pipe("res/**/*.png",async(i,o)=>t.cache("image:"+o.substring(4),await Nt(i,"image/png"))),await t.pipe("res/**/*.obj",async(i,o)=>t.cache("obj:"+o.substring(4),await Bt(i))),await t.pipe("res/**/*.atlas",async(i,o)=>t.cache("atlas:"+o.substring(4),await Dt(i))),await t.pipe("res/**/*.wav",async(i,o)=>{let a=We.getAudioContext(),u=await Ft(i,a),c=new We(a,u);return t.cache("sound:"+o.substring(4),c)});let s=new Ot(n,e,t);n.addEventListener("frame",i=>{let{deltaTime:o,prevTime:a,now:u}=i.detail;s.deltaTime=o,s.prevTime=a,s.now=u,e.poll(u),s.emit("frame")}),await dr(s)}})();
//# sourceMappingURL=main.js.map
