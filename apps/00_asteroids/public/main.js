(()=>{var nr=Object.create,De=Object.defineProperty;var rr=Object.getOwnPropertyDescriptor;var ir=Object.getOwnPropertyNames;var sr=Object.getPrototypeOf,ar=Object.prototype.hasOwnProperty;var or=e=>De(e,"__esModule",{value:!0});var ur=(e,t)=>()=>(e&&(t=e(e=0)),t),ye=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),lr=(e,t)=>{for(var n in t)De(e,n,{get:t[n],enumerable:!0})},hr=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ir(t))!ar.call(e,i)&&i!=="default"&&De(e,i,{get:()=>t[i],enumerable:!(n=rr(t,i))||n.enumerable});return e},fr=e=>hr(or(De(e!=null?nr(sr(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Jt={};lr(Jt,{basename:()=>Qt,default:()=>Ar,delimiter:()=>Yt,dirname:()=>Zt,extname:()=>Vt,isAbsolute:()=>ut,join:()=>jt,normalize:()=>ot,relative:()=>Xt,resolve:()=>Ne,sep:()=>Kt});function Wt(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];r==="."?e.splice(i,1):r===".."?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function Ne(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:"/";if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)continue;e=i+"/"+e,t=i.charAt(0)==="/"}return e=Wt(lt(e.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+e||"."}function ot(e){var t=ut(e),n=wr(e,-1)==="/";return e=Wt(lt(e.split("/"),function(i){return!!i}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function ut(e){return e.charAt(0)==="/"}function jt(){var e=Array.prototype.slice.call(arguments,0);return ot(lt(e,function(t,n){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Xt(e,t){e=Ne(e).substr(1),t=Ne(t).substr(1);function n(c){for(var v=0;v<c.length&&c[v]==="";v++);for(var m=c.length-1;m>=0&&c[m]==="";m--);return v>m?[]:c.slice(v,m-v+1)}for(var i=n(e.split("/")),r=n(t.split("/")),f=Math.min(i.length,r.length),s=f,o=0;o<f;o++)if(i[o]!==r[o]){s=o;break}for(var a=[],o=s;o<i.length;o++)a.push("..");return a=a.concat(r.slice(s)),a.join("/")}function Zt(e){var t=at(e),n=t[0],i=t[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)}function Qt(e,t){var n=at(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function Vt(e){return at(e)[3]}function lt(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var mr,at,Kt,Yt,Ar,wr,en=ur(()=>{mr=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,at=function(e){return mr.exec(e).slice(1)};Kt="/",Yt=":";Ar={extname:Vt,basename:Qt,dirname:Zt,sep:Kt,delimiter:Yt,relative:Xt,join:jt,isAbsolute:ut,normalize:ot,resolve:Ne};wr="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}});var Ue=ye((hs,ze)=>{var me=(en(),Jt);if(me&&me.default){ze.exports=me.default;for(let e in me)ze.exports[e]=me[e]}else me&&(ze.exports=me)});var Ce=ye((fs,an)=>{"use strict";var _r=Ue(),ae="\\\\/",tn=`[^${ae}]`,he="\\.",Er="\\+",Sr="\\?",Be="\\/",Rr="(?=.)",nn="[^/]",ht=`(?:${Be}|$)`,rn=`(?:^|${Be})`,ft=`${he}{1,2}${ht}`,xr=`(?!${he})`,br=`(?!${rn}${ft})`,Cr=`(?!${he}{0,1}${ht})`,Tr=`(?!${ft})`,Lr=`[^.${Be}]`,Or=`${nn}*?`,sn={DOT_LITERAL:he,PLUS_LITERAL:Er,QMARK_LITERAL:Sr,SLASH_LITERAL:Be,ONE_CHAR:Rr,QMARK:nn,END_ANCHOR:ht,DOTS_SLASH:ft,NO_DOT:xr,NO_DOTS:br,NO_DOT_SLASH:Cr,NO_DOTS_SLASH:Tr,QMARK_NO_DOT:Lr,STAR:Or,START_ANCHOR:rn},Hr={...sn,SLASH_LITERAL:`[${ae}]`,QMARK:tn,STAR:`${tn}*?`,DOTS_SLASH:`${he}{1,2}(?:[${ae}]|$)`,NO_DOT:`(?!${he})`,NO_DOTS:`(?!(?:^|[${ae}])${he}{1,2}(?:[${ae}]|$))`,NO_DOT_SLASH:`(?!${he}{0,1}(?:[${ae}]|$))`,NO_DOTS_SLASH:`(?!${he}{1,2}(?:[${ae}]|$))`,QMARK_NO_DOT:`[^.${ae}]`,START_ANCHOR:`(?:^|[${ae}])`,END_ANCHOR:`(?:[${ae}]|$)`},$r={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};an.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:$r,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:_r.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?Hr:sn}}});var Fe=ye(V=>{"use strict";var Ir=Ue(),Pr=!1,{REGEX_BACKSLASH:Mr,REGEX_REMOVE_BACKSLASH:kr,REGEX_SPECIAL_CHARS:Dr,REGEX_SPECIAL_CHARS_GLOBAL:Nr}=Ce();V.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);V.hasRegexChars=e=>Dr.test(e);V.isRegexChar=e=>e.length===1&&V.hasRegexChars(e);V.escapeRegex=e=>e.replace(Nr,"\\$1");V.toPosixSlashes=e=>e.replace(Mr,"/");V.removeBackslashes=e=>e.replace(kr,t=>t==="\\"?"":t);V.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};V.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:Pr===!0||Ir.sep==="\\";V.escapeLast=(e,t,n)=>{let i=e.lastIndexOf(t,n);return i===-1?e:e[i-1]==="\\"?V.escapeLast(e,t,i-1):`${e.slice(0,i)}\\${e.slice(i)}`};V.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n};V.wrapOutput=(e,t={},n={})=>{let i=n.contains?"":"^",r=n.contains?"":"$",f=`${i}(?:${e})${r}`;return t.negated===!0&&(f=`(?:^(?!${f}).*$)`),f}});var vn=ye((ps,pn)=>{"use strict";var on=Fe(),{CHAR_ASTERISK:ct,CHAR_AT:zr,CHAR_BACKWARD_SLASH:Te,CHAR_COMMA:Ur,CHAR_DOT:pt,CHAR_EXCLAMATION_MARK:vt,CHAR_FORWARD_SLASH:un,CHAR_LEFT_CURLY_BRACE:gt,CHAR_LEFT_PARENTHESES:dt,CHAR_LEFT_SQUARE_BRACKET:Br,CHAR_PLUS:Fr,CHAR_QUESTION_MARK:ln,CHAR_RIGHT_CURLY_BRACE:Gr,CHAR_RIGHT_PARENTHESES:hn,CHAR_RIGHT_SQUARE_BRACKET:qr}=Ce(),fn=e=>e===un||e===Te,cn=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?Infinity:1)},Wr=(e,t)=>{let n=t||{},i=e.length-1,r=n.parts===!0||n.scanToEnd===!0,f=[],s=[],o=[],a=e,c=-1,v=0,m=0,E=!1,P=!1,x=!1,C=!1,H=!1,k=!1,F=!1,b=!1,q=!1,N=!1,X=0,U,d,A={value:"",depth:0,isGlob:!1},z=()=>c>=i,h=()=>a.charCodeAt(c+1),T=()=>(U=d,a.charCodeAt(++c));for(;c<i;){d=T();let W;if(d===Te){F=A.backslashes=!0,d=T(),d===gt&&(k=!0);continue}if(k===!0||d===gt){for(X++;z()!==!0&&(d=T());){if(d===Te){F=A.backslashes=!0,T();continue}if(d===gt){X++;continue}if(k!==!0&&d===pt&&(d=T())===pt){if(E=A.isBrace=!0,x=A.isGlob=!0,N=!0,r===!0)continue;break}if(k!==!0&&d===Ur){if(E=A.isBrace=!0,x=A.isGlob=!0,N=!0,r===!0)continue;break}if(d===Gr&&(X--,X===0)){k=!1,E=A.isBrace=!0,N=!0;break}}if(r===!0)continue;break}if(d===un){if(f.push(c),s.push(A),A={value:"",depth:0,isGlob:!1},N===!0)continue;if(U===pt&&c===v+1){v+=2;continue}m=c+1;continue}if(n.noext!==!0&&(d===Fr||d===zr||d===ct||d===ln||d===vt)===!0&&h()===dt){if(x=A.isGlob=!0,C=A.isExtglob=!0,N=!0,d===vt&&c===v&&(q=!0),r===!0){for(;z()!==!0&&(d=T());){if(d===Te){F=A.backslashes=!0,d=T();continue}if(d===hn){x=A.isGlob=!0,N=!0;break}}continue}break}if(d===ct){if(U===ct&&(H=A.isGlobstar=!0),x=A.isGlob=!0,N=!0,r===!0)continue;break}if(d===ln){if(x=A.isGlob=!0,N=!0,r===!0)continue;break}if(d===Br){for(;z()!==!0&&(W=T());){if(W===Te){F=A.backslashes=!0,T();continue}if(W===qr){P=A.isBracket=!0,x=A.isGlob=!0,N=!0;break}}if(r===!0)continue;break}if(n.nonegate!==!0&&d===vt&&c===v){b=A.negated=!0,v++;continue}if(n.noparen!==!0&&d===dt){if(x=A.isGlob=!0,r===!0){for(;z()!==!0&&(d=T());){if(d===dt){F=A.backslashes=!0,d=T();continue}if(d===hn){N=!0;break}}continue}break}if(x===!0){if(N=!0,r===!0)continue;break}}n.noext===!0&&(C=!1,x=!1);let R=a,ee="",l="";v>0&&(ee=a.slice(0,v),a=a.slice(v),m-=v),R&&x===!0&&m>0?(R=a.slice(0,m),l=a.slice(m)):x===!0?(R="",l=a):R=a,R&&R!==""&&R!=="/"&&R!==a&&fn(R.charCodeAt(R.length-1))&&(R=R.slice(0,-1)),n.unescape===!0&&(l&&(l=on.removeBackslashes(l)),R&&F===!0&&(R=on.removeBackslashes(R)));let u={prefix:ee,input:e,start:v,base:R,glob:l,isBrace:E,isBracket:P,isGlob:x,isExtglob:C,isGlobstar:H,negated:b,negatedExtglob:q};if(n.tokens===!0&&(u.maxDepth=0,fn(d)||s.push(A),u.tokens=s),n.parts===!0||n.tokens===!0){let W;for(let S=0;S<f.length;S++){let Q=W?W+1:v,j=f[S],K=e.slice(Q,j);n.tokens&&(S===0&&v!==0?(s[S].isPrefix=!0,s[S].value=ee):s[S].value=K,cn(s[S]),u.maxDepth+=s[S].depth),(S!==0||K!=="")&&o.push(K),W=j}if(W&&W+1<e.length){let S=e.slice(W+1);o.push(S),n.tokens&&(s[s.length-1].value=S,cn(s[s.length-1]),u.maxDepth+=s[s.length-1].depth)}u.slashes=f,u.parts=o}return u};pn.exports=Wr});var yn=ye((vs,dn)=>{"use strict";var Ge=Ce(),te=Fe(),{MAX_LENGTH:qe,POSIX_REGEX_SOURCE:jr,REGEX_NON_SPECIAL_CHARS:Xr,REGEX_SPECIAL_CHARS_BACKREF:Kr,REPLACEMENTS:gn}=Ge,Yr=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let n=`[${e.join("-")}]`;try{new RegExp(n)}catch(i){return e.map(r=>te.escapeRegex(r)).join("..")}return n},Ee=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,yt=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=gn[e]||e;let n={...t},i=typeof n.maxLength=="number"?Math.min(qe,n.maxLength):qe,r=e.length;if(r>i)throw new SyntaxError(`Input length: ${r}, exceeds maximum allowed length: ${i}`);let f={type:"bos",value:"",output:n.prepend||""},s=[f],o=n.capture?"":"?:",a=te.isWindows(t),c=Ge.globChars(a),v=Ge.extglobChars(c),{DOT_LITERAL:m,PLUS_LITERAL:E,SLASH_LITERAL:P,ONE_CHAR:x,DOTS_SLASH:C,NO_DOT:H,NO_DOT_SLASH:k,NO_DOTS_SLASH:F,QMARK:b,QMARK_NO_DOT:q,STAR:N,START_ANCHOR:X}=c,U=g=>`(${o}(?:(?!${X}${g.dot?C:m}).)*?)`,d=n.dot?"":H,A=n.dot?b:q,z=n.bash===!0?U(n):N;n.capture&&(z=`(${z})`),typeof n.noext=="boolean"&&(n.noextglob=n.noext);let h={input:e,index:-1,start:0,dot:n.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};e=te.removePrefix(e,h),r=e.length;let T=[],R=[],ee=[],l=f,u,W=()=>h.index===r-1,S=h.peek=(g=1)=>e[h.index+g],Q=h.advance=()=>e[++h.index]||"",j=()=>e.slice(h.index+1),K=(g="",$=0)=>{h.consumed+=g,h.index+=$},ie=g=>{h.output+=g.output!=null?g.output:g.value,K(g.value)},be=()=>{let g=1;for(;S()==="!"&&(S(2)!=="("||S(3)==="?");)Q(),h.start++,g++;return g%2==0?!1:(h.negated=!0,h.start++,!0)},pe=g=>{h[g]++,ee.push(g)},se=g=>{h[g]--,ee.pop()},w=g=>{if(l.type==="globstar"){let $=h.braces>0&&(g.type==="comma"||g.type==="brace"),p=g.extglob===!0||T.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!$&&!p&&(h.output=h.output.slice(0,-l.output.length),l.type="star",l.value="*",l.output=z,h.output+=l.output)}if(T.length&&g.type!=="paren"&&(T[T.length-1].inner+=g.value),(g.value||g.output)&&ie(g),l&&l.type==="text"&&g.type==="text"){l.value+=g.value,l.output=(l.output||"")+g.value;return}g.prev=l,s.push(g),l=g},de=(g,$)=>{let p={...v[$],conditions:1,inner:""};p.prev=l,p.parens=h.parens,p.output=h.output;let _=(n.capture?"(":"")+p.open;pe("parens"),w({type:g,value:$,output:h.output?"":x}),w({type:"paren",extglob:!0,value:Q(),output:_}),T.push(p)},Me=g=>{let $=g.close+(n.capture?")":""),p;if(g.type==="negate"){let _=z;if(g.inner&&g.inner.length>1&&g.inner.includes("/")&&(_=U(n)),(_!==z||W()||/^\)+$/.test(j()))&&($=g.close=`)$))${_}`),g.inner.includes("*")&&(p=j())&&/^\.[^\\/.]+$/.test(p)){let D=yt(p,{...t,fastpaths:!1}).output;$=g.close=`)${D})${_})`}g.prev.type==="bos"&&(h.negatedExtglob=!0)}w({type:"paren",extglob:!0,value:u,output:$}),se("parens")};if(n.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let g=!1,$=e.replace(Kr,(p,_,D,Y,G,rt)=>Y==="\\"?(g=!0,p):Y==="?"?_?_+Y+(G?b.repeat(G.length):""):rt===0?A+(G?b.repeat(G.length):""):b.repeat(D.length):Y==="."?m.repeat(D.length):Y==="*"?_?_+Y+(G?z:""):z:_?p:`\\${p}`);return g===!0&&(n.unescape===!0?$=$.replace(/\\/g,""):$=$.replace(/\\+/g,p=>p.length%2==0?"\\\\":p?"\\":"")),$===e&&n.contains===!0?(h.output=e,h):(h.output=te.wrapOutput($,h,t),h)}for(;!W();){if(u=Q(),u==="\0")continue;if(u==="\\"){let p=S();if(p==="/"&&n.bash!==!0||p==="."||p===";")continue;if(!p){u+="\\",w({type:"text",value:u});continue}let _=/^\\+/.exec(j()),D=0;if(_&&_[0].length>2&&(D=_[0].length,h.index+=D,D%2!=0&&(u+="\\")),n.unescape===!0?u=Q():u+=Q(),h.brackets===0){w({type:"text",value:u});continue}}if(h.brackets>0&&(u!=="]"||l.value==="["||l.value==="[^")){if(n.posix!==!1&&u===":"){let p=l.value.slice(1);if(p.includes("[")&&(l.posix=!0,p.includes(":"))){let _=l.value.lastIndexOf("["),D=l.value.slice(0,_),Y=l.value.slice(_+2),G=jr[Y];if(G){l.value=D+G,h.backtrack=!0,Q(),!f.output&&s.indexOf(l)===1&&(f.output=x);continue}}}(u==="["&&S()!==":"||u==="-"&&S()==="]")&&(u=`\\${u}`),u==="]"&&(l.value==="["||l.value==="[^")&&(u=`\\${u}`),n.posix===!0&&u==="!"&&l.value==="["&&(u="^"),l.value+=u,ie({value:u});continue}if(h.quotes===1&&u!=='"'){u=te.escapeRegex(u),l.value+=u,ie({value:u});continue}if(u==='"'){h.quotes=h.quotes===1?0:1,n.keepQuotes===!0&&w({type:"text",value:u});continue}if(u==="("){pe("parens"),w({type:"paren",value:u});continue}if(u===")"){if(h.parens===0&&n.strictBrackets===!0)throw new SyntaxError(Ee("opening","("));let p=T[T.length-1];if(p&&h.parens===p.parens+1){Me(T.pop());continue}w({type:"paren",value:u,output:h.parens?")":"\\)"}),se("parens");continue}if(u==="["){if(n.nobracket===!0||!j().includes("]")){if(n.nobracket!==!0&&n.strictBrackets===!0)throw new SyntaxError(Ee("closing","]"));u=`\\${u}`}else pe("brackets");w({type:"bracket",value:u});continue}if(u==="]"){if(n.nobracket===!0||l&&l.type==="bracket"&&l.value.length===1){w({type:"text",value:u,output:`\\${u}`});continue}if(h.brackets===0){if(n.strictBrackets===!0)throw new SyntaxError(Ee("opening","["));w({type:"text",value:u,output:`\\${u}`});continue}se("brackets");let p=l.value.slice(1);if(l.posix!==!0&&p[0]==="^"&&!p.includes("/")&&(u=`/${u}`),l.value+=u,ie({value:u}),n.literalBrackets===!1||te.hasRegexChars(p))continue;let _=te.escapeRegex(l.value);if(h.output=h.output.slice(0,-l.value.length),n.literalBrackets===!0){h.output+=_,l.value=_;continue}l.value=`(${o}${_}|${l.value})`,h.output+=l.value;continue}if(u==="{"&&n.nobrace!==!0){pe("braces");let p={type:"brace",value:u,output:"(",outputIndex:h.output.length,tokensIndex:h.tokens.length};R.push(p),w(p);continue}if(u==="}"){let p=R[R.length-1];if(n.nobrace===!0||!p){w({type:"text",value:u,output:u});continue}let _=")";if(p.dots===!0){let D=s.slice(),Y=[];for(let G=D.length-1;G>=0&&(s.pop(),D[G].type!=="brace");G--)D[G].type!=="dots"&&Y.unshift(D[G].value);_=Yr(Y,n),h.backtrack=!0}if(p.comma!==!0&&p.dots!==!0){let D=h.output.slice(0,p.outputIndex),Y=h.tokens.slice(p.tokensIndex);p.value=p.output="\\{",u=_="\\}",h.output=D;for(let G of Y)h.output+=G.output||G.value}w({type:"brace",value:u,output:_}),se("braces"),R.pop();continue}if(u==="|"){T.length>0&&T[T.length-1].conditions++,w({type:"text",value:u});continue}if(u===","){let p=u,_=R[R.length-1];_&&ee[ee.length-1]==="braces"&&(_.comma=!0,p="|"),w({type:"comma",value:u,output:p});continue}if(u==="/"){if(l.type==="dot"&&h.index===h.start+1){h.start=h.index+1,h.consumed="",h.output="",s.pop(),l=f;continue}w({type:"slash",value:u,output:P});continue}if(u==="."){if(h.braces>0&&l.type==="dot"){l.value==="."&&(l.output=m);let p=R[R.length-1];l.type="dots",l.output+=u,l.value+=u,p.dots=!0;continue}if(h.braces+h.parens===0&&l.type!=="bos"&&l.type!=="slash"){w({type:"text",value:u,output:m});continue}w({type:"dot",value:u,output:m});continue}if(u==="?"){if(!(l&&l.value==="(")&&n.noextglob!==!0&&S()==="("&&S(2)!=="?"){de("qmark",u);continue}if(l&&l.type==="paren"){let _=S(),D=u;if(_==="<"&&!te.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(l.value==="("&&!/[!=<:]/.test(_)||_==="<"&&!/<([!=]|\w+>)/.test(j()))&&(D=`\\${u}`),w({type:"text",value:u,output:D});continue}if(n.dot!==!0&&(l.type==="slash"||l.type==="bos")){w({type:"qmark",value:u,output:q});continue}w({type:"qmark",value:u,output:b});continue}if(u==="!"){if(n.noextglob!==!0&&S()==="("&&(S(2)!=="?"||!/[!=<:]/.test(S(3)))){de("negate",u);continue}if(n.nonegate!==!0&&h.index===0){be();continue}}if(u==="+"){if(n.noextglob!==!0&&S()==="("&&S(2)!=="?"){de("plus",u);continue}if(l&&l.value==="("||n.regex===!1){w({type:"plus",value:u,output:E});continue}if(l&&(l.type==="bracket"||l.type==="paren"||l.type==="brace")||h.parens>0){w({type:"plus",value:u});continue}w({type:"plus",value:E});continue}if(u==="@"){if(n.noextglob!==!0&&S()==="("&&S(2)!=="?"){w({type:"at",extglob:!0,value:u,output:""});continue}w({type:"text",value:u});continue}if(u!=="*"){(u==="$"||u==="^")&&(u=`\\${u}`);let p=Xr.exec(j());p&&(u+=p[0],h.index+=p[0].length),w({type:"text",value:u});continue}if(l&&(l.type==="globstar"||l.star===!0)){l.type="star",l.star=!0,l.value+=u,l.output=z,h.backtrack=!0,h.globstar=!0,K(u);continue}let g=j();if(n.noextglob!==!0&&/^\([^?]/.test(g)){de("star",u);continue}if(l.type==="star"){if(n.noglobstar===!0){K(u);continue}let p=l.prev,_=p.prev,D=p.type==="slash"||p.type==="bos",Y=_&&(_.type==="star"||_.type==="globstar");if(n.bash===!0&&(!D||g[0]&&g[0]!=="/")){w({type:"star",value:u,output:""});continue}let G=h.braces>0&&(p.type==="comma"||p.type==="brace"),rt=T.length&&(p.type==="pipe"||p.type==="paren");if(!D&&p.type!=="paren"&&!G&&!rt){w({type:"star",value:u,output:""});continue}for(;g.slice(0,3)==="/**";){let ke=e[h.index+4];if(ke&&ke!=="/")break;g=g.slice(3),K("/**",3)}if(p.type==="bos"&&W()){l.type="globstar",l.value+=u,l.output=U(n),h.output=l.output,h.globstar=!0,K(u);continue}if(p.type==="slash"&&p.prev.type!=="bos"&&!Y&&W()){h.output=h.output.slice(0,-(p.output+l.output).length),p.output=`(?:${p.output}`,l.type="globstar",l.output=U(n)+(n.strictSlashes?")":"|$)"),l.value+=u,h.globstar=!0,h.output+=p.output+l.output,K(u);continue}if(p.type==="slash"&&p.prev.type!=="bos"&&g[0]==="/"){let ke=g[1]!==void 0?"|$":"";h.output=h.output.slice(0,-(p.output+l.output).length),p.output=`(?:${p.output}`,l.type="globstar",l.output=`${U(n)}${P}|${P}${ke})`,l.value+=u,h.output+=p.output+l.output,h.globstar=!0,K(u+Q()),w({type:"slash",value:"/",output:""});continue}if(p.type==="bos"&&g[0]==="/"){l.type="globstar",l.value+=u,l.output=`(?:^|${P}|${U(n)}${P})`,h.output=l.output,h.globstar=!0,K(u+Q()),w({type:"slash",value:"/",output:""});continue}h.output=h.output.slice(0,-l.output.length),l.type="globstar",l.output=U(n),l.value+=u,h.output+=l.output,h.globstar=!0,K(u);continue}let $={type:"star",value:u,output:z};if(n.bash===!0){$.output=".*?",(l.type==="bos"||l.type==="slash")&&($.output=d+$.output),w($);continue}if(l&&(l.type==="bracket"||l.type==="paren")&&n.regex===!0){$.output=u,w($);continue}(h.index===h.start||l.type==="slash"||l.type==="dot")&&(l.type==="dot"?(h.output+=k,l.output+=k):n.dot===!0?(h.output+=F,l.output+=F):(h.output+=d,l.output+=d),S()!=="*"&&(h.output+=x,l.output+=x)),w($)}for(;h.brackets>0;){if(n.strictBrackets===!0)throw new SyntaxError(Ee("closing","]"));h.output=te.escapeLast(h.output,"["),se("brackets")}for(;h.parens>0;){if(n.strictBrackets===!0)throw new SyntaxError(Ee("closing",")"));h.output=te.escapeLast(h.output,"("),se("parens")}for(;h.braces>0;){if(n.strictBrackets===!0)throw new SyntaxError(Ee("closing","}"));h.output=te.escapeLast(h.output,"{"),se("braces")}if(n.strictSlashes!==!0&&(l.type==="star"||l.type==="bracket")&&w({type:"maybe_slash",value:"",output:`${P}?`}),h.backtrack===!0){h.output="";for(let g of h.tokens)h.output+=g.output!=null?g.output:g.value,g.suffix&&(h.output+=g.suffix)}return h};yt.fastpaths=(e,t)=>{let n={...t},i=typeof n.maxLength=="number"?Math.min(qe,n.maxLength):qe,r=e.length;if(r>i)throw new SyntaxError(`Input length: ${r}, exceeds maximum allowed length: ${i}`);e=gn[e]||e;let f=te.isWindows(t),{DOT_LITERAL:s,SLASH_LITERAL:o,ONE_CHAR:a,DOTS_SLASH:c,NO_DOT:v,NO_DOTS:m,NO_DOTS_SLASH:E,STAR:P,START_ANCHOR:x}=Ge.globChars(f),C=n.dot?m:v,H=n.dot?E:v,k=n.capture?"":"?:",F={negated:!1,prefix:""},b=n.bash===!0?".*?":P;n.capture&&(b=`(${b})`);let q=d=>d.noglobstar===!0?b:`(${k}(?:(?!${x}${d.dot?c:s}).)*?)`,N=d=>{switch(d){case"*":return`${C}${a}${b}`;case".*":return`${s}${a}${b}`;case"*.*":return`${C}${b}${s}${a}${b}`;case"*/*":return`${C}${b}${o}${a}${H}${b}`;case"**":return C+q(n);case"**/*":return`(?:${C}${q(n)}${o})?${H}${a}${b}`;case"**/*.*":return`(?:${C}${q(n)}${o})?${H}${b}${s}${a}${b}`;case"**/.*":return`(?:${C}${q(n)}${o})?${s}${a}${b}`;default:{let A=/^(.*?)\.(\w+)$/.exec(d);if(!A)return;let z=N(A[1]);return z?z+s+A[2]:void 0}}},X=te.removePrefix(e,F),U=N(X);return U&&n.strictSlashes!==!0&&(U+=`${o}?`),U};dn.exports=yt});var An=ye((gs,mn)=>{"use strict";var Zr=Ue(),Qr=vn(),mt=yn(),At=Fe(),Vr=Ce(),Jr=e=>e&&typeof e=="object"&&!Array.isArray(e),B=(e,t,n=!1)=>{if(Array.isArray(e)){let v=e.map(E=>B(E,t,n));return E=>{for(let P of v){let x=P(E);if(x)return x}return!1}}let i=Jr(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!i)throw new TypeError("Expected pattern to be a non-empty string");let r=t||{},f=At.isWindows(t),s=i?B.compileRe(e,t):B.makeRe(e,t,!1,!0),o=s.state;delete s.state;let a=()=>!1;if(r.ignore){let v={...t,ignore:null,onMatch:null,onResult:null};a=B(r.ignore,v,n)}let c=(v,m=!1)=>{let{isMatch:E,match:P,output:x}=B.test(v,s,t,{glob:e,posix:f}),C={glob:e,state:o,regex:s,posix:f,input:v,output:x,match:P,isMatch:E};return typeof r.onResult=="function"&&r.onResult(C),E===!1?(C.isMatch=!1,m?C:!1):a(v)?(typeof r.onIgnore=="function"&&r.onIgnore(C),C.isMatch=!1,m?C:!1):(typeof r.onMatch=="function"&&r.onMatch(C),m?C:!0)};return n&&(c.state=o),c};B.test=(e,t,n,{glob:i,posix:r}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let f=n||{},s=f.format||(r?At.toPosixSlashes:null),o=e===i,a=o&&s?s(e):e;return o===!1&&(a=s?s(e):e,o=a===i),(o===!1||f.capture===!0)&&(f.matchBase===!0||f.basename===!0?o=B.matchBase(e,t,n,r):o=t.exec(a)),{isMatch:Boolean(o),match:o,output:a}};B.matchBase=(e,t,n,i=At.isWindows(n))=>(t instanceof RegExp?t:B.makeRe(t,n)).test(Zr.basename(e));B.isMatch=(e,t,n)=>B(t,n)(e);B.parse=(e,t)=>Array.isArray(e)?e.map(n=>B.parse(n,t)):mt(e,{...t,fastpaths:!1});B.scan=(e,t)=>Qr(e,t);B.compileRe=(e,t,n=!1,i=!1)=>{if(n===!0)return e.output;let r=t||{},f=r.contains?"":"^",s=r.contains?"":"$",o=`${f}(?:${e.output})${s}`;e&&e.negated===!0&&(o=`^(?!${o}).*$`);let a=B.toRegex(o,t);return i===!0&&(a.state=e),a};B.makeRe=(e,t={},n=!1,i=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let r={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(r.output=mt.fastpaths(e,t)),r.output||(r=mt(e,t)),B.compileRe(r,t,n,i)};B.toRegex=(e,t)=>{try{let n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(n){if(t&&t.debug===!0)throw n;return/$^/}};B.constants=Vr;mn.exports=B});var _n=ye((ds,wn)=>{"use strict";wn.exports=An()});var cr=`<div class="container">
  <label class="hidden" id="title">display-port</label>
  <label class="hidden" id="fps">00</label>
  <label class="hidden" id="dimension">0x0</label>
  <div class="content">
    <canvas> Oh no! Your browser does not support canvas. </canvas>
    <slot id="inner"></slot>
  </div>
  <slot name="frame"></slot>
</div>
`,pr=`:host {
  display: inline-block;
  color: #555555;
}

.container {
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
}

.content {
  position: relative;
  margin: auto;
}

.content > *:not(canvas) {
  width: 100%;
  height: 100%;
}

canvas {
  background: #000000;
  image-rendering: pixelated;
}

label {
  position: absolute;
  font-family: monospace;
  color: currentColor;
}

#inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

#title {
  left: 0.5rem;
  top: 0.5rem;
}

#fps {
  right: 0.5rem;
  top: 0.5rem;
}

#dimension {
  left: 0.5rem;
  bottom: 0.5rem;
}

.hidden {
  display: none;
}

:host([debug]) .container {
  outline: 6px dashed rgba(0, 0, 0, 0.1);
  outline-offset: -4px;
  background-color: rgba(0, 0, 0, 0.1);
}

:host([mode='noscale']) canvas {
  margin: 0;
  top: 0;
  left: 0;
}

:host([mode='stretch']) canvas,
:host([mode='scale']) canvas {
  width: 100%;
  height: 100%;
}

:host([mode='fit']),
:host([mode='scale']),
:host([mode='center']),
:host([mode='stretch']),
:host([mode='fill']) {
  width: 100%;
  height: 100%;
}

:host([full]) {
  width: 100vw !important;
  height: 100vh !important;
}

:host([disabled]) {
  display: none;
}

slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

::slotted(*) {
  pointer-events: auto;
}
`,Dt="noscale",it="fit",Nt="scale",zt="fill",Ut="stretch",vr=300,gr=150,dr=it,yr=200,Bt=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=cr,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=pr,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("display-port",this)}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(t){this.setAttribute("mode",t)}get debug(){return this._debug}set debug(t){this.toggleAttribute("debug",t)}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get width(){return this._width}set width(t){this.setAttribute("width",String(t))}get height(){return this._height}set height(t){this.setAttribute("height",String(t))}get onframe(){return this._onframe}set onframe(t){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=t,this._onframe&&this.addEventListener("frame",t)}constructor(){super();let t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=t.querySelector("canvas"),this._contentElement=t.querySelector(".content"),this._innerElement=t.querySelector("#inner"),this._titleElement=t.querySelector("#title"),this._fpsElement=t.querySelector("#fps"),this._dimensionElement=t.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=vr,this._height=gr,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this._frameEvent=new CustomEvent("frame",{composed:!0,bubbles:!1,detail:{now:0,prevTime:0,deltaTime:0,canvas:this._canvasElement}}),this._resizeEvent=new CustomEvent("resize",{composed:!0,bubbles:!1,detail:{width:0,height:0}}),this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){_e(this,"mode"),_e(this,"debug"),_e(this,"disabled"),_e(this,"width"),_e(this,"height"),_e(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",dr),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.updateCanvasSize(!0),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(t,n,i){switch(t){case"debug":this._debug=i!==null;break;case"disabled":this._disabled=i!==null;break;case"width":this._width=Number(i);break;case"height":this._height=Number(i);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+i+"}}").bind(this);break}switch(t){case"disabled":i?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",i),this._fpsElement.classList.toggle("hidden",i),this._dimensionElement.classList.toggle("hidden",i);break}}getContext(t="2d",n=void 0){return this._canvasElement.getContext(t,n)}pause(){cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=requestAnimationFrame(this.update)}update(t){this._animationRequestHandle=requestAnimationFrame(this.update),this.updateCanvasSize(!1);let n=t-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=t,this._debug){let f=n<=0?"--":String(Math.round(1e3/n)).padStart(2,"0");if(this._fpsElement.textContent!==f&&(this._fpsElement.textContent=f),this.mode===Dt){let o=`${this._width}x${this._height}`;this._dimensionElement.textContent!==o&&(this._dimensionElement.textContent=o)}else{let o=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==o&&(this._dimensionElement.textContent=o)}}let r=this._frameEvent.detail;r.now=t,r.prevTime=this._prevAnimationFrameTime,r.deltaTime=n,this.dispatchEvent(this._frameEvent)}onDelayCanvasResize(){this._resizeTimeoutHandle=0,this.updateCanvasSize(!0)}delayCanvasResize(t,n){(t!==this._resizeCanvasWidth||n!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=t,this._resizeCanvasHeight=n,this._resizeTimeoutHandle&&clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=setTimeout(this.onDelayCanvasResize,yr))}updateCanvasSize(t=!0){let n=this.shadowRoot.host.getBoundingClientRect(),i=n.width,r=n.height,f=this._canvasElement,s=this._width,o=this._height,a=this.mode;if(a===Ut||a===zt)s=i,o=r;else if(a!==Dt&&(i<s||r<o||a===it||a==Nt)){let v=i/s,m=r/o;v<m?(s=i,o=o*v):(s=s*m,o=r)}if(s=Math.floor(s),o=Math.floor(o),typeof t=="undefined"&&(t=f.clientWidth!==s||f.clientHeight!==o),!t){this.delayCanvasResize(s,o);return}let c=Math.min(s/this._width,o/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${c}em`,t){a===Nt?(f.width=this._width,f.height=this._height):a!==Ut&&(f.width=s,f.height=o);let v=this._contentElement.style;v.width=`${s}px`,v.height=`${o}px`,(a===it||a===zt)&&(this._width=s,this._height=o);let E=this._resizeEvent.detail;E.width=s,E.height=o,this.dispatchEvent(this._resizeEvent)}}};Bt.define();function _e(e,t){if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];delete e[t],e[t]=n}}var st=class{next(){return 0}},Ft=class extends st{next(){return Math.random()}},Gt=class extends st{constructor(t){super();this.seed=t,this.a=t}next(){var t=this.a+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}},y=class{static get RAND(){let t=new this;return this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this),Object.defineProperty(this,"RAND",{value:t}),t}constructor(t=void 0){typeof t=="number"?this.generator=new Gt(t):t?this.generator=t:this.generator=new Ft,this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this)}static next(){return this.RAND.next()}next(){return this.generator.next()}static choose(t){return this.RAND.choose(t)}choose(t){return t[Math.floor(this.generator.next()*t.length)]}static range(t,n){return this.RAND.range(t,n)}range(t,n){return(n-t)*this.generator.next()+t}static rangeInt(t,n){return this.RAND.rangeInt(t,n)}rangeInt(t,n){return Math.trunc(this.range(t,n))}static sign(){return this.RAND.sign()}sign(){return this.generator.next()<.5?-1:1}};window.addEventListener("error",qt,!0);window.addEventListener("unhandledrejection",qt,!0);function qt(e){e instanceof PromiseRejectionEvent?window.alert(e.reason.stack):e instanceof ErrorEvent?window.alert(e.error.stack):window.alert(JSON.stringify(e))}var gi=fr(_n());var En={},ei=function(e,t,n,i,r){var f=new Worker(En[t]||(En[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return f.onmessage=function(s){var o=s.data,a=o.$e$;if(a){var c=new Error(a[0]);c.code=a[1],c.stack=a[2],r(c,null)}else r(null,o)},f.postMessage(n,i),f},Z=Uint8Array,ve=Uint16Array,wt=Uint32Array,_t=new Z([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Et=new Z([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sn=new Z([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rn=function(e,t){for(var n=new ve(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var r=new wt(n[30]),i=1;i<30;++i)for(var f=n[i];f<n[i+1];++f)r[f]=f-n[i]<<5|i;return[n,r]},xn=Rn(_t,2),St=xn[0],ti=xn[1];St[28]=258,ti[258]=28;var bn=Rn(Et,0),Cn=bn[0],ys=bn[1],We=new ve(32768);for(var I=0;I<32768;++I)fe=(I&43690)>>>1|(I&21845)<<1,fe=(fe&52428)>>>2|(fe&13107)<<2,fe=(fe&61680)>>>4|(fe&3855)<<4,We[I]=((fe&65280)>>>8|(fe&255)<<8)>>>1;var fe,Se=function(e,t,n){for(var i=e.length,r=0,f=new ve(t);r<i;++r)e[r]&&++f[e[r]-1];var s=new ve(t);for(r=0;r<t;++r)s[r]=s[r-1]+f[r-1]<<1;var o;if(n){o=new ve(1<<t);var a=15-t;for(r=0;r<i;++r)if(e[r])for(var c=r<<4|e[r],v=t-e[r],m=s[e[r]-1]++<<v,E=m|(1<<v)-1;m<=E;++m)o[We[m]>>>a]=c}else for(o=new ve(i),r=0;r<i;++r)e[r]&&(o[r]=We[s[e[r]-1]++]>>>15-e[r]);return o},Le=new Z(288);for(var I=0;I<144;++I)Le[I]=8;for(var I=144;I<256;++I)Le[I]=9;for(var I=256;I<280;++I)Le[I]=7;for(var I=280;I<288;++I)Le[I]=8;var Tn=new Z(32);for(var I=0;I<32;++I)Tn[I]=5;var Ln=Se(Le,9,1);var On=Se(Tn,5,1),je=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ne=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&n},Xe=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Hn=function(e){return(e+7)/8|0},Ke=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var i=new(e.BYTES_PER_ELEMENT==2?ve:e.BYTES_PER_ELEMENT==4?wt:Z)(n-t);return i.set(e.subarray(t,n)),i};var $n=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],J=function(e,t,n){var i=new Error(t||$n[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,J),!n)throw i;return i},In=function(e,t,n){var i=e.length;if(!i||n&&n.f&&!n.l)return t||new Z(0);var r=!t||n,f=!n||n.i;n||(n={}),t||(t=new Z(i*3));var s=function(w){var de=t.length;if(w>de){var Me=new Z(Math.max(de*2,w));Me.set(t),t=Me}},o=n.f||0,a=n.p||0,c=n.b||0,v=n.l,m=n.d,E=n.m,P=n.n,x=i*8;do{if(!v){o=ne(e,a,1);var C=ne(e,a+1,3);if(a+=3,C)if(C==1)v=Ln,m=On,E=9,P=5;else if(C==2){var b=ne(e,a,31)+257,q=ne(e,a+10,15)+4,N=b+ne(e,a+5,31)+1;a+=14;for(var X=new Z(N),U=new Z(19),d=0;d<q;++d)U[Sn[d]]=ne(e,a+d*3,7);a+=q*3;for(var A=je(U),z=(1<<A)-1,h=Se(U,A,1),d=0;d<N;){var T=h[ne(e,a,z)];a+=T&15;var H=T>>>4;if(H<16)X[d++]=H;else{var R=0,ee=0;for(H==16?(ee=3+ne(e,a,3),a+=2,R=X[d-1]):H==17?(ee=3+ne(e,a,7),a+=3):H==18&&(ee=11+ne(e,a,127),a+=7);ee--;)X[d++]=R}}var l=X.subarray(0,b),u=X.subarray(b);E=je(l),P=je(u),v=Se(l,E,1),m=Se(u,P,1)}else J(1);else{var H=Hn(a)+4,k=e[H-4]|e[H-3]<<8,F=H+k;if(F>i){f&&J(0);break}r&&s(c+k),t.set(e.subarray(H,F),c),n.b=c+=k,n.p=a=F*8,n.f=o;continue}if(a>x){f&&J(0);break}}r&&s(c+131072);for(var W=(1<<E)-1,S=(1<<P)-1,Q=a;;Q=a){var R=v[Xe(e,a)&W],j=R>>>4;if(a+=R&15,a>x){f&&J(0);break}if(R||J(2),j<256)t[c++]=j;else if(j==256){Q=a,v=null;break}else{var K=j-254;if(j>264){var d=j-257,ie=_t[d];K=ne(e,a,(1<<ie)-1)+St[d],a+=ie}var be=m[Xe(e,a)&S],pe=be>>>4;be||J(3),a+=be&15;var u=Cn[pe];if(pe>3){var ie=Et[pe];u+=Xe(e,a)&(1<<ie)-1,a+=ie}if(a>x){f&&J(0);break}r&&s(c+131072);for(var se=c+K;c<se;c+=4)t[c]=t[c-u],t[c+1]=t[c+1-u],t[c+2]=t[c+2-u],t[c+3]=t[c+3-u];c=se}}n.l=v,n.p=Q,n.b=c,n.f=o,v&&(o=1,n.m=E,n.d=m,n.n=P)}while(!o);return c==t.length?t:Ke(t,0,c)};var ni=new Z(0);var ri=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},Pn=function(e,t,n){for(var i=e(),r=e.toString(),f=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<i.length;++s){var o=i[s],a=f[s];if(typeof o=="function"){t+=";"+a+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var v=c.indexOf(" ",8)+1;t+=c.slice(v,c.indexOf("(",v))}else{t+=c;for(var m in o.prototype)t+=";"+a+".prototype."+m+"="+o.prototype[m].toString()}else t+=c}else n[a]=o}return[t,n]},Ye=[],ii=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},si=function(e,t,n,i){var r;if(!Ye[n]){for(var f="",s={},o=e.length-1,a=0;a<o;++a)r=Pn(e[a],f,s),f=r[0],s=r[1];Ye[n]=Pn(e[o],f,s)}var c=ri({},Ye[n][1]);return ei(Ye[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,c,ii(c),i)},ai=function(){return[Z,ve,wt,_t,Et,Sn,St,Cn,Ln,On,We,$n,Se,je,ne,Xe,Hn,Ke,J,In,xt,Mn,kn]};var Mn=function(e){return postMessage(e,[e.buffer])},kn=function(e){return e&&e.size&&new Z(e.size)},oi=function(e,t,n,i,r,f){var s=si(n,i,r,function(o,a){s.terminate(),f(o,a)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}};var oe=function(e,t){return e[t]|e[t+1]<<8},re=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Rt=function(e,t){return re(e,t)+re(e,t+4)*4294967296};function ui(e,t,n){return n||(n=t,t={}),typeof n!="function"&&J(7),oi(e,t,[ai],function(i){return Mn(xt(i.data[0],kn(i.data[1])))},1,n)}function xt(e,t){return In(e,t)}var ms=typeof TextEncoder!="undefined"&&new TextEncoder,bt=typeof TextDecoder!="undefined"&&new TextDecoder,li=0;try{bt.decode(ni,{stream:!0}),li=1}catch(e){}var hi=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return[t,Ke(e,n-1)];r?r==3?(i=((i&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|i>>10,56320|i&1023)):r&1?t+=String.fromCharCode((i&31)<<6|e[n++]&63):t+=String.fromCharCode((i&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(i)}};function fi(e,t){if(t){for(var n="",i=0;i<e.length;i+=16384)n+=String.fromCharCode.apply(null,e.subarray(i,i+16384));return n}else{if(bt)return bt.decode(e);var r=hi(e),f=r[0],s=r[1];return s.length&&J(8),f}}var ci=function(e,t){return t+30+oe(e,t+26)+oe(e,t+28)},pi=function(e,t,n){var i=oe(e,t+28),r=fi(e.subarray(t+46,t+46+i),!(oe(e,t+8)&2048)),f=t+46+i,s=re(e,t+20),o=n&&s==4294967295?vi(e,f):[s,re(e,t+24),re(e,t+42)],a=o[0],c=o[1],v=o[2];return[oe(e,t+10),a,c,r,f+oe(e,t+30)+oe(e,t+32),v]},vi=function(e,t){for(;oe(e,t)!=1;t+=4+oe(e,t+2));return[Rt(e,t+12),Rt(e,t+4),Rt(e,t+20)]};var Dn=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function Ct(e,t,n){n||(n=t,t={}),typeof n!="function"&&J(7);var i=[],r=function(){for(var H=0;H<i.length;++H)i[H]()},f={},s=function(H,k){Dn(function(){n(H,k)})};Dn(function(){s=n});for(var o=e.length-22;re(e,o)!=101010256;--o)if(!o||e.length-o>65558)return s(J(13,0,1),null),r;var a=oe(e,o+8);if(a){var c=a,v=re(e,o+16),m=v==4294967295||c==65535;if(m){var E=re(e,o-12);m=re(e,E)==101075792,m&&(c=a=re(e,E+32),v=re(e,E+48))}for(var P=t&&t.filter,x=function(H){var k=pi(e,v,m),F=k[0],b=k[1],q=k[2],N=k[3],X=k[4],U=k[5],d=ci(e,U);v=X;var A=function(h,T){h?(r(),s(h,null)):(T&&(f[N]=T),--a||s(null,f))};if(!P||P({name:N,size:b,originalSize:q,compression:F}))if(!F)A(null,Ke(e,d,d+b));else if(F==8){var z=e.subarray(d,d+b);if(b<32e4)try{A(null,xt(z,new Z(q)))}catch(h){A(h,null)}else i.push(ui(z,{size:q},A))}else A(J(14,"unknown compression type "+F,1),null);else A(null,null)},C=0;C<c;++C)x(C)}else s(null,{});return r}var di=/^([_\w\d]+)\:\/\//,Nn=5e3;async function yi(e,t,n,i,r=Nn){let{cache:f,loadings:s}=e;if(t in f)return f[t];let o;if(t in s){if(o=s[t],o.active)return s[t].promise}else o=new Lt(r),s[t]=o;let a=[o.promise];return di.test(n)?a.push(zn(e,n,r).then(c=>i(c)).then(c=>Re(e,t,c))):a.push(fetch(n).then(c=>c.arrayBuffer()).then(c=>i(c)).then(c=>Re(e,t,c))),await Promise.race(a)}function Re(e,t,n){let{cache:i,loadings:r}=e;return i[t]=n,t in r&&(r[t].resolve(n),delete r[t]),n}function mi(e,t){let{cache:n,loadings:i}=e;t in i&&(i[t].reject(new Error("Stop loading to delete asset.")),delete i[t]),t in n&&delete n[t]}async function zn(e,t,n=Nn){let{cache:i,loadings:r}=e;if(t in i)return i[t];if(t in r)return r[t].promise;{let f=new Lt(n);return r[t]=f,f.promise}}function Ai(e,t){let{defaults:n}=e;for(let i of n)if(i.glob.test(t))return Tt(e,i.uri);return null}function Tt(e,t){return e.cache[t]}function wi(e){return Object.keys(e.cache)}var Lt=class{constructor(t){this.active=!1,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(t)&&t>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)},t):null,this._promise=new Promise((n,i)=>{this._value?n(this._value):this._resolve=n,this._reason?i(this._reason):this._reject=i})}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}},ge=class{constructor(t,n,i){this.uri=t,this.source=n,this.loader=i,this.store=null}get current(){return Tt(this.store,this.uri)}set current(t){Re(this.store,this.uri,t)}get default(){return Ai(this.store,this.uri)}get loaded(){return zn(this.store,this.uri)}async preload(t,n=void 0,i=void 0){return this.store=t,typeof i!="undefined"?Re(t,this.uri,i):await yi(this.store,this.uri,this.source,this.loader,n),this}async unload(){return mi(this.store,this.uri),this.store=null,this}},_i=5e3,Oe={cache:{},loadings:{},defaults:[]};async function Ei(e,t=void 0){let n="raw://",r=await(await fetch(e)).arrayBuffer();await new Promise((f,s)=>{Ct(new Uint8Array(r),(o,a)=>{if(o)s(o);else{for(let[c,v]of Object.entries(a)){c=c.replaceAll("\\","/");let m=c.indexOf("/");m>=0&&(c=c.substring(m+1));let E=n+c;Re(Oe,E,v),t&&t(v,E,c)}f()}})})}async function Si(e,t){let i=await(await fetch(e)).arrayBuffer();await new Promise((r,f)=>{Ct(new Uint8Array(i),(s,o)=>{if(s)f(s);else{for(let[a,c]of Object.entries(o))a=a.replaceAll("\\","/"),t(c,a);r()}})})}async function Ri(e,t=_i){let n=[];for(let i of e)n.push(i.preload(Oe,t));await Promise.allSettled(n)}function xi(e,t){return Re(Oe,e,t)}function bi(){return wi(Oe)}function Un(e){return Tt(Oe,e)}function Ci(e){return Un(e)}var Ot=Object.freeze({__proto__:null,cache:xi,current:Un,get:Ci,keys:bi,loadAssetPack:Si,loadAssetPackAsRaw:Ei,loadAssetRefs:Ri});var Ht=Symbol("audioContext"),Ze=class{static getAudioContext(){if(Ht in this)return this[Ht];{let t=new AudioContext;return Ti(t),this[Ht]=t,t}}constructor(t,n){this.audioContext=t,this.audioBuffer=n,this._playing=!1,this._started=!1,this._source=null,this.onAudioSourceEnded=this.onAudioSourceEnded.bind(this)}destroy(){this._source&&this._source.disconnect(),this._source=null,this._started=!1,this._playing=!1}onAudioSourceEnded(){this._playing=!1}play(t={}){let n=this.audioBuffer;if(!n)return;this._source&&this.destroy();let{pitch:i=void 0,gain:r=void 0,pan:f=void 0,loop:s=!1}=t,o=this.audioContext,a=o.createBufferSource();a.addEventListener("ended",this.onAudioSourceEnded),a.buffer=n,a.loop=s;let c=a;if(i&&(a.detune.value=i*100),r){let v=o.createGain();v.gain.value=r,c=c.connect(v)}if(f){let v=o.createStereoPanner();v.pan.value=f,c=c.connect(v)}c.connect(o.destination),a.start(),this._source=a,this._started=!0,this._playing=!0}pause(){this._source.stop(),this._playing=!1}isStarted(){return this._started}isPlaying(){return this._playing}isPaused(){return this._started&&!this._playing}};function Ti(e){let t=()=>{e.state==="suspended"&&e.resume()};document.addEventListener("click",t)}async function $t(e,t){if(typeof e=="string"){let s=await(await fetch(e)).arrayBuffer();return $t(s)}else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let n=e,i=new ArrayBuffer(n.byteLength);return new Uint8Array(i).set(n),await t.decodeAudioData(i)}async function Ae(e){let t=Ze.getAudioContext(),n=await $t(e,t);return new Ze(t,n)}var ue={SoundStart:new ge("start","raw://start.wav",Ae),SoundDead:new ge("dead","raw://dead.wav",Ae),SoundPop:new ge("pop","raw://boop.wav",Ae),SoundShoot:new ge("shoot","raw://click.wav",Ae),SoundBoom:new ge("boom","raw://boom.wav",Ae),BackgroundMusic:new ge("music","raw://music.wav",Ae)};async function Bn(){await Ot.loadAssetPackAsRaw("res.pack"),Ot.loadAssetRefs(Object.values(ue))}var Li=[2,4],Oi=[.3,1],Hi=30;function Fn(e,t){let n={x:[],y:[],size:[],speed:[],length:0,width:e,height:t};for(let i=0;i<Hi;++i)n.x.push(y.range(0,e)),n.y.push(y.range(0,t)),n.size.push(y.range(...Li)),n.speed.push(y.range(...Oi)),n.length++;return n}function Gn(e,t,n="white"){for(let i=0;i<t.length;++i){let r=t.x[i],f=t.y[i],s=t.size[i],o=s/2;e.fillStyle=n,e.fillRect(r-o,f-o,s,s)}}function qn(e,t=1,n=0){let{length:i,width:r,height:f}=e;for(let s=0;s<i;++s){let o=t*e.speed[s],a=n*e.speed[s];e.x[s]+=o,e.y[s]+=a,o<0?e.x[s]<0&&(e.x[s]=r,e.y[s]=y.range(0,f)):o>0&&e.x[s]>r&&(e.x[s]=0,e.y[s]=y.range(0,f)),a<0?e.y[s]<0&&(e.x[s]=y.range(0,r),e.y[s]=f):a>0&&e.y[s]>f&&(e.x[s]=y.range(0,r),e.y[s]=0)}}var $i=document.querySelector("#display"),L=$i.canvas,Ii=L.getContext("2d"),It=0,Qe={load:Zi,start:Qi,update:Vi,render:Ji};window.addEventListener("DOMContentLoaded",Pi);function Pi(){Qe.load().then(()=>{Qe.start(),Wn(It=performance.now())})}function Wn(e){requestAnimationFrame(Wn);let t=e-It;It=e,Qe.update(t),Qe.render(Ii)}var le=5,He=4,O=8,jn=[[-O,-O,O*2+L.width,O],[-O,0,O,L.height],[-O,L.height,O*2+L.width,O],[L.width,0,O,L.height]],Ve=[3e3,1e4],Mi=1,ki=100,M=1,we=2,Je=4,Di=2e3,Ni=100,Xn=10,$e=4,Kn=2,Ie=600,Yn=.1,zi=["red","red","red","yellow","orange"],Zn=["blue","blue","blue","dodgerblue","gray","darkgray","yellow"],Ui=["gray","darkgray","lightgray"],Bi="[ wasd_ ]",et=[-2,2],Qn=1.5,Fi=.1,Gi=.4,Pt=.1,Vn=.02,qi=.008,Wi=.1,Jn=.001,ji="gold";var ce=4,Xi=["white","violet","violet"],Ki=30,Yi=.7,Mt=!1;async function Zi(){console.log("Loading..."),await Bn(),console.log("...loading complete!")}function Qi(){this.level=0,this.score=0,this.highScore=Number(localStorage.getItem("highscore")),this.flashScoreDelta=0,this.flashHighScoreDelta=0,this.flashShootDelta=0,this.player={scene:this,x:L.width/2,y:L.height/2,rotation:0,dx:0,dy:0,dr:0,left:0,right:0,up:0,down:0,cooldown:0,powerMode:0,shoot(){if(!(this.scene.bullets.length>Ni)&&!(this.cooldown>0)){if(this.powerMode>0){for(let e=-1;e<=1;++e){let t=this.rotation+e*Math.PI/4,n=er(this.scene,this.x-Math.cos(t)*le,this.y-Math.sin(t)*le,-Math.cos(t)*Je+this.dx,-Math.sin(t)*Je+this.dy);this.scene.bullets.push(n)}--this.powerMode}else{let e=er(this.scene,this.x-Math.cos(this.rotation)*le,this.y-Math.sin(this.rotation)*le,-Math.cos(this.rotation)*Je+this.dx,-Math.sin(this.rotation)*Je+this.dy);this.scene.bullets.push(e)}this.cooldown=Xn,ue.SoundShoot.current.play()}}},this.asteroids=[],this.asteroidSpawner={scene:this,spawnTicks:Ve[1],reset(){this.spawnTicks=Ve[1]},spawn(){if(this.scene.asteroids.length>ki)return;let e=y.choose(jn),t=Pe(this.scene,y.range(e[0],e[0]+e[2]),y.range(e[1],e[1]+e[3]),y.range(-M,M),y.range(-M,M),O);this.scene.asteroids.push(t)},update(e){this.scene.gamePause||(this.spawnTicks-=e,this.spawnTicks<=0&&(this.spawn(),this.spawnTicks=y.range(Ve[0],Ve[1])))}},this.bullets=[],this.particles=[],this.powerUps=[],this.powerUpSpawner={scene:this,reset(){},spawn(){let e=y.choose(jn),t=es(this.scene,y.range(e[0],e[0]+e[2]),y.range(e[1],e[1]+e[3]),y.range(-M,M),y.range(-M,M));this.scene.powerUps.push(t)},update(e){}},this.starfield=Fn(L.width,L.height),this.gamePause=!0,this.showPlayer=!0,this.gameStart=!0,this.gameWait=!0,this.hint=Bi,document.addEventListener("keydown",e=>is.call(this,e.key)),document.addEventListener("keyup",e=>ss.call(this,e.key))}function Vi(e){if(this.gamePause){for(let r of this.particles)r.age+=e,r.age>Ie?r.destroy():(r.x+=r.dx,r.y+=r.dy,xe(r,$e*2,$e*2));return}let t=this.player.right-this.player.left,n=this.player.down-this.player.up,i=this.player.fire;this.player.dx+=n*Math.cos(this.player.rotation)*Vn,this.player.dy+=n*Math.sin(this.player.rotation)*Vn,this.player.dx*=1-Jn,this.player.dy*=1-Jn,this.player.dr+=t*qi,this.player.dr*=1-Wi,this.player.x+=this.player.dx,this.player.y+=this.player.dy,this.player.rotation+=this.player.dr,--this.player.cooldown,xe(this.player,le*2,le*2),i&&(this.player.shoot(),this.flashShootDelta=1),n&&rs(this,this.player.x,this.player.y,-n*Math.cos(this.player.rotation)*Qn,-n*Math.sin(this.player.rotation)*Qn,y.choose.bind(null,Ui));for(let r of this.bullets)r.age+=e,r.age>Di?r.destroy():(r.x+=r.dx,r.y+=r.dy,xe(r,we*2,we*2));for(let r of this.bullets)for(let f of this.asteroids)if(kt(r,f,f.size)){this.flashScore=1,this.score++,this.score>this.highScore&&(this.flashHighScore=this.score-this.highScore,this.highScore=this.score,localStorage.setItem("highscore",this.highScore)),nt(this,f.x,f.y,10,y.choose.bind(null,Zn)),ue.SoundPop.current.play(),r.destroy(),f.breakUp(r.dx*Yn,r.dy*Yn);break}for(let r of this.particles)r.age+=e,r.age>Ie?r.destroy():(r.x+=r.dx,r.y+=r.dy,xe(r,$e*2,$e*2));for(let r of this.asteroids)r.x+=r.dx,r.y+=r.dy,xe(r,r.size*2,r.size*2);for(let r of this.asteroids)if(kt(r,this.player,r.size+le)){nt(this,r.x,r.y,10,y.choose.bind(null,Zn)),r.destroy(),ns(this);break}for(let r of this.powerUps)r.x+=r.dx,r.y+=r.dy,xe(r,ce*2,ce*2);for(let r of this.powerUps)if(kt(r,this.player,ce+le)){nt(this,r.x,r.y,10,y.choose.bind(null,Xi)),r.destroy(),this.player.powerMode+=Ki;break}qn(this.starfield),this.asteroidSpawner.update(e),this.powerUpSpawner.update(e),!this.gamePause&&this.asteroids.length<=0&&(this.gamePause=!0,this.showPlayer=!0,ue.SoundStart.current.play(),setTimeout(()=>this.gameWait=!0,1e3))}function Ji(e){e.fillStyle="black",e.fillRect(0,0,L.width,L.height),Gn(e,this.starfield),e.fillStyle="rgba(255, 255, 255, 0.2)",e.textAlign="center",e.textBaseline="middle",e.font="16px sans-serif",e.fillText(this.hint,L.width/2,L.height/2-32),this.flashScore>0?(e.fillStyle=`rgba(255, 255, 255, ${this.flashScore+.2})`,this.flashScore-=Pt):e.fillStyle="rgba(255, 255, 255, 0.2)",e.font="48px sans-serif",e.fillText("= "+String(this.score).padStart(2,"0")+" =",L.width/2,L.height/2),this.flashHighScore>0?(e.fillStyle=`rgba(255, 255, 255, ${this.flashHighScore+.2})`,this.flashHighScore-=Pt):e.fillStyle="rgba(255, 255, 255, 0.2)",e.font="16px sans-serif",e.fillText(String(this.highScore).padStart(2,"0"),L.width/2,L.height/2+32),e.fillStyle="rgba(255, 255, 255, 0.2)",e.font="24px sans-serif",e.textAlign="right",e.fillText(Math.ceil(this.asteroidSpawner.spawnTicks/1e3),L.width,L.height-12);for(let t of this.asteroids)e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle="slategray",e.fillRect(-t.size,-t.size,t.size*2,t.size*2),e.setTransform(1,0,0,1,0,0),tt(e,t.x,t.y,t.size);for(let t of this.powerUps)e.translate(t.x,t.y),e.rotate(t.rotation),e.beginPath(),e.strokeStyle="violet",e.arc(0,0,ce,0,Math.PI*2),e.moveTo(-ce/2,0),e.lineTo(ce/2,0),e.moveTo(0,-ce/2),e.lineTo(0,ce/2),e.stroke(),e.setTransform(1,0,0,1,0,0),tt(e,t.x,t.y,ce);for(let t of this.bullets)e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle=ji,e.fillRect(-we,-we,we*4,we*2),e.setTransform(1,0,0,1,0,0),tt(e,t.x,t.y,we);for(let t of this.particles){e.translate(t.x,t.y),e.rotate(t.rotation),e.fillStyle=t.color;let n=$e*(1-t.age/Ie);e.fillRect(-n,-n,n*2,n*2),e.setTransform(1,0,0,1,0,0)}if(this.showPlayer){e.translate(this.player.x,this.player.y),e.rotate(this.player.rotation),e.fillStyle="white";let t=le;e.fillRect(-t,-t,t*2,t*2);let n=-1,i=0,r=0;this.flashShootDelta>0?(e.fillStyle=`rgb(${200*this.flashShootDelta+55*Math.sin(performance.now()/(Xn*2))}, 0, 0)`,this.flashShootDelta-=Pt,r=this.flashShootDelta*2,n=this.flashShootDelta):e.fillStyle="black",e.fillRect(-t-r/2+n,-(t/4)-r/2+i,t+r,t/2+r),e.setTransform(1,0,0,1,0,0)}tt(e,this.player.x,this.player.y,le)}function xe(e,t,n){e.x<-t&&(e.x=L.width),e.y<-n&&(e.y=L.height),e.x>L.width+t/2&&(e.x=-t),e.y>L.height+n/2&&(e.y=-n)}function kt(e,t,n){let i=e.x-t.x,r=e.y-t.y;return i*i+r*r<=n*n}function tt(e,t,n,i){!Mt||(e.translate(t,n),e.beginPath(),e.arc(0,0,i,0,Math.PI*2),e.strokeStyle="lime",e.stroke(),e.setTransform(1,0,0,1,0,0))}function es(e,t,n,i,r){return{scene:e,x:t,y:n,dx:i,dy:r,rotation:Math.atan2(r,i),destroy(){this.scene.powerUps.splice(this.scene.powerUps.indexOf(this),1)}}}function Pe(e,t,n,i,r,f){return{scene:e,x:t,y:n,dx:i,dy:r,size:f,rotation:Math.atan2(r,i),breakUp(s=0,o=0){if(this.destroy(),this.size>He){let a=[];a.push(Pe(this.scene,this.x+y.range(-O,O),this.y+y.range(-O,O),y.range(-M,M)+s,y.range(-M,M)+o,He)),a.push(Pe(this.scene,this.x+y.range(-O,O),this.y+y.range(-O,O),y.range(-M,M)+s,y.range(-M,M)+o,He)),a.push(Pe(this.scene,this.x+y.range(-O,O),this.y+y.range(-O,O),y.range(-M,M)+s,y.range(-M,M)+o,He)),a.push(Pe(this.scene,this.x+y.range(-O,O),this.y+y.range(-O,O),y.range(-M,M)+s,y.range(-M,M)+o,He)),this.scene.asteroids.push(...a)}},destroy(){this.scene.asteroids.splice(this.scene.asteroids.indexOf(this),1)}}}function er(e,t,n,i,r){return{scene:e,x:t,y:n,dx:i,dy:r,rotation:Math.atan2(r,i),age:0,destroy(){this.scene.bullets.splice(this.scene.bullets.indexOf(this),1)}}}function tr(e,t,n,i,r,f){return typeof f=="function"&&(f=f.call(null)),{scene:e,x:t,y:n,dx:i,dy:r,rotation:Math.atan2(r,i),age:0,color:f,destroy(){this.scene.particles.splice(this.scene.particles.indexOf(this),1)}}}function ts(e){e.bullets.length=0,e.asteroids.length=0,e.particles.length=0,e.player.x=L.width/2,e.player.y=L.height/2,e.player.dx=0,e.player.dy=0,e.level++,e.gamePause=!1,e.showPlayer=!0;for(let t=0;t<Mi*e.level;++t)e.asteroidSpawner.spawn();y.next()>Yi&&e.powerUpSpawner.spawn(),ue.BackgroundMusic.current.isPlaying()||ue.BackgroundMusic.current.play({loop:!0})}function ns(e){e.gamePause=!0,e.showPlayer=!1,nt(e,e.player.x,e.player.y,100,y.choose.bind(null,zi)),ue.SoundDead.current.play(),ue.SoundBoom.current.play(),setTimeout(()=>e.gameStart=e.gameWait=!0,1e3)}function rs(e,t,n,i,r,f){if(y.next()>.3){let s=tr(e,t+y.range(et[0],et[1]),n+y.range(et[0],et[1]),i,r,f);s.age=y.range(Ie*Fi,Ie*Gi),e.particles.push(s)}}function nt(e,t,n,i=10,r){for(let f=0;f<i;++f)e.particles.push(tr(e,t,n,y.range(-1,1)*Kn,y.range(-1,1)*Kn,r))}function is(e){switch(this.gameWait&&(this.gameStart&&(ue.BackgroundMusic.current.play(),this.score=0,this.flashScore=!0,this.level=0,this.gameStart=!1,this.player.powerMode=0,this.powerUps.length=0,this.asteroidSpawner.reset(),this.powerUpSpawner.reset()),this.gameWait=!1,ts(this)),e){case"w":case"ArrowUp":this.player.up=1;break;case"s":case"ArrowDown":this.player.down=1;break;case"a":case"ArrowLeft":this.player.left=1;break;case"d":case"ArrowRight":this.player.right=1;break;case" ":this.player.fire=1;break;case"\\":break;default:console.log(e)}}function ss(e){switch(e){case"w":case"ArrowUp":this.player.up=0;break;case"s":case"ArrowDown":this.player.down=0;break;case"a":case"ArrowLeft":this.player.left=0;break;case"d":case"ArrowRight":this.player.right=0;break;case" ":this.player.fire=0;break;case"\\":Mt=!Mt;break;default:console.log(e)}}})();
//# sourceMappingURL=main.js.map
