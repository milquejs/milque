(()=>{var _n=Object.create,De=Object.defineProperty;var xn=Object.getOwnPropertyDescriptor;var Rn=Object.getOwnPropertyNames;var Cn=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty;var Ln=t=>De(t,"__esModule",{value:!0});var Nn=(t,e)=>()=>(t&&(e=t(t=0)),e),ve=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Bt=(t,e)=>{for(var r in e)De(t,r,{get:e[r],enumerable:!0})},On=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Rn(e))!Tn.call(t,s)&&s!=="default"&&De(t,s,{get:()=>e[s],enumerable:!(r=xn(e,s))||r.enumerable});return t},In=t=>On(Ln(De(t!=null?_n(Cn(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var lr={};Bt(lr,{basename:()=>ar,default:()=>Bn,delimiter:()=>sr,dirname:()=>ir,extname:()=>or,isAbsolute:()=>pt,join:()=>tr,normalize:()=>ct,relative:()=>rr,resolve:()=>Ue,sep:()=>nr});function er(t,e){for(var r=0,s=t.length-1;s>=0;s--){var n=t[s];n==="."?t.splice(s,1):n===".."?(t.splice(s,1),r++):r&&(t.splice(s,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function Ue(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var s=r>=0?arguments[r]:"/";if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)continue;t=s+"/"+t,e=s.charAt(0)==="/"}return t=er(dt(t.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+t||"."}function ct(t){var e=pt(t),r=Un(t,-1)==="/";return t=er(dt(t.split("/"),function(s){return!!s}),!e).join("/"),!t&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function pt(t){return t.charAt(0)==="/"}function tr(){var t=Array.prototype.slice.call(arguments,0);return ct(dt(t,function(e,r){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function rr(t,e){t=Ue(t).substr(1),e=Ue(e).substr(1);function r(c){for(var d=0;d<c.length&&c[d]==="";d++);for(var y=c.length-1;y>=0&&c[y]==="";y--);return d>y?[]:c.slice(d,y-d+1)}for(var s=r(t.split("/")),n=r(e.split("/")),l=Math.min(s.length,n.length),i=l,o=0;o<l;o++)if(s[o]!==n[o]){i=o;break}for(var a=[],o=i;o<s.length;o++)a.push("..");return a=a.concat(n.slice(i)),a.join("/")}function ir(t){var e=ft(t),r=e[0],s=e[1];return!r&&!s?".":(s&&(s=s.substr(0,s.length-1)),r+s)}function ar(t,e){var r=ft(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r}function or(t){return ft(t)[3]}function dt(t,e){if(t.filter)return t.filter(e);for(var r=[],s=0;s<t.length;s++)e(t[s],s,t)&&r.push(t[s]);return r}var Dn,ft,nr,sr,Bn,Un,ur=Nn(()=>{Dn=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ft=function(t){return Dn.exec(t).slice(1)};nr="/",sr=":";Bn={extname:or,basename:ar,dirname:ir,sep:nr,delimiter:sr,relative:rr,join:tr,isAbsolute:pt,normalize:ct,resolve:Ue};Un="ab".substr(-1)==="b"?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}});var Ge=ve((xi,Fe)=>{var ye=(ur(),lr);if(ye&&ye.default){Fe.exports=ye.default;for(let t in ye)Fe.exports[t]=ye[t]}else ye&&(Fe.exports=ye)});var Te=ve((Ri,dr)=>{"use strict";var Fn=Ge(),oe="\\\\/",hr=`[^${oe}]`,he="\\.",Gn="\\+",qn="\\?",qe="\\/",Wn="(?=.)",fr="[^/]",gt=`(?:${qe}|$)`,cr=`(?:^|${qe})`,vt=`${he}{1,2}${gt}`,jn=`(?!${he})`,Xn=`(?!${cr}${vt})`,Kn=`(?!${he}{0,1}${gt})`,Yn=`(?!${vt})`,Zn=`[^.${qe}]`,Vn=`${fr}*?`,pr={DOT_LITERAL:he,PLUS_LITERAL:Gn,QMARK_LITERAL:qn,SLASH_LITERAL:qe,ONE_CHAR:Wn,QMARK:fr,END_ANCHOR:gt,DOTS_SLASH:vt,NO_DOT:jn,NO_DOTS:Xn,NO_DOT_SLASH:Kn,NO_DOTS_SLASH:Yn,QMARK_NO_DOT:Zn,STAR:Vn,START_ANCHOR:cr},Qn={...pr,SLASH_LITERAL:`[${oe}]`,QMARK:hr,STAR:`${hr}*?`,DOTS_SLASH:`${he}{1,2}(?:[${oe}]|$)`,NO_DOT:`(?!${he})`,NO_DOTS:`(?!(?:^|[${oe}])${he}{1,2}(?:[${oe}]|$))`,NO_DOT_SLASH:`(?!${he}{0,1}(?:[${oe}]|$))`,NO_DOTS_SLASH:`(?!${he}{1,2}(?:[${oe}]|$))`,QMARK_NO_DOT:`[^.${oe}]`,START_ANCHOR:`(?:^|[${oe}])`,END_ANCHOR:`(?:[${oe}]|$)`},Jn={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};dr.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Jn,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Fn.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Qn:pr}}});var We=ve(Q=>{"use strict";var es=Ge(),ts=!1,{REGEX_BACKSLASH:rs,REGEX_REMOVE_BACKSLASH:ns,REGEX_SPECIAL_CHARS:ss,REGEX_SPECIAL_CHARS_GLOBAL:is}=Te();Q.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Q.hasRegexChars=t=>ss.test(t);Q.isRegexChar=t=>t.length===1&&Q.hasRegexChars(t);Q.escapeRegex=t=>t.replace(is,"\\$1");Q.toPosixSlashes=t=>t.replace(rs,"/");Q.removeBackslashes=t=>t.replace(ns,e=>e==="\\"?"":e);Q.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};Q.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:ts===!0||es.sep==="\\";Q.escapeLast=(t,e,r)=>{let s=t.lastIndexOf(e,r);return s===-1?t:t[s-1]==="\\"?Q.escapeLast(t,e,s-1):`${t.slice(0,s)}\\${t.slice(s)}`};Q.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Q.wrapOutput=(t,e={},r={})=>{let s=r.contains?"":"^",n=r.contains?"":"$",l=`${s}(?:${t})${n}`;return e.negated===!0&&(l=`(?:^(?!${l}).*$)`),l}});var Sr=ve((Ti,Er)=>{"use strict";var gr=We(),{CHAR_ASTERISK:yt,CHAR_AT:as,CHAR_BACKWARD_SLASH:Le,CHAR_COMMA:os,CHAR_DOT:mt,CHAR_EXCLAMATION_MARK:wt,CHAR_FORWARD_SLASH:vr,CHAR_LEFT_CURLY_BRACE:At,CHAR_LEFT_PARENTHESES:Et,CHAR_LEFT_SQUARE_BRACKET:ls,CHAR_PLUS:us,CHAR_QUESTION_MARK:yr,CHAR_RIGHT_CURLY_BRACE:hs,CHAR_RIGHT_PARENTHESES:mr,CHAR_RIGHT_SQUARE_BRACKET:fs}=Te(),wr=t=>t===vr||t===Le,Ar=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?Infinity:1)},cs=(t,e)=>{let r=e||{},s=t.length-1,n=r.parts===!0||r.scanToEnd===!0,l=[],i=[],o=[],a=t,c=-1,d=0,y=0,S=!1,L=!1,b=!1,C=!1,I=!1,k=!1,F=!1,R=!1,q=!1,z=!1,X=0,B,v,w={value:"",depth:0,isGlob:!1},D=()=>c>=s,f=()=>a.charCodeAt(c+1),T=()=>(B=v,a.charCodeAt(++c));for(;c<s;){v=T();let W;if(v===Le){F=w.backslashes=!0,v=T(),v===At&&(k=!0);continue}if(k===!0||v===At){for(X++;D()!==!0&&(v=T());){if(v===Le){F=w.backslashes=!0,T();continue}if(v===At){X++;continue}if(k!==!0&&v===mt&&(v=T())===mt){if(S=w.isBrace=!0,b=w.isGlob=!0,z=!0,n===!0)continue;break}if(k!==!0&&v===os){if(S=w.isBrace=!0,b=w.isGlob=!0,z=!0,n===!0)continue;break}if(v===hs&&(X--,X===0)){k=!1,S=w.isBrace=!0,z=!0;break}}if(n===!0)continue;break}if(v===vr){if(l.push(c),i.push(w),w={value:"",depth:0,isGlob:!1},z===!0)continue;if(B===mt&&c===d+1){d+=2;continue}y=c+1;continue}if(r.noext!==!0&&(v===us||v===as||v===yt||v===yr||v===wt)===!0&&f()===Et){if(b=w.isGlob=!0,C=w.isExtglob=!0,z=!0,v===wt&&c===d&&(q=!0),n===!0){for(;D()!==!0&&(v=T());){if(v===Le){F=w.backslashes=!0,v=T();continue}if(v===mr){b=w.isGlob=!0,z=!0;break}}continue}break}if(v===yt){if(B===yt&&(I=w.isGlobstar=!0),b=w.isGlob=!0,z=!0,n===!0)continue;break}if(v===yr){if(b=w.isGlob=!0,z=!0,n===!0)continue;break}if(v===ls){for(;D()!==!0&&(W=T());){if(W===Le){F=w.backslashes=!0,T();continue}if(W===fs){L=w.isBracket=!0,b=w.isGlob=!0,z=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&v===wt&&c===d){R=w.negated=!0,d++;continue}if(r.noparen!==!0&&v===Et){if(b=w.isGlob=!0,n===!0){for(;D()!==!0&&(v=T());){if(v===Et){F=w.backslashes=!0,v=T();continue}if(v===mr){z=!0;break}}continue}break}if(b===!0){if(z=!0,n===!0)continue;break}}r.noext===!0&&(C=!1,b=!1);let x=a,ee="",h="";d>0&&(ee=a.slice(0,d),a=a.slice(d),y-=d),x&&b===!0&&y>0?(x=a.slice(0,y),h=a.slice(y)):b===!0?(x="",h=a):x=a,x&&x!==""&&x!=="/"&&x!==a&&wr(x.charCodeAt(x.length-1))&&(x=x.slice(0,-1)),r.unescape===!0&&(h&&(h=gr.removeBackslashes(h)),x&&F===!0&&(x=gr.removeBackslashes(x)));let u={prefix:ee,input:t,start:d,base:x,glob:h,isBrace:S,isBracket:L,isGlob:b,isExtglob:C,isGlobstar:I,negated:R,negatedExtglob:q};if(r.tokens===!0&&(u.maxDepth=0,wr(v)||i.push(w),u.tokens=i),r.parts===!0||r.tokens===!0){let W;for(let _=0;_<l.length;_++){let V=W?W+1:d,j=l[_],K=t.slice(V,j);r.tokens&&(_===0&&d!==0?(i[_].isPrefix=!0,i[_].value=ee):i[_].value=K,Ar(i[_]),u.maxDepth+=i[_].depth),(_!==0||K!=="")&&o.push(K),W=j}if(W&&W+1<t.length){let _=t.slice(W+1);o.push(_),r.tokens&&(i[i.length-1].value=_,Ar(i[i.length-1]),u.maxDepth+=i[i.length-1].depth)}u.slashes=l,u.parts=o}return u};Er.exports=cs});var xr=ve((Li,_r)=>{"use strict";var je=Te(),te=We(),{MAX_LENGTH:Xe,POSIX_REGEX_SOURCE:ps,REGEX_NON_SPECIAL_CHARS:ds,REGEX_SPECIAL_CHARS_BACKREF:gs,REPLACEMENTS:br}=je,vs=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch(s){return t.map(n=>te.escapeRegex(n)).join("..")}return r},Ee=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,St=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=br[t]||t;let r={...e},s=typeof r.maxLength=="number"?Math.min(Xe,r.maxLength):Xe,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);let l={type:"bos",value:"",output:r.prepend||""},i=[l],o=r.capture?"":"?:",a=te.isWindows(e),c=je.globChars(a),d=je.extglobChars(c),{DOT_LITERAL:y,PLUS_LITERAL:S,SLASH_LITERAL:L,ONE_CHAR:b,DOTS_SLASH:C,NO_DOT:I,NO_DOT_SLASH:k,NO_DOTS_SLASH:F,QMARK:R,QMARK_NO_DOT:q,STAR:z,START_ANCHOR:X}=c,B=g=>`(${o}(?:(?!${X}${g.dot?C:y}).)*?)`,v=r.dot?"":I,w=r.dot?R:q,D=r.bash===!0?B(r):z;r.capture&&(D=`(${D})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let f={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:i};t=te.removePrefix(t,f),n=t.length;let T=[],x=[],ee=[],h=l,u,W=()=>f.index===n-1,_=f.peek=(g=1)=>t[f.index+g],V=f.advance=()=>t[++f.index]||"",j=()=>t.slice(f.index+1),K=(g="",H=0)=>{f.consumed+=g,f.index+=H},ie=g=>{f.output+=g.output!=null?g.output:g.value,K(g.value)},xe=()=>{let g=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)V(),f.start++,g++;return g%2==0?!1:(f.negated=!0,f.start++,!0)},pe=g=>{f[g]++,ee.push(g)},ae=g=>{f[g]--,ee.pop()},A=g=>{if(h.type==="globstar"){let H=f.braces>0&&(g.type==="comma"||g.type==="brace"),p=g.extglob===!0||T.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!H&&!p&&(f.output=f.output.slice(0,-h.output.length),h.type="star",h.value="*",h.output=D,f.output+=h.output)}if(T.length&&g.type!=="paren"&&(T[T.length-1].inner+=g.value),(g.value||g.output)&&ie(g),h&&h.type==="text"&&g.type==="text"){h.value+=g.value,h.output=(h.output||"")+g.value;return}g.prev=h,i.push(g),h=g},ge=(g,H)=>{let p={...d[H],conditions:1,inner:""};p.prev=h,p.parens=f.parens,p.output=f.output;let E=(r.capture?"(":"")+p.open;pe("parens"),A({type:g,value:H,output:f.output?"":b}),A({type:"paren",extglob:!0,value:V(),output:E}),T.push(p)},Me=g=>{let H=g.close+(r.capture?")":""),p;if(g.type==="negate"){let E=D;if(g.inner&&g.inner.length>1&&g.inner.includes("/")&&(E=B(r)),(E!==D||W()||/^\)+$/.test(j()))&&(H=g.close=`)$))${E}`),g.inner.includes("*")&&(p=j())&&/^\.[^\\/.]+$/.test(p)){let M=St(p,{...e,fastpaths:!1}).output;H=g.close=`)${M})${E})`}g.prev.type==="bos"&&(f.negatedExtglob=!0)}A({type:"paren",extglob:!0,value:u,output:H}),ae("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let g=!1,H=t.replace(gs,(p,E,M,Y,G,lt)=>Y==="\\"?(g=!0,p):Y==="?"?E?E+Y+(G?R.repeat(G.length):""):lt===0?w+(G?R.repeat(G.length):""):R.repeat(M.length):Y==="."?y.repeat(M.length):Y==="*"?E?E+Y+(G?D:""):D:E?p:`\\${p}`);return g===!0&&(r.unescape===!0?H=H.replace(/\\/g,""):H=H.replace(/\\+/g,p=>p.length%2==0?"\\\\":p?"\\":"")),H===t&&r.contains===!0?(f.output=t,f):(f.output=te.wrapOutput(H,f,e),f)}for(;!W();){if(u=V(),u==="\0")continue;if(u==="\\"){let p=_();if(p==="/"&&r.bash!==!0||p==="."||p===";")continue;if(!p){u+="\\",A({type:"text",value:u});continue}let E=/^\\+/.exec(j()),M=0;if(E&&E[0].length>2&&(M=E[0].length,f.index+=M,M%2!=0&&(u+="\\")),r.unescape===!0?u=V():u+=V(),f.brackets===0){A({type:"text",value:u});continue}}if(f.brackets>0&&(u!=="]"||h.value==="["||h.value==="[^")){if(r.posix!==!1&&u===":"){let p=h.value.slice(1);if(p.includes("[")&&(h.posix=!0,p.includes(":"))){let E=h.value.lastIndexOf("["),M=h.value.slice(0,E),Y=h.value.slice(E+2),G=ps[Y];if(G){h.value=M+G,f.backtrack=!0,V(),!l.output&&i.indexOf(h)===1&&(l.output=b);continue}}}(u==="["&&_()!==":"||u==="-"&&_()==="]")&&(u=`\\${u}`),u==="]"&&(h.value==="["||h.value==="[^")&&(u=`\\${u}`),r.posix===!0&&u==="!"&&h.value==="["&&(u="^"),h.value+=u,ie({value:u});continue}if(f.quotes===1&&u!=='"'){u=te.escapeRegex(u),h.value+=u,ie({value:u});continue}if(u==='"'){f.quotes=f.quotes===1?0:1,r.keepQuotes===!0&&A({type:"text",value:u});continue}if(u==="("){pe("parens"),A({type:"paren",value:u});continue}if(u===")"){if(f.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Ee("opening","("));let p=T[T.length-1];if(p&&f.parens===p.parens+1){Me(T.pop());continue}A({type:"paren",value:u,output:f.parens?")":"\\)"}),ae("parens");continue}if(u==="["){if(r.nobracket===!0||!j().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Ee("closing","]"));u=`\\${u}`}else pe("brackets");A({type:"bracket",value:u});continue}if(u==="]"){if(r.nobracket===!0||h&&h.type==="bracket"&&h.value.length===1){A({type:"text",value:u,output:`\\${u}`});continue}if(f.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Ee("opening","["));A({type:"text",value:u,output:`\\${u}`});continue}ae("brackets");let p=h.value.slice(1);if(h.posix!==!0&&p[0]==="^"&&!p.includes("/")&&(u=`/${u}`),h.value+=u,ie({value:u}),r.literalBrackets===!1||te.hasRegexChars(p))continue;let E=te.escapeRegex(h.value);if(f.output=f.output.slice(0,-h.value.length),r.literalBrackets===!0){f.output+=E,h.value=E;continue}h.value=`(${o}${E}|${h.value})`,f.output+=h.value;continue}if(u==="{"&&r.nobrace!==!0){pe("braces");let p={type:"brace",value:u,output:"(",outputIndex:f.output.length,tokensIndex:f.tokens.length};x.push(p),A(p);continue}if(u==="}"){let p=x[x.length-1];if(r.nobrace===!0||!p){A({type:"text",value:u,output:u});continue}let E=")";if(p.dots===!0){let M=i.slice(),Y=[];for(let G=M.length-1;G>=0&&(i.pop(),M[G].type!=="brace");G--)M[G].type!=="dots"&&Y.unshift(M[G].value);E=vs(Y,r),f.backtrack=!0}if(p.comma!==!0&&p.dots!==!0){let M=f.output.slice(0,p.outputIndex),Y=f.tokens.slice(p.tokensIndex);p.value=p.output="\\{",u=E="\\}",f.output=M;for(let G of Y)f.output+=G.output||G.value}A({type:"brace",value:u,output:E}),ae("braces"),x.pop();continue}if(u==="|"){T.length>0&&T[T.length-1].conditions++,A({type:"text",value:u});continue}if(u===","){let p=u,E=x[x.length-1];E&&ee[ee.length-1]==="braces"&&(E.comma=!0,p="|"),A({type:"comma",value:u,output:p});continue}if(u==="/"){if(h.type==="dot"&&f.index===f.start+1){f.start=f.index+1,f.consumed="",f.output="",i.pop(),h=l;continue}A({type:"slash",value:u,output:L});continue}if(u==="."){if(f.braces>0&&h.type==="dot"){h.value==="."&&(h.output=y);let p=x[x.length-1];h.type="dots",h.output+=u,h.value+=u,p.dots=!0;continue}if(f.braces+f.parens===0&&h.type!=="bos"&&h.type!=="slash"){A({type:"text",value:u,output:y});continue}A({type:"dot",value:u,output:y});continue}if(u==="?"){if(!(h&&h.value==="(")&&r.noextglob!==!0&&_()==="("&&_(2)!=="?"){ge("qmark",u);continue}if(h&&h.type==="paren"){let E=_(),M=u;if(E==="<"&&!te.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(h.value==="("&&!/[!=<:]/.test(E)||E==="<"&&!/<([!=]|\w+>)/.test(j()))&&(M=`\\${u}`),A({type:"text",value:u,output:M});continue}if(r.dot!==!0&&(h.type==="slash"||h.type==="bos")){A({type:"qmark",value:u,output:q});continue}A({type:"qmark",value:u,output:R});continue}if(u==="!"){if(r.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){ge("negate",u);continue}if(r.nonegate!==!0&&f.index===0){xe();continue}}if(u==="+"){if(r.noextglob!==!0&&_()==="("&&_(2)!=="?"){ge("plus",u);continue}if(h&&h.value==="("||r.regex===!1){A({type:"plus",value:u,output:S});continue}if(h&&(h.type==="bracket"||h.type==="paren"||h.type==="brace")||f.parens>0){A({type:"plus",value:u});continue}A({type:"plus",value:S});continue}if(u==="@"){if(r.noextglob!==!0&&_()==="("&&_(2)!=="?"){A({type:"at",extglob:!0,value:u,output:""});continue}A({type:"text",value:u});continue}if(u!=="*"){(u==="$"||u==="^")&&(u=`\\${u}`);let p=ds.exec(j());p&&(u+=p[0],f.index+=p[0].length),A({type:"text",value:u});continue}if(h&&(h.type==="globstar"||h.star===!0)){h.type="star",h.star=!0,h.value+=u,h.output=D,f.backtrack=!0,f.globstar=!0,K(u);continue}let g=j();if(r.noextglob!==!0&&/^\([^?]/.test(g)){ge("star",u);continue}if(h.type==="star"){if(r.noglobstar===!0){K(u);continue}let p=h.prev,E=p.prev,M=p.type==="slash"||p.type==="bos",Y=E&&(E.type==="star"||E.type==="globstar");if(r.bash===!0&&(!M||g[0]&&g[0]!=="/")){A({type:"star",value:u,output:""});continue}let G=f.braces>0&&(p.type==="comma"||p.type==="brace"),lt=T.length&&(p.type==="pipe"||p.type==="paren");if(!M&&p.type!=="paren"&&!G&&!lt){A({type:"star",value:u,output:""});continue}for(;g.slice(0,3)==="/**";){let ze=t[f.index+4];if(ze&&ze!=="/")break;g=g.slice(3),K("/**",3)}if(p.type==="bos"&&W()){h.type="globstar",h.value+=u,h.output=B(r),f.output=h.output,f.globstar=!0,K(u);continue}if(p.type==="slash"&&p.prev.type!=="bos"&&!Y&&W()){f.output=f.output.slice(0,-(p.output+h.output).length),p.output=`(?:${p.output}`,h.type="globstar",h.output=B(r)+(r.strictSlashes?")":"|$)"),h.value+=u,f.globstar=!0,f.output+=p.output+h.output,K(u);continue}if(p.type==="slash"&&p.prev.type!=="bos"&&g[0]==="/"){let ze=g[1]!==void 0?"|$":"";f.output=f.output.slice(0,-(p.output+h.output).length),p.output=`(?:${p.output}`,h.type="globstar",h.output=`${B(r)}${L}|${L}${ze})`,h.value+=u,f.output+=p.output+h.output,f.globstar=!0,K(u+V()),A({type:"slash",value:"/",output:""});continue}if(p.type==="bos"&&g[0]==="/"){h.type="globstar",h.value+=u,h.output=`(?:^|${L}|${B(r)}${L})`,f.output=h.output,f.globstar=!0,K(u+V()),A({type:"slash",value:"/",output:""});continue}f.output=f.output.slice(0,-h.output.length),h.type="globstar",h.output=B(r),h.value+=u,f.output+=h.output,f.globstar=!0,K(u);continue}let H={type:"star",value:u,output:D};if(r.bash===!0){H.output=".*?",(h.type==="bos"||h.type==="slash")&&(H.output=v+H.output),A(H);continue}if(h&&(h.type==="bracket"||h.type==="paren")&&r.regex===!0){H.output=u,A(H);continue}(f.index===f.start||h.type==="slash"||h.type==="dot")&&(h.type==="dot"?(f.output+=k,h.output+=k):r.dot===!0?(f.output+=F,h.output+=F):(f.output+=v,h.output+=v),_()!=="*"&&(f.output+=b,h.output+=b)),A(H)}for(;f.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ee("closing","]"));f.output=te.escapeLast(f.output,"["),ae("brackets")}for(;f.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ee("closing",")"));f.output=te.escapeLast(f.output,"("),ae("parens")}for(;f.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ee("closing","}"));f.output=te.escapeLast(f.output,"{"),ae("braces")}if(r.strictSlashes!==!0&&(h.type==="star"||h.type==="bracket")&&A({type:"maybe_slash",value:"",output:`${L}?`}),f.backtrack===!0){f.output="";for(let g of f.tokens)f.output+=g.output!=null?g.output:g.value,g.suffix&&(f.output+=g.suffix)}return f};St.fastpaths=(t,e)=>{let r={...e},s=typeof r.maxLength=="number"?Math.min(Xe,r.maxLength):Xe,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);t=br[t]||t;let l=te.isWindows(e),{DOT_LITERAL:i,SLASH_LITERAL:o,ONE_CHAR:a,DOTS_SLASH:c,NO_DOT:d,NO_DOTS:y,NO_DOTS_SLASH:S,STAR:L,START_ANCHOR:b}=je.globChars(l),C=r.dot?y:d,I=r.dot?S:d,k=r.capture?"":"?:",F={negated:!1,prefix:""},R=r.bash===!0?".*?":L;r.capture&&(R=`(${R})`);let q=v=>v.noglobstar===!0?R:`(${k}(?:(?!${b}${v.dot?c:i}).)*?)`,z=v=>{switch(v){case"*":return`${C}${a}${R}`;case".*":return`${i}${a}${R}`;case"*.*":return`${C}${R}${i}${a}${R}`;case"*/*":return`${C}${R}${o}${a}${I}${R}`;case"**":return C+q(r);case"**/*":return`(?:${C}${q(r)}${o})?${I}${a}${R}`;case"**/*.*":return`(?:${C}${q(r)}${o})?${I}${R}${i}${a}${R}`;case"**/.*":return`(?:${C}${q(r)}${o})?${i}${a}${R}`;default:{let w=/^(.*?)\.(\w+)$/.exec(v);if(!w)return;let D=z(w[1]);return D?D+i+w[2]:void 0}}},X=te.removePrefix(t,F),B=z(X);return B&&r.strictSlashes!==!0&&(B+=`${o}?`),B};_r.exports=St});var Cr=ve((Ni,Rr)=>{"use strict";var ys=Ge(),ms=Sr(),bt=xr(),_t=We(),ws=Te(),As=t=>t&&typeof t=="object"&&!Array.isArray(t),U=(t,e,r=!1)=>{if(Array.isArray(t)){let d=t.map(S=>U(S,e,r));return S=>{for(let L of d){let b=L(S);if(b)return b}return!1}}let s=As(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},l=_t.isWindows(e),i=s?U.compileRe(t,e):U.makeRe(t,e,!1,!0),o=i.state;delete i.state;let a=()=>!1;if(n.ignore){let d={...e,ignore:null,onMatch:null,onResult:null};a=U(n.ignore,d,r)}let c=(d,y=!1)=>{let{isMatch:S,match:L,output:b}=U.test(d,i,e,{glob:t,posix:l}),C={glob:t,state:o,regex:i,posix:l,input:d,output:b,match:L,isMatch:S};return typeof n.onResult=="function"&&n.onResult(C),S===!1?(C.isMatch=!1,y?C:!1):a(d)?(typeof n.onIgnore=="function"&&n.onIgnore(C),C.isMatch=!1,y?C:!1):(typeof n.onMatch=="function"&&n.onMatch(C),y?C:!0)};return r&&(c.state=o),c};U.test=(t,e,r,{glob:s,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let l=r||{},i=l.format||(n?_t.toPosixSlashes:null),o=t===s,a=o&&i?i(t):t;return o===!1&&(a=i?i(t):t,o=a===s),(o===!1||l.capture===!0)&&(l.matchBase===!0||l.basename===!0?o=U.matchBase(t,e,r,n):o=e.exec(a)),{isMatch:Boolean(o),match:o,output:a}};U.matchBase=(t,e,r,s=_t.isWindows(r))=>(e instanceof RegExp?e:U.makeRe(e,r)).test(ys.basename(t));U.isMatch=(t,e,r)=>U(e,r)(t);U.parse=(t,e)=>Array.isArray(t)?t.map(r=>U.parse(r,e)):bt(t,{...e,fastpaths:!1});U.scan=(t,e)=>ms(t,e);U.compileRe=(t,e,r=!1,s=!1)=>{if(r===!0)return t.output;let n=e||{},l=n.contains?"":"^",i=n.contains?"":"$",o=`${l}(?:${t.output})${i}`;t&&t.negated===!0&&(o=`^(?!${o}).*$`);let a=U.toRegex(o,e);return s===!0&&(a.state=t),a};U.makeRe=(t,e={},r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=bt.fastpaths(t,e)),n.output||(n=bt(t,e)),U.compileRe(n,e,r,s)};U.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};U.constants=ws;Rr.exports=U});var Lr=ve((Oi,Tr)=>{"use strict";Tr.exports=Cr()});var Hn=`
<div class="container">
  <label class="hidden" id="title">display-port</label>
  <label class="hidden" id="fps">00</label>
  <label class="hidden" id="dimension">0x0</label>
  <div class="content">
    <slot id="inner">
      <canvas>
        Oh no! Your browser does not support canvas.
      </canvas>
    </slot>
    <slot name="overlay"></slot>
  </div>
  <slot name="frame"></slot>
</div>`,$n=`
:host {
  display: inline-block;
  color: #555555;
}

.container {
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
}

.content {
  position: relative;
  margin: auto;
  overflow: hidden;
}

.content > *:not(canvas) {
  width: 100%;
  height: 100%;
}

canvas {
  background: #000000;
  image-rendering: pixelated;
}

label {
  position: absolute;
  font-family: monospace;
  color: currentColor;
}

#inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

#title {
  left: 0.5rem;
  top: 0.5rem;
}

#fps {
  right: 0.5rem;
  top: 0.5rem;
}

#dimension {
  left: 0.5rem;
  bottom: 0.5rem;
}

.hidden {
  display: none;
}

:host([debug]) .container {
  outline: 6px dashed rgba(0, 0, 0, 0.1);
  outline-offset: -4px;
  background-color: rgba(0, 0, 0, 0.1);
}

:host([mode='noscale']) canvas {
  margin: 0;
  top: 0;
  left: 0;
}

:host([mode='stretch']) canvas,
:host([mode='scale']) canvas {
  width: 100%;
  height: 100%;
}

:host([mode='fit']),
:host([mode='scale']),
:host([mode='center']),
:host([mode='stretch']),
:host([mode='fill']) {
  width: 100%;
  height: 100%;
}

:host([full]) {
  width: 100vw !important;
  height: 100vh !important;
}

:host([disabled]) {
  display: none;
}

slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

::slotted(*) {
  pointer-events: auto;
}`,Ut="noscale";var ut="fit",Ft="scale",Gt="fill",qt="stretch",Wt=300,jt=150,Xt=ut,Pn=200,Re=class extends HTMLElement{static create(e={}){let{root:r=document.body,id:s=void 0,mode:n=Xt,width:l=Wt,height:i=jt,debug:o=!1}=e||{},a=new Re;return a.id=s,a.mode=n,a.width=l,a.height=i,a.debug=o,r.appendChild(a),a}static define(e=window.customElements){e.define("display-port",this)}static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=Hn,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=$n,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(e){this.setAttribute("mode",e)}get debug(){return this._debug}set debug(e){this.toggleAttribute("debug",e)}get disabled(){return this._disabled}set disabled(e){this.toggleAttribute("disabled",e)}get width(){return this._width}set width(e){this.setAttribute("width",String(e))}get height(){return this._height}set height(e){this.setAttribute("height",String(e))}get onframe(){return this._onframe}set onframe(e){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=e,this._onframe&&this.addEventListener("frame",e)}constructor(){super();let e=this.attachShadow({mode:"open"});e.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),e.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=null,this._contentElement=e.querySelector(".content"),this._innerElement=e.querySelector("#inner"),this._titleElement=e.querySelector("#title"),this._fpsElement=e.querySelector("#fps"),this._dimensionElement=e.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=Wt,this._height=jt,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this._frameEvent=new CustomEvent("frame",{composed:!0,bubbles:!1,detail:{now:0,prevTime:0,deltaTime:0,canvas:this._canvasElement}}),this._resizeEvent=new CustomEvent("resize",{composed:!0,bubbles:!1,detail:{width:0,height:0}}),this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this),this.onSlotChange=this.onSlotChange.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){Ae(this,"mode"),Ae(this,"debug"),Ae(this,"disabled"),Ae(this,"width"),Ae(this,"height"),Ae(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",Xt),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this._innerElement.addEventListener("slotchange",this.onSlotChange),this._canvasElement=this._innerElement.querySelector("canvas"),this._canvasElement&&(this.updateCanvasSize(!0),this.resume())}disconnectedCallback(){this._innerElement.removeEventListener("slotchange",this.onSlotChange),this.pause()}attributeChangedCallback(e,r,s){switch(e){case"debug":this._debug=s!==null;break;case"disabled":this._disabled=s!==null;break;case"width":this._width=Number(s);break;case"height":this._height=Number(s);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+s+"}}").bind(this);break}switch(e){case"disabled":s?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",s),this._fpsElement.classList.toggle("hidden",s),this._dimensionElement.classList.toggle("hidden",s);break}}onSlotChange(e){let n=e.target.assignedElements({flatten:!0}).find(l=>l instanceof HTMLCanvasElement);if(!n)throw new Error("No valid canvas element found for display.");this._canvasElement=n,this.updateCanvasSize(!0),this.resume()}getContext(e="2d",r=void 0){return this._canvasElement.getContext(e,r)}pause(){window.cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=window.requestAnimationFrame(this.update)}update(e){this._animationRequestHandle=window.requestAnimationFrame(this.update),this.updateCanvasSize(!1);let r=e-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=e,this._debug){let l=r<=0?"--":String(Math.round(1e3/r)).padStart(2,"0");if(this._fpsElement.textContent!==l&&(this._fpsElement.textContent=l),this.mode===Ut){let o=`${this._width}x${this._height}`;this._dimensionElement.textContent!==o&&(this._dimensionElement.textContent=o)}else{let o=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==o&&(this._dimensionElement.textContent=o)}}let n=this._frameEvent.detail;n.now=e,n.prevTime=this._prevAnimationFrameTime,n.deltaTime=r,this.dispatchEvent(this._frameEvent)}onDelayCanvasResize(){this._resizeTimeoutHandle=null,this.updateCanvasSize(!0)}delayCanvasResize(e,r){(e!==this._resizeCanvasWidth||r!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=e,this._resizeCanvasHeight=r,this._resizeTimeoutHandle&&window.clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=window.setTimeout(this.onDelayCanvasResize,Pn))}updateCanvasSize(e=!0){let r=this.shadowRoot.host.getBoundingClientRect(),s=r.width,n=r.height,l=this._canvasElement,i=this._width,o=this._height,a=this.mode;if(a===qt||a===Gt)i=s,o=n;else if(a!==Ut&&(s<i||n<o||a===ut||a==Ft)){let d=s/i,y=n/o;d<y?(i=s,o=o*d):(i=i*y,o=n)}if(i=Math.floor(i),o=Math.floor(o),typeof e=="undefined"&&(e=l.clientWidth!==i||l.clientHeight!==o),!e){this.delayCanvasResize(i,o);return}let c=Math.min(i/this._width,o/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${c}em`,e){a===Ft?(l.width=this._width,l.height=this._height):a!==qt&&(l.width=i,l.height=o);let d=this._contentElement.style;d.width=`${i}px`,d.height=`${o}px`,(a===ut||a===Gt)&&(this._width=i,this._height=o);let S=this._resizeEvent.detail;S.width=i,S.height=o,this.dispatchEvent(this._resizeEvent)}}};function Ae(t,e){if(Object.prototype.hasOwnProperty.call(t,e)){let r=t[e];delete t[e],t[e]=r}}var kn=`<div class="container">
  <div class="padding"></div>
  <div class="innerContainer">
    <div class="padding"></div>
    <slot><canvas>Oh no! Your browser does not support canvas.</canvas></slot>
    <div class="padding"></div>
  </div>
  <div class="padding"></div>
</div>`,Mn=`
:host {
  display: inline-block;
  flex: 1;
  --width: 300px;
  --height: 150px;
}
:host([scaling="noscale"]) {
  width: var(--width);
  height: var(--height);
}
:host([sizing="viewport"]) {
    position: fixed;
    top: 0;
    left: 0;
}
.container {
  position: relative;
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.innerContainer {
  display: flex;
  flex-direction: column;
}
.padding {
  flex: 1;
}`,Kt="scale",zn="conatiner",Yt=300,Zt=150,Be=class extends HTMLElement{static create(e={}){let{root:r=document.body,id:s=void 0,scaling:n=Kt,sizing:l=zn,width:i=Yt,height:o=Zt}=e||{};window.customElements.get("flex-canvas")||window.customElements.define("flex-canvas",Be);let a=new Be;return a.id=s,a.scaling=n,a.sizing=l,a.width=i,a.height=o,r.appendChild(a),a}static define(e=window.customElements){e.define("flex-canvas",this)}static get[Symbol.for("templateNode")](){let e=document.createElement("template");return e.innerHTML=kn,Object.defineProperty(this,Symbol.for("templateNode"),{value:e}),e}static get[Symbol.for("styleNode")](){let e=document.createElement("style");return e.innerHTML=Mn,Object.defineProperty(this,Symbol.for("styleNode"),{value:e}),e}static get observedAttributes(){return["sizing","width","height","resize-delay"]}get scaling(){return this.getAttribute("scaling")}set scaling(e){this.setAttribute("scaling",e)}get sizing(){return this._sizing}set sizing(e){this.setAttribute("sizing",String(e))}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this.setAttribute("resize-delay",String(e))}get width(){return this._width}set width(e){this.setAttribute("width",String(e))}get height(){return this._height}set height(e){this.setAttribute("height",String(e))}get canvas(){return this.canvasElement}constructor(){super();let e=this.attachShadow({mode:"open"});e.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),e.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._sizing="none",this._width=Yt,this._height=Zt,this._resizeDelay=0,this.animationFrameHandle=0,this.resizeTimeoutHandle=0,this.resizeCanvasWidth=0,this.resizeCanvasHeight=0,this.canvasSlotElement=e.querySelector("slot"),this.canvasElement=null,this.onResize=this.onResize.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onSlotChange=this.onSlotChange.bind(this)}connectedCallback(){Ce(this,"scaling"),Ce(this,"sizing"),Ce(this,"width"),Ce(this,"height"),Ce(this,"resize-delay"),this.hasAttribute("scaling")||this.setAttribute("scaling",Kt),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.canvasSlotElement.addEventListener("slotchange",this.onSlotChange),this.canvasElement||this.setCanvasElement(this.canvasSlotElement.querySelector("canvas"))}disconnectedCallback(){cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=null,this.canvasSlotElement.removeEventListener("slotchange",this.onSlotChange)}attributeChangedCallback(e,r,s){switch(e){case"sizing":switch(this._sizing=String(s),this._sizing){case"none":this.style.removeProperty("width"),this.style.removeProperty("height");break;case"container":this.style.setProperty("width","100%"),this.style.setProperty("height","100%");break;case"viewport":this.style.setProperty("width","100vw"),this.style.setProperty("height","100vh");break;default:let[n,l]=this._sizing.split(" ");n&&l&&(this.style.setProperty("width",n),this.style.setProperty("height",l));break}break;case"width":this._width=Number(s),this.canvasElement&&(this.canvasElement.width=this._width);break;case"height":this._height=Number(s),this.canvasElement&&(this.canvasElement.height=this._height);break;case"resize-delay":this._resizeDelay=Number(s);break}}onAnimationFrame(e){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),!(this.clientWidth===this.resizeCanvasWidth&&this.clientHeight===this.resizeCanvasHeight)&&(this.resizeCanvasWidth=this.clientWidth,this.resizeCanvasHeight=this.clientHeight,this._resizeDelay>0?this.resizeTimeoutHandle||(this.resizeTimeoutHandle=window.setTimeout(this.onResize,this._resizeDelay)):this.onResize())}onResize(){window.clearTimeout(this.resizeTimeoutHandle),this.resizeTimeoutHandle=null;let e=this.canvasElement;if(!e)return;let r=this.scaling,s=this.getBoundingClientRect(),n=s.width,l=s.height,i=this._width,o=this._height,a=n/i,c=l/o;r==="noscale"&&(this.style.setProperty("--width",`${i}px`),this.style.setProperty("--height",`${o}px`)),r==="scale"&&(a<c?(e.style.setProperty("width",`${Math.floor(n)}px`),e.style.setProperty("height",`${Math.floor(o*a)}px`)):(e.style.setProperty("width",`${Math.floor(i*c)}px`),e.style.setProperty("height",`${Math.floor(l)}px`))),r==="stretch"&&(e.style.setProperty("width",`${Math.floor(n)}px`),e.style.setProperty("height",`${Math.floor(l)}px`)),r==="fit"&&(a<c?(i=Math.floor(n),o=Math.floor(o*a),e.style.setProperty("width",`${i}px`),e.style.setProperty("height",`${o}px`)):(i=Math.floor(i*c),o=Math.floor(l),e.style.setProperty("width",`${i}px`),e.style.setProperty("height",`${o}px`)),e.width!==i&&(e.width=i),e.height!==o&&(e.height=o)),r==="fill"&&(a<c?(i=Math.floor(n),o=Math.floor(l),e.style.setProperty("width",`${i}px`),e.style.setProperty("height",`${o}px`)):(i=Math.floor(n),o=Math.floor(l),e.style.setProperty("width",`${i}px`),e.style.setProperty("height",`${o}px`)),e.width!==i&&(e.width=i),e.height!==o&&(e.height=o))}onSlotChange(e){let n=e.target.assignedElements({flatten:!0}).find(l=>l instanceof HTMLCanvasElement);n&&this.setCanvasElement(n)}setCanvasElement(e){e.width=this._width,e.height=this._height,e.style.imageRendering="pixelated",this.canvasElement=e}getContext(e="2d",r=void 0){return this.canvasElement.getContext(e,r)}};function Ce(t,e){if(Object.prototype.hasOwnProperty.call(t,e)){let r=t[e];delete t[e],t[e]=r}}var ht=class{next(){return 0}},Vt=class extends ht{next(){return Math.random()}},Qt=class extends ht{constructor(e){super();this.seed=e,this.a=e}next(){var e=this.a+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}},m=class{static get RAND(){let e=new this;return this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this),Object.defineProperty(this,"RAND",{value:e}),e}constructor(e=void 0){typeof e=="number"?this.generator=new Qt(e):e?this.generator=e:this.generator=new Vt,this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this)}static next(){return this.RAND.next()}next(){return this.generator.next()}static choose(e){return this.RAND.choose(e)}choose(e){return e[Math.floor(this.generator.next()*e.length)]}static range(e,r){return this.RAND.range(e,r)}range(e,r){return(r-e)*this.generator.next()+e}static rangeInt(e,r){return this.RAND.rangeInt(e,r)}rangeInt(e,r){return Math.trunc(this.range(e,r))}static sign(){return this.RAND.sign()}sign(){return this.generator.next()<.5?-1:1}};window.addEventListener("error",Jt,!0);window.addEventListener("unhandledrejection",Jt,!0);function Jt(t){t instanceof PromiseRejectionEvent?window.alert(t.reason.stack):t instanceof ErrorEvent?window.alert(t.error.stack):window.alert(JSON.stringify(t))}var Pt={};Bt(Pt,{BackgroundMusic:()=>tt,SoundBoom:()=>on,SoundDead:()=>nn,SoundPop:()=>sn,SoundShoot:()=>an,SoundStart:()=>rn});var Xr=In(Lr());var Nr={},Es=function(t,e,r,s,n){var l=new Worker(Nr[e]||(Nr[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return l.onmessage=function(i){var o=i.data,a=o.$e$;if(a){var c=new Error(a[0]);c.code=a[1],c.stack=a[2],n(c,null)}else n(null,o)},l.postMessage(r,s),l},Z=Uint8Array,de=Uint16Array,xt=Uint32Array,Rt=new Z([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ct=new Z([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Or=new Z([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ir=function(t,e){for(var r=new de(31),s=0;s<31;++s)r[s]=e+=1<<t[s-1];for(var n=new xt(r[30]),s=1;s<30;++s)for(var l=r[s];l<r[s+1];++l)n[l]=l-r[s]<<5|s;return[r,n]},Hr=Ir(Rt,2),Tt=Hr[0],Ss=Hr[1];Tt[28]=258,Ss[258]=28;var $r=Ir(Ct,0),Pr=$r[0],Ii=$r[1],Ke=new de(32768);for(var $=0;$<32768;++$)fe=($&43690)>>>1|($&21845)<<1,fe=(fe&52428)>>>2|(fe&13107)<<2,fe=(fe&61680)>>>4|(fe&3855)<<4,Ke[$]=((fe&65280)>>>8|(fe&255)<<8)>>>1;var fe,Se=function(t,e,r){for(var s=t.length,n=0,l=new de(e);n<s;++n)t[n]&&++l[t[n]-1];var i=new de(e);for(n=0;n<e;++n)i[n]=i[n-1]+l[n-1]<<1;var o;if(r){o=new de(1<<e);var a=15-e;for(n=0;n<s;++n)if(t[n])for(var c=n<<4|t[n],d=e-t[n],y=i[t[n]-1]++<<d,S=y|(1<<d)-1;y<=S;++y)o[Ke[y]>>>a]=c}else for(o=new de(s),n=0;n<s;++n)t[n]&&(o[n]=Ke[i[t[n]-1]++]>>>15-t[n]);return o},Ne=new Z(288);for(var $=0;$<144;++$)Ne[$]=8;for(var $=144;$<256;++$)Ne[$]=9;for(var $=256;$<280;++$)Ne[$]=7;for(var $=280;$<288;++$)Ne[$]=8;var kr=new Z(32);for(var $=0;$<32;++$)kr[$]=5;var Mr=Se(Ne,9,1);var zr=Se(kr,5,1),Ye=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},re=function(t,e,r){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&r},Ze=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},Dr=function(t){return(t+7)/8|0},Ve=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var s=new(t.BYTES_PER_ELEMENT==2?de:t.BYTES_PER_ELEMENT==4?xt:Z)(r-e);return s.set(t.subarray(e,r)),s};var Br=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],J=function(t,e,r){var s=new Error(e||Br[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,J),!r)throw s;return s},Ur=function(t,e,r){var s=t.length;if(!s||r&&r.f&&!r.l)return e||new Z(0);var n=!e||r,l=!r||r.i;r||(r={}),e||(e=new Z(s*3));var i=function(A){var ge=e.length;if(A>ge){var Me=new Z(Math.max(ge*2,A));Me.set(e),e=Me}},o=r.f||0,a=r.p||0,c=r.b||0,d=r.l,y=r.d,S=r.m,L=r.n,b=s*8;do{if(!d){o=re(t,a,1);var C=re(t,a+1,3);if(a+=3,C)if(C==1)d=Mr,y=zr,S=9,L=5;else if(C==2){var R=re(t,a,31)+257,q=re(t,a+10,15)+4,z=R+re(t,a+5,31)+1;a+=14;for(var X=new Z(z),B=new Z(19),v=0;v<q;++v)B[Or[v]]=re(t,a+v*3,7);a+=q*3;for(var w=Ye(B),D=(1<<w)-1,f=Se(B,w,1),v=0;v<z;){var T=f[re(t,a,D)];a+=T&15;var I=T>>>4;if(I<16)X[v++]=I;else{var x=0,ee=0;for(I==16?(ee=3+re(t,a,3),a+=2,x=X[v-1]):I==17?(ee=3+re(t,a,7),a+=3):I==18&&(ee=11+re(t,a,127),a+=7);ee--;)X[v++]=x}}var h=X.subarray(0,R),u=X.subarray(R);S=Ye(h),L=Ye(u),d=Se(h,S,1),y=Se(u,L,1)}else J(1);else{var I=Dr(a)+4,k=t[I-4]|t[I-3]<<8,F=I+k;if(F>s){l&&J(0);break}n&&i(c+k),e.set(t.subarray(I,F),c),r.b=c+=k,r.p=a=F*8,r.f=o;continue}if(a>b){l&&J(0);break}}n&&i(c+131072);for(var W=(1<<S)-1,_=(1<<L)-1,V=a;;V=a){var x=d[Ze(t,a)&W],j=x>>>4;if(a+=x&15,a>b){l&&J(0);break}if(x||J(2),j<256)e[c++]=j;else if(j==256){V=a,d=null;break}else{var K=j-254;if(j>264){var v=j-257,ie=Rt[v];K=re(t,a,(1<<ie)-1)+Tt[v],a+=ie}var xe=y[Ze(t,a)&_],pe=xe>>>4;xe||J(3),a+=xe&15;var u=Pr[pe];if(pe>3){var ie=Ct[pe];u+=Ze(t,a)&(1<<ie)-1,a+=ie}if(a>b){l&&J(0);break}n&&i(c+131072);for(var ae=c+K;c<ae;c+=4)e[c]=e[c-u],e[c+1]=e[c+1-u],e[c+2]=e[c+2-u],e[c+3]=e[c+3-u];c=ae}}r.l=d,r.p=V,r.b=c,r.f=o,d&&(o=1,r.m=S,r.d=y,r.n=L)}while(!o);return c==e.length?e:Ve(e,0,c)};var bs=new Z(0);var _s=function(t,e){var r={};for(var s in t)r[s]=t[s];for(var s in e)r[s]=e[s];return r},Fr=function(t,e,r){for(var s=t(),n=t.toString(),l=n.slice(n.indexOf("[")+1,n.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<s.length;++i){var o=s[i],a=l[i];if(typeof o=="function"){e+=";"+a+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var d=c.indexOf(" ",8)+1;e+=c.slice(d,c.indexOf("(",d))}else{e+=c;for(var y in o.prototype)e+=";"+a+".prototype."+y+"="+o.prototype[y].toString()}else e+=c}else r[a]=o}return[e,r]},Qe=[],xs=function(t){var e=[];for(var r in t)t[r].buffer&&e.push((t[r]=new t[r].constructor(t[r])).buffer);return e},Rs=function(t,e,r,s){var n;if(!Qe[r]){for(var l="",i={},o=t.length-1,a=0;a<o;++a)n=Fr(t[a],l,i),l=n[0],i=n[1];Qe[r]=Fr(t[o],l,i)}var c=_s({},Qe[r][1]);return Es(Qe[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",r,c,xs(c),s)},Cs=function(){return[Z,de,xt,Rt,Ct,Or,Tt,Pr,Mr,zr,Ke,Br,Se,Ye,re,Ze,Dr,Ve,J,Ur,Nt,Gr,qr]};var Gr=function(t){return postMessage(t,[t.buffer])},qr=function(t){return t&&t.size&&new Z(t.size)},Ts=function(t,e,r,s,n,l){var i=Rs(r,s,n,function(o,a){i.terminate(),l(o,a)});return i.postMessage([t,e],e.consume?[t.buffer]:[]),function(){i.terminate()}};var le=function(t,e){return t[e]|t[e+1]<<8},ne=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Lt=function(t,e){return ne(t,e)+ne(t,e+4)*4294967296};function Ls(t,e,r){return r||(r=e,e={}),typeof r!="function"&&J(7),Ts(t,e,[Cs],function(s){return Gr(Nt(s.data[0],qr(s.data[1])))},1,r)}function Nt(t,e){return Ur(t,e)}var Hi=typeof TextEncoder!="undefined"&&new TextEncoder,Ot=typeof TextDecoder!="undefined"&&new TextDecoder,Ns=0;try{Ot.decode(bs,{stream:!0}),Ns=1}catch(t){}var Os=function(t){for(var e="",r=0;;){var s=t[r++],n=(s>127)+(s>223)+(s>239);if(r+n>t.length)return[e,Ve(t,r-1)];n?n==3?(s=((s&15)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,e+=String.fromCharCode(55296|s>>10,56320|s&1023)):n&1?e+=String.fromCharCode((s&31)<<6|t[r++]&63):e+=String.fromCharCode((s&15)<<12|(t[r++]&63)<<6|t[r++]&63):e+=String.fromCharCode(s)}};function Is(t,e){if(e){for(var r="",s=0;s<t.length;s+=16384)r+=String.fromCharCode.apply(null,t.subarray(s,s+16384));return r}else{if(Ot)return Ot.decode(t);var n=Os(t),l=n[0],i=n[1];return i.length&&J(8),l}}var Hs=function(t,e){return e+30+le(t,e+26)+le(t,e+28)},$s=function(t,e,r){var s=le(t,e+28),n=Is(t.subarray(e+46,e+46+s),!(le(t,e+8)&2048)),l=e+46+s,i=ne(t,e+20),o=r&&i==4294967295?Ps(t,l):[i,ne(t,e+24),ne(t,e+42)],a=o[0],c=o[1],d=o[2];return[le(t,e+10),a,c,n,l+le(t,e+30)+le(t,e+32),d]},Ps=function(t,e){for(;le(t,e)!=1;e+=4+le(t,e+2));return[Lt(t,e+12),Lt(t,e+4),Lt(t,e+20)]};var Wr=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(t){t()};function jr(t,e,r){r||(r=e,e={}),typeof r!="function"&&J(7);var s=[],n=function(){for(var I=0;I<s.length;++I)s[I]()},l={},i=function(I,k){Wr(function(){r(I,k)})};Wr(function(){i=r});for(var o=t.length-22;ne(t,o)!=101010256;--o)if(!o||t.length-o>65558)return i(J(13,0,1),null),n;var a=le(t,o+8);if(a){var c=a,d=ne(t,o+16),y=d==4294967295||c==65535;if(y){var S=ne(t,o-12);y=ne(t,S)==101075792,y&&(c=a=ne(t,S+32),d=ne(t,S+48))}for(var L=e&&e.filter,b=function(I){var k=$s(t,d,y),F=k[0],R=k[1],q=k[2],z=k[3],X=k[4],B=k[5],v=Hs(t,B);d=X;var w=function(f,T){f?(n(),i(f,null)):(T&&(l[z]=T),--a||i(null,l))};if(!L||L({name:z,size:R,originalSize:q,compression:F}))if(!F)w(null,Ve(t,v,v+R));else if(F==8){var D=t.subarray(v,v+R);if(R<32e4)try{w(null,Nt(D,new Z(q)))}catch(f){w(f,null)}else s.push(Ls(D,{size:q},w))}else w(J(14,"unknown compression type "+F,1),null);else w(null,null)},C=0;C<c;++C)b(C)}else i(null,{});return n}var Oe=class{constructor(e){let r;typeof e=="object"&&e instanceof Oe?r=e.source:r=String(e),this.source=r,this._re=(0,Xr.makeRe)(r)}test(e){return this._re.test(e)}},ks=/^([_\w\d]+)\:\/\//;async function Kr(t,e,r,s,n,l){let{loadings:i}=t,o;e in i?o=i[e]:(o=new be(l),i[e]=o);let a=be.nextAttempt(o),c=[o.promise];return ks.test(r)?c.push(Yr(t,r,l).then(d=>s(d,n)).then(d=>be.isCurrentAttempt(o,a)?Ie(t,e,d):void 0)):c.push(s(r).then(d=>be.isCurrentAttempt(o,a)?Ie(t,e,d):void 0)),await Promise.race(c)}function Ie(t,e,r){let{store:s,loadings:n}=t;return s[e]=r,e in n&&(n[e].resolve(r),delete n[e]),r}function Ms(t,e,r){let{defaults:s}=t;typeof e=="string"&&(e=new Oe(e));let n=`__default://[${s.length}]`;return Ie(t,n,r),s.push(new Qr(e,n)),r}function zs(t,e){let{store:r,loadings:s}=t;e in s&&(s[e].reject(new Error("Stop loading to delete asset.")),delete s[e]),e in r&&delete r[e]}function Ds(t,e){typeof e=="string"&&(e=new Oe(e));let{store:r,loadings:s}=t;for(let[n,l]of Object.entries(s))e.test(n)&&(l.reject(new Error(`Stop loading to clear assets matching ${e}`)),delete s[n]);for(let n of Object.keys(r))e.test(n)&&delete r[n]}function Bs(t){let{store:e,loadings:r,defaults:s}=t;for(let[n,l]of Object.entries(r))l.reject(new Error("Stop loading to clear all assets.")),delete r[n];for(let n of Object.keys(e))delete e[n];s.length=0}function Us(t,e){let{loadings:r}=t;return e in r?r[e].promise:null}async function Yr(t,e,r){let{store:s,loadings:n}=t;if(e in s)return s[e];if(e in n)return n[e].promise;{let l=new be(r);return n[e]=l,l.promise}}function Fs(t,e){let{defaults:r}=t;for(let s of r)if(s.glob.test(e))return Je(t,s.uri);return null}function Je(t,e){return t.store[e]}function Gs(t,e){return Boolean(t.store[e])}function qs(t){return Object.keys(t.store)}function Zr(t,e){return e in t.store}function Vr(t,e){return e in t.loadings}var Qr=class{constructor(e,r){this.glob=e,this.uri=r}},be=class{static nextAttempt(e){return++e._promiseHandle}static isCurrentAttempt(e,r){return e._promiseHandle===r}constructor(e){this._promiseHandle=0,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(e)&&e>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${e} ms.`)},e):null,this._promise=new Promise((r,s)=>{this._value?r(this._value):this._resolve=r,this._reason?s(this._reason):this._reject=s})}get promise(){return this._promise}resolve(e){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(e):this._value=e}reject(e){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(e):this._reason=e}},It=class{constructor(e=null){this.parent=e,this.store={},this.loadings={},this.defaults=[]}get(e){let r=this;if(Zr(r,e))return Je(r,e);let s=Fs(r,e);return s||null}async resolve(e,r,s,n,l){return this.get(e)||await this.load(e,r,s,n,l)}fallback(e,r){return Ms(this,e,r)}cache(e,r){return Ie(this,e,r)}async load(e,r,s,n,l){let i=this;return Zr(i,e)?Je(i,e):Vr(i,e)?await Yr(i,e,l):await Kr(i,e,r,s,n,l)}async reload(e,r,s,n,l){return await Kr(this,e,r,s,n,l)}unload(e){zs(this,e)}clear(e){Ds(this,e)}current(e){return Je(this,e)}exists(e){return Gs(this,e)}loading(e){let r=this;return Vr(r,e)?Us(r,e):null}keys(){return qs(this)}reset(){Bs(this)}},Jr=5e3,se=class{constructor(e,r,s=void 0,n=e,l=null){this.uri=e,this.loader=r,this.opts=s,this.initial=l,this.filepath=n,this.source=null,this.current=null}cache(e,r){return e.cache(this.uri,r),this.source=e,this.current=r,this}get(e){let r;return e.exists(this.uri)?r=e.current(this.uri):this.initial&&this.initial instanceof se?r=this.initial.get(e):r=this.initial,this.source=e,this.current=r,r}async load(e,r=Jr){let s;if(e.exists(this.uri))s=e.current(this.uri);else if(s=await e.load(this.uri,this.filepath,this.loader,this.opts,r),!s)if(this.initial&&this.initial instanceof se){let n=this.initial;s=await e.load(n.uri,n.filepath,n.loader,n.opts,r)}else s=this.initial;return this.source=e,this.current=s,s}async reload(e,r=Jr){let s=await e.reload(this.uri,this.filepath,this.loader,this.opts,r);return this.source=e,this.current=s,s}};async function en(t,e,r=void 0){let s=t,n="raw://",i=await(await fetch(e)).arrayBuffer();await new Promise((o,a)=>{jr(new Uint8Array(i),(c,d)=>{if(c)a(c);else{for(let[y,S]of Object.entries(d)){y=y.replaceAll("\\","/");let L=y.indexOf("/");L>=0&&(y=y.substring(L+1));let b=n+y;Ie(s,b,S),r&&r(S,b,y)}o()}})})}async function tn(t,e,r=5e3){let s=[];for(let n of e)s.push(n.load(t,r));await Promise.allSettled(s)}async function Ht(t,e){let{audioContext:r}=e||{};if(typeof t=="string"){let o=await(await fetch(t)).arrayBuffer();return Ht(o,{audioContext:r})}else if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let s=t,n=new ArrayBuffer(s.byteLength);return new Uint8Array(n).set(s),await r.decodeAudioData(n)}var $t=Symbol("audioContext"),et=class{static getAudioContext(){if($t in this)return this[$t];{let e=new AudioContext;return Ws(e),this[$t]=e,e}}constructor(e,r){this.audioContext=e,this.audioBuffer=r,this._playing=!1,this._started=!1,this._source=null,this.onAudioSourceEnded=this.onAudioSourceEnded.bind(this)}destroy(){this._source&&this._source.disconnect(),this._source=null,this._started=!1,this._playing=!1}onAudioSourceEnded(){this._playing=!1}play(e={}){let r=this.audioBuffer;if(!r)return;this._source&&this.destroy();let{pitch:s=void 0,gain:n=void 0,pan:l=void 0,loop:i=!1}=e,o=this.audioContext,a=o.createBufferSource();a.addEventListener("ended",this.onAudioSourceEnded),a.buffer=r,a.loop=i;let c=a;if(s&&(a.detune.value=s*100),n){let d=o.createGain();d.gain.value=n,c=c.connect(d)}if(l){let d=o.createStereoPanner();d.pan.value=l,c=c.connect(d)}c.connect(o.destination),a.start(),this._source=a,this._started=!0,this._playing=!0}pause(){this._source.stop(),this._playing=!1}isStarted(){return this._started}isPlaying(){return this._playing}isPaused(){return this._started&&!this._playing}};function Ws(t){let e=()=>{t.state==="suspended"&&t.resume()};document.addEventListener("click",e)}async function me(t){let e=et.getAudioContext(),r=await Ht(t,{audioContext:e});return new et(e,r)}var rn=new se("start.wav",me,void 0,"raw://start.wav"),nn=new se("dead.wav",me,void 0,"raw://dead.wav"),sn=new se("pop.wav",me,void 0,"raw://boop.wav"),an=new se("shoot.wav",me,void 0,"raw://click.wav"),on=new se("boom.wav",me,void 0,"raw://boom.wav"),tt=new se("music.wav",me,void 0,"raw://music.wav");var ln=[2,4],un=[.3,1],js=30;function hn(t,e){let r={x:[],y:[],size:[],speed:[],length:0,width:t,height:e};for(let s=0;s<js;++s)r.x.push(m.range(0,t)),r.y.push(m.range(0,e)),r.size.push(m.range(ln[0],ln[1])),r.speed.push(m.range(un[0],un[1])),r.length++;return r}function fn(t,e,r="white"){for(let s=0;s<e.length;++s){let n=e.x[s],l=e.y[s],i=e.size[s],o=i/2;t.fillStyle=r,t.fillRect(n-o,l-o,i,i)}}function cn(t,e=1,r=0){let{length:s,width:n,height:l}=t;for(let i=0;i<s;++i){let o=e*t.speed[i],a=r*t.speed[i];t.x[i]+=o,t.y[i]+=a,o<0?t.x[i]<0&&(t.x[i]=n,t.y[i]=m.range(0,l)):o>0&&t.x[i]>n&&(t.x[i]=0,t.y[i]=m.range(0,l)),a<0?t.y[i]<0&&(t.x[i]=m.range(0,n),t.y[i]=l):a>0&&t.y[i]>l&&(t.x[i]=m.range(0,n),t.y[i]=0)}}Re.define();var Xs=document.querySelector("#display"),N=Xs.canvas,Ks=N.getContext("2d"),kt=0,rt={load:fi,start:ci,update:pi,render:di};window.addEventListener("DOMContentLoaded",Ys);function Ys(){rt.load().then(()=>{rt.start(),pn(kt=performance.now())})}function pn(t){requestAnimationFrame(pn);let e=t-kt;kt=t,rt.update(e),rt.render(Ks)}var ue=5,He=4,O=8,dn=[[-O,-O,O*2+N.width,O],[-O,0,O,N.height],[-O,N.height,O*2+N.width,O],[N.width,0,O,N.height]],nt=[3e3,1e4],Zs=1,Vs=100,P=1,we=2,st=4,Qs=2e3,Js=100,gn=10,$e=4,vn=2,Pe=600,yn=.1,ei=["red","red","red","yellow","orange"],mn=["blue","blue","blue","dodgerblue","gray","darkgray","yellow"],ti=["gray","darkgray","lightgray"],ri="[ wasd_ ]",it=[-2,2],wn=1.5,ni=.1,si=.4,Mt=.1,An=.02,ii=.008,ai=.1,En=.001,oi="gold";var ce=4,li=["white","violet","violet"],ui=30,hi=.7,zt=!1;async function fi(){console.log("Loading..."),this.assets=new It,await en(this.assets,"res.pack"),await tn(this.assets,Object.values(Pt)),console.log("...loading complete!")}function ci(){this.level=0,this.score=0,this.highScore=Number(localStorage.getItem("highscore")),this.flashScoreDelta=0,this.flashHighScoreDelta=0,this.flashShootDelta=0,this.player={scene:this,x:N.width/2,y:N.height/2,rotation:0,dx:0,dy:0,dr:0,left:0,right:0,up:0,down:0,cooldown:0,powerMode:0,shoot(){if(!(this.scene.bullets.length>Js)&&!(this.cooldown>0)){if(this.powerMode>0){for(let t=-1;t<=1;++t){let e=this.rotation+t*Math.PI/4,r=Sn(this.scene,this.x-Math.cos(e)*ue,this.y-Math.sin(e)*ue,-Math.cos(e)*st+this.dx,-Math.sin(e)*st+this.dy);this.scene.bullets.push(r)}--this.powerMode}else{let t=Sn(this.scene,this.x-Math.cos(this.rotation)*ue,this.y-Math.sin(this.rotation)*ue,-Math.cos(this.rotation)*st+this.dx,-Math.sin(this.rotation)*st+this.dy);this.scene.bullets.push(t)}this.cooldown=gn,an.current.play()}}},this.asteroids=[],this.asteroidSpawner={scene:this,spawnTicks:nt[1],reset(){this.spawnTicks=nt[1]},spawn(){if(this.scene.asteroids.length>Vs)return;let t=m.choose(dn),e=ke(this.scene,m.range(t[0],t[0]+t[2]),m.range(t[1],t[1]+t[3]),m.range(-P,P),m.range(-P,P),O);this.scene.asteroids.push(e)},update(t){this.scene.gamePause||(this.spawnTicks-=t,this.spawnTicks<=0&&(this.spawn(),this.spawnTicks=m.range(nt[0],nt[1])))}},this.bullets=[],this.particles=[],this.powerUps=[],this.powerUpSpawner={scene:this,reset(){},spawn(){let t=m.choose(dn),e=gi(this.scene,m.range(t[0],t[0]+t[2]),m.range(t[1],t[1]+t[3]),m.range(-P,P),m.range(-P,P));this.scene.powerUps.push(e)},update(t){}},this.starfield=hn(N.width,N.height),this.gamePause=!0,this.showPlayer=!0,this.gameStart=!0,this.gameWait=!0,this.hint=ri,document.addEventListener("keydown",t=>wi.call(this,t.key)),document.addEventListener("keyup",t=>Ai.call(this,t.key))}function pi(t){if(this.gamePause){for(let n of this.particles)n.age+=t,n.age>Pe?n.destroy():(n.x+=n.dx,n.y+=n.dy,_e(n,$e*2,$e*2));return}let e=this.player.right-this.player.left,r=this.player.down-this.player.up,s=this.player.fire;this.player.dx+=r*Math.cos(this.player.rotation)*An,this.player.dy+=r*Math.sin(this.player.rotation)*An,this.player.dx*=1-En,this.player.dy*=1-En,this.player.dr+=e*ii,this.player.dr*=1-ai,this.player.x+=this.player.dx,this.player.y+=this.player.dy,this.player.rotation+=this.player.dr,--this.player.cooldown,_e(this.player,ue*2,ue*2),s&&(this.player.shoot(),this.flashShootDelta=1),r&&mi(this,this.player.x,this.player.y,-r*Math.cos(this.player.rotation)*wn,-r*Math.sin(this.player.rotation)*wn,m.choose.bind(null,ti));for(let n of this.bullets)n.age+=t,n.age>Qs?n.destroy():(n.x+=n.dx,n.y+=n.dy,_e(n,we*2,we*2));for(let n of this.bullets)for(let l of this.asteroids)if(Dt(n,l,l.size)){this.flashScore=1,this.score++,this.score>this.highScore&&(this.flashHighScore=this.score-this.highScore,this.highScore=this.score,localStorage.setItem("highscore",this.highScore)),ot(this,l.x,l.y,10,m.choose.bind(null,mn)),sn.current.play(),n.destroy(),l.breakUp(n.dx*yn,n.dy*yn);break}for(let n of this.particles)n.age+=t,n.age>Pe?n.destroy():(n.x+=n.dx,n.y+=n.dy,_e(n,$e*2,$e*2));for(let n of this.asteroids)n.x+=n.dx,n.y+=n.dy,_e(n,n.size*2,n.size*2);for(let n of this.asteroids)if(Dt(n,this.player,n.size+ue)){ot(this,n.x,n.y,10,m.choose.bind(null,mn)),n.destroy(),yi(this);break}for(let n of this.powerUps)n.x+=n.dx,n.y+=n.dy,_e(n,ce*2,ce*2);for(let n of this.powerUps)if(Dt(n,this.player,ce+ue)){ot(this,n.x,n.y,10,m.choose.bind(null,li)),n.destroy(),this.player.powerMode+=ui;break}cn(this.starfield),this.asteroidSpawner.update(t),this.powerUpSpawner.update(t),!this.gamePause&&this.asteroids.length<=0&&(this.gamePause=!0,this.showPlayer=!0,rn.current.play(),setTimeout(()=>this.gameWait=!0,1e3))}function di(t){t.fillStyle="black",t.fillRect(0,0,N.width,N.height),fn(t,this.starfield),t.fillStyle="rgba(255, 255, 255, 0.2)",t.textAlign="center",t.textBaseline="middle",t.font="16px sans-serif",t.fillText(this.hint,N.width/2,N.height/2-32),this.flashScore>0?(t.fillStyle=`rgba(255, 255, 255, ${this.flashScore+.2})`,this.flashScore-=Mt):t.fillStyle="rgba(255, 255, 255, 0.2)",t.font="48px sans-serif",t.fillText("= "+String(this.score).padStart(2,"0")+" =",N.width/2,N.height/2),this.flashHighScore>0?(t.fillStyle=`rgba(255, 255, 255, ${this.flashHighScore+.2})`,this.flashHighScore-=Mt):t.fillStyle="rgba(255, 255, 255, 0.2)",t.font="16px sans-serif",t.fillText(String(this.highScore).padStart(2,"0"),N.width/2,N.height/2+32),t.fillStyle="rgba(255, 255, 255, 0.2)",t.font="24px sans-serif",t.textAlign="right",t.fillText(Math.ceil(this.asteroidSpawner.spawnTicks/1e3),N.width,N.height-12);for(let e of this.asteroids)t.translate(e.x,e.y),t.rotate(e.rotation),t.fillStyle="slategray",t.fillRect(-e.size,-e.size,e.size*2,e.size*2),t.setTransform(1,0,0,1,0,0),at(t,e.x,e.y,e.size);for(let e of this.powerUps)t.translate(e.x,e.y),t.rotate(e.rotation),t.beginPath(),t.strokeStyle="violet",t.arc(0,0,ce,0,Math.PI*2),t.moveTo(-ce/2,0),t.lineTo(ce/2,0),t.moveTo(0,-ce/2),t.lineTo(0,ce/2),t.stroke(),t.setTransform(1,0,0,1,0,0),at(t,e.x,e.y,ce);for(let e of this.bullets)t.translate(e.x,e.y),t.rotate(e.rotation),t.fillStyle=oi,t.fillRect(-we,-we,we*4,we*2),t.setTransform(1,0,0,1,0,0),at(t,e.x,e.y,we);for(let e of this.particles){t.translate(e.x,e.y),t.rotate(e.rotation),t.fillStyle=e.color;let r=$e*(1-e.age/Pe);t.fillRect(-r,-r,r*2,r*2),t.setTransform(1,0,0,1,0,0)}if(this.showPlayer){t.translate(this.player.x,this.player.y),t.rotate(this.player.rotation),t.fillStyle="white";let e=ue;t.fillRect(-e,-e,e*2,e*2);let r=-1,s=0,n=0;this.flashShootDelta>0?(t.fillStyle=`rgb(${200*this.flashShootDelta+55*Math.sin(performance.now()/(gn*2))}, 0, 0)`,this.flashShootDelta-=Mt,n=this.flashShootDelta*2,r=this.flashShootDelta):t.fillStyle="black",t.fillRect(-e-n/2+r,-(e/4)-n/2+s,e+n,e/2+n),t.setTransform(1,0,0,1,0,0)}at(t,this.player.x,this.player.y,ue)}function _e(t,e,r){t.x<-e&&(t.x=N.width),t.y<-r&&(t.y=N.height),t.x>N.width+e/2&&(t.x=-e),t.y>N.height+r/2&&(t.y=-r)}function Dt(t,e,r){let s=t.x-e.x,n=t.y-e.y;return s*s+n*n<=r*r}function at(t,e,r,s){!zt||(t.translate(e,r),t.beginPath(),t.arc(0,0,s,0,Math.PI*2),t.strokeStyle="lime",t.stroke(),t.setTransform(1,0,0,1,0,0))}function gi(t,e,r,s,n){return{scene:t,x:e,y:r,dx:s,dy:n,rotation:Math.atan2(n,s),destroy(){this.scene.powerUps.splice(this.scene.powerUps.indexOf(this),1)}}}function ke(t,e,r,s,n,l){return{scene:t,x:e,y:r,dx:s,dy:n,size:l,rotation:Math.atan2(n,s),breakUp(i=0,o=0){if(this.destroy(),this.size>He){let a=[];a.push(ke(this.scene,this.x+m.range(-O,O),this.y+m.range(-O,O),m.range(-P,P)+i,m.range(-P,P)+o,He)),a.push(ke(this.scene,this.x+m.range(-O,O),this.y+m.range(-O,O),m.range(-P,P)+i,m.range(-P,P)+o,He)),a.push(ke(this.scene,this.x+m.range(-O,O),this.y+m.range(-O,O),m.range(-P,P)+i,m.range(-P,P)+o,He)),a.push(ke(this.scene,this.x+m.range(-O,O),this.y+m.range(-O,O),m.range(-P,P)+i,m.range(-P,P)+o,He)),this.scene.asteroids.push(...a)}},destroy(){this.scene.asteroids.splice(this.scene.asteroids.indexOf(this),1)}}}function Sn(t,e,r,s,n){return{scene:t,x:e,y:r,dx:s,dy:n,rotation:Math.atan2(n,s),age:0,destroy(){this.scene.bullets.splice(this.scene.bullets.indexOf(this),1)}}}function bn(t,e,r,s,n,l){return typeof l=="function"&&(l=l.call(null)),{scene:t,x:e,y:r,dx:s,dy:n,rotation:Math.atan2(n,s),age:0,color:l,destroy(){this.scene.particles.splice(this.scene.particles.indexOf(this),1)}}}function vi(t){t.bullets.length=0,t.asteroids.length=0,t.particles.length=0,t.player.x=N.width/2,t.player.y=N.height/2,t.player.dx=0,t.player.dy=0,t.level++,t.gamePause=!1,t.showPlayer=!0;for(let e=0;e<Zs*t.level;++e)t.asteroidSpawner.spawn();m.next()>hi&&t.powerUpSpawner.spawn(),tt.current.isPlaying()||tt.current.play({loop:!0})}function yi(t){t.gamePause=!0,t.showPlayer=!1,ot(t,t.player.x,t.player.y,100,m.choose.bind(null,ei)),nn.current.play(),on.current.play(),setTimeout(()=>t.gameStart=t.gameWait=!0,1e3)}function mi(t,e,r,s,n,l){if(m.next()>.3){let i=bn(t,e+m.range(it[0],it[1]),r+m.range(it[0],it[1]),s,n,l);i.age=m.range(Pe*ni,Pe*si),t.particles.push(i)}}function ot(t,e,r,s=10,n){for(let l=0;l<s;++l)t.particles.push(bn(t,e,r,m.range(-1,1)*vn,m.range(-1,1)*vn,n))}function wi(t){switch(this.gameWait&&(this.gameStart&&(tt.current.play(),this.score=0,this.flashScore=!0,this.level=0,this.gameStart=!1,this.player.powerMode=0,this.powerUps.length=0,this.asteroidSpawner.reset(),this.powerUpSpawner.reset()),this.gameWait=!1,vi(this)),t){case"w":case"ArrowUp":this.player.up=1;break;case"s":case"ArrowDown":this.player.down=1;break;case"a":case"ArrowLeft":this.player.left=1;break;case"d":case"ArrowRight":this.player.right=1;break;case" ":this.player.fire=1;break;case"\\":break;default:console.log(t)}}function Ai(t){switch(t){case"w":case"ArrowUp":this.player.up=0;break;case"s":case"ArrowDown":this.player.down=0;break;case"a":case"ArrowLeft":this.player.left=0;break;case"d":case"ArrowRight":this.player.right=0;break;case" ":this.player.fire=0;break;case"\\":zt=!zt;break;default:console.log(t)}}})();
//# sourceMappingURL=main.js.map
