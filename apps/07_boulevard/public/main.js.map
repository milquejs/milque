{
  "version": 3,
  "sources": ["node-modules-polyfills:path", "node-modules-polyfills-commonjs:path", "../../../common/temp/node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/constants.js", "../../../common/temp/node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/utils.js", "../../../common/temp/node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/scan.js", "../../../common/temp/node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/parse.js", "../../../common/temp/node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/picomatch.js", "../../../common/temp/node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/index.js", "../src/error.js", "../../../libs/display/src/DisplayPort.js", "../../../libs/display/src/FlexCanvas.js", "../../../common/temp/node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/common.js", "../../../common/temp/node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/mat3.js", "../../../common/temp/node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/mat4.js", "../../../common/temp/node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/quat.js", "../../../common/temp/node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/vec3.js", "../../../common/temp/node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/vec4.js", "../../../libs/scene/src/camera/CameraHelper.js", "../../../libs/scene/src/camera/Camera.js", "../../../libs/scene/src/camera/PerspectiveCamera.js", "../../../libs/scene/src/camera/OrthographicCamera.js", "../../../libs/scene/src/camera/FirstPersonCameraController.js", "../../../libs/scene/src/scenegraph/SceneGraph.js", "../../../libs/scene/src/entity/ComponentClass.js", "../../../libs/scene/src/entity/QueryManager.js", "../../../libs/scene/src/entity/EntityManager.js", "../../../libs/scene/src/entity/Query.js", "../../../libs/scene/src/entity/Archetype.js", "../../../libs/scene/src/topic/Topic.js", "../../../libs/scene/src/topic/TopicManager.js", "../../../libs/scene/src/topic/AsyncTopic.js", "../../../libs/scene/src/loop/AnimationFrameLoop.js", "../../../libs/input/src/state/InputState.js", "../../../libs/input/src/state/AxisState.js", "../../../libs/input/src/state/ButtonState.js", "../../../libs/input/src/keycode/KeyCode.js", "../../../libs/input/src/keycode/KeyCodes.js", "../../../libs/input/src/binding/InputBinding.js", "../../../libs/input/src/keycode/KeyCodeHelper.js", "../../../libs/input/src/binding/AxisBinding.js", "../../../libs/input/src/binding/ButtonBinding.js", "../../../libs/input/src/binding/AxisButtonBinding.js", "../../../libs/input/src/device/InputDevice.js", "../../../libs/input/src/device/KeyboardDevice.js", "../../../libs/input/src/device/MouseDevice.js", "../../../libs/input/src/inputcode/InputCode.js", "../../../libs/input/src/AutoPoller.js", "../../../libs/input/src/DeviceInputAdapter.js", "../../../libs/input/src/InputBindings.js", "../../../libs/input/src/InputContext.js", "../../../libs/input/src/inputport/InputPort.js", "../../../libs/input/src/Keyboard.js", "../../../libs/input/src/Mouse.js", "../../../libs/asset/src/GlobExp.js", "../../../libs/asset/src/AssetStore.js", "../../../libs/asset/src/AssetManager.js", "../../../libs/asset/src/AssetRef.js", "../../../libs/asset/src/AssetHelper.js", "../../../libs/asset/src/loaders/AtlasLoader.js", "../../../libs/asset/src/loaders/BMFontLoader.js", "../../../libs/asset/src/loaders/ImageLoader.js", "../../../libs/asset/src/loaders/OBJLoader.js", "../../../libs/asset/src/loaders/TextLoader.js", "../../../libs/asset/src/loaders/AudioBufferLoader.js", "../../../libs/asset/src/loaders/JSONLoader.js", "../../../libs/util/src/Eventable.js", "../../../libs/util/src/Logger.js", "../../../libs/util/src/Discrete.js", "../../../libs/util/src/Downloader.js", "../../../libs/util/src/Uploader.js", "../../../libs/util/src/PriorityQueue.js", "../../../libs/util/src/uuidv4.js", "../../../libs/util/src/MathHelper.js", "../../../libs/util/src/TopologicalSort.js", "../../../libs/util/src/AStar.js", "../../../libs/util/src/Shuffle.js", "../../../libs/util/src/BitHelper.js", "../../../libs/util/src/URLHelper.js", "../../../libs/util/src/color/Hex.js", "../src/Tia.js", "../src/main.js"],
  "sourcesContent": ["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexport function resolve() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : '/';\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexport function normalize(path) {\n  var isPathAbsolute = isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isPathAbsolute).join('/');\n\n  if (!path && !isPathAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isPathAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexport function isAbsolute(path) {\n  return path.charAt(0) === '/';\n}\n\n// posix version\nexport function join() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n}\n\n\n// path.relative(from, to)\n// posix version\nexport function relative(from, to) {\n  from = resolve(from).substr(1);\n  to = resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n}\n\nexport var sep = '/';\nexport var delimiter = ':';\n\nexport function dirname(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n}\n\nexport function basename(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n}\n\n\nexport function extname(path) {\n  return splitPath(path)[3];\n}\nexport default {\n  extname: extname,\n  basename: basename,\n  dirname: dirname,\n  sep: sep,\n  delimiter: delimiter,\n  relative: relative,\n  join: join,\n  isAbsolute: isAbsolute,\n  normalize: normalize,\n  resolve: resolve\n};\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b' ?\n    function (str, start, len) { return str.substr(start, len) } :\n    function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n", "\nconst polyfill = require('path')\n\nif (polyfill && polyfill.default) {\n    module.exports = polyfill.default\n    for (let k in polyfill) {\n        module.exports[k] = polyfill[k]\n    }\n} else if (polyfill)  {\n    module.exports = polyfill\n}\n\n\n", "'use strict';\n\nconst path = require('path');\nconst WIN_SLASH = '\\\\\\\\/';\nconst WIN_NO_SLASH = `[^${WIN_SLASH}]`;\n\n/**\n * Posix glob regex\n */\n\nconst DOT_LITERAL = '\\\\.';\nconst PLUS_LITERAL = '\\\\+';\nconst QMARK_LITERAL = '\\\\?';\nconst SLASH_LITERAL = '\\\\/';\nconst ONE_CHAR = '(?=.)';\nconst QMARK = '[^/]';\nconst END_ANCHOR = `(?:${SLASH_LITERAL}|$)`;\nconst START_ANCHOR = `(?:^|${SLASH_LITERAL})`;\nconst DOTS_SLASH = `${DOT_LITERAL}{1,2}${END_ANCHOR}`;\nconst NO_DOT = `(?!${DOT_LITERAL})`;\nconst NO_DOTS = `(?!${START_ANCHOR}${DOTS_SLASH})`;\nconst NO_DOT_SLASH = `(?!${DOT_LITERAL}{0,1}${END_ANCHOR})`;\nconst NO_DOTS_SLASH = `(?!${DOTS_SLASH})`;\nconst QMARK_NO_DOT = `[^.${SLASH_LITERAL}]`;\nconst STAR = `${QMARK}*?`;\n\nconst POSIX_CHARS = {\n  DOT_LITERAL,\n  PLUS_LITERAL,\n  QMARK_LITERAL,\n  SLASH_LITERAL,\n  ONE_CHAR,\n  QMARK,\n  END_ANCHOR,\n  DOTS_SLASH,\n  NO_DOT,\n  NO_DOTS,\n  NO_DOT_SLASH,\n  NO_DOTS_SLASH,\n  QMARK_NO_DOT,\n  STAR,\n  START_ANCHOR\n};\n\n/**\n * Windows glob regex\n */\n\nconst WINDOWS_CHARS = {\n  ...POSIX_CHARS,\n\n  SLASH_LITERAL: `[${WIN_SLASH}]`,\n  QMARK: WIN_NO_SLASH,\n  STAR: `${WIN_NO_SLASH}*?`,\n  DOTS_SLASH: `${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$)`,\n  NO_DOT: `(?!${DOT_LITERAL})`,\n  NO_DOTS: `(?!(?:^|[${WIN_SLASH}])${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,\n  NO_DOT_SLASH: `(?!${DOT_LITERAL}{0,1}(?:[${WIN_SLASH}]|$))`,\n  NO_DOTS_SLASH: `(?!${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,\n  QMARK_NO_DOT: `[^.${WIN_SLASH}]`,\n  START_ANCHOR: `(?:^|[${WIN_SLASH}])`,\n  END_ANCHOR: `(?:[${WIN_SLASH}]|$)`\n};\n\n/**\n * POSIX Bracket Regex\n */\n\nconst POSIX_REGEX_SOURCE = {\n  alnum: 'a-zA-Z0-9',\n  alpha: 'a-zA-Z',\n  ascii: '\\\\x00-\\\\x7F',\n  blank: ' \\\\t',\n  cntrl: '\\\\x00-\\\\x1F\\\\x7F',\n  digit: '0-9',\n  graph: '\\\\x21-\\\\x7E',\n  lower: 'a-z',\n  print: '\\\\x20-\\\\x7E ',\n  punct: '\\\\-!\"#$%&\\'()\\\\*+,./:;<=>?@[\\\\]^_`{|}~',\n  space: ' \\\\t\\\\r\\\\n\\\\v\\\\f',\n  upper: 'A-Z',\n  word: 'A-Za-z0-9_',\n  xdigit: 'A-Fa-f0-9'\n};\n\nmodule.exports = {\n  MAX_LENGTH: 1024 * 64,\n  POSIX_REGEX_SOURCE,\n\n  // regular expressions\n  REGEX_BACKSLASH: /\\\\(?![*+?^${}(|)[\\]])/g,\n  REGEX_NON_SPECIAL_CHARS: /^[^@![\\].,$*+?^{}()|\\\\/]+/,\n  REGEX_SPECIAL_CHARS: /[-*+?.^${}(|)[\\]]/,\n  REGEX_SPECIAL_CHARS_BACKREF: /(\\\\?)((\\W)(\\3*))/g,\n  REGEX_SPECIAL_CHARS_GLOBAL: /([-*+?.^${}(|)[\\]])/g,\n  REGEX_REMOVE_BACKSLASH: /(?:\\[.*?[^\\\\]\\]|\\\\(?=.))/g,\n\n  // Replace globs with equivalent patterns to reduce parsing time.\n  REPLACEMENTS: {\n    '***': '*',\n    '**/**': '**',\n    '**/**/**': '**'\n  },\n\n  // Digits\n  CHAR_0: 48, /* 0 */\n  CHAR_9: 57, /* 9 */\n\n  // Alphabet chars.\n  CHAR_UPPERCASE_A: 65, /* A */\n  CHAR_LOWERCASE_A: 97, /* a */\n  CHAR_UPPERCASE_Z: 90, /* Z */\n  CHAR_LOWERCASE_Z: 122, /* z */\n\n  CHAR_LEFT_PARENTHESES: 40, /* ( */\n  CHAR_RIGHT_PARENTHESES: 41, /* ) */\n\n  CHAR_ASTERISK: 42, /* * */\n\n  // Non-alphabetic chars.\n  CHAR_AMPERSAND: 38, /* & */\n  CHAR_AT: 64, /* @ */\n  CHAR_BACKWARD_SLASH: 92, /* \\ */\n  CHAR_CARRIAGE_RETURN: 13, /* \\r */\n  CHAR_CIRCUMFLEX_ACCENT: 94, /* ^ */\n  CHAR_COLON: 58, /* : */\n  CHAR_COMMA: 44, /* , */\n  CHAR_DOT: 46, /* . */\n  CHAR_DOUBLE_QUOTE: 34, /* \" */\n  CHAR_EQUAL: 61, /* = */\n  CHAR_EXCLAMATION_MARK: 33, /* ! */\n  CHAR_FORM_FEED: 12, /* \\f */\n  CHAR_FORWARD_SLASH: 47, /* / */\n  CHAR_GRAVE_ACCENT: 96, /* ` */\n  CHAR_HASH: 35, /* # */\n  CHAR_HYPHEN_MINUS: 45, /* - */\n  CHAR_LEFT_ANGLE_BRACKET: 60, /* < */\n  CHAR_LEFT_CURLY_BRACE: 123, /* { */\n  CHAR_LEFT_SQUARE_BRACKET: 91, /* [ */\n  CHAR_LINE_FEED: 10, /* \\n */\n  CHAR_NO_BREAK_SPACE: 160, /* \\u00A0 */\n  CHAR_PERCENT: 37, /* % */\n  CHAR_PLUS: 43, /* + */\n  CHAR_QUESTION_MARK: 63, /* ? */\n  CHAR_RIGHT_ANGLE_BRACKET: 62, /* > */\n  CHAR_RIGHT_CURLY_BRACE: 125, /* } */\n  CHAR_RIGHT_SQUARE_BRACKET: 93, /* ] */\n  CHAR_SEMICOLON: 59, /* ; */\n  CHAR_SINGLE_QUOTE: 39, /* ' */\n  CHAR_SPACE: 32, /*   */\n  CHAR_TAB: 9, /* \\t */\n  CHAR_UNDERSCORE: 95, /* _ */\n  CHAR_VERTICAL_LINE: 124, /* | */\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE: 65279, /* \\uFEFF */\n\n  SEP: path.sep,\n\n  /**\n   * Create EXTGLOB_CHARS\n   */\n\n  extglobChars(chars) {\n    return {\n      '!': { type: 'negate', open: '(?:(?!(?:', close: `))${chars.STAR})` },\n      '?': { type: 'qmark', open: '(?:', close: ')?' },\n      '+': { type: 'plus', open: '(?:', close: ')+' },\n      '*': { type: 'star', open: '(?:', close: ')*' },\n      '@': { type: 'at', open: '(?:', close: ')' }\n    };\n  },\n\n  /**\n   * Create GLOB_CHARS\n   */\n\n  globChars(win32) {\n    return win32 === true ? WINDOWS_CHARS : POSIX_CHARS;\n  }\n};\n", "'use strict';\n\nconst path = require('path');\nconst win32 = process.platform === 'win32';\nconst {\n  REGEX_BACKSLASH,\n  REGEX_REMOVE_BACKSLASH,\n  REGEX_SPECIAL_CHARS,\n  REGEX_SPECIAL_CHARS_GLOBAL\n} = require('./constants');\n\nexports.isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\nexports.hasRegexChars = str => REGEX_SPECIAL_CHARS.test(str);\nexports.isRegexChar = str => str.length === 1 && exports.hasRegexChars(str);\nexports.escapeRegex = str => str.replace(REGEX_SPECIAL_CHARS_GLOBAL, '\\\\$1');\nexports.toPosixSlashes = str => str.replace(REGEX_BACKSLASH, '/');\n\nexports.removeBackslashes = str => {\n  return str.replace(REGEX_REMOVE_BACKSLASH, match => {\n    return match === '\\\\' ? '' : match;\n  });\n};\n\nexports.supportsLookbehinds = () => {\n  const segs = process.version.slice(1).split('.').map(Number);\n  if (segs.length === 3 && segs[0] >= 9 || (segs[0] === 8 && segs[1] >= 10)) {\n    return true;\n  }\n  return false;\n};\n\nexports.isWindows = options => {\n  if (options && typeof options.windows === 'boolean') {\n    return options.windows;\n  }\n  return win32 === true || path.sep === '\\\\';\n};\n\nexports.escapeLast = (input, char, lastIdx) => {\n  const idx = input.lastIndexOf(char, lastIdx);\n  if (idx === -1) return input;\n  if (input[idx - 1] === '\\\\') return exports.escapeLast(input, char, idx - 1);\n  return `${input.slice(0, idx)}\\\\${input.slice(idx)}`;\n};\n\nexports.removePrefix = (input, state = {}) => {\n  let output = input;\n  if (output.startsWith('./')) {\n    output = output.slice(2);\n    state.prefix = './';\n  }\n  return output;\n};\n\nexports.wrapOutput = (input, state = {}, options = {}) => {\n  const prepend = options.contains ? '' : '^';\n  const append = options.contains ? '' : '$';\n\n  let output = `${prepend}(?:${input})${append}`;\n  if (state.negated === true) {\n    output = `(?:^(?!${output}).*$)`;\n  }\n  return output;\n};\n", "'use strict';\n\nconst utils = require('./utils');\nconst {\n  CHAR_ASTERISK,             /* * */\n  CHAR_AT,                   /* @ */\n  CHAR_BACKWARD_SLASH,       /* \\ */\n  CHAR_COMMA,                /* , */\n  CHAR_DOT,                  /* . */\n  CHAR_EXCLAMATION_MARK,     /* ! */\n  CHAR_FORWARD_SLASH,        /* / */\n  CHAR_LEFT_CURLY_BRACE,     /* { */\n  CHAR_LEFT_PARENTHESES,     /* ( */\n  CHAR_LEFT_SQUARE_BRACKET,  /* [ */\n  CHAR_PLUS,                 /* + */\n  CHAR_QUESTION_MARK,        /* ? */\n  CHAR_RIGHT_CURLY_BRACE,    /* } */\n  CHAR_RIGHT_PARENTHESES,    /* ) */\n  CHAR_RIGHT_SQUARE_BRACKET  /* ] */\n} = require('./constants');\n\nconst isPathSeparator = code => {\n  return code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n};\n\nconst depth = token => {\n  if (token.isPrefix !== true) {\n    token.depth = token.isGlobstar ? Infinity : 1;\n  }\n};\n\n/**\n * Quickly scans a glob pattern and returns an object with a handful of\n * useful properties, like `isGlob`, `path` (the leading non-glob, if it exists),\n * `glob` (the actual pattern), `negated` (true if the path starts with `!` but not\n * with `!(`) and `negatedExtglob` (true if the path starts with `!(`).\n *\n * ```js\n * const pm = require('picomatch');\n * console.log(pm.scan('foo/bar/*.js'));\n * { isGlob: true, input: 'foo/bar/*.js', base: 'foo/bar', glob: '*.js' }\n * ```\n * @param {String} `str`\n * @param {Object} `options`\n * @return {Object} Returns an object with tokens and regex source string.\n * @api public\n */\n\nconst scan = (input, options) => {\n  const opts = options || {};\n\n  const length = input.length - 1;\n  const scanToEnd = opts.parts === true || opts.scanToEnd === true;\n  const slashes = [];\n  const tokens = [];\n  const parts = [];\n\n  let str = input;\n  let index = -1;\n  let start = 0;\n  let lastIndex = 0;\n  let isBrace = false;\n  let isBracket = false;\n  let isGlob = false;\n  let isExtglob = false;\n  let isGlobstar = false;\n  let braceEscaped = false;\n  let backslashes = false;\n  let negated = false;\n  let negatedExtglob = false;\n  let finished = false;\n  let braces = 0;\n  let prev;\n  let code;\n  let token = { value: '', depth: 0, isGlob: false };\n\n  const eos = () => index >= length;\n  const peek = () => str.charCodeAt(index + 1);\n  const advance = () => {\n    prev = code;\n    return str.charCodeAt(++index);\n  };\n\n  while (index < length) {\n    code = advance();\n    let next;\n\n    if (code === CHAR_BACKWARD_SLASH) {\n      backslashes = token.backslashes = true;\n      code = advance();\n\n      if (code === CHAR_LEFT_CURLY_BRACE) {\n        braceEscaped = true;\n      }\n      continue;\n    }\n\n    if (braceEscaped === true || code === CHAR_LEFT_CURLY_BRACE) {\n      braces++;\n\n      while (eos() !== true && (code = advance())) {\n        if (code === CHAR_BACKWARD_SLASH) {\n          backslashes = token.backslashes = true;\n          advance();\n          continue;\n        }\n\n        if (code === CHAR_LEFT_CURLY_BRACE) {\n          braces++;\n          continue;\n        }\n\n        if (braceEscaped !== true && code === CHAR_DOT && (code = advance()) === CHAR_DOT) {\n          isBrace = token.isBrace = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n\n          if (scanToEnd === true) {\n            continue;\n          }\n\n          break;\n        }\n\n        if (braceEscaped !== true && code === CHAR_COMMA) {\n          isBrace = token.isBrace = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n\n          if (scanToEnd === true) {\n            continue;\n          }\n\n          break;\n        }\n\n        if (code === CHAR_RIGHT_CURLY_BRACE) {\n          braces--;\n\n          if (braces === 0) {\n            braceEscaped = false;\n            isBrace = token.isBrace = true;\n            finished = true;\n            break;\n          }\n        }\n      }\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n\n    if (code === CHAR_FORWARD_SLASH) {\n      slashes.push(index);\n      tokens.push(token);\n      token = { value: '', depth: 0, isGlob: false };\n\n      if (finished === true) continue;\n      if (prev === CHAR_DOT && index === (start + 1)) {\n        start += 2;\n        continue;\n      }\n\n      lastIndex = index + 1;\n      continue;\n    }\n\n    if (opts.noext !== true) {\n      const isExtglobChar = code === CHAR_PLUS\n        || code === CHAR_AT\n        || code === CHAR_ASTERISK\n        || code === CHAR_QUESTION_MARK\n        || code === CHAR_EXCLAMATION_MARK;\n\n      if (isExtglobChar === true && peek() === CHAR_LEFT_PARENTHESES) {\n        isGlob = token.isGlob = true;\n        isExtglob = token.isExtglob = true;\n        finished = true;\n        if (code === CHAR_EXCLAMATION_MARK && index === start) {\n          negatedExtglob = true;\n        }\n\n        if (scanToEnd === true) {\n          while (eos() !== true && (code = advance())) {\n            if (code === CHAR_BACKWARD_SLASH) {\n              backslashes = token.backslashes = true;\n              code = advance();\n              continue;\n            }\n\n            if (code === CHAR_RIGHT_PARENTHESES) {\n              isGlob = token.isGlob = true;\n              finished = true;\n              break;\n            }\n          }\n          continue;\n        }\n        break;\n      }\n    }\n\n    if (code === CHAR_ASTERISK) {\n      if (prev === CHAR_ASTERISK) isGlobstar = token.isGlobstar = true;\n      isGlob = token.isGlob = true;\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n      break;\n    }\n\n    if (code === CHAR_QUESTION_MARK) {\n      isGlob = token.isGlob = true;\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n      break;\n    }\n\n    if (code === CHAR_LEFT_SQUARE_BRACKET) {\n      while (eos() !== true && (next = advance())) {\n        if (next === CHAR_BACKWARD_SLASH) {\n          backslashes = token.backslashes = true;\n          advance();\n          continue;\n        }\n\n        if (next === CHAR_RIGHT_SQUARE_BRACKET) {\n          isBracket = token.isBracket = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n          break;\n        }\n      }\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n\n    if (opts.nonegate !== true && code === CHAR_EXCLAMATION_MARK && index === start) {\n      negated = token.negated = true;\n      start++;\n      continue;\n    }\n\n    if (opts.noparen !== true && code === CHAR_LEFT_PARENTHESES) {\n      isGlob = token.isGlob = true;\n\n      if (scanToEnd === true) {\n        while (eos() !== true && (code = advance())) {\n          if (code === CHAR_LEFT_PARENTHESES) {\n            backslashes = token.backslashes = true;\n            code = advance();\n            continue;\n          }\n\n          if (code === CHAR_RIGHT_PARENTHESES) {\n            finished = true;\n            break;\n          }\n        }\n        continue;\n      }\n      break;\n    }\n\n    if (isGlob === true) {\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n  }\n\n  if (opts.noext === true) {\n    isExtglob = false;\n    isGlob = false;\n  }\n\n  let base = str;\n  let prefix = '';\n  let glob = '';\n\n  if (start > 0) {\n    prefix = str.slice(0, start);\n    str = str.slice(start);\n    lastIndex -= start;\n  }\n\n  if (base && isGlob === true && lastIndex > 0) {\n    base = str.slice(0, lastIndex);\n    glob = str.slice(lastIndex);\n  } else if (isGlob === true) {\n    base = '';\n    glob = str;\n  } else {\n    base = str;\n  }\n\n  if (base && base !== '' && base !== '/' && base !== str) {\n    if (isPathSeparator(base.charCodeAt(base.length - 1))) {\n      base = base.slice(0, -1);\n    }\n  }\n\n  if (opts.unescape === true) {\n    if (glob) glob = utils.removeBackslashes(glob);\n\n    if (base && backslashes === true) {\n      base = utils.removeBackslashes(base);\n    }\n  }\n\n  const state = {\n    prefix,\n    input,\n    start,\n    base,\n    glob,\n    isBrace,\n    isBracket,\n    isGlob,\n    isExtglob,\n    isGlobstar,\n    negated,\n    negatedExtglob\n  };\n\n  if (opts.tokens === true) {\n    state.maxDepth = 0;\n    if (!isPathSeparator(code)) {\n      tokens.push(token);\n    }\n    state.tokens = tokens;\n  }\n\n  if (opts.parts === true || opts.tokens === true) {\n    let prevIndex;\n\n    for (let idx = 0; idx < slashes.length; idx++) {\n      const n = prevIndex ? prevIndex + 1 : start;\n      const i = slashes[idx];\n      const value = input.slice(n, i);\n      if (opts.tokens) {\n        if (idx === 0 && start !== 0) {\n          tokens[idx].isPrefix = true;\n          tokens[idx].value = prefix;\n        } else {\n          tokens[idx].value = value;\n        }\n        depth(tokens[idx]);\n        state.maxDepth += tokens[idx].depth;\n      }\n      if (idx !== 0 || value !== '') {\n        parts.push(value);\n      }\n      prevIndex = i;\n    }\n\n    if (prevIndex && prevIndex + 1 < input.length) {\n      const value = input.slice(prevIndex + 1);\n      parts.push(value);\n\n      if (opts.tokens) {\n        tokens[tokens.length - 1].value = value;\n        depth(tokens[tokens.length - 1]);\n        state.maxDepth += tokens[tokens.length - 1].depth;\n      }\n    }\n\n    state.slashes = slashes;\n    state.parts = parts;\n  }\n\n  return state;\n};\n\nmodule.exports = scan;\n", "'use strict';\n\nconst constants = require('./constants');\nconst utils = require('./utils');\n\n/**\n * Constants\n */\n\nconst {\n  MAX_LENGTH,\n  POSIX_REGEX_SOURCE,\n  REGEX_NON_SPECIAL_CHARS,\n  REGEX_SPECIAL_CHARS_BACKREF,\n  REPLACEMENTS\n} = constants;\n\n/**\n * Helpers\n */\n\nconst expandRange = (args, options) => {\n  if (typeof options.expandRange === 'function') {\n    return options.expandRange(...args, options);\n  }\n\n  args.sort();\n  const value = `[${args.join('-')}]`;\n\n  try {\n    /* eslint-disable-next-line no-new */\n    new RegExp(value);\n  } catch (ex) {\n    return args.map(v => utils.escapeRegex(v)).join('..');\n  }\n\n  return value;\n};\n\n/**\n * Create the message for a syntax error\n */\n\nconst syntaxError = (type, char) => {\n  return `Missing ${type}: \"${char}\" - use \"\\\\\\\\${char}\" to match literal characters`;\n};\n\n/**\n * Parse the given input string.\n * @param {String} input\n * @param {Object} options\n * @return {Object}\n */\n\nconst parse = (input, options) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  input = REPLACEMENTS[input] || input;\n\n  const opts = { ...options };\n  const max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n\n  let len = input.length;\n  if (len > max) {\n    throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);\n  }\n\n  const bos = { type: 'bos', value: '', output: opts.prepend || '' };\n  const tokens = [bos];\n\n  const capture = opts.capture ? '' : '?:';\n  const win32 = utils.isWindows(options);\n\n  // create constants based on platform, for windows or posix\n  const PLATFORM_CHARS = constants.globChars(win32);\n  const EXTGLOB_CHARS = constants.extglobChars(PLATFORM_CHARS);\n\n  const {\n    DOT_LITERAL,\n    PLUS_LITERAL,\n    SLASH_LITERAL,\n    ONE_CHAR,\n    DOTS_SLASH,\n    NO_DOT,\n    NO_DOT_SLASH,\n    NO_DOTS_SLASH,\n    QMARK,\n    QMARK_NO_DOT,\n    STAR,\n    START_ANCHOR\n  } = PLATFORM_CHARS;\n\n  const globstar = opts => {\n    return `(${capture}(?:(?!${START_ANCHOR}${opts.dot ? DOTS_SLASH : DOT_LITERAL}).)*?)`;\n  };\n\n  const nodot = opts.dot ? '' : NO_DOT;\n  const qmarkNoDot = opts.dot ? QMARK : QMARK_NO_DOT;\n  let star = opts.bash === true ? globstar(opts) : STAR;\n\n  if (opts.capture) {\n    star = `(${star})`;\n  }\n\n  // minimatch options support\n  if (typeof opts.noext === 'boolean') {\n    opts.noextglob = opts.noext;\n  }\n\n  const state = {\n    input,\n    index: -1,\n    start: 0,\n    dot: opts.dot === true,\n    consumed: '',\n    output: '',\n    prefix: '',\n    backtrack: false,\n    negated: false,\n    brackets: 0,\n    braces: 0,\n    parens: 0,\n    quotes: 0,\n    globstar: false,\n    tokens\n  };\n\n  input = utils.removePrefix(input, state);\n  len = input.length;\n\n  const extglobs = [];\n  const braces = [];\n  const stack = [];\n  let prev = bos;\n  let value;\n\n  /**\n   * Tokenizing helpers\n   */\n\n  const eos = () => state.index === len - 1;\n  const peek = state.peek = (n = 1) => input[state.index + n];\n  const advance = state.advance = () => input[++state.index] || '';\n  const remaining = () => input.slice(state.index + 1);\n  const consume = (value = '', num = 0) => {\n    state.consumed += value;\n    state.index += num;\n  };\n\n  const append = token => {\n    state.output += token.output != null ? token.output : token.value;\n    consume(token.value);\n  };\n\n  const negate = () => {\n    let count = 1;\n\n    while (peek() === '!' && (peek(2) !== '(' || peek(3) === '?')) {\n      advance();\n      state.start++;\n      count++;\n    }\n\n    if (count % 2 === 0) {\n      return false;\n    }\n\n    state.negated = true;\n    state.start++;\n    return true;\n  };\n\n  const increment = type => {\n    state[type]++;\n    stack.push(type);\n  };\n\n  const decrement = type => {\n    state[type]--;\n    stack.pop();\n  };\n\n  /**\n   * Push tokens onto the tokens array. This helper speeds up\n   * tokenizing by 1) helping us avoid backtracking as much as possible,\n   * and 2) helping us avoid creating extra tokens when consecutive\n   * characters are plain text. This improves performance and simplifies\n   * lookbehinds.\n   */\n\n  const push = tok => {\n    if (prev.type === 'globstar') {\n      const isBrace = state.braces > 0 && (tok.type === 'comma' || tok.type === 'brace');\n      const isExtglob = tok.extglob === true || (extglobs.length && (tok.type === 'pipe' || tok.type === 'paren'));\n\n      if (tok.type !== 'slash' && tok.type !== 'paren' && !isBrace && !isExtglob) {\n        state.output = state.output.slice(0, -prev.output.length);\n        prev.type = 'star';\n        prev.value = '*';\n        prev.output = star;\n        state.output += prev.output;\n      }\n    }\n\n    if (extglobs.length && tok.type !== 'paren') {\n      extglobs[extglobs.length - 1].inner += tok.value;\n    }\n\n    if (tok.value || tok.output) append(tok);\n    if (prev && prev.type === 'text' && tok.type === 'text') {\n      prev.value += tok.value;\n      prev.output = (prev.output || '') + tok.value;\n      return;\n    }\n\n    tok.prev = prev;\n    tokens.push(tok);\n    prev = tok;\n  };\n\n  const extglobOpen = (type, value) => {\n    const token = { ...EXTGLOB_CHARS[value], conditions: 1, inner: '' };\n\n    token.prev = prev;\n    token.parens = state.parens;\n    token.output = state.output;\n    const output = (opts.capture ? '(' : '') + token.open;\n\n    increment('parens');\n    push({ type, value, output: state.output ? '' : ONE_CHAR });\n    push({ type: 'paren', extglob: true, value: advance(), output });\n    extglobs.push(token);\n  };\n\n  const extglobClose = token => {\n    let output = token.close + (opts.capture ? ')' : '');\n    let rest;\n\n    if (token.type === 'negate') {\n      let extglobStar = star;\n\n      if (token.inner && token.inner.length > 1 && token.inner.includes('/')) {\n        extglobStar = globstar(opts);\n      }\n\n      if (extglobStar !== star || eos() || /^\\)+$/.test(remaining())) {\n        output = token.close = `)$))${extglobStar}`;\n      }\n\n      if (token.inner.includes('*') && (rest = remaining()) && /^\\.[^\\\\/.]+$/.test(rest)) {\n        // Any non-magical string (`.ts`) or even nested expression (`.{ts,tsx}`) can follow after the closing parenthesis.\n        // In this case, we need to parse the string and use it in the output of the original pattern.\n        // Suitable patterns: `/!(*.d).ts`, `/!(*.d).{ts,tsx}`, `**/!(*-dbg).@(js)`.\n        //\n        // Disabling the `fastpaths` option due to a problem with parsing strings as `.ts` in the pattern like `**/!(*.d).ts`.\n        const expression = parse(rest, { ...options, fastpaths: false }).output;\n\n        output = token.close = `)${expression})${extglobStar})`;\n      }\n\n      if (token.prev.type === 'bos') {\n        state.negatedExtglob = true;\n      }\n    }\n\n    push({ type: 'paren', extglob: true, value, output });\n    decrement('parens');\n  };\n\n  /**\n   * Fast paths\n   */\n\n  if (opts.fastpaths !== false && !/(^[*!]|[/()[\\]{}\"])/.test(input)) {\n    let backslashes = false;\n\n    let output = input.replace(REGEX_SPECIAL_CHARS_BACKREF, (m, esc, chars, first, rest, index) => {\n      if (first === '\\\\') {\n        backslashes = true;\n        return m;\n      }\n\n      if (first === '?') {\n        if (esc) {\n          return esc + first + (rest ? QMARK.repeat(rest.length) : '');\n        }\n        if (index === 0) {\n          return qmarkNoDot + (rest ? QMARK.repeat(rest.length) : '');\n        }\n        return QMARK.repeat(chars.length);\n      }\n\n      if (first === '.') {\n        return DOT_LITERAL.repeat(chars.length);\n      }\n\n      if (first === '*') {\n        if (esc) {\n          return esc + first + (rest ? star : '');\n        }\n        return star;\n      }\n      return esc ? m : `\\\\${m}`;\n    });\n\n    if (backslashes === true) {\n      if (opts.unescape === true) {\n        output = output.replace(/\\\\/g, '');\n      } else {\n        output = output.replace(/\\\\+/g, m => {\n          return m.length % 2 === 0 ? '\\\\\\\\' : (m ? '\\\\' : '');\n        });\n      }\n    }\n\n    if (output === input && opts.contains === true) {\n      state.output = input;\n      return state;\n    }\n\n    state.output = utils.wrapOutput(output, state, options);\n    return state;\n  }\n\n  /**\n   * Tokenize input until we reach end-of-string\n   */\n\n  while (!eos()) {\n    value = advance();\n\n    if (value === '\\u0000') {\n      continue;\n    }\n\n    /**\n     * Escaped characters\n     */\n\n    if (value === '\\\\') {\n      const next = peek();\n\n      if (next === '/' && opts.bash !== true) {\n        continue;\n      }\n\n      if (next === '.' || next === ';') {\n        continue;\n      }\n\n      if (!next) {\n        value += '\\\\';\n        push({ type: 'text', value });\n        continue;\n      }\n\n      // collapse slashes to reduce potential for exploits\n      const match = /^\\\\+/.exec(remaining());\n      let slashes = 0;\n\n      if (match && match[0].length > 2) {\n        slashes = match[0].length;\n        state.index += slashes;\n        if (slashes % 2 !== 0) {\n          value += '\\\\';\n        }\n      }\n\n      if (opts.unescape === true) {\n        value = advance();\n      } else {\n        value += advance();\n      }\n\n      if (state.brackets === 0) {\n        push({ type: 'text', value });\n        continue;\n      }\n    }\n\n    /**\n     * If we're inside a regex character class, continue\n     * until we reach the closing bracket.\n     */\n\n    if (state.brackets > 0 && (value !== ']' || prev.value === '[' || prev.value === '[^')) {\n      if (opts.posix !== false && value === ':') {\n        const inner = prev.value.slice(1);\n        if (inner.includes('[')) {\n          prev.posix = true;\n\n          if (inner.includes(':')) {\n            const idx = prev.value.lastIndexOf('[');\n            const pre = prev.value.slice(0, idx);\n            const rest = prev.value.slice(idx + 2);\n            const posix = POSIX_REGEX_SOURCE[rest];\n            if (posix) {\n              prev.value = pre + posix;\n              state.backtrack = true;\n              advance();\n\n              if (!bos.output && tokens.indexOf(prev) === 1) {\n                bos.output = ONE_CHAR;\n              }\n              continue;\n            }\n          }\n        }\n      }\n\n      if ((value === '[' && peek() !== ':') || (value === '-' && peek() === ']')) {\n        value = `\\\\${value}`;\n      }\n\n      if (value === ']' && (prev.value === '[' || prev.value === '[^')) {\n        value = `\\\\${value}`;\n      }\n\n      if (opts.posix === true && value === '!' && prev.value === '[') {\n        value = '^';\n      }\n\n      prev.value += value;\n      append({ value });\n      continue;\n    }\n\n    /**\n     * If we're inside a quoted string, continue\n     * until we reach the closing double quote.\n     */\n\n    if (state.quotes === 1 && value !== '\"') {\n      value = utils.escapeRegex(value);\n      prev.value += value;\n      append({ value });\n      continue;\n    }\n\n    /**\n     * Double quotes\n     */\n\n    if (value === '\"') {\n      state.quotes = state.quotes === 1 ? 0 : 1;\n      if (opts.keepQuotes === true) {\n        push({ type: 'text', value });\n      }\n      continue;\n    }\n\n    /**\n     * Parentheses\n     */\n\n    if (value === '(') {\n      increment('parens');\n      push({ type: 'paren', value });\n      continue;\n    }\n\n    if (value === ')') {\n      if (state.parens === 0 && opts.strictBrackets === true) {\n        throw new SyntaxError(syntaxError('opening', '('));\n      }\n\n      const extglob = extglobs[extglobs.length - 1];\n      if (extglob && state.parens === extglob.parens + 1) {\n        extglobClose(extglobs.pop());\n        continue;\n      }\n\n      push({ type: 'paren', value, output: state.parens ? ')' : '\\\\)' });\n      decrement('parens');\n      continue;\n    }\n\n    /**\n     * Square brackets\n     */\n\n    if (value === '[') {\n      if (opts.nobracket === true || !remaining().includes(']')) {\n        if (opts.nobracket !== true && opts.strictBrackets === true) {\n          throw new SyntaxError(syntaxError('closing', ']'));\n        }\n\n        value = `\\\\${value}`;\n      } else {\n        increment('brackets');\n      }\n\n      push({ type: 'bracket', value });\n      continue;\n    }\n\n    if (value === ']') {\n      if (opts.nobracket === true || (prev && prev.type === 'bracket' && prev.value.length === 1)) {\n        push({ type: 'text', value, output: `\\\\${value}` });\n        continue;\n      }\n\n      if (state.brackets === 0) {\n        if (opts.strictBrackets === true) {\n          throw new SyntaxError(syntaxError('opening', '['));\n        }\n\n        push({ type: 'text', value, output: `\\\\${value}` });\n        continue;\n      }\n\n      decrement('brackets');\n\n      const prevValue = prev.value.slice(1);\n      if (prev.posix !== true && prevValue[0] === '^' && !prevValue.includes('/')) {\n        value = `/${value}`;\n      }\n\n      prev.value += value;\n      append({ value });\n\n      // when literal brackets are explicitly disabled\n      // assume we should match with a regex character class\n      if (opts.literalBrackets === false || utils.hasRegexChars(prevValue)) {\n        continue;\n      }\n\n      const escaped = utils.escapeRegex(prev.value);\n      state.output = state.output.slice(0, -prev.value.length);\n\n      // when literal brackets are explicitly enabled\n      // assume we should escape the brackets to match literal characters\n      if (opts.literalBrackets === true) {\n        state.output += escaped;\n        prev.value = escaped;\n        continue;\n      }\n\n      // when the user specifies nothing, try to match both\n      prev.value = `(${capture}${escaped}|${prev.value})`;\n      state.output += prev.value;\n      continue;\n    }\n\n    /**\n     * Braces\n     */\n\n    if (value === '{' && opts.nobrace !== true) {\n      increment('braces');\n\n      const open = {\n        type: 'brace',\n        value,\n        output: '(',\n        outputIndex: state.output.length,\n        tokensIndex: state.tokens.length\n      };\n\n      braces.push(open);\n      push(open);\n      continue;\n    }\n\n    if (value === '}') {\n      const brace = braces[braces.length - 1];\n\n      if (opts.nobrace === true || !brace) {\n        push({ type: 'text', value, output: value });\n        continue;\n      }\n\n      let output = ')';\n\n      if (brace.dots === true) {\n        const arr = tokens.slice();\n        const range = [];\n\n        for (let i = arr.length - 1; i >= 0; i--) {\n          tokens.pop();\n          if (arr[i].type === 'brace') {\n            break;\n          }\n          if (arr[i].type !== 'dots') {\n            range.unshift(arr[i].value);\n          }\n        }\n\n        output = expandRange(range, opts);\n        state.backtrack = true;\n      }\n\n      if (brace.comma !== true && brace.dots !== true) {\n        const out = state.output.slice(0, brace.outputIndex);\n        const toks = state.tokens.slice(brace.tokensIndex);\n        brace.value = brace.output = '\\\\{';\n        value = output = '\\\\}';\n        state.output = out;\n        for (const t of toks) {\n          state.output += (t.output || t.value);\n        }\n      }\n\n      push({ type: 'brace', value, output });\n      decrement('braces');\n      braces.pop();\n      continue;\n    }\n\n    /**\n     * Pipes\n     */\n\n    if (value === '|') {\n      if (extglobs.length > 0) {\n        extglobs[extglobs.length - 1].conditions++;\n      }\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Commas\n     */\n\n    if (value === ',') {\n      let output = value;\n\n      const brace = braces[braces.length - 1];\n      if (brace && stack[stack.length - 1] === 'braces') {\n        brace.comma = true;\n        output = '|';\n      }\n\n      push({ type: 'comma', value, output });\n      continue;\n    }\n\n    /**\n     * Slashes\n     */\n\n    if (value === '/') {\n      // if the beginning of the glob is \"./\", advance the start\n      // to the current index, and don't add the \"./\" characters\n      // to the state. This greatly simplifies lookbehinds when\n      // checking for BOS characters like \"!\" and \".\" (not \"./\")\n      if (prev.type === 'dot' && state.index === state.start + 1) {\n        state.start = state.index + 1;\n        state.consumed = '';\n        state.output = '';\n        tokens.pop();\n        prev = bos; // reset \"prev\" to the first token\n        continue;\n      }\n\n      push({ type: 'slash', value, output: SLASH_LITERAL });\n      continue;\n    }\n\n    /**\n     * Dots\n     */\n\n    if (value === '.') {\n      if (state.braces > 0 && prev.type === 'dot') {\n        if (prev.value === '.') prev.output = DOT_LITERAL;\n        const brace = braces[braces.length - 1];\n        prev.type = 'dots';\n        prev.output += value;\n        prev.value += value;\n        brace.dots = true;\n        continue;\n      }\n\n      if ((state.braces + state.parens) === 0 && prev.type !== 'bos' && prev.type !== 'slash') {\n        push({ type: 'text', value, output: DOT_LITERAL });\n        continue;\n      }\n\n      push({ type: 'dot', value, output: DOT_LITERAL });\n      continue;\n    }\n\n    /**\n     * Question marks\n     */\n\n    if (value === '?') {\n      const isGroup = prev && prev.value === '(';\n      if (!isGroup && opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        extglobOpen('qmark', value);\n        continue;\n      }\n\n      if (prev && prev.type === 'paren') {\n        const next = peek();\n        let output = value;\n\n        if (next === '<' && !utils.supportsLookbehinds()) {\n          throw new Error('Node.js v10 or higher is required for regex lookbehinds');\n        }\n\n        if ((prev.value === '(' && !/[!=<:]/.test(next)) || (next === '<' && !/<([!=]|\\w+>)/.test(remaining()))) {\n          output = `\\\\${value}`;\n        }\n\n        push({ type: 'text', value, output });\n        continue;\n      }\n\n      if (opts.dot !== true && (prev.type === 'slash' || prev.type === 'bos')) {\n        push({ type: 'qmark', value, output: QMARK_NO_DOT });\n        continue;\n      }\n\n      push({ type: 'qmark', value, output: QMARK });\n      continue;\n    }\n\n    /**\n     * Exclamation\n     */\n\n    if (value === '!') {\n      if (opts.noextglob !== true && peek() === '(') {\n        if (peek(2) !== '?' || !/[!=<:]/.test(peek(3))) {\n          extglobOpen('negate', value);\n          continue;\n        }\n      }\n\n      if (opts.nonegate !== true && state.index === 0) {\n        negate();\n        continue;\n      }\n    }\n\n    /**\n     * Plus\n     */\n\n    if (value === '+') {\n      if (opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        extglobOpen('plus', value);\n        continue;\n      }\n\n      if ((prev && prev.value === '(') || opts.regex === false) {\n        push({ type: 'plus', value, output: PLUS_LITERAL });\n        continue;\n      }\n\n      if ((prev && (prev.type === 'bracket' || prev.type === 'paren' || prev.type === 'brace')) || state.parens > 0) {\n        push({ type: 'plus', value });\n        continue;\n      }\n\n      push({ type: 'plus', value: PLUS_LITERAL });\n      continue;\n    }\n\n    /**\n     * Plain text\n     */\n\n    if (value === '@') {\n      if (opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        push({ type: 'at', extglob: true, value, output: '' });\n        continue;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Plain text\n     */\n\n    if (value !== '*') {\n      if (value === '$' || value === '^') {\n        value = `\\\\${value}`;\n      }\n\n      const match = REGEX_NON_SPECIAL_CHARS.exec(remaining());\n      if (match) {\n        value += match[0];\n        state.index += match[0].length;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Stars\n     */\n\n    if (prev && (prev.type === 'globstar' || prev.star === true)) {\n      prev.type = 'star';\n      prev.star = true;\n      prev.value += value;\n      prev.output = star;\n      state.backtrack = true;\n      state.globstar = true;\n      consume(value);\n      continue;\n    }\n\n    let rest = remaining();\n    if (opts.noextglob !== true && /^\\([^?]/.test(rest)) {\n      extglobOpen('star', value);\n      continue;\n    }\n\n    if (prev.type === 'star') {\n      if (opts.noglobstar === true) {\n        consume(value);\n        continue;\n      }\n\n      const prior = prev.prev;\n      const before = prior.prev;\n      const isStart = prior.type === 'slash' || prior.type === 'bos';\n      const afterStar = before && (before.type === 'star' || before.type === 'globstar');\n\n      if (opts.bash === true && (!isStart || (rest[0] && rest[0] !== '/'))) {\n        push({ type: 'star', value, output: '' });\n        continue;\n      }\n\n      const isBrace = state.braces > 0 && (prior.type === 'comma' || prior.type === 'brace');\n      const isExtglob = extglobs.length && (prior.type === 'pipe' || prior.type === 'paren');\n      if (!isStart && prior.type !== 'paren' && !isBrace && !isExtglob) {\n        push({ type: 'star', value, output: '' });\n        continue;\n      }\n\n      // strip consecutive `/**/`\n      while (rest.slice(0, 3) === '/**') {\n        const after = input[state.index + 4];\n        if (after && after !== '/') {\n          break;\n        }\n        rest = rest.slice(3);\n        consume('/**', 3);\n      }\n\n      if (prior.type === 'bos' && eos()) {\n        prev.type = 'globstar';\n        prev.value += value;\n        prev.output = globstar(opts);\n        state.output = prev.output;\n        state.globstar = true;\n        consume(value);\n        continue;\n      }\n\n      if (prior.type === 'slash' && prior.prev.type !== 'bos' && !afterStar && eos()) {\n        state.output = state.output.slice(0, -(prior.output + prev.output).length);\n        prior.output = `(?:${prior.output}`;\n\n        prev.type = 'globstar';\n        prev.output = globstar(opts) + (opts.strictSlashes ? ')' : '|$)');\n        prev.value += value;\n        state.globstar = true;\n        state.output += prior.output + prev.output;\n        consume(value);\n        continue;\n      }\n\n      if (prior.type === 'slash' && prior.prev.type !== 'bos' && rest[0] === '/') {\n        const end = rest[1] !== void 0 ? '|$' : '';\n\n        state.output = state.output.slice(0, -(prior.output + prev.output).length);\n        prior.output = `(?:${prior.output}`;\n\n        prev.type = 'globstar';\n        prev.output = `${globstar(opts)}${SLASH_LITERAL}|${SLASH_LITERAL}${end})`;\n        prev.value += value;\n\n        state.output += prior.output + prev.output;\n        state.globstar = true;\n\n        consume(value + advance());\n\n        push({ type: 'slash', value: '/', output: '' });\n        continue;\n      }\n\n      if (prior.type === 'bos' && rest[0] === '/') {\n        prev.type = 'globstar';\n        prev.value += value;\n        prev.output = `(?:^|${SLASH_LITERAL}|${globstar(opts)}${SLASH_LITERAL})`;\n        state.output = prev.output;\n        state.globstar = true;\n        consume(value + advance());\n        push({ type: 'slash', value: '/', output: '' });\n        continue;\n      }\n\n      // remove single star from output\n      state.output = state.output.slice(0, -prev.output.length);\n\n      // reset previous token to globstar\n      prev.type = 'globstar';\n      prev.output = globstar(opts);\n      prev.value += value;\n\n      // reset output with globstar\n      state.output += prev.output;\n      state.globstar = true;\n      consume(value);\n      continue;\n    }\n\n    const token = { type: 'star', value, output: star };\n\n    if (opts.bash === true) {\n      token.output = '.*?';\n      if (prev.type === 'bos' || prev.type === 'slash') {\n        token.output = nodot + token.output;\n      }\n      push(token);\n      continue;\n    }\n\n    if (prev && (prev.type === 'bracket' || prev.type === 'paren') && opts.regex === true) {\n      token.output = value;\n      push(token);\n      continue;\n    }\n\n    if (state.index === state.start || prev.type === 'slash' || prev.type === 'dot') {\n      if (prev.type === 'dot') {\n        state.output += NO_DOT_SLASH;\n        prev.output += NO_DOT_SLASH;\n\n      } else if (opts.dot === true) {\n        state.output += NO_DOTS_SLASH;\n        prev.output += NO_DOTS_SLASH;\n\n      } else {\n        state.output += nodot;\n        prev.output += nodot;\n      }\n\n      if (peek() !== '*') {\n        state.output += ONE_CHAR;\n        prev.output += ONE_CHAR;\n      }\n    }\n\n    push(token);\n  }\n\n  while (state.brackets > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', ']'));\n    state.output = utils.escapeLast(state.output, '[');\n    decrement('brackets');\n  }\n\n  while (state.parens > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', ')'));\n    state.output = utils.escapeLast(state.output, '(');\n    decrement('parens');\n  }\n\n  while (state.braces > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', '}'));\n    state.output = utils.escapeLast(state.output, '{');\n    decrement('braces');\n  }\n\n  if (opts.strictSlashes !== true && (prev.type === 'star' || prev.type === 'bracket')) {\n    push({ type: 'maybe_slash', value: '', output: `${SLASH_LITERAL}?` });\n  }\n\n  // rebuild the output if we had to backtrack at any point\n  if (state.backtrack === true) {\n    state.output = '';\n\n    for (const token of state.tokens) {\n      state.output += token.output != null ? token.output : token.value;\n\n      if (token.suffix) {\n        state.output += token.suffix;\n      }\n    }\n  }\n\n  return state;\n};\n\n/**\n * Fast paths for creating regular expressions for common glob patterns.\n * This can significantly speed up processing and has very little downside\n * impact when none of the fast paths match.\n */\n\nparse.fastpaths = (input, options) => {\n  const opts = { ...options };\n  const max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n  const len = input.length;\n  if (len > max) {\n    throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);\n  }\n\n  input = REPLACEMENTS[input] || input;\n  const win32 = utils.isWindows(options);\n\n  // create constants based on platform, for windows or posix\n  const {\n    DOT_LITERAL,\n    SLASH_LITERAL,\n    ONE_CHAR,\n    DOTS_SLASH,\n    NO_DOT,\n    NO_DOTS,\n    NO_DOTS_SLASH,\n    STAR,\n    START_ANCHOR\n  } = constants.globChars(win32);\n\n  const nodot = opts.dot ? NO_DOTS : NO_DOT;\n  const slashDot = opts.dot ? NO_DOTS_SLASH : NO_DOT;\n  const capture = opts.capture ? '' : '?:';\n  const state = { negated: false, prefix: '' };\n  let star = opts.bash === true ? '.*?' : STAR;\n\n  if (opts.capture) {\n    star = `(${star})`;\n  }\n\n  const globstar = opts => {\n    if (opts.noglobstar === true) return star;\n    return `(${capture}(?:(?!${START_ANCHOR}${opts.dot ? DOTS_SLASH : DOT_LITERAL}).)*?)`;\n  };\n\n  const create = str => {\n    switch (str) {\n      case '*':\n        return `${nodot}${ONE_CHAR}${star}`;\n\n      case '.*':\n        return `${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '*.*':\n        return `${nodot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '*/*':\n        return `${nodot}${star}${SLASH_LITERAL}${ONE_CHAR}${slashDot}${star}`;\n\n      case '**':\n        return nodot + globstar(opts);\n\n      case '**/*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${ONE_CHAR}${star}`;\n\n      case '**/*.*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '**/.*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      default: {\n        const match = /^(.*?)\\.(\\w+)$/.exec(str);\n        if (!match) return;\n\n        const source = create(match[1]);\n        if (!source) return;\n\n        return source + DOT_LITERAL + match[2];\n      }\n    }\n  };\n\n  const output = utils.removePrefix(input, state);\n  let source = create(output);\n\n  if (source && opts.strictSlashes !== true) {\n    source += `${SLASH_LITERAL}?`;\n  }\n\n  return source;\n};\n\nmodule.exports = parse;\n", "'use strict';\n\nconst path = require('path');\nconst scan = require('./scan');\nconst parse = require('./parse');\nconst utils = require('./utils');\nconst constants = require('./constants');\nconst isObject = val => val && typeof val === 'object' && !Array.isArray(val);\n\n/**\n * Creates a matcher function from one or more glob patterns. The\n * returned function takes a string to match as its first argument,\n * and returns true if the string is a match. The returned matcher\n * function also takes a boolean as the second argument that, when true,\n * returns an object with additional information.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch(glob[, options]);\n *\n * const isMatch = picomatch('*.!(*a)');\n * console.log(isMatch('a.a')); //=> false\n * console.log(isMatch('a.b')); //=> true\n * ```\n * @name picomatch\n * @param {String|Array} `globs` One or more glob patterns.\n * @param {Object=} `options`\n * @return {Function=} Returns a matcher function.\n * @api public\n */\n\nconst picomatch = (glob, options, returnState = false) => {\n  if (Array.isArray(glob)) {\n    const fns = glob.map(input => picomatch(input, options, returnState));\n    const arrayMatcher = str => {\n      for (const isMatch of fns) {\n        const state = isMatch(str);\n        if (state) return state;\n      }\n      return false;\n    };\n    return arrayMatcher;\n  }\n\n  const isState = isObject(glob) && glob.tokens && glob.input;\n\n  if (glob === '' || (typeof glob !== 'string' && !isState)) {\n    throw new TypeError('Expected pattern to be a non-empty string');\n  }\n\n  const opts = options || {};\n  const posix = utils.isWindows(options);\n  const regex = isState\n    ? picomatch.compileRe(glob, options)\n    : picomatch.makeRe(glob, options, false, true);\n\n  const state = regex.state;\n  delete regex.state;\n\n  let isIgnored = () => false;\n  if (opts.ignore) {\n    const ignoreOpts = { ...options, ignore: null, onMatch: null, onResult: null };\n    isIgnored = picomatch(opts.ignore, ignoreOpts, returnState);\n  }\n\n  const matcher = (input, returnObject = false) => {\n    const { isMatch, match, output } = picomatch.test(input, regex, options, { glob, posix });\n    const result = { glob, state, regex, posix, input, output, match, isMatch };\n\n    if (typeof opts.onResult === 'function') {\n      opts.onResult(result);\n    }\n\n    if (isMatch === false) {\n      result.isMatch = false;\n      return returnObject ? result : false;\n    }\n\n    if (isIgnored(input)) {\n      if (typeof opts.onIgnore === 'function') {\n        opts.onIgnore(result);\n      }\n      result.isMatch = false;\n      return returnObject ? result : false;\n    }\n\n    if (typeof opts.onMatch === 'function') {\n      opts.onMatch(result);\n    }\n    return returnObject ? result : true;\n  };\n\n  if (returnState) {\n    matcher.state = state;\n  }\n\n  return matcher;\n};\n\n/**\n * Test `input` with the given `regex`. This is used by the main\n * `picomatch()` function to test the input string.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.test(input, regex[, options]);\n *\n * console.log(picomatch.test('foo/bar', /^(?:([^/]*?)\\/([^/]*?))$/));\n * // { isMatch: true, match: [ 'foo/', 'foo', 'bar' ], output: 'foo/bar' }\n * ```\n * @param {String} `input` String to test.\n * @param {RegExp} `regex`\n * @return {Object} Returns an object with matching info.\n * @api public\n */\n\npicomatch.test = (input, regex, options, { glob, posix } = {}) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected input to be a string');\n  }\n\n  if (input === '') {\n    return { isMatch: false, output: '' };\n  }\n\n  const opts = options || {};\n  const format = opts.format || (posix ? utils.toPosixSlashes : null);\n  let match = input === glob;\n  let output = (match && format) ? format(input) : input;\n\n  if (match === false) {\n    output = format ? format(input) : input;\n    match = output === glob;\n  }\n\n  if (match === false || opts.capture === true) {\n    if (opts.matchBase === true || opts.basename === true) {\n      match = picomatch.matchBase(input, regex, options, posix);\n    } else {\n      match = regex.exec(output);\n    }\n  }\n\n  return { isMatch: Boolean(match), match, output };\n};\n\n/**\n * Match the basename of a filepath.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.matchBase(input, glob[, options]);\n * console.log(picomatch.matchBase('foo/bar.js', '*.js'); // true\n * ```\n * @param {String} `input` String to test.\n * @param {RegExp|String} `glob` Glob pattern or regex created by [.makeRe](#makeRe).\n * @return {Boolean}\n * @api public\n */\n\npicomatch.matchBase = (input, glob, options, posix = utils.isWindows(options)) => {\n  const regex = glob instanceof RegExp ? glob : picomatch.makeRe(glob, options);\n  return regex.test(path.basename(input));\n};\n\n/**\n * Returns true if **any** of the given glob `patterns` match the specified `string`.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.isMatch(string, patterns[, options]);\n *\n * console.log(picomatch.isMatch('a.a', ['b.*', '*.a'])); //=> true\n * console.log(picomatch.isMatch('a.a', 'b.*')); //=> false\n * ```\n * @param {String|Array} str The string to test.\n * @param {String|Array} patterns One or more glob patterns to use for matching.\n * @param {Object} [options] See available [options](#options).\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\npicomatch.isMatch = (str, patterns, options) => picomatch(patterns, options)(str);\n\n/**\n * Parse a glob pattern to create the source string for a regular\n * expression.\n *\n * ```js\n * const picomatch = require('picomatch');\n * const result = picomatch.parse(pattern[, options]);\n * ```\n * @param {String} `pattern`\n * @param {Object} `options`\n * @return {Object} Returns an object with useful properties and output to be used as a regex source string.\n * @api public\n */\n\npicomatch.parse = (pattern, options) => {\n  if (Array.isArray(pattern)) return pattern.map(p => picomatch.parse(p, options));\n  return parse(pattern, { ...options, fastpaths: false });\n};\n\n/**\n * Scan a glob pattern to separate the pattern into segments.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.scan(input[, options]);\n *\n * const result = picomatch.scan('!./foo/*.js');\n * console.log(result);\n * { prefix: '!./',\n *   input: '!./foo/*.js',\n *   start: 3,\n *   base: 'foo',\n *   glob: '*.js',\n *   isBrace: false,\n *   isBracket: false,\n *   isGlob: true,\n *   isExtglob: false,\n *   isGlobstar: false,\n *   negated: true }\n * ```\n * @param {String} `input` Glob pattern to scan.\n * @param {Object} `options`\n * @return {Object} Returns an object with\n * @api public\n */\n\npicomatch.scan = (input, options) => scan(input, options);\n\n/**\n * Compile a regular expression from the `state` object returned by the\n * [parse()](#parse) method.\n *\n * @param {Object} `state`\n * @param {Object} `options`\n * @param {Boolean} `returnOutput` Intended for implementors, this argument allows you to return the raw output from the parser.\n * @param {Boolean} `returnState` Adds the state to a `state` property on the returned regex. Useful for implementors and debugging.\n * @return {RegExp}\n * @api public\n */\n\npicomatch.compileRe = (state, options, returnOutput = false, returnState = false) => {\n  if (returnOutput === true) {\n    return state.output;\n  }\n\n  const opts = options || {};\n  const prepend = opts.contains ? '' : '^';\n  const append = opts.contains ? '' : '$';\n\n  let source = `${prepend}(?:${state.output})${append}`;\n  if (state && state.negated === true) {\n    source = `^(?!${source}).*$`;\n  }\n\n  const regex = picomatch.toRegex(source, options);\n  if (returnState === true) {\n    regex.state = state;\n  }\n\n  return regex;\n};\n\n/**\n * Create a regular expression from a parsed glob pattern.\n *\n * ```js\n * const picomatch = require('picomatch');\n * const state = picomatch.parse('*.js');\n * // picomatch.compileRe(state[, options]);\n *\n * console.log(picomatch.compileRe(state));\n * //=> /^(?:(?!\\.)(?=.)[^/]*?\\.js)$/\n * ```\n * @param {String} `state` The object returned from the `.parse` method.\n * @param {Object} `options`\n * @param {Boolean} `returnOutput` Implementors may use this argument to return the compiled output, instead of a regular expression. This is not exposed on the options to prevent end-users from mutating the result.\n * @param {Boolean} `returnState` Implementors may use this argument to return the state from the parsed glob with the returned regular expression.\n * @return {RegExp} Returns a regex created from the given pattern.\n * @api public\n */\n\npicomatch.makeRe = (input, options = {}, returnOutput = false, returnState = false) => {\n  if (!input || typeof input !== 'string') {\n    throw new TypeError('Expected a non-empty string');\n  }\n\n  let parsed = { negated: false, fastpaths: true };\n\n  if (options.fastpaths !== false && (input[0] === '.' || input[0] === '*')) {\n    parsed.output = parse.fastpaths(input, options);\n  }\n\n  if (!parsed.output) {\n    parsed = parse(input, options);\n  }\n\n  return picomatch.compileRe(parsed, options, returnOutput, returnState);\n};\n\n/**\n * Create a regular expression from the given regex source string.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.toRegex(source[, options]);\n *\n * const { output } = picomatch.parse('*.js');\n * console.log(picomatch.toRegex(output));\n * //=> /^(?:(?!\\.)(?=.)[^/]*?\\.js)$/\n * ```\n * @param {String} `source` Regular expression source string.\n * @param {Object} `options`\n * @return {RegExp}\n * @api public\n */\n\npicomatch.toRegex = (source, options) => {\n  try {\n    const opts = options || {};\n    return new RegExp(source, opts.flags || (opts.nocase ? 'i' : ''));\n  } catch (err) {\n    if (options && options.debug === true) throw err;\n    return /$^/;\n  }\n};\n\n/**\n * Picomatch constants.\n * @return {Object}\n */\n\npicomatch.constants = constants;\n\n/**\n * Expose \"picomatch\"\n */\n\nmodule.exports = picomatch;\n", "'use strict';\n\nmodule.exports = require('./lib/picomatch');\n", "window.addEventListener('error', error, true);\nwindow.addEventListener('unhandledrejection', error, true);\n\nlet errored = false;\nexport function error(e) {\n  if (errored) {\n    return;\n  }\n  if (typeof e === 'object') {\n    if (e instanceof PromiseRejectionEvent) {\n      error(e.reason);\n    } else if (e instanceof ErrorEvent) {\n      error(e.error);\n    } else if (e instanceof Error) {\n      window.alert(e.stack);\n    } else {\n      window.alert(JSON.stringify(e));\n    }\n  } else {\n    window.alert(e);\n  }\n  errored = true;\n}\n", "const INNER_HTML = /* html */`\n<div class=\"container\">\n  <label class=\"hidden\" id=\"title\">display-port</label>\n  <label class=\"hidden\" id=\"fps\">00</label>\n  <label class=\"hidden\" id=\"dimension\">0x0</label>\n  <div class=\"content\">\n    <slot id=\"inner\">\n      <canvas>\n        Oh no! Your browser does not support canvas.\n      </canvas>\n    </slot>\n    <slot name=\"overlay\"></slot>\n  </div>\n  <slot name=\"frame\"></slot>\n</div>`;\n\nconst INNER_STYLE = /* css */`\n:host {\n  display: inline-block;\n  color: #555555;\n}\n\n.container {\n  display: flex;\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.content {\n  position: relative;\n  margin: auto;\n  overflow: hidden;\n}\n\n.content > *:not(canvas) {\n  width: 100%;\n  height: 100%;\n}\n\ncanvas {\n  background: #000000;\n  image-rendering: pixelated;\n}\n\nlabel {\n  position: absolute;\n  font-family: monospace;\n  color: currentColor;\n}\n\n#inner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n#title {\n  left: 0.5rem;\n  top: 0.5rem;\n}\n\n#fps {\n  right: 0.5rem;\n  top: 0.5rem;\n}\n\n#dimension {\n  left: 0.5rem;\n  bottom: 0.5rem;\n}\n\n.hidden {\n  display: none;\n}\n\n:host([debug]) .container {\n  outline: 6px dashed rgba(0, 0, 0, 0.1);\n  outline-offset: -4px;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n:host([mode='noscale']) canvas {\n  margin: 0;\n  top: 0;\n  left: 0;\n}\n\n:host([mode='stretch']) canvas,\n:host([mode='scale']) canvas {\n  width: 100%;\n  height: 100%;\n}\n\n:host([mode='fit']),\n:host([mode='scale']),\n:host([mode='center']),\n:host([mode='stretch']),\n:host([mode='fill']) {\n  width: 100%;\n  height: 100%;\n}\n\n:host([full]) {\n  width: 100vw !important;\n  height: 100vh !important;\n}\n\n:host([disabled]) {\n  display: none;\n}\n\nslot {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n::slotted(*) {\n  pointer-events: auto;\n}`;\n\n/**\n * No scaling is applied. The canvas size maintains a\n * 1:1 pixel ratio to the defined display dimensions.\n */\nexport const MODE_NOSCALE = 'noscale';\n\n/**\n * No scaling is applied, but the element fills the\n * entire viewport. The canvas size maintains a 1:1\n * pixel ratio to the defined display dimensions and\n * is centered inside the scaled element.\n */\nexport const MODE_CENTER = 'center';\n\n/**\n * Scales the canvas to fill the entire viewport and\n * maintains the same aspect ratio. This will adjust\n * canvas resolution to fit the viewport dimensions.\n * In other words, the canvas pixel size remains\n * constant, but the number of pixels in the canvas\n * will increase or decrease to compensate. This is\n * the default scaling mode.\n */\nexport const MODE_FIT = 'fit';\n\n/**\n * Scales the canvas to fill the entire viewport and\n * maintains the same aspect ratio and pixel\n * resolution. This will upscale and downscale the\n * pixel size depending on the viewport dimentions\n * in order to preserve the canvas pixel count. In\n * other words, the number of pixels in the canvas\n * remain constant but appear larger or smaller to\n * compensate.\n */\nexport const MODE_SCALE = 'scale';\n\n/**\n * Resizes the canvas to fill the entire viewport.\n * This does not maintain the aspect ratio nor pixel\n * count (adds and removes pixels to fill size). If you\n * care about aspect ratio but not pixel count, consider\n * using 'fit' mode instead.\n */\nexport const MODE_FILL = 'fill';\n\n/**\n * Scales the canvas to fill the entire viewport.\n * This does not maintain the aspect ratio but\n * does preserve pixel count (by stretching the pixel\n * size). If you care about aspect ratio and pixel\n * count, consider using 'scale' mode instead.\n */\nexport const MODE_STRETCH = 'stretch';\n\n/**\n * The default display x dimensions. This is\n * the same as the canvas element default.\n */\nconst DEFAULT_WIDTH = 300;\n/**\n * The default display y dimensions. This is\n * the same as the canvas element default.\n */\nconst DEFAULT_HEIGHT = 150;\n\n/** The default display scaling mode. */\nconst DEFAULT_MODE = MODE_FIT;\n\n/** The default resize timeout */\nconst DELAYED_RESIZE_MILLIS = 200;\n\n/**\n * @typedef {CustomEvent} FrameEvent\n * @property {number} detail.now\n * The current time in milliseconds.\n * @property {number} detail.prevTime\n * The previous frame time in milliseconds.\n * @property {number} detail.deltaTime\n * The time taken between the current and previous\n * frame in milliseconds.\n * @property {HTMLCanvasElement} detail.canvas\n * The canvas element.\n */\n\n/**\n * @typedef {MODE_CENTER|MODE_FIT|MODE_NOSCALE|MODE_SCALE|MODE_FILL|MODE_STRETCH} DisplayScaling\n */\n\n/**\n * A canvas that can scale and stretch with respect to the aspect ratio to fill\n * the viewport size.\n *\n * To start drawing, you should get the canvas context like so:\n *\n * For Canvas2D:\n * ```\n * const display = document.querySelector('display-port');\n * const ctx = display.canvas.getContext('2d');\n * ctx.drawText(0, 0, 'Hello World!');\n * ```\n *\n * For WebGL:\n * ```\n * const display = document.querySelector('display-port');\n * const gl = display.canvas.getContext('webgl');\n * gl.clear(gl.COLOR_BUFFER_BIT);\n * ```\n *\n * Usually, you would want to set the `width` and `height` attributes to define\n * the canvas size and aspect ratio in pixels. You can also change the scaling\n * behavior by setting the `mode` attribute.\n *\n * And for convenience, this element also dispatches a `frame` event every animation\n * frame (60 fps). This is basically the same as calling `requestAnimationFrame()`.\n *\n * NOTE: The viewport size is usually the parent container size. However, in the\n * rare case the element must be nested in a child container, you can define the\n * boolean attribute `full` to force the dimensions to be the actual window size.\n */\nexport class DisplayPort extends HTMLElement {\n\n  /**\n   * @param {object} [opts]\n   * @param {HTMLElement} [opts.root]\n   * @param {string} [opts.id]\n   * @param {DisplayScaling} [opts.mode]\n   * @param {number} [opts.width]\n   * @param {number} [opts.height]\n   * @param {boolean} [opts.debug]\n   */\n  static create(opts = {}) {\n    const {\n      root = document.body,\n      id = undefined,\n      mode = DEFAULT_MODE,\n      width = DEFAULT_WIDTH,\n      height = DEFAULT_HEIGHT,\n      debug = false\n    } = opts || {};\n    let result = new DisplayPort();\n    result.id = id;\n    result.mode = mode;\n    result.width = width;\n    result.height = height;\n    result.debug = debug;\n    root.appendChild(result);\n    return result;\n  }\n\n  static define(customElements = window.customElements) {\n    customElements.define('display-port', this);\n  }\n\n  /** @private */\n  static get [Symbol.for('templateNode')]() {\n    let t = document.createElement('template');\n    t.innerHTML = INNER_HTML;\n    Object.defineProperty(this, Symbol.for('templateNode'), { value: t });\n    return t;\n  }\n\n  /** @private */\n  static get [Symbol.for('styleNode')]() {\n    let t = document.createElement('style');\n    t.innerHTML = INNER_STYLE;\n    Object.defineProperty(this, Symbol.for('styleNode'), { value: t });\n    return t;\n  }\n\n  /**\n   * @protected\n   * Override for web component.\n   */\n  static get observedAttributes() {\n    return [\n      'debug',\n      'disabled',\n      // 'mode',\n      'width',\n      'height',\n      'onframe',\n      // Built-in attributes\n      'id',\n      'class',\n    ];\n  }\n\n  /**\n   * The scaling mode.\n   * - `noscale`: Do not perform scaling.\n   * - `center`: Do not perform scaling but stretch the display to fill the entire\n   * viewport. The unscaled canvas is centered.\n   * - `fit`: Resize resolution to fill the entire viewport and maintains the aspect\n   * ratio. The pixel resolution is changed. This is the default behavior.\n   * - `fill`: Resize resolution to fill the entire viewport but does not maintain\n   * aspect ratio.\n   * - `stretch`: Perform scaling to fill the entire viewport but does not maintain\n   * aspect ratio.\n   * - `scale`: Perform scaling to fill the entire viewport and maintains the\n   * aspect ratio and resolution. The pixel resolution remains constant.\n   * @returns {DisplayScaling} The current scaling mode.\n   */\n  get mode() {\n    return /** @type {DisplayScaling} */ (this.getAttribute('mode'));\n  }\n\n  set mode(value) {\n    this.setAttribute('mode', value);\n  }\n\n  /**\n   * Set to true for debug information.\n   * @returns {boolean}\n   */\n  get debug() {\n    return this._debug;\n  }\n\n  set debug(value) {\n    this.toggleAttribute('debug', value);\n  }\n\n  /**\n   * If disabled, animation frames will not fire.\n   * @returns {boolean}\n   */\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(value) {\n    this.toggleAttribute('disabled', value);\n  }\n\n  /**\n   * The canvas width in pixels. This determines the aspect ratio and canvas buffer size.\n   * @returns {number}\n   */\n  get width() {\n    return this._width;\n  }\n\n  set width(value) {\n    this.setAttribute('width', String(value));\n  }\n\n  /**\n   * The canvas height in pixels. This determines the aspect ratio and canvas buffer size.\n   */\n  get height() {\n    return this._height;\n  }\n\n  set height(value) {\n    this.setAttribute('height', String(value));\n  }\n\n  /** Fired every animation frame. */\n  get onframe() {\n    return this._onframe;\n  }\n\n  set onframe(value) {\n    if (this._onframe) this.removeEventListener('frame', this._onframe);\n    this._onframe = value;\n    if (this._onframe) this.addEventListener('frame', value);\n  }\n\n  constructor() {\n    super();\n    const shadowRoot = this.attachShadow({ mode: 'open' });\n    shadowRoot.appendChild(\n      this.constructor[Symbol.for('templateNode')].content.cloneNode(true)\n    );\n    shadowRoot.appendChild(\n      this.constructor[Symbol.for('styleNode')].cloneNode(true)\n    );\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this._canvasElement = null;\n    /**\n     * @private\n     * @type {HTMLDivElement}\n     */\n    this._contentElement = shadowRoot.querySelector('.content');\n    /**\n     * @private\n     * @type {HTMLSlotElement}\n     */\n    this._innerElement = shadowRoot.querySelector('#inner');\n\n    /** @private */\n    this._titleElement = shadowRoot.querySelector('#title');\n    /** @private */\n    this._fpsElement = shadowRoot.querySelector('#fps');\n    /** @private */\n    this._dimensionElement = shadowRoot.querySelector('#dimension');\n\n    /** @private */\n    this._debug = false;\n    /** @private */\n    this._disabled = false;\n    /** @private */\n    this._width = DEFAULT_WIDTH;\n    /** @private */\n    this._height = DEFAULT_HEIGHT;\n    /** @private */\n    this._onframe = undefined;\n\n    /** @private */\n    this._animationRequestHandle = 0;\n    /** @private */\n    this._prevAnimationFrameTime = 0;\n\n    /** @private */\n    this._resizeTimeoutHandle = 0;\n    /** @private */\n    this._resizeCanvasWidth = 0;\n    /** @private */\n    this._resizeCanvasHeight = 0;\n\n    /** @private */\n    this._frameEvent = new CustomEvent('frame', {\n      composed: true,\n      bubbles: false,\n      detail: {\n        now: 0,\n        prevTime: 0,\n        deltaTime: 0,\n        canvas: this._canvasElement,\n      },\n    });\n    /** @private */\n    this._resizeEvent = new CustomEvent('resize', {\n      composed: true,\n      bubbles: false,\n      detail: {\n        width: 0,\n        height: 0,\n      },\n    });\n\n    /** @private */\n    this.update = this.update.bind(this);\n\n    /** @private */\n    this.onDelayCanvasResize = this.onDelayCanvasResize.bind(this);\n\n    /** @private */\n    this.onSlotChange = this.onSlotChange.bind(this);\n  }\n\n  /** Get the canvas element. */\n  get canvas() {\n    return this._canvasElement;\n  }\n\n  /**\n   * @protected\n   * Override for web component.\n   */\n  connectedCallback() {\n    upgradeProperty(this, 'mode');\n    upgradeProperty(this, 'debug');\n    upgradeProperty(this, 'disabled');\n    upgradeProperty(this, 'width');\n    upgradeProperty(this, 'height');\n    upgradeProperty(this, 'onframe');\n\n    if (!this.hasAttribute('mode')) {\n      this.setAttribute('mode', DEFAULT_MODE);\n    }\n\n    // Allows this element to be focusable\n    if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0');\n    }\n\n    this._innerElement.addEventListener('slotchange', this.onSlotChange);\n    this._canvasElement = this._innerElement.querySelector('canvas');\n    if (this._canvasElement) {\n      this.updateCanvasSize(true);\n      this.resume();\n    }\n  }\n\n  /**\n   * @protected\n   * Override for web component.\n   */\n  disconnectedCallback() {\n    this._innerElement.removeEventListener('slotchange', this.onSlotChange);\n    this.pause();\n  }\n\n  /**\n   * @protected\n   * Override for web component.\n   */\n  attributeChangedCallback(attribute, prev, value) {\n    switch (attribute) {\n      case 'debug':\n        {\n          this._debug = value !== null;\n        }\n        break;\n      case 'disabled':\n        {\n          this._disabled = value !== null;\n        }\n        break;\n      case 'width':\n        {\n          this._width = Number(value);\n        }\n        break;\n      case 'height':\n        {\n          this._height = Number(value);\n        }\n        break;\n      case 'onframe':\n        {\n          this.onframe = new Function(\n            'event',\n            'with(document){with(this){' + value + '}}'\n          ).bind(this);\n        }\n        break;\n    }\n\n    switch (attribute) {\n      case 'disabled':\n        if (value) {\n          this.update(0);\n          this.pause();\n        } else {\n          this.resume();\n        }\n        break;\n      // NOTE: For debugging purposes...\n      case 'id':\n      case 'class':\n        this._titleElement.innerHTML = `display-port${\n          this.className ? '.' + this.className : ''\n        }${this.hasAttribute('id') ? '#' + this.getAttribute('id') : ''}`;\n        break;\n      case 'debug':\n        this._titleElement.classList.toggle('hidden', value);\n        this._fpsElement.classList.toggle('hidden', value);\n        this._dimensionElement.classList.toggle('hidden', value);\n        break;\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} e \n   */\n  onSlotChange(e) {\n    const slot = /** @type {HTMLSlotElement} */ (e.target);\n    let children = slot.assignedElements({ flatten: true });\n    let canvas = /** @type {HTMLCanvasElement} */ (children.find(el => el instanceof HTMLCanvasElement));\n    if (!canvas) {\n      throw new Error('No valid canvas element found for display.');\n    }\n    this._canvasElement = canvas;\n    this.updateCanvasSize(true);\n    this.resume();\n  }\n\n  /**\n   * @param {'2d'|'webgl'|'webgl2'} [contextId]\n   * @param {CanvasRenderingContext2DSettings} [options]\n   */\n  getContext(contextId = '2d', options = undefined) {\n    return this._canvasElement.getContext(contextId, options);\n  }\n\n  /** Pause animation of the display frames. */\n  pause() {\n    window.cancelAnimationFrame(this._animationRequestHandle);\n  }\n\n  /** Resume animation of the display frames. */\n  resume() {\n    this._animationRequestHandle = window.requestAnimationFrame(this.update);\n  }\n\n  /** @private */\n  update(now) {\n    this._animationRequestHandle = window.requestAnimationFrame(this.update);\n    this.updateCanvasSize(false);\n    const deltaTime = now - this._prevAnimationFrameTime;\n    this._prevAnimationFrameTime = now;\n\n    // NOTE: For debugging purposes...\n    if (this._debug) {\n      // Update FPS...\n      const frames =\n        deltaTime <= 0\n          ? '--'\n          : String(Math.round(1000 / deltaTime)).padStart(2, '0');\n      if (this._fpsElement.textContent !== frames) {\n        this._fpsElement.textContent = frames;\n      }\n\n      // Update dimensions...\n      const mode = this.mode;\n      if (mode === MODE_NOSCALE) {\n        let result = `${this._width}x${this._height}`;\n        if (this._dimensionElement.textContent !== result) {\n          this._dimensionElement.textContent = result;\n        }\n      } else {\n        let result = `${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;\n        if (this._dimensionElement.textContent !== result) {\n          this._dimensionElement.textContent = result;\n        }\n      }\n    }\n\n    let event = this._frameEvent;\n    let detail = event.detail;\n    detail.now = now;\n    detail.prevTime = this._prevAnimationFrameTime;\n    detail.deltaTime = deltaTime;\n    this.dispatchEvent(this._frameEvent);\n  }\n\n  /** @private */\n  onDelayCanvasResize() {\n    this._resizeTimeoutHandle = null;\n    this.updateCanvasSize(true);\n  }\n\n  delayCanvasResize(canvasWidth, canvasHeight) {\n    if (\n      canvasWidth !== this._resizeCanvasWidth ||\n      canvasHeight !== this._resizeCanvasHeight\n    ) {\n      // Only call onDelayCanvasResize, if new canvas size actually changed since last time.\n      this._resizeCanvasWidth = canvasWidth;\n      this._resizeCanvasHeight = canvasHeight;\n      if (this._resizeTimeoutHandle) {\n        window.clearTimeout(this._resizeTimeoutHandle);\n      }\n      this._resizeTimeoutHandle = window.setTimeout(\n        this.onDelayCanvasResize,\n        DELAYED_RESIZE_MILLIS\n      );\n    }\n  }\n\n  /** @private */\n  updateCanvasSize(force = true) {\n    const clientRect = this.shadowRoot.host.getBoundingClientRect();\n    const clientWidth = clientRect.width;\n    const clientHeight = clientRect.height;\n\n    let canvas = this._canvasElement;\n    let canvasWidth = this._width;\n    let canvasHeight = this._height;\n\n    const mode = this.mode;\n    if (mode === MODE_STRETCH || mode === MODE_FILL) {\n      canvasWidth = clientWidth;\n      canvasHeight = clientHeight;\n    } else if (mode !== MODE_NOSCALE) {\n      if (\n        clientWidth < canvasWidth ||\n        clientHeight < canvasHeight ||\n        mode === MODE_FIT ||\n        mode == MODE_SCALE\n      ) {\n        let ratioX = clientWidth / canvasWidth;\n        let ratioY = clientHeight / canvasHeight;\n\n        if (ratioX < ratioY) {\n          canvasWidth = clientWidth;\n          canvasHeight = canvasHeight * ratioX;\n        } else {\n          canvasWidth = canvasWidth * ratioY;\n          canvasHeight = clientHeight;\n        }\n      }\n    }\n\n    canvasWidth = Math.floor(canvasWidth);\n    canvasHeight = Math.floor(canvasHeight);\n\n    if (typeof force === 'undefined') {\n      force =\n        canvas.clientWidth !== canvasWidth ||\n        canvas.clientHeight !== canvasHeight;\n    }\n\n    if (!force) {\n      this.delayCanvasResize(canvasWidth, canvasHeight);\n      return;\n    }\n\n    let fontSize =\n      Math.min(canvasWidth / this._width, canvasHeight / this._height) * 0.5;\n    // NOTE: Update the inner container for the default slotted children.\n    // To anchor children outside the canvas, use the slot named 'frame'.\n    this._innerElement.style.fontSize = `font-size: ${fontSize}em`;\n    if (force) {\n      if (mode === MODE_SCALE) {\n        canvas.width = this._width;\n        canvas.height = this._height;\n      } else if (mode !== MODE_STRETCH) {\n        canvas.width = canvasWidth;\n        canvas.height = canvasHeight;\n      }\n      let contentStyle = this._contentElement.style;\n      contentStyle.width = `${canvasWidth}px`;\n      contentStyle.height = `${canvasHeight}px`;\n\n      if (mode === MODE_FIT || mode === MODE_FILL) {\n        this._width = canvasWidth;\n        this._height = canvasHeight;\n      }\n\n      let event = this._resizeEvent;\n      let detail = event.detail;\n      detail.width = canvasWidth;\n      detail.height = canvasHeight;\n      this.dispatchEvent(this._resizeEvent);\n    }\n  }\n}\n\nfunction upgradeProperty(element, propertyName) {\n  if (Object.prototype.hasOwnProperty.call(element, propertyName)) {\n    let value = element[propertyName];\n    delete element[propertyName];\n    element[propertyName] = value;\n  }\n}\n", "const INNER_HTML = /* html */`<div class=\"container\">\n  <div class=\"padding\"></div>\n  <div class=\"innerContainer\">\n    <div class=\"padding\"></div>\n    <slot><canvas>Oh no! Your browser does not support canvas.</canvas></slot>\n    <div class=\"padding\"></div>\n  </div>\n  <div class=\"padding\"></div>\n</div>`;\n\nconst INNER_STYLE = /* css */`\n:host {\n  display: inline-block;\n  flex: 1;\n  --width: 300px;\n  --height: 150px;\n}\n:host([scaling=\"noscale\"]) {\n  width: var(--width);\n  height: var(--height);\n}\n:host([sizing=\"viewport\"]) {\n    position: fixed;\n    top: 0;\n    left: 0;\n}\n.container {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.innerContainer {\n  display: flex;\n  flex-direction: column;\n}\n.padding {\n  flex: 1;\n}`;\n\n/**\n * No scaling is applied. The canvas size maintains a\n * 1:1 pixel ratio to the defined display dimensions.\n */\nconst SCALING_NOSCALE = 'noscale';\n/**\n * Scales the canvas to fill the entire viewport and\n * maintains the same aspect ratio. This will adjust\n * canvas resolution to fit the viewport dimensions.\n * In other words, the canvas pixel size remains\n * constant, but the number of pixels in the canvas\n * will increase or decrease to compensate. This is\n * the default scaling mode.\n */\nconst SCALING_FIT = 'fit';\n/**\n * Scales the canvas to fill the entire viewport and\n * maintains the same aspect ratio and pixel\n * resolution. This will upscale and downscale the\n * pixel size depending on the viewport dimentions\n * in order to preserve the canvas pixel count. In\n * other words, the number of pixels in the canvas\n * remain constant but appear larger or smaller to\n * compensate.\n */\nconst SCALING_SCALE = 'scale';\n/**\n * Resizes the canvas to fill the entire viewport.\n * This does not maintain the aspect ratio nor pixel\n * count (adds and removes pixels to fill size). If you\n * care about aspect ratio but not pixel count, consider\n * using 'fit' mode instead.\n */\nconst SCALING_FILL = 'fill';\n/**\n * Scales the canvas to fill the entire viewport.\n * This does not maintain the aspect ratio but\n * does preserve pixel count (by stretching the pixel\n * size). If you care about aspect ratio and pixel\n * count, consider using 'scale' mode instead.\n */\nconst SCALING_STRETCH = 'stretch';\n\n/**\n * Sizes the canvas width and height.\n */\nconst SIZING_NONE = 'none';\n/**\n * Sizes to 100% of parent container.\n */\nconst SIZING_CONTAINER = 'conatiner';\n/**\n * Sizes to 100% of viewport.\n */\nconst SIZING_VIEWPORT = 'viewport';\n\n/**\n * The default display x dimensions. This is\n * the same as the canvas element default.\n */\nconst DEFAULT_WIDTH = 300;\n/**\n * The default display y dimensions. This is\n * the same as the canvas element default.\n */\nconst DEFAULT_HEIGHT = 150;\n\n/**\n * @typedef {SIZING_NONE|SIZING_CONTAINER|SIZING_VIEWPORT|string} SizingMode\n */\n\n/**\n * @typedef {SCALING_NOSCALE|SCALING_SCALE|SCALING_FILL|SCALING_FIT|SCALING_STRETCH} ScalingMode\n */\n\n/**\n * A canvas wrapper to scale and stretch with respect to the aspect ratio to fill the viewport or container.\n */\nexport class FlexCanvas extends HTMLElement {\n\n    /**\n     * @param {object} [opts]\n     * @param {HTMLElement} [opts.root]\n     * @param {string} [opts.id]\n     * @param {ScalingMode} [opts.scaling]\n     * @param {SizingMode} [opts.sizing]\n     * @param {number} [opts.width]\n     * @param {number} [opts.height]\n     */\n    static create(opts = {}) {\n        const {\n            root = document.body,\n            id = undefined,\n            scaling = SCALING_SCALE,\n            sizing = SIZING_CONTAINER,\n            width = DEFAULT_WIDTH,\n            height = DEFAULT_HEIGHT,\n        } = opts || {};\n        if (!window.customElements.get('flex-canvas')) {\n            window.customElements.define('flex-canvas', FlexCanvas);\n        }\n        let result = new FlexCanvas();\n        result.id = id;\n        result.scaling = scaling;\n        result.sizing = sizing;\n        result.width = width;\n        result.height = height;\n        root.appendChild(result);\n        return result;\n    }\n\n    static define(customElements = window.customElements) {\n        customElements.define('flex-canvas', this);\n    }\n\n    /** @private */\n    static get [Symbol.for('templateNode')]() {\n        let t = document.createElement('template');\n        t.innerHTML = INNER_HTML;\n        Object.defineProperty(this, Symbol.for('templateNode'), { value: t });\n        return t;\n    }\n\n    /** @private */\n    static get [Symbol.for('styleNode')]() {\n        let t = document.createElement('style');\n        t.innerHTML = INNER_STYLE;\n        Object.defineProperty(this, Symbol.for('styleNode'), { value: t });\n        return t;\n    }\n\n    /**\n     * @protected\n     * Override for web component.\n     */\n    static get observedAttributes() {\n        return [\n            'sizing',\n            'width',\n            'height',\n            'resize-delay',\n        ];\n    }\n\n    /**\n     * The scaling mode.\n     * - `noscale`: Do not perform scaling.\n     * - `fit`: Resize resolution to fill the entire viewport and maintains the aspect\n     * ratio. The pixel resolution is changed. This is the default behavior.\n     * - `fill`: Resize resolution to fill the entire viewport but does not maintain\n     * aspect ratio.\n     * - `stretch`: Perform scaling to fill the entire viewport but does not maintain\n     * aspect ratio.\n     * - `scale`: Perform scaling to fill the entire viewport and maintains the\n     * aspect ratio and resolution. The pixel resolution remains constant.\n     */\n    get scaling() {\n        return /** @type {ScalingMode} */ (this.getAttribute('scaling'));\n    }\n\n    set scaling(value) {\n        this.setAttribute('scaling', value);\n    }\n\n    /**\n     * The sizing mode.\n     * - `none`: Sizes to canvas.\n     * - `container`: Sizes to 100% of parent container.\n     * - `viewport`: Sizes to 100% of viewport.\n     */\n    get sizing() {\n        return /** @type {SizingMode} */ (this._sizing);\n    }\n\n    set sizing(value) {\n        this.setAttribute('sizing', String(value));\n    }\n\n    /**\n     * @returns {number}\n     */\n    get resizeDelay() {\n        return this._resizeDelay;\n    }\n\n    set resizeDelay(value) {\n        this.setAttribute('resize-delay', String(value));\n    }\n\n    /**\n     * The canvas width in pixels. This determines the aspect ratio and canvas buffer size.\n     * @returns {number}\n     */\n    get width() {\n        return this._width;\n    }\n\n    set width(value) {\n        this.setAttribute('width', String(value));\n    }\n\n    /**\n     * The canvas height in pixels. This determines the aspect ratio and canvas buffer size.\n     */\n    get height() {\n        return this._height;\n    }\n\n    set height(value) {\n        this.setAttribute('height', String(value));\n    }\n\n    get canvas() {\n        return this.canvasElement;\n    }\n\n    constructor() {\n        super();\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        shadowRoot.appendChild(this.constructor[Symbol.for('templateNode')].content.cloneNode(true));\n        shadowRoot.appendChild(this.constructor[Symbol.for('styleNode')].cloneNode(true));\n\n        /** @private */\n        this._sizing = 'none';\n        /** @private */\n        this._width = DEFAULT_WIDTH;\n        /** @private */\n        this._height = DEFAULT_HEIGHT;\n        /** @private */\n        this._resizeDelay = 0;\n\n        /** @private */\n        this.animationFrameHandle = 0;\n\n        /** @private */\n        this.resizeTimeoutHandle = 0;\n        /** @private */\n        this.resizeCanvasWidth = 0;\n        /** @private */\n        this.resizeCanvasHeight = 0;\n\n        /** @private */\n        this.canvasSlotElement = shadowRoot.querySelector('slot');\n        /** @private */\n        this.canvasElement = null;\n\n        /** @private */\n        this.onResize = this.onResize.bind(this);\n        /** @private */\n        this.onAnimationFrame = this.onAnimationFrame.bind(this);\n        /** @private */\n        this.onSlotChange = this.onSlotChange.bind(this);\n    }\n\n    /**\n     * @protected\n     * Override for web component.\n     */\n    connectedCallback() {\n        upgradeProperty(this, 'scaling');\n        upgradeProperty(this, 'sizing');\n        upgradeProperty(this, 'width');\n        upgradeProperty(this, 'height');\n        upgradeProperty(this, 'resize-delay');\n\n        // Scaling mode\n        if (!this.hasAttribute('scaling')) {\n            this.setAttribute('scaling', SCALING_SCALE);\n        }\n\n        // Allows this element to be focusable\n        if (!this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n\n        this.animationFrameHandle = requestAnimationFrame(this.onAnimationFrame);\n        this.canvasSlotElement.addEventListener('slotchange', this.onSlotChange);\n        if (!this.canvasElement) {\n            this.setCanvasElement(this.canvasSlotElement.querySelector('canvas'));\n        }\n    }\n\n    /**\n     * @protected\n     * Override for web component.\n     */\n    disconnectedCallback() {\n        cancelAnimationFrame(this.animationFrameHandle);\n        this.animationFrameHandle = null;\n        this.canvasSlotElement.removeEventListener('slotchange', this.onSlotChange);\n    }\n\n    /**\n     * @protected\n     * Override for web component.\n     */\n    attributeChangedCallback(attribute, prev, value) {\n        switch (attribute) {\n            case 'sizing':\n                {\n                    this._sizing = String(value);\n                    switch (this._sizing) {\n                        case 'none':\n                            this.style.removeProperty('width');\n                            this.style.removeProperty('height');\n                            break;\n                        case 'container':\n                            this.style.setProperty('width', '100%');\n                            this.style.setProperty('height', '100%');\n                            break;\n                        case 'viewport':\n                            this.style.setProperty('width', '100vw');\n                            this.style.setProperty('height', '100vh');\n                            break;\n                        default:\n                            let [x, y] = this._sizing.split(' ');\n                            if (x && y) {\n                                this.style.setProperty('width', x);\n                                this.style.setProperty('height', y);\n                            }\n                            break;\n                    }\n                }\n                break;\n            case 'width':\n                this._width = Number(value);\n                if (this.canvasElement) {\n                    this.canvasElement.width = this._width;\n                }\n                break;\n            case 'height':\n                this._height = Number(value);\n                if (this.canvasElement) {\n                    this.canvasElement.height = this._height;\n                }\n                break;\n            case 'resize-delay':\n                this._resizeDelay = Number(value);\n                break;\n        }\n    }\n\n    /**\n     * @private\n     * @param {number} now \n     */\n    onAnimationFrame(now) {\n        this.animationFrameHandle = requestAnimationFrame(this.onAnimationFrame);\n\n        if (this.clientWidth === this.resizeCanvasWidth && this.clientHeight === this.resizeCanvasHeight) {\n            // Only call onDebounceResize() if new canvas size actually changed since last time.\n            return;\n        }\n\n        this.resizeCanvasWidth = this.clientWidth;\n        this.resizeCanvasHeight = this.clientHeight;\n\n        if (this._resizeDelay > 0) {\n            if (!this.resizeTimeoutHandle) {\n                this.resizeTimeoutHandle = window.setTimeout(this.onResize, this._resizeDelay);\n            }\n        } else {\n            this.onResize();\n        }\n    }\n\n    /** @private */\n    onResize() {\n        window.clearTimeout(this.resizeTimeoutHandle);\n        this.resizeTimeoutHandle = null;\n\n        const canvas = this.canvasElement;\n        if (!canvas) {\n            return;\n        }\n\n        const scaling = this.scaling;\n        const clientRect = this.getBoundingClientRect();\n        const clientWidth = clientRect.width;\n        const clientHeight = clientRect.height;\n\n        let canvasWidth = this._width;\n        let canvasHeight = this._height;\n        let ratioX = clientWidth / canvasWidth;\n        let ratioY = clientHeight / canvasHeight;\n\n        // noscale\n        if (scaling === 'noscale') {\n            this.style.setProperty('--width', `${canvasWidth}px`);\n            this.style.setProperty('--height', `${canvasHeight}px`);\n        }\n\n        // scale\n        if (scaling === 'scale') {\n            if (ratioX < ratioY) {\n                canvas.style.setProperty('width', `${Math.floor(clientWidth)}px`);\n                canvas.style.setProperty('height', `${Math.floor(canvasHeight * ratioX)}px`);\n            } else {\n                canvas.style.setProperty('width', `${Math.floor(canvasWidth * ratioY)}px`);\n                canvas.style.setProperty('height', `${Math.floor(clientHeight)}px`);\n            }\n        }\n\n        // stretch\n        if (scaling === 'stretch') {\n            canvas.style.setProperty('width', `${Math.floor(clientWidth)}px`);\n            canvas.style.setProperty('height', `${Math.floor(clientHeight)}px`);\n        }\n\n        // fit\n        if (scaling === 'fit') {\n            if (ratioX < ratioY) {\n                canvasWidth = Math.floor(clientWidth);\n                canvasHeight = Math.floor(canvasHeight * ratioX);\n                canvas.style.setProperty('width', `${canvasWidth}px`);\n                canvas.style.setProperty('height', `${canvasHeight}px`);\n            } else {\n                canvasWidth = Math.floor(canvasWidth * ratioY);\n                canvasHeight = Math.floor(clientHeight);\n                canvas.style.setProperty('width', `${canvasWidth}px`);\n                canvas.style.setProperty('height', `${canvasHeight}px`);\n            }\n            if (canvas.width !== canvasWidth) {\n                canvas.width = canvasWidth;\n            }\n            if (canvas.height !== canvasHeight) {\n                canvas.height = canvasHeight;\n            }\n        }\n\n        // fill\n        if (scaling === 'fill') {\n            if (ratioX < ratioY) {\n                canvasWidth = Math.floor(clientWidth);\n                canvasHeight = Math.floor(clientHeight);\n                canvas.style.setProperty('width', `${canvasWidth}px`);\n                canvas.style.setProperty('height', `${canvasHeight}px`);\n            } else {\n                canvasWidth = Math.floor(clientWidth);\n                canvasHeight = Math.floor(clientHeight);\n                canvas.style.setProperty('width', `${canvasWidth}px`);\n                canvas.style.setProperty('height', `${canvasHeight}px`);\n            }\n            if (canvas.width !== canvasWidth) {\n                canvas.width = canvasWidth;\n            }\n            if (canvas.height !== canvasHeight) {\n                canvas.height = canvasHeight;\n            }\n        }\n    }\n\n    /**\n     * @private\n     * @param {Event} e \n     */\n    onSlotChange(e) {\n        const slot = /** @type {HTMLSlotElement} */ (e.target);\n        let children = slot.assignedElements({ flatten: true });\n        let canvas = /** @type {HTMLCanvasElement} */ (children.find(el => el instanceof HTMLCanvasElement));\n        if (canvas) {\n            this.setCanvasElement(canvas);\n        }\n    }\n\n    /**\n     * @private\n     * @param {HTMLCanvasElement} canvas \n     */\n    setCanvasElement(canvas) {\n        canvas.width = this._width;\n        canvas.height = this._height;\n        canvas.style.imageRendering = 'pixelated';\n        this.canvasElement = canvas;\n    }\n\n    /**\n     * @param {'2d'|'webgl'|'webgl2'} [contextId]\n     * @param {CanvasRenderingContext2DSettings} [options]\n     */\n    getContext(contextId = '2d', options = undefined) {\n        return this.canvasElement.getContext(contextId, options);\n    }\n}\n\nfunction upgradeProperty(element, propertyName) {\n    if (Object.prototype.hasOwnProperty.call(element, propertyName)) {\n        let value = element[propertyName];\n        delete element[propertyName];\n        element[propertyName] = value;\n    }\n}\n", "/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};", "import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();", "import { mat4, quat, vec3, vec4 } from 'gl-matrix';\n\nconst UP = vec3.fromValues(0, 1, 0);\n\nexport function panTo(viewMatrix, x, y, z = 0, dt = 1) {\n  let position = vec3.create();\n  mat4.getTranslation(position, viewMatrix);\n  let translation = vec3.fromValues(\n    (x - position[0]) * dt,\n    (y - position[1]) * dt,\n    (z - position[2]) * dt\n  );\n  mat4.translate(viewMatrix, viewMatrix, translation);\n}\n\nexport function lookAt(viewMatrix, x, y, z = 0, dt = 1) {\n  let position = vec3.create();\n  let rotation = quat.create();\n  mat4.getTranslation(position, viewMatrix);\n  mat4.getRotation(rotation, viewMatrix);\n  let target = vec3.fromValues(x, y, z);\n\n  mat4.lookAt(viewMatrix, position, target, UP);\n\n  let targetRotation = quat.create();\n  mat4.getRotation(targetRotation, viewMatrix);\n  quat.slerp(rotation, rotation, targetRotation, dt);\n\n  mat4.fromRotationTranslation(viewMatrix, rotation, position);\n}\n\n/**\n * Gets a directional ray in the world space from the given normalized\n * screen coordinates and camera matrices.\n *\n * NOTE: In addition to some scaling, the y component from a pointer's\n * position usually has to be flipped to match the normalized screen\n * coordinate space, which assumes a range of [-1, 1] for both x and y,\n * where (0, 0) is the center and (-1, -1) is the bottom-left of the\n * screen.\n *\n * ### Typical Device Screen Coordinate Space:\n * ```\n * (0,0)------------(w,0)\n *    |               |\n *    |   (w/2,h/2)   |\n *    |               |\n * (0,w)------------(w,h)\n * ```\n *\n * ### Normalized Screen Coordinate Space:\n * ```\n * (-1,+1)---------(+1,+1)\n *    |               |\n *    |     (0,0)     |\n *    |               |\n * (-1,-1)---------(+1,-1)\n * ```\n *\n * ### Example Conversion from Device to Normalized:\n * ```\n * let normalizedScreenX = (canvasClientX / canvasWidth) * 2 - 1;\n * let normalizedScreenY = 1 - (canvasClientY / canvasHeight) * 2;\n * ```\n *\n * @param {vec3} out The output vector.\n * @param {number} normalizedScreenCoordX The X screen coordinate normalized to [-1, 1], where -1 is the left side of the screen.\n * @param {number} normalizedScreenCoordY The Y screen coordinate normalized to [-1, 1], where -1 is the bottom side of the screen.\n * @param {mat4} projectionMatrix The projection matrix of the world camera.\n * @param {mat4} viewMatrix The view matrix of the world camera.\n * @param {boolean} [normalized=false] Whether to normalize the result. Usually true for non-orthogonal projections.\n * @returns {vec3} The ray direction in the world space. By default, this is not normalized.\n */\nexport function screenToWorldRay(\n  out,\n  normalizedScreenCoordX,\n  normalizedScreenCoordY,\n  projectionMatrix,\n  viewMatrix,\n  normalized = false\n) {\n  // https://antongerdelan.net/opengl/raycasting.html\n  // To homogeneous clip coords\n  let v = vec4.fromValues(\n    normalizedScreenCoordX,\n    normalizedScreenCoordY,\n    -1,\n    1\n  );\n  // To camera coords\n  let m = mat4.create();\n  mat4.invert(m, projectionMatrix);\n  vec4.transformMat4(v, v, m);\n  v[2] = -1;\n  v[3] = 0;\n  // To world coords\n  mat4.invert(m, viewMatrix);\n  vec4.transformMat4(v, v, m);\n  out[0] = v[0];\n  out[1] = v[1];\n  out[2] = v[2];\n  // Normalized as directional ray\n  if (normalized) {\n    vec3.normalize(out, out);\n  }\n  return out;\n}\n", "export class Camera {\n  constructor(projectionMatrix, viewMatrix) {\n    this.projectionMatrix = projectionMatrix;\n    this.viewMatrix = viewMatrix;\n  }\n\n  /**\n   * @abstract\n   * @param {number} [viewportWidth]\n   * @param {number} [viewportHeight]\n   * @returns {Camera}\n   */\n  // eslint-disable-next-line no-unused-vars\n  resize(viewportWidth = undefined, viewportHeight = undefined) {\n    return this;\n  }\n}\n", "import { mat4 } from 'gl-matrix';\nimport { Camera } from './Camera.js';\n\nconst DEFAULT_FOVY = Math.PI / 3;\n\nexport class PerspectiveCamera extends Camera {\n  constructor(fieldOfView = DEFAULT_FOVY, near = 0.1, far = 1000) {\n    super(mat4.create(), mat4.create());\n\n    this.fieldOfView = Number(fieldOfView);\n    this.clippingPlane = {\n      near: Number(near),\n      far: Number(far),\n    };\n  }\n\n  /** @override */\n  resize(viewportWidth = undefined, viewportHeight = undefined) {\n    const aspectRatio =\n      typeof viewportWidth === 'undefined' ? 1 : viewportWidth / viewportHeight;\n    const { near, far } = this.clippingPlane;\n    mat4.perspective(\n      this.projectionMatrix,\n      this.fieldOfView,\n      aspectRatio,\n      near,\n      far\n    );\n    return this;\n  }\n}\n", "import { mat4 } from 'gl-matrix';\nimport { Camera } from './Camera.js';\n\nexport class OrthographicCamera extends Camera {\n  /**\n   * @param {number} [left]\n   * @param {number} [top]\n   * @param {number} [right]\n   * @param {number} [bottom]\n   * @param {number} [near]\n   * @param {number} [far]\n   */\n  constructor(\n    left = undefined,\n    top = undefined,\n    right = undefined,\n    bottom = undefined,\n    near = -1000,\n    far = 1000\n  ) {\n    super(mat4.create(), mat4.create());\n\n    this.orthoBounds = {\n      left: typeof left === 'undefined' ? undefined : Number(left),\n      top: typeof top === 'undefined' ? undefined : Number(top),\n      right: typeof right === 'undefined' ? undefined : Number(right),\n      bottom: typeof bottom === 'undefined' ? undefined : Number(bottom),\n    };\n    this.clippingPlane = {\n      near: Number(near),\n      far: Number(far),\n    };\n  }\n\n  /**\n   * If both the bounds and viewport dimensions are defined, the orthographic\n   * projection will be set the defined bounds adjusted with respect to\n   * the aspect ratio. This is usually the desired behavior.\n   *\n   * If the bounds are `undefined`, the orthographic projection will\n   * be set to the viewport dimensions. This is useful for pixel-perfect\n   * projections.\n   *\n   * If viewport dimensions are `undefined`, the orthographic projection\n   * will only use the defined bounds. This is useful if you are already\n   * performing your own calculations for the bounds or desire a static\n   * projection.\n   *\n   * @override\n   * @param {number} [viewportWidth]\n   * @param {number} [viewportHeight]\n   */\n  resize(viewportWidth = undefined, viewportHeight = undefined) {\n    const { near, far } = this.clippingPlane;\n    const { left, top, right, bottom } = this.orthoBounds;\n\n    let projectionMatrix = this.projectionMatrix;\n    let hasViewport = typeof viewportWidth !== 'undefined';\n    let hasBounds = typeof left !== 'undefined';\n\n    if (hasViewport) {\n      if (hasBounds) {\n        // Use the defined bounds with respect to the viewport aspect ratio\n        const aspectRatio = viewportWidth / viewportHeight;\n        mat4.ortho(\n          projectionMatrix,\n          left * aspectRatio,\n          right * aspectRatio,\n          bottom,\n          top,\n          near,\n          far\n        );\n      } else {\n        // Use the viewport dimensions as bounds\n        mat4.ortho(\n          projectionMatrix,\n          0,\n          viewportWidth,\n          viewportHeight,\n          0,\n          near,\n          far\n        );\n      }\n    } else {\n      if (hasBounds) {\n        // Use the defined bounds as-is\n        mat4.ortho(projectionMatrix, left, right, bottom, top, near, far);\n      } else {\n        // Use default bounds (since nothing else exists)\n        mat4.ortho(projectionMatrix, -1, 1, 1, -1, -1, 1);\n      }\n    }\n    return this;\n  }\n}\n", "import { vec3, mat4 } from 'gl-matrix';\n\nconst TO_RAD_FACTOR = Math.PI / 180;\n\n/**\n * A camera controller that behaves like a traditional first person camera.\n * Pitch is restricted to prevent gimbal lock and roll is ignored.\n *\n * NOTE: Don't forget to lock your pointer, i.e. `canvas.requestPointerLock()`.\n */\nexport class FirstPersonCameraController {\n  constructor(opts = { locky: false }) {\n    this.locky = opts.locky;\n\n    this.position = vec3.create();\n    this.forward = vec3.fromValues(0, 0, -1);\n    this.right = vec3.fromValues(1, 0, 0);\n    this.up = vec3.fromValues(0, 1, 0);\n\n    this.forwardAmount = 0;\n    this.rightAmount = 0;\n    this.upAmount = 0;\n\n    this.pitch = 0;\n    this.yaw = -90;\n  }\n\n  look(dx, dy, dt = 1) {\n    // NOTE: Increase sensitivity to relatively match movement.\n    dt *= 1000;\n    this.pitch = Math.min(89.9, Math.max(-89.9, this.pitch + dy * dt));\n    this.yaw = (this.yaw + dx * dt) % 360;\n    return this;\n  }\n\n  move(forward, right = 0, up = 0, dt = 1) {\n    this.forwardAmount += forward * dt;\n    this.rightAmount += right * dt;\n    this.upAmount += up * dt;\n    return this;\n  }\n\n  apply(viewMatrix) {\n    let {\n      position,\n      forward,\n      right,\n      up,\n      forwardAmount,\n      rightAmount,\n      upAmount,\n      pitch,\n      yaw,\n    } = this;\n\n    // Calculate forward and right vectors\n    let rady = yaw * TO_RAD_FACTOR;\n    let radp = pitch * TO_RAD_FACTOR;\n    let cosy = Math.cos(rady);\n    let cosp = Math.cos(radp);\n    let siny = Math.sin(rady);\n    let sinp = Math.sin(radp);\n    let dx = cosy * cosp;\n    let dy = sinp;\n    let dz = siny * cosp;\n\n    // Set forward for move vector\n    vec3.normalize(forward, vec3.set(forward, dx, this.locky ? 0 : dy, dz));\n    vec3.normalize(right, vec3.cross(right, forward, up));\n\n    let move = vec3.create();\n    // Move forward\n    vec3.scale(move, forward, forwardAmount);\n    vec3.add(position, position, move);\n    // Move right\n    vec3.scale(move, right, rightAmount);\n    vec3.add(position, position, move);\n    // Move up\n    vec3.scale(move, up, upAmount);\n    vec3.add(position, position, move);\n    // Reset movement\n    this.forwardAmount = 0;\n    this.rightAmount = 0;\n    this.upAmount = 0;\n\n    // Reset forward for look vector\n    if (this.locky) vec3.set(forward, dx, dy, dz);\n\n    let target = vec3.add(move, position, forward);\n    mat4.lookAt(viewMatrix, position, target, up);\n    return viewMatrix;\n  }\n}\n", "const MAX_DEPTH_LEVEL = 100;\n\n/**\n * @typedef {number} SceneNode\n *\n * @callback WalkCallback Called for each node, before traversing its children.\n * @param {SceneNode} sceneNode The current scene node.\n * @param {SceneGraph} sceneGraph The current scene graph.\n * @returns {WalkBackCallback|boolean|void} If false, the walk will skip\n * the current node's children and all of its descendents. If a function,\n * it will be called after traversing down all of its children.\n *\n * @callback WalkBackCallback Called if returned by {@link WalkCallback}, after\n * traversing the current node's children.\n * @param {SceneNode} sceneNode The current scene node.\n * @param {SceneGraph} sceneGraph The current scene graph.\n *\n * @callback WalkChildrenCallback Called for each level of children, before\n * traversing them. This is usually used to determine visit order.\n * @param {Array<SceneNode>} childNodes A list of child nodes to be visited.\n * @param {SceneNode} parentNode The current parent node of these children.\n * @param {SceneGraph} sceneGraph The current scene graph.\n * @returns {Array<SceneNode>} The list of children to traverse for this parent.\n */\n\n/**\n * @typedef {ReturnType<create>} SceneGraph\n */\n\nexport function create() {\n    return {\n        /** @type {Array<SceneNode>} */\n        roots: [],\n        /** @type {Record<string, SceneNode>} */\n        parents: {},\n        /** @type {Record<string, Array<SceneNode>>} */\n        children: {},\n    };\n}\n\n/**\n * @param {SceneGraph} a \n */\nexport function clone(a) {\n    return {\n        roots: a.roots.slice(),\n        parents: {\n            ...a.parents,\n        },\n        children: Object.fromEntries(Object.entries(a.children)\n            .map(([k, v]) => [k, v.slice()])),\n    };\n}\n\n/**\n * @param {SceneGraph} out \n * @param {SceneNode} node \n * @param {SceneNode} parentNode \n */\nexport function add(out, node, parentNode = 0) {\n    attach(out, node, parentNode);\n}\n\n/**\n * @param {SceneGraph} graph \n * @param {SceneNode} node \n */\nexport function has(graph, node) {\n    return node in graph.parents;\n}\n\n/**\n * @param {SceneGraph} out \n * @param {SceneNode} childNode \n * @param {SceneNode} parentNode \n */\nexport function parent(out, childNode, parentNode) {\n    detach(out, childNode, getParent(out, childNode));\n    attach(out, childNode, parentNode);\n}\n\n/**\n * @param {SceneGraph} out \n * @param {SceneNode} targetNode \n */\nexport function prune(out, targetNode) {\n    if (!(targetNode in out.parents)) {\n        throw new Error('Cannot delete non-existant scene node for scene graph.');\n    }\n    let parentNode = getParent(out, targetNode);\n    detach(out, targetNode, parentNode);\n    walkImpl(out, targetNode, 0, walkDeleteCallback);\n}\n\n/**\n * @param {SceneGraph} out \n * @param {SceneNode} targetNode \n * @param {SceneNode} replacementNode \n */\nexport function replace(out, targetNode, replacementNode) {\n    let parentNode = getParent(out, targetNode);\n    let grandChildren = getChildren(out, targetNode).slice();\n\n    // Remove the target node from graph\n    detach(out, targetNode, parentNode);\n\n    // Begin grafting the grandchildren by removing them...\n    clearChildren(out, targetNode);\n\n    if (replacementNode) {\n      // Reattach all grandchildren to new replacement node.\n      let replacementParentId = getParent(out, replacementNode);\n      let replacementChildren = getChildren(out, replacementNode);\n\n      // Remove replacement node from previous parent\n      detach(this, replacementNode, replacementParentId);\n\n      // ...and graft them back.\n      replacementChildren.push(...grandChildren);\n\n      // And reattach target parent to new child.\n      attach(this, replacementNode, parentNode);\n    } else {\n      // Reattach all grandchildren to target parent...\n      if (parentNode) {\n        //...as regular children.\n        let parentChildren = getChildren(out, parentNode);\n        parentChildren.push(...grandChildren);\n      } else {\n        //...as root children.\n        getRoots(out).push(...grandChildren);\n      }\n    }\n\n    // ...and repair their parent relations.\n    for (let childNode of grandChildren) {\n        setParent(out, childNode, parentNode);\n    }\n}\n\n/**\n * Walks through every child node in the graph.\n *\n * @param {WalkCallback} callback The function called for each node\n * in the graph, in ordered traversal from parent to child.\n * @param {object} [opts] Any additional options.\n * @param {SceneNode|Array<SceneNode>} [opts.from] The parent node to\n * start walking from, inclusive. By default, it will start from the root\n * nodes.\n * @param {WalkChildrenCallback} [opts.childFilter] The function called before\n * walking through the children. This is usually used to determine the\n * visiting order.\n */\nexport function walk(graph, callback, opts = undefined) {\n    const { from = undefined, childFilter = undefined } = opts || {};\n\n    let fromNodes;\n    if (!from) fromNodes = getRoots(graph);\n    else if (!Array.isArray(from)) fromNodes = [from];\n    else fromNodes = from;\n\n    if (childFilter) fromNodes = childFilter(fromNodes, 0, this);\n    for (let fromNode of fromNodes) {\n        walkImpl(graph, fromNode, 0, callback, childFilter);\n    }\n}\n\n/**\n * @param {SceneGraph} graph\n */\nexport function getRoots(graph) {\n    return graph.roots;\n}\n\n/**\n * @param {SceneGraph} graph \n * @param {SceneNode} node\n */\nexport function getParent(graph, node) {\n    return graph.parents[node];\n}\n\n/**\n * @param {SceneGraph} graph \n * @param {SceneNode} node \n * @param {SceneNode} parentNode \n */\nfunction setParent(graph, node, parentNode) {\n    graph.parents[node] = parentNode;\n}\n\n/**\n * @param {SceneGraph} graph\n * @param {SceneNode} node\n */\nexport function getChildren(graph, node) {\n    if (node in graph.children) {\n        return graph.children[node];\n    } else {\n        let result = [];\n        graph.children[node] = result;\n        return result;\n    }\n}\n\n/**\n * @param {SceneGraph} out \n * @param {SceneNode} node\n */\nfunction clearChildren(out, node) {\n    if (node in out) {\n        out.children[node].length = 0;\n        delete out.children[node];\n    }\n}\n\n/**\n * Attaches a child node to a parent in the scene graph.\n * If no parentNode, then it will attach as a root node.\n *\n * @param {SceneGraph} out The scene graph to attach in.\n * @param {number} childNode The child node to attach from.\n * @param {number} parentNode The parent node to attach to. Can be 0 for null.\n */\nfunction attach(out, childNode, parentNode) {\n    if (parentNode) {\n        // Has new parent; attach to parent. It is now in the graph.\n        getChildren(out, parentNode).push(childNode);\n        setParent(out, childNode, parentNode);\n    } else {\n        // No parent; move to root. It is now in the graph.\n        getRoots(out).push(childNode);\n        setParent(out, childNode, 0);\n    }\n}\n\n/**\n * Detaches a child node from its parent in the scene graph.\n * If has no parentNode, then it will detach as a root node.\n *\n * @param {SceneGraph} out The scene graph attached to.\n * @param {number} childNode The child node to detach.\n * @param {number} parentNode The parent node attached to. Could be 0 for none.\n */\nfunction detach(out, childNode, parentNode) {\n    if (parentNode) {\n        // Has parent; detach from parent. It is now a free node.\n        let children = getChildren(out, parentNode);\n        let childIndex = children.indexOf(childNode);\n        children.splice(childIndex, 1);\n    } else {\n        // No parent; remove from root. It is now a free node.\n        let roots = getRoots(out);\n        let rootIndex = roots.indexOf(childNode);\n        roots.splice(rootIndex, 1);\n    }\n    setParent(out, childNode, 0);\n}\n\n/**\n * Walk down from the parent and through all its descendents.\n *\n * @param {SceneGraph} graph The scene graph containing the nodes to be visited.\n * @param {SceneNode} parentNode The parent node to start walking from.\n * @param {number} level The current call depth level. This is used to limit the call stack.\n * @param {WalkCallback} nodeCallback The function called on each visited node.\n * @param {WalkChildrenCallback} [filterCallback] The function called before\n * walking through the children. This is usually used to determine the visiting order.\n */\nfunction walkImpl(\n    graph,\n    parentNode,\n    level,\n    nodeCallback,\n    filterCallback = undefined) {\n    if (level >= MAX_DEPTH_LEVEL) return;\n\n    let result = nodeCallback(parentNode, graph);\n    if (result === false) return;\n\n    let children = getChildren(graph, parentNode);\n    let nextNodes = filterCallback\n        ? filterCallback(children, parentNode, graph)\n        : children;\n\n    for (let childNode of nextNodes) {\n        walkImpl(graph, childNode, level + 1, nodeCallback, filterCallback);\n    }\n\n    if (typeof result === 'function') {\n        result(parentNode, graph);\n    }\n}\n\nfunction walkDeleteCallback(sceneNode, out) {\n    delete out.parents[sceneNode];\n    delete out.children[sceneNode];\n}\n", "/**\n * @template T\n */\nexport class ComponentClass {\n    /**\n     * @param {string} name \n     * @param {() => T} [newCallback]\n     * @param {(component: T) => void} [deleteCallback] \n     */\n    constructor(name, newCallback = () => null, deleteCallback = () => {}) {\n        this.name = name;\n        this.new = newCallback;\n        this.delete = deleteCallback;\n    }\n}\n", "import { ComponentClass } from './ComponentClass';\n\n/** @typedef {import('./EntityManager').EntityManager} EntityManager */\n/** @typedef {import('./EntityManager').EntityId} EntityId */\n/** @typedef {import('./Query').Query} Query */\n\nexport class QueryManager {\n\n    constructor() {\n        /**\n         * @protected\n         * @type {Record<string, Array<EntityId>>}\n         */\n        this.cachedResults = {};\n        /**\n         * @private\n         * @type {Record<string, Query>}\n         */\n        this.keyQueryMapping = {};\n\n        this.onEntityComponentChanged = this.onEntityComponentChanged.bind(this);\n    }\n\n    /**\n     * @param {EntityManager} entityManager\n     * @param {EntityId} entityId\n     * @param {ComponentClass<?>} added\n     * @param {ComponentClass<?>} removed\n     * @param {boolean} dead\n     */\n    onEntityComponentChanged(entityManager, entityId, added, removed, dead) {\n        for(let query of Object.values(this.keyQueryMapping)) {\n            let entities = this.cachedResults[query.key];\n            if (dead) {\n                let i = entities.indexOf(entityId);\n                if (i >= 0) {\n                    entities.splice(i, 1);\n                }\n            } else if (added) {\n                if (query.hasSelector(Not(added))) {\n                    let i = entities.indexOf(entityId);\n                    if (i >= 0) {\n                        entities.splice(i, 1);\n                    }\n                } else if (query.hasSelector(added) && this.test(entityManager, entityId, query.selectors)) {\n                    let i = entities.indexOf(entityId);\n                    if (i < 0) {\n                        entities.push(entityId);\n                    }\n                }\n            } else if (removed) {\n                if (query.hasSelector(Not(removed)) && this.test(entityManager, entityId, query.selectors)) {\n                    let i = entities.indexOf(entityId);\n                    if (i < 0) {\n                        entities.push(entityId);\n                    }\n                } else if (query.hasSelector(removed) && this.test(entityManager, entityId, query.selectors)) {\n                    let i = entities.indexOf(entityId);\n                    if (i >= 0) {\n                        entities.splice(i, 1);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * @protected\n     * @param {EntityManager} entityManager \n     * @param {EntityId} entityId\n     * @param {Array<ComponentClass<?>>} selectors\n     */\n    test(entityManager, entityId, selectors) {\n        for(let selector of selectors) {\n            if (isSelectorNot(selector)) {\n                const componentClass = /** @type {SelectorNot<?>} */ (/** @type {unknown} */ (selector)).value;\n                if (entityManager.exists(entityId, componentClass)) {\n                    return false;\n                }\n            } else {\n                const componentClass = /** @type {ComponentClass<?>} */ (/** @type {unknown} */ (selector));\n                if (!entityManager.exists(entityId, componentClass)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /**\n     * @protected\n     * @param {Array<EntityId>} out\n     * @param {EntityManager} entityManager \n     * @param {Array<ComponentClass<?>>} selectors\n     */\n    hydrate(out, entityManager, selectors) {\n        if (selectors.length <= 0) {\n            out.length = 0;\n            return out;\n        }\n        let entities = entityManager.entityIds();\n        for(let entityId of entities) {\n            if (this.test(entityManager, entityId, selectors)) {\n                out.push(entityId);\n            }\n        }\n        return out;\n    }\n\n    /**\n     * @param {EntityManager} entityManager\n     * @param {Query} query\n     * @returns {Array<EntityId>}\n     */\n    findAll(entityManager, query) {\n        const queryKey = query.key;\n        let result;\n        if (!(queryKey in this.keyQueryMapping)) {\n            result = [];\n            this.keyQueryMapping[queryKey] = query;\n            this.cachedResults[queryKey] = result;\n            this.hydrate(result, entityManager, query.selectors);\n        } else {\n            result = this.cachedResults[queryKey];\n        }\n        return result;\n    }\n\n    /**\n     * @param {EntityManager} entityManager\n     * @param {Query} query \n     */\n    count(entityManager, query) {\n        let result = this.findAll(entityManager, query);\n        return result.length;\n    }\n\n    /**\n     * @param {Query} query\n     */\n    clear(query) {\n        const queryKey = query.key;\n        if (!(queryKey in this.keyQueryMapping)) {\n            return;\n        }\n        delete this.keyQueryMapping[queryKey];\n        delete this.cachedResults[queryKey];\n    }\n    \n    reset() {\n        this.keyQueryMapping = {};\n        this.cachedResults = {};\n    }\n}\n\n/**\n * @template T\n * @typedef {SelectorNot<T>|ComponentClass<T>} Selector<T>\n */\n\n/**\n * @template T\n * @typedef SelectorNot<T>\n * @property {'not'} type\n * @property {string} name\n * @property {ComponentClass<T>} value\n */\n\n/**\n * @template T\n * @param {ComponentClass<T>} componentClass \n * @returns {ComponentClass<T>}\n */\nexport function Not(componentClass) {\n    return {\n        // @ts-ignore\n        type: 'not',\n        name: componentClass.name,\n        value: componentClass,\n    };\n}\n\nexport function isSelectorNot(selector) {\n    return 'type' in selector && selector.type === 'not';\n}\n", "import { ComponentClass } from './ComponentClass';\nimport { QueryManager } from './QueryManager';\n\n/**\n * @template T\n * @typedef {Record<number, T>} ComponentInstanceMap<T>\n */\n\n/**\n * @typedef {Record<string, ComponentInstanceMap<?>>} ComponentClassMap\n * @typedef {number} EntityId\n * @typedef {string} ComponentName\n */\n\n/**\n * @callback EntityComponentChangedCallback\n * @param {EntityManager} entityManager\n * @param {EntityId} entityId\n * @param {ComponentClass<?>} attached\n * @param {ComponentClass<?>} detached\n * @param {boolean} dead\n */\n\nexport class EntityManager {\n\n    constructor() {\n        /**\n         * @protected\n         * @type {ComponentClassMap}\n         */\n        this.components = {};\n        /** @private */\n        this.nameClassMapping = {};\n        /**\n         * @private\n         * @type {EntityId}\n         */\n        this.nextAvailableEntityId = 1;\n        /**\n         * @protected\n         * @type {Array<[string, ...any]>}\n         */\n        this.queue = [];\n        /** @private */\n        this.listeners = [];\n        this.queries = new QueryManager();\n    }\n\n    /**\n     * @protected\n     * @param {EntityId} entityId\n     * @param {ComponentClass<?>} attached\n     * @param {ComponentClass<?>} detached\n     * @param {boolean} dead\n     */\n    entityComponentChangedCallback(entityId, attached, detached, dead) {\n        this.queries.onEntityComponentChanged(this, entityId, attached, detached, dead);\n        for(let callback of this.listeners) {\n            callback(this, entityId, attached, detached, dead);\n        }\n    }\n\n    /**\n     * @param {'change'} event \n     * @param {EntityComponentChangedCallback} callback \n     */\n    addEventListener(event, callback) {\n        if (event === 'change') {\n            this.listeners.push(callback);\n        }\n    }\n\n    /**\n     * @param {'change'} event \n     * @param {EntityComponentChangedCallback} callback \n     */\n    removeEventListener(event, callback) {\n        if (event === 'change') {\n            let i = this.listeners.indexOf(callback);\n            if (i >= 0) {\n                this.listeners.splice(i, 1);\n            }\n        }\n    }\n\n    flush() {\n        while (this.queue.length > 0) {\n            let [type, ...args] = this.queue.shift();\n            switch (type) {\n                case 'attach': {\n                    let [entityId, componentClass, instance] = args;\n                    this.attachImmediately(entityId, componentClass, instance);\n                } break;\n                case 'detach': {\n                    let [entityId, componentClass] = args;\n                    this.detachImmediately(entityId, componentClass);\n                } break;\n                case 'clear': {\n                    let [componentClass] = args;\n                    this.clearImmediately(componentClass);\n                } break;\n            }\n        }\n    }\n\n    /**\n     * @returns {EntityId}\n     */\n    create() {\n        let entityId = this.nextAvailableEntityId++;\n        this.entityComponentChangedCallback(entityId, null, null, false);\n        return entityId;\n    }\n\n    /**\n     * @param {EntityId} entityId \n     */\n    destroy(entityId) {\n        const components = this.components;\n        for (const componentName of Object.keys(components)) {\n            const instanceMap = components[componentName];\n            if (entityId in instanceMap) {\n                delete instanceMap[entityId];\n                this.entityComponentChangedCallback(entityId, null, this.nameClassMapping[componentName], false);\n            }\n        }\n        this.entityComponentChangedCallback(entityId, null, null, true);\n    }\n\n    /**\n     * Whether the entity exists with all provided component classes.\n     * \n     * @param {EntityId} entityId \n     * @param {...ComponentClass<?>} componentClasses\n     */\n    exists(entityId, ...componentClasses) {\n        if (componentClasses.length > 0) {\n            for(const componentClass of componentClasses) {\n                let instanceMap = this.mapOf(componentClass);\n                if (!(entityId in instanceMap)) {\n                    return false;\n                }\n            }\n            return true;\n        } else {\n            for (let instanceMap of Object.values(this.components)) {\n                if (entityId in instanceMap) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @template T\n     * @param {EntityId} entityId \n     * @param {ComponentClass<T>} componentClass\n     * @param {T} [instance]\n     * @returns {T}\n     */\n    attach(entityId, componentClass, instance = undefined) {\n        if (typeof instance === 'undefined') {\n            instance = componentClass.new();\n        }\n        this.queue.push(['attach', entityId, componentClass, instance]);\n        return instance;\n    }\n\n    /**\n     * @template T\n     * @param {EntityId} entityId \n     * @param {ComponentClass<T>} componentClass \n     * @param {T} [instance]\n     * @returns {T}\n     */\n    attachImmediately(entityId, componentClass, instance = undefined) {\n        if (typeof instance === 'undefined') {\n            instance = componentClass.new();\n        }\n        let instanceMap = this.mapOf(componentClass);\n        instanceMap[entityId] = instance;\n        this.entityComponentChangedCallback(entityId, componentClass, null, false);\n        return instance;\n    }\n\n    /**\n     * @template T\n     * @param {EntityId} entityId \n     * @param {ComponentClass<T>} componentClass\n     */\n    detach(entityId, componentClass) {\n        this.queue.push(['detach', entityId, componentClass]);\n    }\n\n    /**\n     * @template T\n     * @param {EntityId} entityId \n     * @param {ComponentClass<T>} componentClass \n     */\n    detachImmediately(entityId, componentClass) {\n        let instanceMap = this.mapOf(componentClass);\n        let instance = instanceMap[entityId];\n        delete instanceMap[entityId];\n        componentClass.delete(instance);\n        this.entityComponentChangedCallback(entityId, null, componentClass, false);\n    }\n\n    /**\n     * @param {ComponentClass<?>} componentClass \n     */\n    clear(componentClass) {\n        this.queue.push(['clear', componentClass]);\n    }\n\n    /**\n     * @param {ComponentClass<any>} componentClass \n     */\n    clearImmediately(componentClass) {\n        const componentName = componentClass.name;\n        const components = this.components;\n        const instanceMap = components[componentName];\n        let entities = Object.keys(instanceMap).map(Number);\n        let instances = Object.values(instanceMap);\n        components[componentName] = {};\n        this.nameClassMapping[componentName] = componentClass;\n        for(let instance of instances) {\n            componentClass.delete(instance);\n        }\n        for(let entityId of entities) {\n            this.entityComponentChangedCallback(entityId, null, componentClass, false);\n        }\n    }\n\n    /**\n     * @template T\n     * @param {EntityId} entityId \n     * @param {ComponentClass<T>} componentClass \n     * @returns {T}\n     */\n    get(entityId, componentClass) {\n        return this.mapOf(componentClass)[entityId] || null;\n    }\n\n    /**\n     * @param {ComponentClass<?>} componentClass \n     * @returns {number}\n     */\n    count(componentClass) {\n        return Object.keys(this.mapOf(componentClass)).length;\n    }\n\n    /**\n     * @param {ComponentClass<?>} componentClass\n     */\n    keysOf(componentClass) {\n        return Object.keys(this.mapOf(componentClass)).map(Number);\n    }\n\n    /**\n     * @template T\n     * @param {ComponentClass<T>} componentClass \n     * @returns {Array<T>}\n     */\n    valuesOf(componentClass) {\n        return Object.values(this.mapOf(componentClass));\n    }\n\n    /**\n     * @protected\n     * @template T\n     * @param {ComponentClass<T>} componentClass\n     * @returns {ComponentInstanceMap<T>} A map of entity ids to component instance data.\n     */\n    mapOf(componentClass) {\n        const componentName = componentClass.name;\n        const components = this.components;\n        if (!(componentName in components)) {\n            /** @type {ComponentInstanceMap<T>} */\n            let map = {};\n            components[componentName] = map;\n            this.nameClassMapping[componentName] = componentClass;\n            return map;\n        } else {\n            return components[componentName];\n        }\n    }\n\n    /** @returns {Set<EntityId>} */\n    entityIds() {\n        let result = new Set();\n        for (let instanceMap of Object.values(this.components)) {\n            for(let entityId of Object.keys(instanceMap)) {\n                result.add(Number(entityId));\n            }\n        }\n        return result;\n    }\n\n    /** @returns {Array<ComponentClass<?>>} */\n    componentClasses() {\n        return Object.values(this.nameClassMapping);\n    }\n\n    reset() {\n        const components = this.components;\n        /** @type {Set<EntityId>} */\n        let entities = new Set();\n        for(const componentName of Object.keys(components)) {\n            const componentClass = this.nameClassMapping[componentName];\n            const instanceMap = components[componentName];\n            for(let entityId of Object.keys(instanceMap)) {\n                entities.add(Number(entityId));\n            }\n            this.clearImmediately(componentClass);\n        }\n        for(let entityId of entities) {\n            this.entityComponentChangedCallback(entityId, null, null, true);\n        }\n        entities.clear();\n        this.queries.reset();\n        this.components = {};\n        this.nextAvailableEntityId = 1;\n        this.queue.length = 0;\n        this.listeners.length = 0;\n    }\n}\n", "import { ComponentClass } from './ComponentClass';\nimport { EntityManager } from './EntityManager';\nimport { isSelectorNot } from './QueryManager';\n\n/** @typedef {import('./EntityManager').EntityId} EntityId */\n\n/**\n * @template T\n * @typedef {import('./QueryManager').Selector<T>} Selector<T>\n */\n\n/**\n * @template T\n * @typedef {import('./QueryManager').SelectorNot<T>} SelectorNot<T>\n */\n\nexport class Query {\n\n    /**\n     * @param {...ComponentClass<?>} selectors \n     */\n    constructor(...selectors) {\n        if (selectors.length <= 0) {\n            throw new Error('Must have at least 1 selector for query.');\n        }\n        this.selectors = selectors;\n        this.key = computeSelectorKey(selectors);\n    }\n\n    /**\n     * @param {Selector<?>} selector\n     */\n    hasSelector(selector) {\n        if (isSelectorNot(selector)) {\n            return this.selectors.findIndex(v => isSelectorNot(v) && v.name === selector.name) >= 0;\n        } else {\n            return this.selectors.findIndex(v => v.name === selector.name) >= 0;\n        }\n    }\n    \n    /**\n     * @param {EntityManager} entityManager \n     * @returns {number}\n     */\n    count(entityManager) {\n        return entityManager.queries.count(entityManager, this);\n    }\n    \n    /**\n     * @param {EntityManager} entityManager \n     * @returns {Generator<EntityId>}\n     */\n    *findEntityIds(entityManager) {\n        const queryManager = entityManager.queries;\n        for(let entityId of queryManager.findAll(entityManager, this)) {\n            yield entityId;\n        }\n    }\n    \n    /**\n     * @template T\n     * @param {EntityManager} entityManager \n     * @param {ComponentClass<T>} componentClass\n     * @returns {Generator<T>}\n     */\n    *findComponents(entityManager, componentClass) {\n        if (this.selectors.indexOf(componentClass) < 0) {\n            throw new Error(`Cannot find component for class '${componentClass.name}' not in query.`);\n        }\n        const queryManager = entityManager.queries;\n        for(let entityId of queryManager.findAll(entityManager, this)) {\n            yield entityManager.get(entityId, componentClass);\n        }\n    }\n}\n\n/**\n * @param {Array<ComponentClass<?>>} selectors\n */\nfunction computeSelectorKey(selectors) {\n    return selectors.map(s => isSelectorNot(s) ? `!${s.name}` : s.name).sort().join('&');\n}\n", "import { ComponentClass } from './ComponentClass';\nimport { EntityManager } from './EntityManager';\nimport { Query } from './Query';\nimport { isSelectorNot } from './QueryManager';\n\n/**\n * @typedef {Record<string, ComponentClass<any>>} ArchetypeComponentMap\n */\n\n/**\n * @template {ArchetypeComponentMap} T\n * @typedef {{[K in keyof T]: T[K] extends ComponentClass<infer V> ? V : never}} ArchetypeComponentInstancesOf<T>\n */\n\n/**\n * @template {ArchetypeComponentMap} T\n */\nexport class Archetype extends Query {\n\n    /**\n     * @param {T} components \n     */\n    constructor(components) {\n        super(...Object.values(components));\n        this.components = components;\n    }\n\n    /**\n     * @param {EntityManager} ents \n     * @returns {ArchetypeComponentInstancesOf<T>}\n     */\n    create(ents) {\n        let entityId = ents.create();\n        let result = {};\n        for(let [key, componentClass] of Object.entries(this.components)) {\n            let instance = ents.attach(entityId, componentClass);\n            result[key] = instance;\n        }\n        return /** @type {ArchetypeComponentInstancesOf<T>} */ (result);\n    }\n\n    /**\n     * @param {EntityManager} ents \n     * @param {import('./EntityManager').EntityId} entityId \n     */\n    destroy(ents, entityId) {\n        for (let componentClass of Object.values(this.components)) {\n            ents.detach(entityId, componentClass);\n        }\n    }\n\n    /**\n     * @param {EntityManager} ents \n     * @param {import('./EntityManager').EntityId} entityId\n     * @returns {ArchetypeComponentInstancesOf<T>}\n     */\n    find(ents, entityId) {\n        if (entityId === null) {\n            return /** @type {ArchetypeComponentInstancesOf<T>} */ ({});\n        }\n        return computeResult({}, ents, entityId, this.components);\n    }\n\n    /**\n     * @param {EntityManager} ents \n     * @returns {ArchetypeComponentInstancesOf<T>}\n     */\n    findAny(ents) {\n        const queryManager = ents.queries;\n        let entities = queryManager.findAll(ents, this);\n        if (entities.length <= 0) {\n            return /** @type {ArchetypeComponentInstancesOf<T>} */ ({});\n        }\n        let entityId = entities[Math.floor(Math.random() * entities.length)];\n        return computeResult({}, ents, entityId, this.components);\n    }\n\n    /**\n     * @param {EntityManager} ents \n     * @returns {Generator<ArchetypeComponentInstancesOf<T>>}\n     */\n    *findAll(ents) {\n        const queryManager = ents.queries;\n        let result = {};\n        let entities = queryManager.findAll(ents, this);\n        for(let entityId of entities) {\n            yield computeResult(result, ents, entityId, this.components);\n        }\n    }\n}\n\n/**\n * @template T\n * @param {object} out \n * @param {EntityManager} ents \n * @param {import('./EntityManager').EntityId} entityId \n * @param {T} componentClasses\n * @returns {ArchetypeComponentInstancesOf<T>}\n */\nfunction computeResult(out, ents, entityId, componentClasses) {\n    for(let [key, componentClass] of Object.entries(componentClasses)) {\n        if (isSelectorNot(componentClass)) {\n            out[key] = null;\n        } else {\n            out[key] = ents.get(entityId, componentClass);\n        }\n    }\n    return out;\n}\n", "/** @typedef {import('./TopicManager').TopicManager} TopicManager */\n\n/**\n * @template T\n * @typedef {import('./TopicManager').TopicCallback<T>} TopicCallback<T>\n */\n\n/**\n * @template T\n */\nexport class Topic {\n\n    /**\n     * @param {string} name \n     */\n    constructor(name) {\n        this.name = name;\n    }\n\n    /**\n     * @param {TopicManager} topicManager\n     * @param {T} attachment\n     */\n    dispatch(topicManager, attachment) {\n        topicManager.dispatch(this, attachment);\n    }\n\n    /**\n     * @param {TopicManager} topicManager\n     * @param {T} attachment\n     */\n    dispatchImmediately(topicManager, attachment) {\n        topicManager.dispatchImmediately(this, attachment);\n    }\n\n    /**\n     * @param {TopicManager} topicManager\n     * @param {number} priority\n     * @param {TopicCallback<T>} callback\n     */\n    on(topicManager, priority, callback) {\n        topicManager.addEventListener(this, callback, { priority });\n        return this;\n    }\n\n    /**\n     * @param {TopicManager} topicManager\n     * @param {TopicCallback<T>} callback\n     */\n    off(topicManager, callback) {\n        topicManager.removeEventListener(this, callback);\n        return this;\n    }\n\n    /**\n     * @param {TopicManager} topicManager\n     * @param {number} priority\n     * @param {TopicCallback<T>} callback\n     */\n    once(topicManager, priority, callback) {\n        let wrapper = (attachment) => {\n            this.off(topicManager, wrapper);\n            return callback(attachment);\n        };\n        return this.on(topicManager, priority, wrapper);\n    }\n\n    /**\n     * @param {TopicManager} topicManager \n     * @param {number} amount \n     */\n    *poll(topicManager, amount) {\n        amount = Math.min(amount, topicManager.count(this));\n        for(let i = 0; i < amount; ++i) {\n            yield topicManager.poll(this);\n        }\n    }\n\n    /**\n     * @param {TopicManager} topicManager \n     * @param {number} amount \n     */\n    retain(topicManager, amount) {\n        topicManager.retain(this, amount);\n    }\n\n    /**\n     * @param {TopicManager} topicManager \n     * @param {number} amount \n     */\n    *pollAndRetain(topicManager, amount) {\n        this.retain(topicManager, amount);\n        for(let result of this.poll(topicManager, amount)) {\n            yield result;\n        }\n    }\n}\n", "/**\n * @template T\n * @typedef {import('./Topic').Topic<T>} Topic<T>\n */\n\n/**\n * @template T\n * @typedef {(attachment: T) => void|boolean} TopicCallback<T>\n */\n\n/**\n * @template T\n * @typedef TopicCallbackEntry\n * @property {TopicCallback<T>} callback\n * @property {number} priority\n */\n\n/**\n * @template T\n * @param {TopicCallbackEntry<T>} a\n * @param {TopicCallbackEntry<T>} b\n */\nfunction comparator(a, b) {\n    return a.priority - b.priority;\n}\n\n/**\n * A manager for topic states. You should call `flush()` regularly to\n * process dispatched events or use `dispatchImmediately()`.\n */\nexport class TopicManager {\n\n    constructor() {\n        /**\n         * @protected\n         * @type {Record<string, Array<object>>}\n         */\n        this.cachedIn = {};\n        /**\n         * @protected\n         * @type {Record<string, Array<object>>}\n         */\n        this.cachedOut = {};\n        /**\n         * @protected\n         * @type {Record<string, Array<TopicCallbackEntry<?>>>}\n         */\n        this.callbacks = {};\n        /**\n         * @protected\n         * @type {Record<string, number>}\n         */\n        this.maxRetains = {};\n        /**\n         * @private\n         * @type {Record<string, Topic<?>>}\n         */\n        this.nameTopicMapping = {};\n    }\n\n    /**\n     * @template T\n     * @param {Topic<T>} topic \n     * @param {TopicCallback<T>} callback \n     * @param {object} [opts]\n     * @param {number} [opts.priority]\n     */\n    addEventListener(topic, callback, opts = undefined) {\n        const { priority = 0 } = opts;\n        let callbacks = this.callbacksOf(topic);\n        callbacks.push({\n            callback,\n            priority,\n        });\n        callbacks.sort(comparator);\n    }\n\n    /**\n     * @template T\n     * @param {Topic<T>} topic \n     * @param {TopicCallback<T>} callback \n     */\n    removeEventListener(topic, callback) {\n        let callbacks = this.callbacksOf(topic);\n        let i = callbacks.findIndex(v => v.callback === callback);\n        if (i >= 0) {\n            callbacks.splice(i, 1);\n        }\n    }\n\n    /**\n     * @param {Topic<?>} topic\n     */\n    countEventListeners(topic) {\n        return this.callbacksOf(topic).length;\n    }\n\n    /**\n     * @template T\n     * @param {Topic<T>} topic \n     * @param {T} attachment \n     */\n    dispatch(topic, attachment) {\n        let incoming = this.incomingOf(topic);\n        incoming.push(attachment);\n    }\n\n    /**\n     * @template T\n     * @param {Topic<T>} topic \n     * @param {T} attachment\n     */\n    dispatchImmediately(topic, attachment) {\n        let callbacks = this.callbacksOf(topic);\n        for(let { callback } of callbacks) {\n            let result = callback(attachment);\n            if (result === true) {\n                return;\n            }\n        }\n        let outgoing = this.outgoingOf(topic);\n        outgoing.push(attachment);\n    }\n\n    /**\n     * @template T\n     * @param {Topic<T>} topic \n     * @param {T} attachment \n     */\n    async dispatchImmediatelyAndWait(topic, attachment) {\n        let callbacks = this.callbacksOf(topic);\n        for(let { callback } of callbacks) {\n            let result = await callback(attachment);\n            if (result === true) {\n                return;\n            }\n        }\n        let outgoing = this.outgoingOf(topic);\n        outgoing.push(attachment);\n    }\n\n    /**\n     * @param {Topic<?>} topic\n     */\n    count(topic) {\n        let outgoing = this.outgoingOf(topic);\n        return outgoing.length;\n    }\n\n    /**\n     * @template T\n     * @param {Topic<T>} topic \n     */\n    poll(topic) {\n        let outgoing = this.outgoingOf(topic);\n        if (outgoing.length <= 0) {\n            return null;\n        }\n        let result = outgoing.shift();\n        return result;\n    }\n\n    /**\n     * @param {Topic<?>} topic\n     * @param {number} amount\n     */\n    retain(topic, amount) {\n        const topicName = topic.name;\n        let max = Math.max(amount, this.maxRetains[topicName] || 0);\n        this.maxRetains[topicName] = max;\n    }\n\n    /**\n     * @param {number} [maxPerTopic]\n     */\n    flush(maxPerTopic = 100) {\n        for(const topicName of Object.keys(this.cachedIn)) {\n            const topic = this.nameTopicMapping[topicName];\n            const incoming = this.cachedIn[topicName];\n            const outgoing = this.cachedOut[topicName];\n            const retain = this.maxRetains[topicName] || 0;\n            if (retain < outgoing.length) {\n                outgoing.splice(0, outgoing.length - retain);\n            }\n            let max = Math.min(maxPerTopic, incoming.length);\n            for(let i = 0; i < max; ++i) {\n                let attachment = incoming.shift();\n                if (typeof attachment === 'object' && attachment instanceof Promise) {\n                    this.dispatchImmediately(topic, attachment);\n                } else {\n                    this.dispatchImmediately(topic, attachment);\n                }\n            }\n        }\n    }\n\n    /**\n     * @param {Topic<?>} topic \n     */\n    getPendingRetainCount(topic) {\n        return this.maxRetains[topic.name] || 0;\n    }\n\n    /**\n     * @param {Topic<?>} topic\n     */\n    getPendingFlushCount(topic) {\n        let incoming = this.incomingOf(topic);\n        return incoming.length;\n    }\n\n    reset() {\n        this.cachedIn = {};\n        this.cachedOut = {};\n        this.callbacks = {};\n        this.maxRetains = {};\n        this.nameTopicMapping = {};\n    }\n\n    /**\n     * @protected\n     * @template T\n     * @param {Topic<T>} topic \n     * @returns {Array<T>}\n     */\n    incomingOf(topic) {\n        const topicName = topic.name;\n        if (topicName in this.cachedIn) {\n            return this.cachedIn[topicName];\n        } else {\n            let result = [];\n            this.cachedIn[topicName] = result;\n            this.cachedOut[topicName] = [];\n            this.nameTopicMapping[topicName] = topic;\n            return result;\n        }\n    }\n\n    /**\n     * @protected\n     * @template T\n     * @param {Topic<T>} topic \n     * @returns {Array<T>}\n     */\n    outgoingOf(topic) {\n        const topicName = topic.name;\n        if (topicName in this.cachedOut) {\n            return this.cachedOut[topicName];\n        } else {\n            let result = [];\n            this.cachedIn[topicName] = [];\n            this.cachedOut[topicName] = result;\n            this.nameTopicMapping[topicName] = topic;\n            return result;\n        }\n    }\n\n    /**\n     * @protected\n     * @template T\n     * @param {Topic<T>} topic \n     * @returns {Array<TopicCallbackEntry<T>>}\n     */\n    callbacksOf(topic) {\n        const topicName = topic.name;\n        if (topicName in this.callbacks) {\n            return this.callbacks[topicName];\n        } else {\n            let result = [];\n            this.callbacks[topicName] = result;\n            return result;\n        }\n    }\n}\n", "import { Topic } from './Topic';\n\n/** @typedef {import('./TopicManager').TopicManager} TopicManager */\n\n/**\n * @template T\n * @typedef {(attachment: T) => Promise<void>} AsyncTopicCallback<T>\n */\n\n/** @template T */\nexport class AsyncTopic extends Topic {\n\n    /**\n     * @param {string} name \n     */\n    constructor(name) {\n        super(name);\n    }\n\n    /**\n     * @override\n     * @param {TopicManager} topicManager\n     * @param {T} attachment\n     */\n    async dispatch(topicManager, attachment) {\n        // TODO: Topics don't really support async yet. 1. No result processing. 2. TopicManager doesn't really care.\n        throw new Error('Not yet implemented');\n    }\n\n    /**\n     * @override\n     * @param {TopicManager} topicManager\n     * @param {T} attachment\n     */\n    async dispatchImmediately(topicManager, attachment) {\n        // @ts-ignore\n        await topicManager.dispatchImmediatelyAndWait(this, attachment);\n    }\n\n    /**\n     * @override\n     * @param {TopicManager} topicManager\n     * @param {number} priority\n     * @param {AsyncTopicCallback<T>} callback\n     */\n    // @ts-ignore\n    on(topicManager, priority, callback) {\n        // @ts-ignore\n        return super.on(topicManager, priority, callback);\n    }\n\n    /**\n     * @override\n     * @param {TopicManager} topicManager\n     * @param {AsyncTopicCallback<T>} callback\n     */\n    // @ts-ignore\n    off(topicManager, callback) {\n        // @ts-ignore\n        return super.off(topicManager, callback);\n    }\n\n    /**\n     * @override\n     * @param {TopicManager} topicManager\n     * @param {number} priority\n     * @param {AsyncTopicCallback<T>} callback\n     */\n    // @ts-ignore\n    once(topicManager, priority, callback) {\n        // @ts-ignore\n        return super.once(topicManager, priority, callback);\n    }\n}", "/**\n * @typedef {(frameDetail: AnimationFrameLoop) => void} AnimationFrameLoopCallback\n * \n * @typedef AnimationFrameDetail\n * @property {number} prevTime\n * @property {number} currentTime\n * @property {number} deltaTime\n */\n\nexport class AnimationFrameLoop {\n    \n    /**\n     * @param {AnimationFrameLoopCallback} callback \n     * @param {object} [opts]\n     * @param {Window} [opts.animationFrameHandler]\n     */\n    constructor(callback, opts = undefined) {\n        const { animationFrameHandler = window } = opts || {};\n\n        /** @type {ReturnType<requestAnimationFrame>} */\n        this.handle = 0;\n        /** @type {AnimationFrameDetail} */\n        this.detail = {\n            prevTime: -1,\n            currentTime: -1,\n            deltaTime: 0,\n        };\n\n        /** @protected */\n        this.animationFrameHandler = animationFrameHandler;\n\n        /** @protected */\n        this.callback = callback;\n\n        this.next = this.next.bind(this);\n        this.start = this.start.bind(this);\n        this.cancel = this.cancel.bind(this);\n    }\n\n    get running() {\n        return this.handle !== 0;\n    }\n    \n    next(now = performance.now()) {\n        this.handle = this.animationFrameHandler.requestAnimationFrame(this.next);\n        let d = this.detail;\n        d.prevTime = d.currentTime;\n        d.currentTime = now;\n        d.deltaTime = d.currentTime - d.prevTime;\n        this.callback(this);\n    }\n\n    start() {\n        this.handle = this.animationFrameHandler.requestAnimationFrame(this.next);\n        return this;\n    }\n\n    cancel() {\n        this.animationFrameHandler.cancelAnimationFrame(this.handle);\n        return this;\n    }\n}\n", "/**\n * @typedef {number} BindingIndex\n *\n * @typedef BindingOptions\n * @property {boolean} inverted\n *\n * @typedef InputReadOnly\n * @property {number} value\n * @property {boolean} polling\n */\n\nexport class InputState {\n  get polling() {\n    let dt = performance.now() - this._lastPollingTime;\n    return dt < 1_000;\n  }\n\n  /** @abstract */\n  get value() {\n    return 0;\n  }\n  \n  get size() {\n    return this._size;\n  }\n\n  /**\n   * @abstract\n   * @param {number} size The initial binding state size.\n   */\n  constructor(size) {\n    /** @private */\n    this._size = size;\n    /** @private */\n    this._lastPollingTime = Number.MIN_SAFE_INTEGER;\n  }\n\n  /**\n   * Called to internally resize to accomodate more/less\n   * binding states.\n   *\n   * @protected\n   * @param {number} newSize\n   */\n  resize(newSize) {\n    this._size = newSize;\n  }\n\n  /**\n   * @abstract\n   * @param {BindingIndex} code\n   * @returns {number}\n   */\n  // eslint-disable-next-line no-unused-vars\n  getState(code) {\n    throw new Error('Missing implementation.');\n  }\n\n  /**\n   * @abstract\n   * @param {BindingIndex} code\n   * @param {number} value\n   * @param {number} delta\n   */\n  // eslint-disable-next-line no-unused-vars\n  onUpdate(code, value, delta) {\n    throw new Error('Missing implementation.');\n  }\n\n  /**\n   * @abstract\n   * @param {BindingIndex} code\n   * @param {number} value\n   */\n  // eslint-disable-next-line no-unused-vars\n  onStatus(code, value) {\n    throw new Error('Missing implementation.');\n  }\n\n  /**\n   * Called to poll all bound states.\n   *\n   * @param {number} now\n   */\n  onPoll(now) {\n    this._lastPollingTime = now;\n  }\n\n  /**\n   * Called to bind a state to the given binding code.\n   *\n   * @param {BindingIndex} code\n   * @param {BindingOptions} [opts]\n   */\n  // eslint-disable-next-line no-unused-vars\n  onBind(code, opts = undefined) {\n    if (code >= this._size) {\n      this.resize(code + 1);\n    }\n  }\n\n  /**\n   * Called to unbind all states.\n   */\n  onUnbind() {\n    this.resize(0);\n  }\n}\n", "import { InputState } from './InputState.js';\n\n/**\n * @typedef {import('./InputState.js').BindingIndex} BindingIndex The binding index\n * @typedef {import('./InputState.js').BindingOptions} BindingOptions The binding options\n *\n * @typedef AxisBindingState\n * @property {number} value\n * @property {number} delta\n * @property {boolean} inverted\n *\n * @typedef AxisReadOnly\n * @property {number} value\n * @property {number} delta\n * @property {boolean} polling\n */\n\nexport class AxisState extends InputState {\n  /** @returns {AxisBindingState} */\n  static createAxisBindingState() {\n    return {\n      value: 0,\n      delta: 0,\n      inverted: false,\n    };\n  }\n\n  /** @returns {number} */\n  get delta() {\n    return this._delta;\n  }\n\n  /**\n   * @override\n   * @returns {number}\n   */\n  get value() {\n    return this._value;\n  }\n\n  /**\n   * @param {number} [size]\n   */\n  constructor(size = 0) {\n    super(size);\n    let state = new Array();\n    let c = /** @type {typeof AxisState} */ (this.constructor);\n    for (let i = 0; i < size; ++i) {\n      state.push(c.createAxisBindingState());\n    }\n    /**\n     * @private\n     * @type {Array<AxisBindingState>}\n     */\n    this._state = state;\n    /** @private */\n    this._value = 0;\n    /** @private */\n    this._delta = 0;\n  }\n\n  /**\n   * @override\n   * @protected\n   */\n  resize(newSize) {\n    let oldState = this._state;\n    let oldSize = oldState.length;\n    let newState;\n    if (newSize <= oldSize) {\n      newState = oldState.slice(0, newSize);\n    } else {\n      newState = oldState;\n      // Fill with new states\n      let c = /** @type {typeof AxisState} */ (this.constructor);\n      for (let i = oldSize; i < newSize; ++i) {\n        newState.push(c.createAxisBindingState());\n      }\n    }\n    this._state = newState;\n    super.resize(newSize);\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @returns {number}\n   */\n  getState(code) {\n    return this._state[code].value;\n  }\n\n  /**\n   * @override\n   * @param {number} now\n   */\n  onPoll(now) {\n    let state = this._state;\n    let accumulatedValue = 0;\n    let accumulatedDelta = 0;\n    const len = state.length;\n    for (let i = 0; i < len; ++i) {\n      let value = state[i];\n      accumulatedValue += value.value * (value.inverted ? -1 : 1);\n      accumulatedDelta += value.delta;\n      state[i].delta = 0;\n    }\n    this._value = accumulatedValue;\n    this._delta = accumulatedDelta;\n    super.onPoll(now);\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @param {number} value\n   * @param {number} delta\n   */\n  onUpdate(code, value, delta) {\n    if (typeof value === 'undefined') {\n      this.onAxisChange(code, delta);\n    } else {\n      this.onAxisMove(code, value, delta);\n    }\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @param {number} value\n   */\n  onStatus(code, value) {\n    this.onAxisStatus(code, value);\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @param {BindingOptions} [opts]\n   */\n  onBind(code, opts = undefined) {\n    super.onBind(code, opts);\n    const { inverted = false } = opts || {};\n    let state = this._state;\n    state[code].inverted = inverted;\n  }\n\n  /**\n   * @protected\n   * @param {BindingIndex} code\n   * @param {number} x\n   * @param {number} dx\n   */\n  onAxisMove(code, x, dx) {\n    let state = this._state[code];\n    state.value = x;\n    state.delta += dx;\n  }\n\n  /**\n   * @protected\n   * @param {BindingIndex} code\n   * @param {number} dx\n   */\n  onAxisChange(code, dx) {\n    let state = this._state[code];\n    state.value += dx;\n    state.delta += dx;\n  }\n\n  /**\n   * @protected\n   * @param {BindingIndex} code\n   * @param {number} x\n   */\n  onAxisStatus(code, x) {\n    let state = this._state[code];\n    let prev = state.value;\n    state.value = x;\n    state.delta = x - prev;\n  }\n}\n", "import { InputState } from './InputState.js';\n\n/**\n * @typedef {import('./InputState.js').BindingIndex} BindingIndex\n * @typedef {import('./InputState.js').BindingOptions} BindingOptions\n *\n * @typedef ButtonReadOnly\n * @property {number} value\n * @property {boolean} pressed\n * @property {boolean} repeated\n * @property {boolean} released\n * @property {boolean} down\n * @property {boolean} polling\n */\n\nexport const CLEAR_POLL_BITS = 0b1111_0001;\nexport const CLEAR_DOWN_STATE_BITS = 0b1111_1110;\nexport const CLEAR_INVERTED_MODIFIER_BITS = 0b1110_1111;\n\nexport const DOWN_STATE_BIT = 0b0000_0001;\nexport const PRESSED_STATE_BIT = 0b0000_0010;\nexport const REPEATED_STATE_BIT = 0b0000_0100;\nexport const RELEASED_STATE_BIT = 0b0000_1000;\nexport const INVERTED_MODIFIER_BIT = 0b0001_0000;\n\nexport class ButtonState extends InputState {\n  /** @returns {boolean} */\n  get pressed() {\n    return this._pressed;\n  }\n\n  /** @returns {boolean} */\n  get repeated() {\n    return this._repeated;\n  }\n\n  /** @returns {boolean} */\n  get released() {\n    return this._released;\n  }\n\n  /** @returns {boolean} */\n  get down() {\n    return this._down;\n  }\n\n  /**\n   * @override\n   * @returns {number}\n   */\n  get value() {\n    return this._value;\n  }\n\n  /**\n   * @param {number} [size]\n   */\n  constructor(size = 0) {\n    super(size);\n    /** @private */\n    this._state = new Uint8Array(size);\n    /** @private */\n    this._value = 0;\n    /** @private */\n    this._down = false;\n    /** @private */\n    this._pressed = false;\n    /** @private */\n    this._repeated = false;\n    /** @private */\n    this._released = false;\n  }\n\n  /**\n   * @override\n   * @protected\n   */\n  resize(newSize) {\n    let oldState = this._state;\n    let oldSize = oldState.length;\n    let newState;\n    if (newSize <= oldSize) {\n      newState = oldState.slice(0, newSize);\n    } else {\n      newState = new Uint8Array(newSize);\n      newState.set(oldState);\n    }\n    this._state = newState;\n    super.resize(newSize);\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @returns {number}\n   */\n  getState(code) {\n    let state = this._state[code];\n    let modifier = state & INVERTED_MODIFIER_BIT ? -1 : 1;\n    let value = state & DOWN_STATE_BIT ? 1 : 0;\n    return value * modifier;\n  }\n\n  /**\n   * @override\n   * @param {number} now\n   */\n  onPoll(now) {\n    let state = this._state;\n    let result = 0;\n    let down = 0;\n    let pressed = 0;\n    let repeated = 0;\n    let released = 0;\n    const len = state.length;\n    for (let i = 0; i < len; ++i) {\n      let value = state[i];\n      let v = value & DOWN_STATE_BIT;\n      let m = value & INVERTED_MODIFIER_BIT;\n      down |= v;\n      pressed |= value & PRESSED_STATE_BIT;\n      repeated |= value & REPEATED_STATE_BIT;\n      released |= value & RELEASED_STATE_BIT;\n      result += (v ? 1 : 0) * (m ? -1 : 1);\n      state[i] &= CLEAR_POLL_BITS;\n    }\n    this._value = result;\n    this._down = down !== 0;\n    this._pressed = pressed !== 0;\n    this._repeated = repeated !== 0;\n    this._released = released !== 0;\n    super.onPoll(now);\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @param {number} value\n   * @param {number} delta\n   */\n  onUpdate(code, value, delta) {\n    if (delta > 0) {\n      this.onButtonPressed(code);\n    } else {\n      this.onButtonReleased(code);\n    }\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @param {number} value\n   */\n  onStatus(code, value) {\n    this.onButtonStatus(code, value !== 0);\n  }\n\n  /**\n   * @override\n   * @param {BindingIndex} code\n   * @param {BindingOptions} [opts]\n   */\n  onBind(code, opts = { inverted: false }) {\n    super.onBind(code, opts);\n    const { inverted = false } = opts;\n    let state = this._state;\n    if (inverted) {\n      state[code] |= INVERTED_MODIFIER_BIT;\n    } else {\n      state[code] &= CLEAR_INVERTED_MODIFIER_BITS;\n    }\n  }\n\n  /**\n   * @protected\n   * @param {BindingIndex} code\n   */\n  onButtonPressed(code) {\n    let state = this._state;\n    let bits = state[code];\n    if (!(bits & DOWN_STATE_BIT)) {\n      bits |= PRESSED_STATE_BIT;\n      bits |= DOWN_STATE_BIT;\n    }\n    bits |= REPEATED_STATE_BIT;\n    state[code] = bits;\n  }\n\n  /**\n   * @protected\n   * @param {BindingIndex} code\n   */\n  onButtonReleased(code) {\n    let state = this._state;\n    let bits = state[code];\n    if (bits & DOWN_STATE_BIT) {\n      bits |= RELEASED_STATE_BIT;\n      bits &= CLEAR_DOWN_STATE_BITS;\n    }\n    state[code] = bits;\n  }\n\n  /**\n   * @protected\n   * @param {BindingIndex} code\n   * @param {boolean} isDown\n   */\n  onButtonStatus(code, isDown) {\n    let state = this._state;\n    let bits = state[code];\n    let wasDown = Boolean(bits & DOWN_STATE_BIT);\n    if (isDown) {\n      bits |= DOWN_STATE_BIT;\n    } else {\n      bits &= CLEAR_DOWN_STATE_BITS;\n    }\n    if (wasDown && !isDown) {\n      bits |= RELEASED_STATE_BIT;\n    }\n    if (!wasDown && isDown) {\n      bits |= PRESSED_STATE_BIT;\n      bits |= REPEATED_STATE_BIT;\n    }\n    state[code] = bits;\n  }\n}\n", "export class KeyCode {\n  /**\n   * @param {string} string\n   * @returns {KeyCode}\n   */\n  static parse(string) {\n    string = string.trim();\n    let i = string.indexOf('.');\n    if (i < 0) {\n      throw new Error('Missing device separator for key code.');\n    }\n    let device = string.substring(0, i);\n    if (device.length < 0) {\n      throw new Error('Missing device for key code.');\n    }\n    let key = string.substring(i + 1);\n    if (key.length < 0) {\n      throw new Error('Missing code for key code.');\n    }\n    return new KeyCode(device, key);\n  }\n\n  /**\n   * @param {string} device\n   * @param {string} code\n   */\n  constructor(device, code) {\n    this.device = device;\n    this.code = code;\n  }\n\n  /** @override */\n  toString() {\n    return `${this.device}.${this.code}`;\n  }\n}\n", "import { KeyCode } from './KeyCode.js';\n\nexport function from(device, code) {\n  return new KeyCode(device, code);\n}\n\nexport function isKeyCode(object) {\n  return 'device' in object && 'code' in object;\n}\n\nexport const KEYBOARD = 'Keyboard';\nexport const MOUSE = 'Mouse';\n\nexport const KEY_A = new KeyCode(KEYBOARD, 'KeyA');\nexport const KEY_B = new KeyCode(KEYBOARD, 'KeyB');\nexport const KEY_C = new KeyCode(KEYBOARD, 'KeyC');\nexport const KEY_D = new KeyCode(KEYBOARD, 'KeyD');\nexport const KEY_E = new KeyCode(KEYBOARD, 'KeyE');\nexport const KEY_F = new KeyCode(KEYBOARD, 'KeyF');\nexport const KEY_G = new KeyCode(KEYBOARD, 'KeyG');\nexport const KEY_H = new KeyCode(KEYBOARD, 'KeyH');\nexport const KEY_I = new KeyCode(KEYBOARD, 'KeyI');\nexport const KEY_J = new KeyCode(KEYBOARD, 'KeyJ');\nexport const KEY_K = new KeyCode(KEYBOARD, 'KeyK');\nexport const KEY_L = new KeyCode(KEYBOARD, 'KeyL');\nexport const KEY_M = new KeyCode(KEYBOARD, 'KeyM');\nexport const KEY_N = new KeyCode(KEYBOARD, 'KeyN');\nexport const KEY_O = new KeyCode(KEYBOARD, 'KeyO');\nexport const KEY_P = new KeyCode(KEYBOARD, 'KeyP');\nexport const KEY_Q = new KeyCode(KEYBOARD, 'KeyQ');\nexport const KEY_R = new KeyCode(KEYBOARD, 'KeyR');\nexport const KEY_S = new KeyCode(KEYBOARD, 'KeyS');\nexport const KEY_T = new KeyCode(KEYBOARD, 'KeyT');\nexport const KEY_U = new KeyCode(KEYBOARD, 'KeyU');\nexport const KEY_V = new KeyCode(KEYBOARD, 'KeyV');\nexport const KEY_W = new KeyCode(KEYBOARD, 'KeyW');\nexport const KEY_X = new KeyCode(KEYBOARD, 'KeyX');\nexport const KEY_Y = new KeyCode(KEYBOARD, 'KeyY');\nexport const KEY_Z = new KeyCode(KEYBOARD, 'KeyZ');\n\nexport const DIGIT_0 = new KeyCode(KEYBOARD, 'Digit0');\nexport const DIGIT_1 = new KeyCode(KEYBOARD, 'Digit1');\nexport const DIGIT_2 = new KeyCode(KEYBOARD, 'Digit2');\nexport const DIGIT_3 = new KeyCode(KEYBOARD, 'Digit3');\nexport const DIGIT_4 = new KeyCode(KEYBOARD, 'Digit4');\nexport const DIGIT_5 = new KeyCode(KEYBOARD, 'Digit5');\nexport const DIGIT_6 = new KeyCode(KEYBOARD, 'Digit6');\nexport const DIGIT_7 = new KeyCode(KEYBOARD, 'Digit7');\nexport const DIGIT_8 = new KeyCode(KEYBOARD, 'Digit8');\nexport const DIGIT_9 = new KeyCode(KEYBOARD, 'Digit9');\n\nexport const MINUS = new KeyCode(KEYBOARD, 'Minus');\nexport const EQUAL = new KeyCode(KEYBOARD, 'Equal');\nexport const BRACKET_LEFT = new KeyCode(KEYBOARD, 'BracketLeft');\nexport const BRACKET_RIGHT = new KeyCode(KEYBOARD, 'BracketRight');\nexport const SEMICOLON = new KeyCode(KEYBOARD, 'Semicolon');\nexport const QUOTE = new KeyCode(KEYBOARD, 'Quote');\nexport const BACKQUOTE = new KeyCode(KEYBOARD, 'Backquote');\nexport const BACKSLASH = new KeyCode(KEYBOARD, 'Backslash');\nexport const COMMA = new KeyCode(KEYBOARD, 'Comma');\nexport const PERIOD = new KeyCode(KEYBOARD, 'Period');\nexport const SLASH = new KeyCode(KEYBOARD, 'Slash');\n\nexport const ESCAPE = new KeyCode(KEYBOARD, 'Escape');\nexport const SPACE = new KeyCode(KEYBOARD, 'Space');\nexport const CAPS_LOCK = new KeyCode(KEYBOARD, 'CapsLock');\nexport const BACKSPACE = new KeyCode(KEYBOARD, 'Backspace');\nexport const DELETE = new KeyCode(KEYBOARD, 'Delete');\nexport const TAB = new KeyCode(KEYBOARD, 'Tab');\nexport const ENTER = new KeyCode(KEYBOARD, 'Enter');\n\nexport const ARROW_UP = new KeyCode(KEYBOARD, 'ArrowUp');\nexport const ARROW_DOWN = new KeyCode(KEYBOARD, 'ArrowDown');\nexport const ARROW_LEFT = new KeyCode(KEYBOARD, 'ArrowLeft');\nexport const ARROW_RIGHT = new KeyCode(KEYBOARD, 'ArrowRight');\n\nexport const MOUSE_BUTTON_0 = new KeyCode(MOUSE, 'Button0');\nexport const MOUSE_BUTTON_1 = new KeyCode(MOUSE, 'Button1');\nexport const MOUSE_BUTTON_2 = new KeyCode(MOUSE, 'Button2');\nexport const MOUSE_BUTTON_3 = new KeyCode(MOUSE, 'Button3');\nexport const MOUSE_BUTTON_4 = new KeyCode(MOUSE, 'Button4');\n\nexport const MOUSE_POS_X = new KeyCode(MOUSE, 'PosX');\nexport const MOUSE_POS_Y = new KeyCode(MOUSE, 'PosY');\n\nexport const MOUSE_WHEEL_X = new KeyCode(MOUSE, 'WheelX');\nexport const MOUSE_WHEEL_Y = new KeyCode(MOUSE, 'WheelY');\nexport const MOUSE_WHEEL_Z = new KeyCode(MOUSE, 'WheelZ');\n", "export class InputBinding {\n  /**\n   * @param {string} name\n   */\n  constructor(name) {\n    this.name = name;\n    /** @type {import('../state/InputState').InputState} */\n    this.current = null;\n  }\n\n  /**\n   * @abstract\n   * @param {import('../InputContext').InputContext} axb\n   */\n  bindKeys(axb) {\n    throw new Error('Unsupported operation.');\n    return this;\n  }\n\n  /**\n   * @abstract\n   * @param {import('../InputContext').InputContext} axb\n   * @returns {import('../state/InputState').InputState}\n   */\n  get(axb) {\n    throw new Error('Unsupported operation.');\n    return null;\n  }\n}\n", "import { KeyCode } from './KeyCode.js';\nimport * as KeyCodes from './KeyCodes.js';\n\nexport { KeyCodes };\n\n/**\n * @param {string|Array<string>} strings\n * @returns {Array<KeyCode>}\n */\nexport function stringsToKeyCodes(strings) {\n  if (!Array.isArray(strings)) {\n    strings = [strings];\n  }\n  let result = [];\n  for (let str of strings) {\n    let keyCode;\n    try {\n      keyCode = KeyCode.parse(str);\n    } catch (e) {\n      let keyName = camelToSnakeCase(str).toUpperCase();\n      if (!(keyName in KeyCodes)) {\n        throw new Error('Invalid key code string - ' + e);\n      }\n      keyCode = KeyCodes[keyName];\n    }\n    result.push(keyCode);\n  }\n  return result;\n}\n\n/**\n * @param {string} str\n * @returns {string}\n */\nfunction camelToSnakeCase(str) {\n  return str\n    .replace(/([a-z]|(?:[A-Z0-9]+))([A-Z0-9]|$)/g, function (_, a, b) {\n      return a + (b && '_' + b);\n    })\n    .toLowerCase();\n}\n", "import { from } from '../keycode/KeyCodes.js';\nimport { InputBinding } from './InputBinding.js';\nimport { stringsToKeyCodes } from '../keycode/KeyCodeHelper.js';\n\n/**\n * @typedef {import('../keycode/KeyCode.js').KeyCode} KeyCode\n * @typedef {import('../InputContext.js').InputContext} InputContext\n */\n\nexport class AxisBinding extends InputBinding {\n  /**\n   * @param {string} name\n   * @param {string} device\n   * @param {string} code\n   * @param {object} [opts]\n   * @returns {AxisBinding}\n   */\n  static fromBind(name, device, code, opts = undefined) {\n    return new AxisBinding(name, from(device, code), opts);\n  }\n\n  /**\n   * @param {string} name\n   * @param {...string} strings\n   * @returns {AxisBinding}\n   */\n  static fromString(name, ...strings) {\n    let keyCodes = stringsToKeyCodes(strings);\n    return new AxisBinding(name, keyCodes);\n  }\n\n  /**\n   * @param {string} name\n   * @param {KeyCode|Array<KeyCode>} keyCodes\n   * @param {object} [opts]\n   */\n  constructor(name, keyCodes, opts = undefined) {\n    super(name);\n    \n    this.keyCodes = Array.isArray(keyCodes) ? keyCodes : [keyCodes];\n    this.opts = opts;\n\n    /** @type {import('../state/AxisState').AxisState} */\n    this.current = null;\n  }\n\n  /**\n   * @override\n   * @param {InputContext} axb\n   */\n  bindKeys(axb) {\n    let name = this.name;\n    let opts = this.opts;\n    for (let keyCode of this.keyCodes) {\n      axb.bindAxis(name, keyCode.device, keyCode.code, opts);\n    }\n    this.current = axb.getAxis(name);\n    return this;\n  }\n\n  /**\n   * @override\n   * @param {InputContext} axb\n   */\n  get(axb) {\n    let name = this.name;\n    if (!axb.hasAxis(name)) {\n      this.bindKeys(axb);\n    }\n    let result = axb.getAxis(name);\n    this.current = result;\n    return result;\n  }\n}\n", "import { from } from '../keycode/KeyCodes.js';\nimport { InputBinding } from './InputBinding.js';\nimport { stringsToKeyCodes } from '../keycode/KeyCodeHelper.js';\n\n/**\n * @typedef {import('../keycode/KeyCode.js').KeyCode} KeyCode\n * @typedef {import('../InputContext.js').InputContext} InputContext\n */\n\nexport class ButtonBinding extends InputBinding {\n  /**\n   * @param {string} name\n   * @param {string} device\n   * @param {string} code\n   * @param {object} [opts]\n   * @returns {ButtonBinding}\n   */\n  static fromBind(name, device, code, opts = undefined) {\n    return new ButtonBinding(name, from(device, code), opts);\n  }\n\n  /**\n   * @param {string} name\n   * @param {...string} strings\n   * @returns {ButtonBinding}\n   */\n  static fromString(name, ...strings) {\n    let keyCodes = stringsToKeyCodes(strings);\n    return new ButtonBinding(name, keyCodes);\n  }\n\n  /**\n   * @param {string} name\n   * @param {KeyCode|Array<KeyCode>} keyCodes\n   * @param {object} [opts]\n   */\n  constructor(name, keyCodes, opts = undefined) {\n    super(name);\n    \n    this.keyCodes = Array.isArray(keyCodes) ? keyCodes : [keyCodes];\n    this.opts = opts;\n\n    /** @type {import('../state/ButtonState').ButtonState} */\n    this.current = null;\n  }\n\n  /**\n   * @override\n   * @param {InputContext} axb\n   */\n  bindKeys(axb) {\n    let name = this.name;\n    let opts = this.opts;\n    for (let keyCode of this.keyCodes) {\n      axb.bindButton(name, keyCode.device, keyCode.code, opts);\n    }\n    this.current = axb.getButton(name);\n    return this;\n  }\n\n  /**\n   * @override\n   * @param {InputContext} axb\n   */\n  get(axb) {\n    let name = this.name;\n    if (!axb.hasButton(name)) {\n      this.bindKeys(axb);\n    }\n    let result = axb.getButton(name);\n    this.current = result;\n    return result;\n  }\n}\n", "import { from } from '../keycode/KeyCodes.js';\nimport { AxisBinding } from './AxisBinding.js';\n\n/**\n * @typedef {import('../keycode/KeyCode.js').KeyCode} KeyCode\n * @typedef {import('../InputContext.js').InputContext} InputContext\n */\n\nexport class AxisButtonBinding extends AxisBinding {\n  /**\n   * @param {string} name\n   * @param {string} device\n   * @param {string} negativeCode\n   * @param {string} positiveCode\n   * @returns {AxisButtonBinding}\n   */\n  static fromBind(name, device, negativeCode, positiveCode) {\n    return new AxisButtonBinding(\n      name,\n      from(device, negativeCode),\n      from(device, positiveCode)\n    );\n  }\n\n  /**\n   * @param {string} name\n   * @param {KeyCode} negativeKeyCode\n   * @param {KeyCode} positiveKeyCode\n   */\n  constructor(name, negativeKeyCode, positiveKeyCode) {\n    super(name, []);\n\n    if (negativeKeyCode.device !== positiveKeyCode.device) {\n      throw new Error('Cannot create axis-button codes for different devices.');\n    }\n    \n    this.negativeKeyCode = negativeKeyCode;\n    this.positiveKeyCode = positiveKeyCode;\n  }\n\n  /**\n   * @override\n   * @param {InputContext} axb\n   */\n  bindKeys(axb) {\n    let name = this.name;\n    let negativeKeyCode = this.negativeKeyCode;\n    let positiveKeyCode = this.positiveKeyCode;\n    axb.bindAxisButtons(\n      name,\n      negativeKeyCode.device,\n      negativeKeyCode.code,\n      positiveKeyCode.code\n    );\n    this.current = axb.getAxis(name);\n    return this;\n  }\n}\n", "/**\n * @typedef InputDeviceEvent\n * @property {EventTarget} target\n * @property {string} device\n * @property {string} code\n * @property {string} event\n * @property {number} [value] The input value of the triggered event (usually this is 1).\n * @property {number} [movement] The change in value for the triggered event.\n * @property {boolean} [control] Whether any control keys are down (false if up).\n * @property {boolean} [shift] Whether any shift keys are down (false if up).\n * @property {boolean} [alt] Whether any alt keys are down (false if up).\n *\n * @callback InputDeviceEventListener\n * @param {InputDeviceEvent} e\n */\n\n/**\n * A class that represents a raw system device that\n * emits input events.\n */\nexport class InputDevice {\n  /** @abstract */\n  // eslint-disable-next-line no-unused-vars\n  static isAxis(keyCode) {\n    return false;\n  }\n\n  /** @abstract */\n  // eslint-disable-next-line no-unused-vars\n  static isButton(keyCode) {\n    return false;\n  }\n\n  /**\n   * @param {string} deviceName\n   * @param {EventTarget} eventTarget\n   */\n  constructor(deviceName, eventTarget) {\n    if (!eventTarget) {\n      throw new Error(`Missing event target for device ${deviceName}.`);\n    }\n\n    this.name = deviceName;\n    this.eventTarget = eventTarget;\n\n    /**\n     * @private\n     * @type {Record<string, Array<InputDeviceEventListener>>}\n     */\n    this.listeners = {\n      input: [],\n    };\n  }\n\n  /**\n   * @param {EventTarget} eventTarget\n   */\n  setEventTarget(eventTarget) {\n    if (!eventTarget) {\n      throw new Error(`Missing event target for device ${this.name}.`);\n    }\n    this.eventTarget = eventTarget;\n  }\n\n  destroy() {\n    let listeners = this.listeners;\n    for (let event in listeners) {\n      listeners[event].length = 0;\n    }\n  }\n\n  /**\n   * @param {string} event\n   * @param {InputDeviceEventListener} listener\n   */\n  addEventListener(event, listener) {\n    let listeners = this.listeners;\n    if (event in listeners) {\n      listeners[event].push(listener);\n    } else {\n      listeners[event] = [listener];\n    }\n  }\n\n  /**\n   * @param {string} event\n   * @param {InputDeviceEventListener} listener\n   */\n  removeEventListener(event, listener) {\n    let listeners = this.listeners;\n    if (event in listeners) {\n      let list = listeners[event];\n      let i = list.indexOf(listener);\n      if (i >= 0) {\n        list.splice(i, 1);\n      }\n    }\n  }\n\n  /**\n   * @param {InputDeviceEvent} e\n   * @returns {boolean} Whether the input event should be consumed.\n   */\n  dispatchInputEvent(e) {\n    let flag = 0;\n    for (let listener of this.listeners.input) {\n      flag |= listener(e);\n    }\n    return Boolean(flag);\n  }\n}\n", "import { InputDevice } from './InputDevice.js';\n\n/** @typedef {import('./InputDevice.js').InputDeviceEvent} InputDeviceEvent */\n\n/**\n * A class that listens to the keyboard events from the event target and\n * transforms the events into a valid {@link InputEvent} for the added\n * listeners.\n *\n * - This device uses the `event.code` standard to reference each key.\n * - Use this to help you determine the key code: https://keycode.info/\n */\nexport class KeyboardDevice extends InputDevice {\n  /** @override */\n  // eslint-disable-next-line no-unused-vars\n  static isAxis(keyCode) {\n    return false;\n  }\n\n  /** @override */\n  // eslint-disable-next-line no-unused-vars\n  static isButton(keyCode) {\n    return true;\n  }\n\n  /**\n   * Constructs a listening keyboard with no listeners (yet).\n   *\n   * @param {string} deviceName\n   * @param {EventTarget} eventTarget\n   * @param {object} [opts] Any additional options.\n   * @param {boolean} [opts.ignoreRepeat] Whether to\n   * accept repeated key events.\n   */\n  constructor(deviceName, eventTarget, opts = {}) {\n    super(deviceName, eventTarget);\n\n    const { ignoreRepeat = true } = opts;\n    this.ignoreRepeat = ignoreRepeat;\n\n    /**\n     * @private\n     * @type {InputDeviceEvent}\n     */\n    this._eventObject = {\n      target: eventTarget,\n      device: deviceName,\n      code: '',\n      event: '',\n      // Key values\n      value: 0,\n      control: false,\n      shift: false,\n      alt: false,\n    };\n\n    /** @private */\n    this.onKeyDown = this.onKeyDown.bind(this);\n    /** @private */\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    eventTarget.addEventListener('keydown', this.onKeyDown);\n    eventTarget.addEventListener('keyup', this.onKeyUp);\n  }\n\n  /** @override */\n  setEventTarget(eventTarget) {\n    if (this.eventTarget) this.destroy();\n    super.setEventTarget(eventTarget);\n    eventTarget.addEventListener('keydown', this.onKeyDown);\n    eventTarget.addEventListener('keyup', this.onKeyUp);\n  }\n\n  /** @override */\n  destroy() {\n    let eventTarget = this.eventTarget;\n    eventTarget.removeEventListener('keydown', this.onKeyDown);\n    eventTarget.removeEventListener('keyup', this.onKeyUp);\n    super.destroy();\n  }\n\n  /**\n   * @private\n   * @param {KeyboardEvent} e\n   */\n  onKeyDown(e) {\n    if (e.repeat && this.ignoreRepeat) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n\n    let event = this._eventObject;\n    // We care more about location (code) than print char (key).\n    event.code = e.code;\n    event.event = 'pressed';\n    event.value = 1;\n    event.control = e.ctrlKey;\n    event.shift = e.shiftKey;\n    event.alt = e.altKey;\n\n    let result = this.dispatchInputEvent(event);\n    if (result) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  /**\n   * @private\n   * @param {KeyboardEvent} e\n   */\n  onKeyUp(e) {\n    /** @type {InputDeviceEvent} */\n    let event = this._eventObject;\n    // We care more about location (code) than print char (key).\n    event.code = e.code;\n    event.event = 'released';\n    event.value = 1;\n    event.control = e.ctrlKey;\n    event.shift = e.shiftKey;\n    event.alt = e.altKey;\n\n    let result = this.dispatchInputEvent(event);\n    if (result) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n}\n", "import { InputDevice } from './InputDevice.js';\n\n/**\n * @typedef {import('./InputDevice.js').InputDeviceEvent} InputDeviceEvent\n */\n\nconst DEFAULT_LINE_PIXELS = 10;\nconst DEFAULT_PAGE_PIXELS = 100;\n\n/**\n * A class that listens to the mouse events from the event target and\n * transforms the events into a valid {@link InputDeviceEvent} for its\n * listeners.\n *\n * - PosX\n * - PosY\n * - WheelX\n * - WheelY\n * - WheelZ\n * - Button0 (left button)\n * - Button1 (middle button)\n * - Button2 (right button)\n * - Button3 (next button)\n * - Button4 (back button)\n */\nexport class MouseDevice extends InputDevice {\n  /** @override */\n  static isAxis(keyCode) {\n    return (\n      keyCode === 'PosX' ||\n      keyCode === 'PosY' ||\n      keyCode === 'WheelX' ||\n      keyCode === 'WheelY' ||\n      keyCode === 'WheelZ'\n    );\n  }\n\n  /** @override */\n  static isButton(keyCode) {\n    return !this.isAxis(keyCode);\n  }\n\n  /**\n   * Constructs a listening mouse with no listeners (yet).\n   *\n   * @param {string} deviceName\n   * @param {EventTarget} eventTarget\n   * @param {Object} [opts] Any additional options.\n   * @param {Boolean} [opts.eventsOnFocus=true] Whether to capture events only when it has focus.\n   */\n  constructor(deviceName, eventTarget, opts = {}) {\n    super(deviceName, eventTarget);\n\n    const { eventsOnFocus = true } = opts;\n    this.eventsOnFocus = eventsOnFocus;\n    this.canvasTarget = this.getCanvasFromEventTarget(eventTarget);\n\n    /** @private */\n    this._downHasFocus = false;\n\n    /**\n     * @private\n     * @type {InputDeviceEvent}\n     */\n    this._eventObject = {\n      target: eventTarget,\n      device: deviceName,\n      code: '',\n      event: '',\n      // Button values\n      value: 0,\n      control: false,\n      shift: false,\n      alt: false,\n    };\n    /**\n     * @private\n     * @type {InputDeviceEvent}\n     */\n    this._positionObject = {\n      target: eventTarget,\n      device: deviceName,\n      code: '',\n      event: 'move',\n      // Pos values\n      value: 0,\n      movement: 0,\n    };\n    /**\n     * @private\n     * @type {InputDeviceEvent}\n     */\n    this._wheelObject = {\n      target: eventTarget,\n      device: deviceName,\n      code: '',\n      event: 'wheel',\n      // Wheel values\n      movement: 0,\n    };\n\n    /** @private */\n    this.onMouseDown = this.onMouseDown.bind(this);\n    /** @private */\n    this.onMouseUp = this.onMouseUp.bind(this);\n    /** @private */\n    this.onMouseMove = this.onMouseMove.bind(this);\n    /** @private */\n    this.onContextMenu = this.onContextMenu.bind(this);\n    /** @private */\n    this.onWheel = this.onWheel.bind(this);\n\n    eventTarget.addEventListener('mousedown', this.onMouseDown);\n    eventTarget.addEventListener('contextmenu', this.onContextMenu);\n    eventTarget.addEventListener('wheel', this.onWheel);\n    document.addEventListener('mousemove', this.onMouseMove);\n    document.addEventListener('mouseup', this.onMouseUp);\n  }\n\n  /** @override */\n  setEventTarget(eventTarget) {\n    if (this.eventTarget) this.destroy();\n    super.setEventTarget(eventTarget);\n    this.canvasTarget = this.getCanvasFromEventTarget(eventTarget);\n    eventTarget.addEventListener('mousedown', this.onMouseDown);\n    eventTarget.addEventListener('contextmenu', this.onContextMenu);\n    eventTarget.addEventListener('wheel', this.onWheel);\n    document.addEventListener('mousemove', this.onMouseMove);\n    document.addEventListener('mouseup', this.onMouseUp);\n  }\n\n  /** @override */\n  destroy() {\n    let eventTarget = this.eventTarget;\n    eventTarget.removeEventListener('mousedown', this.onMouseDown);\n    eventTarget.removeEventListener('contextmenu', this.onContextMenu);\n    eventTarget.removeEventListener('wheel', this.onWheel);\n    document.removeEventListener('mousemove', this.onMouseMove);\n    document.removeEventListener('mouseup', this.onMouseUp);\n    super.destroy();\n  }\n\n  setPointerLock(force = true) {\n    if (force) {\n      this.eventTarget.requestPointerLock();\n    } else {\n      this.eventTarget.exitPointerLock();\n    }\n  }\n\n  hasPointerLock() {\n    return document.pointerLockElement === this.eventTarget;\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  onMouseDown(e) {\n    this._downHasFocus = true;\n\n    let event = this._eventObject;\n    // We care more about location (code) than print char (key).\n    event.code = 'Button' + e.button;\n    event.event = 'pressed';\n    event.value = 1;\n    event.control = e.ctrlKey;\n    event.shift = e.shiftKey;\n    event.alt = e.altKey;\n\n    let result = this.dispatchInputEvent(event);\n    if (result) {\n      // Make sure it has focus first.\n      if (document.activeElement === this.eventTarget) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  onContextMenu(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    return false;\n  }\n\n  /**\n   * @private\n   * @param {WheelEvent} e\n   */\n  onWheel(e) {\n    let dx, dy, dz;\n    switch (e.deltaMode) {\n      case WheelEvent.DOM_DELTA_LINE:\n        dx = e.deltaX * DEFAULT_LINE_PIXELS;\n        dy = e.deltaY * DEFAULT_LINE_PIXELS;\n        dz = e.deltaZ * DEFAULT_LINE_PIXELS;\n        break;\n      case WheelEvent.DOM_DELTA_PAGE:\n        dx = e.deltaX * DEFAULT_PAGE_PIXELS;\n        dy = e.deltaY * DEFAULT_PAGE_PIXELS;\n        dz = e.deltaZ * DEFAULT_PAGE_PIXELS;\n        break;\n      case WheelEvent.DOM_DELTA_PIXEL:\n      default:\n        dx = e.deltaX;\n        dy = e.deltaY;\n        dz = e.deltaZ;\n        break;\n    }\n\n    let result = 0;\n    let event = this._wheelObject;\n    event.code = 'WheelX';\n    event.movement = dx;\n    result |= this.dispatchInputEvent(event);\n    event.code = 'WheelY';\n    event.movement = dy;\n    result |= this.dispatchInputEvent(event);\n    event.code = 'WheelZ';\n    event.movement = dz;\n    result |= this.dispatchInputEvent(event);\n    if (result) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  onMouseUp(e) {\n    // Make sure mouse down was pressed before this (with focus).\n    if (!this._downHasFocus) return;\n    this._downHasFocus = false;\n\n    let event = this._eventObject;\n    // We care more about location (code) than print char (key).\n    event.code = 'Button' + e.button;\n    event.event = 'released';\n    event.value = 1;\n    event.control = e.ctrlKey;\n    event.shift = e.shiftKey;\n    event.alt = e.altKey;\n\n    let result = this.dispatchInputEvent(event);\n    if (result) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} e\n   */\n  onMouseMove(e) {\n    if (this.eventsOnFocus && document.activeElement !== this.eventTarget)\n      return;\n\n    const element = this.canvasTarget;\n    const { clientWidth, clientHeight } = element;\n    const rect = element.getBoundingClientRect();\n\n    let dx = e.movementX / clientWidth;\n    let dy = e.movementY / clientHeight;\n    let x = (e.clientX - rect.left) / clientWidth;\n    let y = (e.clientY - rect.top) / clientHeight;\n\n    let event = this._positionObject;\n    event.code = 'PosX';\n    event.value = x;\n    event.movement = dx;\n    this.dispatchInputEvent(event);\n    event.code = 'PosY';\n    event.value = y;\n    event.movement = dy;\n    this.dispatchInputEvent(event);\n  }\n\n  /** @private */\n  getCanvasFromEventTarget(eventTarget) {\n    if (eventTarget instanceof HTMLCanvasElement) {\n      return eventTarget;\n    } else {\n      return (\n        eventTarget.canvas ||\n        eventTarget.querySelector('canvas') ||\n        (eventTarget.shadowRoot &&\n          eventTarget.shadowRoot.querySelector('canvas')) ||\n        eventTarget\n      );\n    }\n  }\n}\n", "import INNER_HTML from './InputCode.template.html';\nimport INNER_STYLE from './InputCode.module.css';\n\nexport class InputCode extends HTMLElement {\n  /** @protected */\n  static get [Symbol.for('templateNode')]() {\n    let t = document.createElement('template');\n    t.innerHTML = INNER_HTML;\n    Object.defineProperty(this, Symbol.for('templateNode'), { value: t });\n    return t;\n  }\n\n  /** @protected */\n  static get [Symbol.for('styleNode')]() {\n    let t = document.createElement('style');\n    t.innerHTML = INNER_STYLE;\n    Object.defineProperty(this, Symbol.for('styleNode'), { value: t });\n    return t;\n  }\n\n  static define(customElements = window.customElements) {\n    customElements.define('input-code', this);\n  }\n\n  static get observedAttributes() {\n    return ['name', 'value', 'disabled'];\n  }\n\n  /** @returns {boolean} */\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(value) {\n    this.toggleAttribute('disabled', value);\n  }\n\n  /** @returns {string} */\n  get value() {\n    return this._value;\n  }\n\n  set value(value) {\n    this.setAttribute('value', value);\n  }\n\n  /** @returns {string} */\n  get name() {\n    return this._name;\n  }\n\n  set name(value) {\n    this.setAttribute('name', value);\n  }\n\n  constructor() {\n    super();\n    const c = this.constructor;\n    const shadowRoot = this.attachShadow({ mode: 'open' });\n    shadowRoot.appendChild(c[Symbol.for('templateNode')].content.cloneNode(true));\n    shadowRoot.appendChild(c[Symbol.for('styleNode')].cloneNode(true));\n\n    /** @private */\n    this._name = '';\n    /** @private */\n    this._value = '';\n    /** @private */\n    this._disabled = false;\n\n    /** @private */\n    this._kbdElement = shadowRoot.querySelector('kbd');\n    /** @private */\n    this._nameElement = shadowRoot.querySelector('#name');\n    /** @private */\n    this._valueElement = shadowRoot.querySelector('#value');\n  }\n\n  attributeChangedCallback(attribute, prev, value) {\n    switch (attribute) {\n      case 'name':\n        this._name = value;\n        this._nameElement.textContent = value;\n        break;\n      case 'value':\n        this._value = value;\n        if (value !== null) {\n          this._valueElement.classList.toggle('hidden', false);\n          this._valueElement.textContent = value;\n          this._kbdElement.style.paddingRight = `${this._valueElement.clientWidth + 4\n            }px`;\n        } else {\n          this._valueElement.classList.toggle('hidden', true);\n        }\n        break;\n      case 'disabled':\n        this._disabled = value !== null;\n        this._kbdElement.classList.toggle('disabled', value !== null);\n        break;\n    }\n  }\n\n  connectedCallback() {\n    if (Object.prototype.hasOwnProperty.call(this, 'name')) {\n      let value = this.name;\n      delete this.name;\n      this.name = value;\n    }\n\n    if (Object.prototype.hasOwnProperty.call(this, 'value')) {\n      let value = this.value;\n      delete this.value;\n      this.value = value;\n    }\n\n    if (Object.prototype.hasOwnProperty.call(this, 'disabled')) {\n      let value = this.disabled;\n      delete this.disabled;\n      this.disabled = value;\n    }\n  }\n}\nInputCode.define();\n", "/**\n * @callback OnPollCallback\n * @param {number} now\n *\n * @typedef Pollable\n * @property {OnPollCallback} onPoll\n */\n\n/**\n * A class to automatically call onPoll() on animation frame.\n */\nexport class AutoPoller {\n  /**\n   * @param {Pollable} pollable\n   */\n  constructor(pollable) {\n    /** @private */\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\n    /** @private */\n    this.animationFrameHandle = null;\n    /** @private */\n    this.pollable = pollable;\n  }\n\n  get running() {\n    return this.animationFrameHandle !== null;\n  }\n\n  start() {\n    let handle = this.animationFrameHandle;\n    if (handle) cancelAnimationFrame(handle);\n    this.animationFrameHandle = requestAnimationFrame(this.onAnimationFrame);\n  }\n\n  stop() {\n    let handle = this.animationFrameHandle;\n    if (handle) cancelAnimationFrame(handle);\n    this.animationFrameHandle = null;\n  }\n\n  /** @private */\n  onAnimationFrame(now) {\n    this.animationFrameHandle = requestAnimationFrame(this.onAnimationFrame);\n    this.pollable.onPoll(now);\n  }\n}\n", "/** @typedef {import('./InputBindings.js').InputBindings} InputBindings */\n\n/**\n * A class to listen and transform device events through\n * each mapped bindings into an input state.\n *\n * It requires onPoll() to be called to keep the input\n * state up to date. This is usually called from\n * requestAnimationFrame() or using the AutoPoller.\n */\nexport class DeviceInputAdapter {\n  /**\n   * @param {InputBindings} bindings\n   */\n  constructor(bindings) {\n    /** @private */\n    this.onInput = this.onInput.bind(this);\n    /** @private */\n    this.onPoll = this.onPoll.bind(this);\n\n    this.bindings = bindings;\n  }\n\n  /**\n   * @param {number} now \n   */\n  onPoll(now) {\n    for (let input of this.bindings.getInputs()) {\n      input.onPoll(now);\n    }\n  }\n  \n  onInput(e) {\n    const {\n      device,\n      code,\n      event,\n      value,\n      movement,\n      // eslint-disable-next-line no-unused-vars\n      control,\n      shift,\n      alt,\n    } = e;\n    let bindings = this.bindings.getBindings(device, code);\n    switch (event) {\n      case 'pressed':\n        for (let { input, index } of bindings) {\n          input.onUpdate(index, 1, 1);\n        }\n        break;\n      case 'released':\n        for (let { input, index } of bindings) {\n          input.onUpdate(index, 0, -1);\n        }\n        break;\n      case 'move':\n        for (let { input, index } of bindings) {\n          input.onUpdate(index, value, movement);\n        }\n        break;\n      case 'wheel':\n        for (let { input, index } of bindings) {\n          input.onUpdate(index, undefined, movement);\n        }\n        break;\n    }\n    return bindings.length > 0;\n  }\n}\n", "/**\n * @typedef {import('./state/InputState.js').InputState} InputState\n * @typedef {import('./state/InputState.js').BindingOptions} BindingOptions\n *\n * @typedef {string} DeviceName\n * @typedef {string} KeyCode\n */\n\nclass Binding {\n  /**\n   * @param {DeviceName} device The name of the device\n   * @param {KeyCode} code The key code for the device\n   * @param {InputState} input The parent input\n   * @param {number} index The binding index for the input\n   */\n  constructor(device, code, input, index) {\n    /** Name of the device */\n    this.device = device;\n    /** The key code for the device */\n    this.code = code;\n    /** The parent input */\n    this.input = input;\n    /** The binding index for the input */\n    this.index = index;\n  }\n}\n\n/**\n * A class that maps inputs to their respective key bindings.\n *\n * This does not handle input state (refer to InputState.js) nor\n * input events (refer to InputDevice.js). It is only responsible\n * for the redirection of key codes to their bound input. Usually\n * this is used together with the interfaces referenced above.\n */\nexport class InputBindings {\n  constructor() {\n    /**\n     * @private\n     * @type {Record<DeviceName, Record<KeyCode, Array<Binding>>>}\n     */\n    this.bindingMap = {};\n    /**\n     * @private\n     * @type {Map<InputState, Array<Binding>>}\n     */\n    this.inputMap = new Map();\n  }\n\n  clear() {\n    for (let input of this.inputMap.keys()) {\n      input.onUnbind();\n    }\n    this.inputMap.clear();\n    this.bindingMap = {};\n  }\n\n  /**\n   * @param {InputState} input\n   * @param {DeviceName} device\n   * @param {KeyCode} code\n   * @param {BindingOptions} [opts]\n   */\n  bind(input, device, code, opts = { inverted: false }) {\n    let binding;\n\n    let inputMap = this.inputMap;\n    if (inputMap.has(input)) {\n      let bindings = inputMap.get(input);\n      let index = input.size;\n      input.onBind(index, opts);\n      binding = new Binding(device, code, input, index);\n      bindings.push(binding);\n    } else {\n      let bindings = [];\n      inputMap.set(input, bindings);\n      let index = 0;\n      input.onBind(index, opts);\n      binding = new Binding(device, code, input, index);\n      bindings.push(binding);\n    }\n\n    let bindingMap = this.bindingMap;\n    if (device in bindingMap) {\n      if (code in bindingMap[device]) {\n        bindingMap[device][code].push(binding);\n      } else {\n        bindingMap[device][code] = [binding];\n      }\n    } else {\n      bindingMap[device] = { [code]: [binding] };\n    }\n  }\n\n  /**\n   * @param {InputState} input\n   */\n  unbind(input) {\n    let inputMap = this.inputMap;\n    if (inputMap.has(input)) {\n      let bindingMap = this.bindingMap;\n      let bindings = inputMap.get(input);\n      for (let binding of bindings) {\n        let { device, code } = binding;\n        let boundList = bindingMap[device][code];\n        let i = boundList.indexOf(binding);\n        boundList.splice(i, 1);\n      }\n      bindings.length = 0;\n      input.onUnbind();\n      inputMap.delete(input);\n    }\n  }\n\n  /**\n   * @param {InputState} input\n   * @returns {boolean}\n   */\n  isBound(input) {\n    return this.inputMap.has(input);\n  }\n\n  /** @returns {Iterable<InputState>} */\n  getInputs() {\n    return this.inputMap.keys();\n  }\n\n  /** @returns {Iterable<Binding>} */\n  getBindingsByInput(input) {\n    return this.inputMap.get(input);\n  }\n\n  /**\n   * @param {DeviceName} device\n   * @param {KeyCode} code\n   * @returns {Array<Binding>}\n   */\n  getBindings(device, code) {\n    let deviceCodeBindings = this.bindingMap;\n    if (device in deviceCodeBindings) {\n      let codeBindings = deviceCodeBindings[device];\n      if (code in codeBindings) {\n        return codeBindings[code];\n      }\n    }\n    return [];\n  }\n}\n", "import { AutoPoller } from './AutoPoller.js';\nimport { AxisState } from './state/AxisState.js';\nimport { ButtonState } from './state/ButtonState.js';\nimport { KeyboardDevice } from './device/KeyboardDevice.js';\nimport { MouseDevice } from './device/MouseDevice.js';\nimport { DeviceInputAdapter } from './DeviceInputAdapter.js';\nimport { InputBindings } from './InputBindings.js';\n\n/**\n * @typedef {import('./device/InputDevice.js').InputDevice} InputDevice\n * @typedef {import('./device/InputDevice.js').InputDeviceEvent} InputDeviceEvent\n * @typedef {import('./state/InputState.js').InputState} InputState\n * @typedef {import('./InputBindings.js').DeviceName} DeviceName\n * @typedef {import('./InputBindings.js').KeyCode} KeyCode\n * @typedef {import('./InputBindings.js').BindingOptions} BindingOptions\n *\n * @typedef {import('./binding/InputBinding.js').InputBinding} InputBinding\n */\n\n/**\n * @typedef {string} InputName\n * \n * @typedef {'bind'|'unbind'|'focus'|'blur'} InputContextEventType\n * @typedef {(e: InputContextEvent) => boolean} InputContextEventListener\n * \n * @typedef InputContextEvent\n * @property {InputContextEventType} type\n */\n\nexport class InputContext {\n  /**\n   * @param {EventTarget} eventTarget\n   * @param {object} [opts]\n   */\n  constructor(eventTarget, opts = undefined) {\n    /**\n     * @type {Record<string, AxisState|ButtonState>}\n     */\n    this.inputs = {};\n    /**\n     * @type {Array<InputDevice>}\n     */\n    this.devices = [\n      new MouseDevice('Mouse', eventTarget),\n      new KeyboardDevice('Keyboard', eventTarget),\n    ];\n    this.bindings = new InputBindings();\n    this.adapter = new DeviceInputAdapter(this.bindings);\n    this.autopoller = new AutoPoller(this.adapter);\n\n    /** @protected */\n    this.eventTarget = eventTarget;\n    /** @protected */\n    this.anyButton = new ButtonState(1);\n    /** @protected */\n    this.anyButtonDevice = '';\n    /** @protected */\n    this.anyButtonCode = '';\n    /** @protected */\n    this.anyAxis = new AxisState(1);\n    /** @protected */\n    this.anyAxisDevice = '';\n    /** @protected */\n    this.anyAxisCode = '';\n\n    /**\n     * @private\n     * @type {Record<InputContextEventType, Array<InputContextEventListener>>}\n     */\n    this.listeners = {\n      bind: [],\n      unbind: [],\n      focus: [],\n      blur: [],\n    };\n\n    // Prepare listeners\n    /** @private */\n    this.onInput = this.onInput.bind(this);\n    /** @private */\n    this.onEventTargetBlur = this.onEventTargetBlur.bind(this);\n    /** @private */\n    this.onEventTargetFocus = this.onEventTargetFocus.bind(this);\n\n    // Attach listeners\n    eventTarget.addEventListener('focus', this.onEventTargetFocus);\n    eventTarget.addEventListener('blur', this.onEventTargetBlur);\n    for (let device of this.devices) {\n      device.addEventListener('input', this.onInput);\n    }\n  }\n\n  get autopoll() {\n    return this.autopoller.running;\n  }\n\n  set autopoll(value) {\n    this.toggleAutoPoll(value);\n  }\n\n  destroy() {\n    let listeners = this.listeners;\n    for (let event in listeners) {\n      listeners[event].length = 0;\n    }\n    if (this.autopoller.running) {\n      this.autopoller.stop();\n    }\n    for (let device of this.devices) {\n      device.removeEventListener('input', this.onInput);\n      device.destroy();\n    }\n    let eventTarget = this.eventTarget;\n    eventTarget.removeEventListener('focus', this.onEventTargetFocus);\n    eventTarget.removeEventListener('blur', this.onEventTargetBlur);\n  }\n\n  setEventTarget(eventTarget) {\n    let oldEventTarget = this.eventTarget;\n    oldEventTarget.removeEventListener('focus', this.onEventTargetFocus);\n    oldEventTarget.removeEventListener('blur', this.onEventTargetBlur);\n\n    this.eventTarget = eventTarget;\n    for (let device of this.devices) {\n      device.setEventTarget(eventTarget);\n    }\n    eventTarget.addEventListener('focus', this.onEventTargetFocus);\n    eventTarget.addEventListener('blur', this.onEventTargetBlur);\n  }\n\n  toggleAutoPoll(force = undefined) {\n    let current = this.autopoller.running;\n    let next = typeof force === 'undefined' ? !current : Boolean(force);\n    if (next === current) return;\n    if (next) {\n      this.autopoller.start();\n    } else {\n      this.autopoller.stop();\n    }\n  }\n\n  /**\n   * @param {InputContextEventType} event\n   * @param {InputContextEventListener} listener\n   */\n  addEventListener(event, listener) {\n    let listeners = this.listeners;\n    if (event in listeners) {\n      listeners[event].push(listener);\n    } else {\n      listeners[event] = [listener];\n    }\n  }\n\n  /**\n   * @param {InputContextEventType} event\n   * @param {InputContextEventListener} listener\n   */\n  removeEventListener(event, listener) {\n    let listeners = this.listeners;\n    if (event in listeners) {\n      let list = listeners[event];\n      let i = list.indexOf(listener);\n      if (i >= 0) {\n        list.splice(i, 1);\n      }\n    }\n  }\n\n  /**\n   * @param {InputContextEvent} e\n   * @returns {boolean} Whether the event should be consumed.\n   */\n  dispatchEvent(e) {\n    const { type } = e;\n    let flag = 0;\n    for (let listener of this.listeners[type]) {\n      flag |= listener(e) ? 1 : 0;\n    }\n    return Boolean(flag);\n  }\n\n  /**\n   * @param {number} now\n   */\n  poll(now = performance.now()) {\n    if (this.autopoller.running) {\n      throw new Error('Should not manually poll() while autopolling.');\n    }\n    this.onPoll(now);\n  }\n\n  /**\n   * @private\n   * @param {InputDeviceEvent} e\n   */\n  onInput(e) {\n    let result = this.adapter.onInput(e);\n    switch (e.event) {\n      case 'pressed':\n        this.anyButtonDevice = e.device;\n        this.anyButtonCode = e.code;\n        this.anyButton.onUpdate(0, 1, 1);\n        break;\n      case 'released':\n        this.anyButtonDevice = e.device;\n        this.anyButtonCode = e.code;\n        this.anyButton.onUpdate(0, 0, -1);\n        break;\n      case 'move':\n      case 'wheel':\n        this.anyAxisDevice = e.device;\n        this.anyAxisCode = e.code;\n        this.anyAxis.onUpdate(0, e.value, e.movement);\n        break;\n    }\n    return result;\n  }\n\n  /**\n   * @private\n   * @param {number} now\n   */\n  onPoll(now) {\n    this.adapter.onPoll(now);\n    this.anyButton.onPoll(now);\n    this.anyAxis.onPoll(now);\n  }\n\n  /** @private */\n  onBind() {\n    this.dispatchEvent({\n      type: 'bind',\n    });\n  }\n\n  /** @private */\n  onUnbind() {\n    this.dispatchEvent({\n      type: 'unbind',\n    });\n  }\n\n  /** @private */\n  onEventTargetFocus() {\n    this.dispatchEvent({\n      type: 'focus',\n    });\n  }\n\n  /** @private */\n  onEventTargetBlur() {\n    // Clear all input states.\n    for (let input of this.bindings.getInputs()) {\n      input.onStatus(0, 0);\n    }\n    this.anyButton.onStatus(0, 0);\n    this.anyAxis.onStatus(0, 0);\n    this.dispatchEvent({\n      type: 'blur',\n    });\n  }\n\n  /**\n   * @param {InputBinding|Array<InputBinding>|Record<string, InputBinding>} bindings\n   */\n  bindKeys(bindings) {\n    if (Array.isArray(bindings)) {\n      for(let binding of bindings) {\n        binding.bindKeys(this);\n      }\n    } else if (typeof bindings.bindKeys === 'function') {\n      bindings.bindKeys(this);\n    } else {\n      bindings = Object.values(bindings);\n      for(let binding of bindings) {\n        binding.bindKeys(this);\n      }\n    }\n  }\n\n  /**\n   * @param {InputName} name\n   * @param {DeviceName} device\n   * @param {KeyCode} code\n   * @param {BindingOptions} [opts]\n   */\n  bindButton(name, device, code, opts = undefined) {\n    let input;\n    if (this.hasButton(name)) {\n      input = this.getButton(name);\n    } else {\n      input = new ButtonState(1);\n      this.inputs[name] = input;\n    }\n    this.bindings.bind(input, device, code, opts);\n    this.onBind();\n  }\n\n  /**\n   * @param {string} name\n   * @param {DeviceName} device\n   * @param {KeyCode} code\n   * @param {BindingOptions} [opts]\n   */\n  bindAxis(name, device, code, opts = undefined) {\n    let input;\n    if (this.hasAxis(name)) {\n      input = this.getAxis(name);\n    } else {\n      input = new AxisState(1);\n      this.inputs[name] = input;\n    }\n    this.bindings.bind(input, device, code, opts);\n    this.onBind();\n  }\n\n  /**\n   * @param {string} name\n   * @param {DeviceName} device\n   * @param {KeyCode} negativeCode\n   * @param {KeyCode} positiveCode\n   */\n  bindAxisButtons(name, device, negativeCode, positiveCode) {\n    let input;\n    if (this.hasAxis(name)) {\n      input = this.getAxis(name);\n    } else {\n      input = new AxisState(2);\n      this.inputs[name] = input;\n    }\n    this.bindings.bind(input, device, positiveCode);\n    this.bindings.bind(input, device, negativeCode, { inverted: true });\n    this.onBind();\n  }\n\n  /**\n   * @param {string} name\n   */\n  unbindButton(name) {\n    if (this.hasButton(name)) {\n      let input = this.getButton(name);\n      delete this.inputs[name];\n      this.bindings.unbind(input);\n      this.onUnbind();\n    }\n  }\n\n  /**\n   * @param {string} name\n   */\n  unbindAxis(name) {\n    if (this.hasAxis(name)) {\n      let input = this.getAxis(name);\n      delete this.inputs[name];\n      this.bindings.unbind(input);\n      this.onUnbind();\n    }\n  }\n\n  /**\n   * Get the input for the given name. Assumes the input already exists for the name.\n   * @param {InputName} name\n   * @returns {InputState}\n   */\n  getInput(name) {\n    return this.inputs[name];\n  }\n\n  /**\n   * Get the button for the given name. Assumes a button already exists for the name.\n   * @param {InputName} name\n   * @returns {ButtonState}\n   */\n  getButton(name) {\n    return /** @type {ButtonState} */ (this.inputs[name]);\n  }\n\n  /**\n   * Get the axis for the given name. Assumes an axis already exists for the name.\n   * @param {InputName} name\n   * @returns {AxisState}\n   */\n  getAxis(name) {\n    return /** @type {AxisState} */ (this.inputs[name]);\n  }\n\n  /**\n   * Whether a button exists for the name and that it is of type {@link Button}.\n   * @returns {boolean}\n   */\n  hasButton(name) {\n    return name in this.inputs && this.inputs[name] instanceof ButtonState;\n  }\n\n  /**\n   * Whether an axis exists for the name and that it is of type {@link Axis}.\n   * @returns {boolean}\n   */\n  hasAxis(name) {\n    return name in this.inputs && this.inputs[name] instanceof AxisState;\n  }\n\n  /**\n   * Get whether a button for the given name is down. Assumes a button already exists for the name.\n   * @param {InputName} name\n   * @returns {boolean}\n   */\n  isButtonDown(name) {\n    return /** @type {ButtonState} */ (this.inputs[name]).down;\n  }\n\n  /**\n   * Get whether a button for the given name is pressed. Assumes a button already exists for the name.\n   * @param {InputName} name\n   * @returns {boolean}\n   */\n  isButtonPressed(name) {\n    return /** @type {ButtonState} */ (this.inputs[name]).pressed;\n  }\n\n  /**\n   * Get whether a button for the given name is released. Assumes a button already exists for the name.\n   * @param {InputName} name\n   * @returns {boolean}\n   */\n  isButtonReleased(name) {\n    return /** @type {ButtonState} */ (this.inputs[name]).released;\n  }\n\n  /**\n   * @param {InputName} name\n   * @returns {number}\n   */\n  getInputValue(name) {\n    return this.inputs[name].value;\n  }\n\n  /**\n   * @param {InputName} name\n   * @returns {number}\n   */\n  getButtonValue(name) {\n    return this.inputs[name].value;\n  }\n\n  /**\n   * @param {InputName} name\n   * @returns {number}\n   */\n  getAxisValue(name) {\n    return this.inputs[name].value;\n  }\n\n  /**\n   * @param {InputName} name\n   * @returns {number}\n   */\n  getAxisDelta(name) {\n    return /** @type {AxisState} */ (this.inputs[name]).delta;\n  }\n\n  /** @returns {boolean} */\n  isAnyButtonDown(include = undefined) {\n    if (typeof include === 'undefined') {\n      return this.anyButton.down;\n    } else {\n      let buttons = this.inputs;\n      for (let name of include) {\n        let button = /** @type {ButtonState} */ (buttons[name]);\n        if (button.down) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /** @returns {boolean} */\n  isAnyButtonPressed(include = undefined) {\n    if (typeof include === 'undefined') {\n      return this.anyButton.pressed;\n    } else {\n      let buttons = this.inputs;\n      for (let name of include) {\n        let button = /** @type {ButtonState} */ (buttons[name]);\n        if (button.pressed) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /** @returns {boolean} */\n  isAnyButtonReleased(include = undefined) {\n    if (typeof include === 'undefined') {\n      return this.anyButton.released;\n    } else {\n      let buttons = this.inputs;\n      for (let name of include) {\n        let button = /** @type {ButtonState} */ (buttons[name]);\n        if (button.released) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /** @returns {number} */\n  getAnyAxisValue(include = undefined) {\n    if (typeof include === 'undefined') {\n      return this.anyAxis.value;\n    } else {\n      let axes = this.inputs;\n      for (let name of include) {\n        let axis = axes[name];\n        if (axis.value) {\n          return axis.value;\n        }\n      }\n    }\n    return 0;\n  }\n\n  /** @returns {number} */\n  getAnyAxisDelta(include = undefined) {\n    if (typeof include === 'undefined') {\n      return this.anyAxis.delta;\n    } else {\n      let axes = this.inputs;\n      for (let name of include) {\n        let axis = /** @type {AxisState} */ (axes[name]);\n        if (axis.delta) {\n          return axis.delta;\n        }\n      }\n    }\n    return 0;\n  }\n\n  getLastButtonDevice() {\n    return this.anyButtonDevice;\n  }\n\n  getLastButtonCode() {\n    return this.anyButtonCode;\n  }\n\n  getLastAxisDevice() {\n    return this.anyAxisDevice;\n  }\n\n  getLastAxisCode() {\n    return this.anyAxisCode;\n  }\n\n  getMouse() {\n    return /** @type {MouseDevice}*/ (this.devices[0]);\n  }\n\n  getKeyboard() {\n    return /** @type {KeyboardDevice}*/ (this.devices[1]);\n  }\n}\n", "import INNER_HTML from './InputPort.template.html';\nimport INNER_STYLE from './InputPort.module.css';\n\nimport { InputCode } from '../inputcode/InputCode.js';\nimport { InputContext } from '../InputContext';\n\n/**\n * @typedef {import('../device/InputDevice.js').InputDevice} InputDevice\n * @typedef {import('../device/InputDevice.js').InputDeviceEvent} InputDeviceEvent\n * @typedef {import('../InputBindings.js').DeviceName} DeviceName\n * @typedef {import('../InputBindings.js').KeyCode} KeyCode\n * @typedef {import('../InputBindings.js').BindingOptions} BindingOptions\n * @typedef {import('../InputContext').InputName} InputName\n */\n\nexport class InputPort extends HTMLElement {\n\n  /**\n   * @param {object} [opts]\n   * @param {HTMLElement} [opts.root]\n   * @param {string} [opts.id]\n   * @param {string} [opts.for]\n   * @param {boolean} [opts.autopoll]\n   */\n  static create(opts = {}) {\n    const {\n      root = document.body,\n      id = undefined,\n      for: forId = undefined,\n      autopoll = false,\n    } = opts || {};\n    let result = new InputPort();\n    result.id = id;\n    result.for = forId;\n    result.autopoll = autopoll;\n    root.appendChild(result);\n    return result;\n  }\n\n  /** @protected */\n  static get [Symbol.for('templateNode')]() {\n    let t = document.createElement('template');\n    t.innerHTML = INNER_HTML;\n    Object.defineProperty(this, Symbol.for('templateNode'), { value: t });\n    return t;\n  }\n\n  /** @protected */\n  static get [Symbol.for('styleNode')]() {\n    let t = document.createElement('style');\n    t.innerHTML = INNER_STYLE;\n    Object.defineProperty(this, Symbol.for('styleNode'), { value: t });\n    return t;\n  }\n\n  static define(customElements = window.customElements) {\n    customElements.define('input-port', this);\n  }\n\n  static get observedAttributes() {\n    return ['autopoll', 'for'];\n  }\n\n  /** @returns {boolean} */\n  get autopoll() {\n    return this._autopoll;\n  }\n\n  set autopoll(value) {\n    this.toggleAttribute('autopoll', value);\n  }\n\n  /** @returns {string} */\n  get for() {\n    return this._for;\n  }\n\n  set for(value) {\n    this.setAttribute('for', value);\n  }\n\n  constructor() {\n    super();\n    const shadowRoot = this.attachShadow({ mode: 'open' });\n    shadowRoot.appendChild(\n      this.constructor[Symbol.for('templateNode')].content.cloneNode(true)\n    );\n    shadowRoot.appendChild(\n      this.constructor[Symbol.for('styleNode')].cloneNode(true)\n    );\n\n    /** @private */\n    this._titleElement = shadowRoot.querySelector('#title');\n    /** @private */\n    this._pollElement = shadowRoot.querySelector('#poll');\n    /** @private */\n    this._focusElement = shadowRoot.querySelector('#focus');\n    /** @private */\n    this._bodyElement = shadowRoot.querySelector('tbody');\n    /** @private */\n    this._outputElements = {};\n\n    /** @private */\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\n    /** @private */\n    this.animationFrameHandle = null;\n\n    const eventTarget = this;\n    /** @private */\n    this._for = '';\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this._eventTarget = eventTarget;\n    /** @private */\n    this._autopoll = false;\n\n    /** @private */\n    this._context = null;\n\n    /** @private */\n    this.onInputContextBind = this.onInputContextBind.bind(this);\n    /** @private */\n    this.onInputContextUnbind = this.onInputContextUnbind.bind(this);\n    /** @private */\n    this.onInputContextFocus = this.onInputContextFocus.bind(this);\n    /** @private */\n    this.onInputContextBlur = this.onInputContextBlur.bind(this);\n  }\n\n  connectedCallback() {\n    if (Object.prototype.hasOwnProperty.call(this, 'for')) {\n      let value = this.for;\n      delete this.for;\n      this.for = value;\n    }\n\n    if (Object.prototype.hasOwnProperty.call(this, 'autopoll')) {\n      let value = this.autopoll;\n      delete this.autopoll;\n      this.autopoll = value;\n    }\n\n    // Make sure the table and values are up to date\n    this.updateTable();\n    this.updateTableValues();\n    this.animationFrameHandle = window.requestAnimationFrame(this.onAnimationFrame);\n  }\n\n  disconnectedCallback() {\n    let ctx = this._context;\n    if (ctx) {\n      ctx.removeEventListener('bind', this.onInputContextBind);\n      ctx.removeEventListener('unbind', this.onInputContextUnbind);\n      ctx.removeEventListener('blur', this.onInputContextBlur);\n      ctx.removeEventListener('focus', this.onInputContextFocus);\n      ctx.destroy();\n      this._context = null;\n    }\n  }\n  \n  attributeChangedCallback(attribute, prev, value) {\n    switch (attribute) {\n      case 'for': {\n        this._for = value;\n        let target;\n        let name;\n        if (value) {\n          target = document.getElementById(value);\n          name = `${target.tagName.toLowerCase()}#${value}`;\n        } else {\n          target = this;\n          name = 'input-port';\n        }\n        this._eventTarget = target;\n        if (this._context) {\n          this._context.setEventTarget(this._eventTarget);\n        }\n        // For debug info\n        this._titleElement.innerHTML = `for ${name}`;\n      }\n        break;\n      case 'autopoll':\n        this._autopoll = value !== null;\n        if (this._context) {\n          this._context.toggleAutoPoll(this._autopoll);\n        }\n        break;\n    }\n  }\n\n  /** @private */\n  onAnimationFrame() {\n    this.animationFrameHandle = window.requestAnimationFrame(this.onAnimationFrame);\n    this.updateTableValues();\n    this.updatePollStatus();\n  }\n\n  /** @private */\n  onInputContextBind() {\n    this.updateTable();\n    return true;\n  }\n\n  /** @private */\n  onInputContextUnbind() {\n    this.updateTable();\n    return true;\n  }\n\n  /** @private */\n  onInputContextFocus() {\n    this._focusElement.innerHTML = '';\n    return true;\n  }\n\n  /** @private */\n  onInputContextBlur() {\n    this._focusElement.innerHTML = '';\n    return true;\n  }\n\n  /**\n   * @param {'axisbutton'} [contextId]\n   * @param {object} [options]\n   * @returns {InputContext}\n   */\n  getContext(contextId = 'axisbutton', options = undefined) {\n    switch (contextId) {\n      case 'axisbutton':\n        if (!this._context) {\n          let ctx = new InputContext(this._eventTarget, options);\n          ctx.addEventListener('bind', this.onInputContextBind);\n          ctx.addEventListener('unbind', this.onInputContextUnbind);\n          ctx.addEventListener('blur', this.onInputContextBlur);\n          ctx.addEventListener('focus', this.onInputContextFocus);\n          if (this._autopoll) {\n            ctx.toggleAutoPoll(true);\n          }\n          this._context = ctx;\n        }\n        return this._context;\n      default:\n        throw new Error(`Input context id '${contextId}' is not supported.`);\n    }\n  }\n\n  /** @private */\n  updateTable() {\n    if (!this.isConnected) {\n      // Don't update the DOM if not connected to any :(\n      return;\n    } else if (!this._context) {\n      // Clear all values if no context is available\n      this._outputElements = {};\n      this._bodyElement.innerHTML = '';\n      return;\n    } else {\n      let context = this._context;\n      let inputs = context.inputs;\n      let bindings = context.bindings;\n      let primaryElements = {};\n      let entries = [];\n      for (let name of Object.keys(inputs)) {\n        let input = inputs[name];\n        let primary = true;\n        for (let binding of bindings.getBindingsByInput(input)) {\n          let element = createInputTableEntry(\n            `${input.constructor.name}.${name}`,\n            `${binding.device}.${binding.code}`,\n            0,\n            primary\n          );\n          entries.push(element);\n          if (primary) {\n            primaryElements[name] = element.querySelector('output');\n            primary = false;\n          }\n        }\n      }\n      this._outputElements = primaryElements;\n      this._bodyElement.innerHTML = '';\n      for (let entry of entries) {\n        this._bodyElement.appendChild(entry);\n      }\n    }\n  }\n\n  /** @private */\n  updateTableValues() {\n    if (!this.isConnected) {\n      // Don't update the DOM if not connected to any :(\n      return;\n    } else if (!this._context) {\n      // Clear all values if no context is available\n      for (let name of Object.keys(this._outputElements)) {\n        let element = this._outputElements[name];\n        element.innerText = '---';\n      }\n      return;\n    } else {\n      let context = this._context;\n      let inputs = context.inputs;\n      for (let name of Object.keys(this._outputElements)) {\n        let element = this._outputElements[name];\n        let value = inputs[name].value;\n        element.innerText = Number(value).toFixed(2);\n      }\n    }\n  }\n\n  /** @private */\n  updatePollStatus() {\n    if (!this.isConnected) {\n      // Don't update the DOM if not connected to any :(\n      return;\n    } else if (!this._context) {\n      // Clear all values if no context is available\n      this._pollElement.innerHTML = '-';\n      return;\n    } else {\n      let context = this._context;\n      let inputs = context.inputs;\n      for (let input of Object.values(inputs)) {\n        if (!input.polling) {\n          this._pollElement.innerHTML = '';\n          return;\n        }\n      }\n      this._pollElement.innerHTML = '';\n    }\n  }\n}\nInputPort.define();\n\nfunction createInputTableEntry(name, key, value, primary = true) {\n  let row = document.createElement('tr');\n  if (primary) {\n    row.classList.add('primary');\n  }\n  // Name\n  {\n    let data = document.createElement('td');\n    data.textContent = name;\n    data.classList.add('name');\n    row.appendChild(data);\n  }\n  // Value\n  {\n    let data = document.createElement('td');\n    let output = document.createElement('output');\n    if (primary) {\n      output.innerText = Number(value).toFixed(2);\n    } else {\n      output.innerText = '---';\n    }\n    output.classList.add('value');\n    data.appendChild(output);\n    row.appendChild(data);\n  }\n  // Key\n  {\n    let data = document.createElement('td');\n    data.classList.add('key');\n    let kbd = new InputCode();\n    kbd.innerText = key;\n    data.appendChild(kbd);\n    row.appendChild(data);\n  }\n  return row;\n}\n", "import { ButtonState } from './state/ButtonState.js';\nimport { KeyboardDevice } from './device/KeyboardDevice.js';\nimport { InputBindings } from './InputBindings.js';\nimport { AutoPoller } from './AutoPoller.js';\nimport { DeviceInputAdapter } from './DeviceInputAdapter.js';\nimport { KEYBOARD } from './keycode/KeyCodes.js';\n\n/**\n * @typedef {import('./state/ButtonState.js').ButtonReadOnly} ButtonReadOnly\n */\n\nconst KEYBOARD_SOURCE = Symbol('keyboardSource');\nexport class Keyboard {\n  constructor(eventTarget, opts) {\n    /** @type {ButtonReadOnly} */\n    this.KeyA = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyB = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyC = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyD = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyE = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyF = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyG = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyH = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyI = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyJ = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyK = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyL = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyM = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyN = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyO = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyP = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyQ = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyR = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyS = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyT = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyU = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyV = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyW = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyX = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyY = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.KeyZ = new ButtonState();\n\n    /** @type {ButtonReadOnly} */\n    this.Digit0 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit1 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit2 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit3 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit4 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit5 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit6 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit7 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit8 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Digit9 = new ButtonState();\n\n    /** @type {ButtonReadOnly} */\n    this.Minus = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Equal = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.BracketLeft = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.BracketRight = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Semicolon = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Quote = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Backquote = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Backslash = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Comma = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Period = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Slash = new ButtonState();\n\n    /** @type {ButtonReadOnly} */\n    this.Escape = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Space = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.CapsLock = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Backspace = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Delete = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Tab = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Enter = new ButtonState();\n\n    /** @type {ButtonReadOnly} */\n    this.ArrowUp = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.ArrowDown = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.ArrowLeft = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.ArrowRight = new ButtonState();\n\n    const deviceName = KEYBOARD;\n    const device = new KeyboardDevice(deviceName, eventTarget, opts);\n    const bindings = new InputBindings();\n    for (let key in this) {\n      if (Object.prototype.hasOwnProperty.call(this, key)) {\n        let input = /** @type {ButtonState} */ (this[key]);\n        bindings.bind(input, deviceName, key);\n      }\n    }\n    const adapter = new DeviceInputAdapter(bindings);\n    // @ts-ignore\n    device.addEventListener('input', adapter.onInput);\n    // @ts-ignore\n    const autopoller = new AutoPoller(adapter);\n    autopoller.start();\n    this[KEYBOARD_SOURCE] = {\n      device,\n      bindings,\n      adapter,\n      autopoller,\n    };\n  }\n\n  destroy() {\n    const source = this[KEYBOARD_SOURCE];\n    source.autopoller.stop();\n    // @ts-ignore\n    source.device.removeEventListener('input', source.adapter.onInput);\n    source.device.destroy();\n    source.bindings.clear();\n  }\n}\n", "import { AxisState } from './state/AxisState.js';\nimport { ButtonState } from './state/ButtonState.js';\nimport { MouseDevice } from './device/MouseDevice.js';\nimport { InputBindings } from './InputBindings.js';\nimport { DeviceInputAdapter } from './DeviceInputAdapter.js';\nimport { AutoPoller } from './AutoPoller.js';\nimport { MOUSE } from './keycode/KeyCodes.js';\n\n/**\n * @typedef {import('./state/AxisState.js').AxisReadOnly} AxisReadOnly\n * @typedef {import('./state/ButtonState.js').ButtonReadOnly} ButtonReadOnly\n */\n\nconst MOUSE_SOURCE = Symbol('mouseSource');\nexport class Mouse {\n  constructor(eventTarget, opts) {\n    /** @type {AxisReadOnly} */\n    this.PosX = new AxisState();\n    /** @type {AxisReadOnly} */\n    this.PosY = new AxisState();\n\n    /** @type {AxisReadOnly} */\n    this.WheelX = new AxisState();\n    /** @type {AxisReadOnly} */\n    this.WheelY = new AxisState();\n    /** @type {AxisReadOnly} */\n    this.WheelZ = new AxisState();\n\n    /** @type {ButtonReadOnly} */\n    this.Button0 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Button1 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Button2 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Button3 = new ButtonState();\n    /** @type {ButtonReadOnly} */\n    this.Button4 = new ButtonState();\n\n    const deviceName = MOUSE;\n    const device = new MouseDevice(deviceName, eventTarget, opts);\n    const bindings = new InputBindings();\n    for (let key in this) {\n      if (Object.prototype.hasOwnProperty.call(this, key)) {\n        let input = /** @type {AxisState|ButtonState} */ (this[key]);\n        bindings.bind(input, deviceName, key);\n      }\n    }\n    const adapter = new DeviceInputAdapter(bindings);\n    device.addEventListener('input', adapter.onInput);\n    const autopoller = new AutoPoller(adapter);\n    autopoller.start();\n    this[MOUSE_SOURCE] = {\n      device,\n      bindings,\n      adapter,\n      autopoller,\n    };\n  }\n\n  destroy() {\n    const source = this[MOUSE_SOURCE];\n    source.autopoller.stop();\n    source.device.removeEventListener('input', source.adapter.onInput);\n    source.device.destroy();\n    source.bindings.clear();\n  }\n}\n", "import { makeRe } from 'picomatch';\n\nexport class GlobExp {\n    /**\n     * @param {string|GlobExp} pattern \n     */\n    constructor(pattern) {\n        let source;\n        if (typeof pattern === 'object' && pattern instanceof GlobExp) {\n            source = pattern.source;\n        } else {\n            source = String(pattern);\n        }\n        this.source = source;\n\n        /** @private */\n        this._re = makeRe(source);\n    }\n\n    /**\n     * @param {string} string \n     * @returns {boolean}\n     */\n    test(string) {\n        return this._re.test(string);\n    }\n}\n", "import { GlobExp } from './GlobExp.js';\n\n/**\n * @typedef AssetStore\n * @property {Record<string, object>} store\n * @property {Record<string, Loading>} loadings\n * @property {Array<Fallback>} defaults\n */\n\n/**\n * @template T\n * @template {object} S\n * @callback AssetLoader\n * @param {string|ArrayBuffer} src\n * @param {S} [opts]\n * @returns {Promise<T>}\n */\n\nconst FILE_URI_PREFIX_PATTERN = /^([_\\w\\d]+)\\:\\/\\//;\n\n/**\n * Load asset using a loader with the given src.\n * - If loading to transform a cached asset, the cached uri must start with `res://` (or equivalent).\n * - If loading to transform cached raw buffers from an asset pack, use `raw://`.\n * - Otherwise, it will call `fetch()` on src.\n * \n * @template T, S\n * @param {AssetStore} assets\n * @param {string} uri \n * @param {string} src\n * @param {AssetLoader<T, S>} loader\n * @param {S} opts\n * @param {number} timeout\n * @returns {Promise<T>}\n */\n export async function loadInStore(assets, uri, src, loader, opts, timeout) {\n    const { loadings } = assets;\n    \n    let loading;\n    if (uri in loadings) {\n        loading = loadings[uri];\n    } else {\n        loading = new Loading(timeout);\n        loadings[uri] = loading;\n    }\n\n    const attempt = Loading.nextAttempt(loading);\n\n    /** @type {Array<Promise<T>>} */\n    let promises = [loading.promise];\n    if (FILE_URI_PREFIX_PATTERN.test(src)) {\n        // Loading from cached file\n        promises.push(getLoadedInStore(assets, src, timeout)\n            .then(cached => loader(cached, opts))\n            .then(value => Loading.isCurrentAttempt(loading, attempt)\n                ? cacheInStore(assets, uri, value)\n                : undefined));\n    } else {\n        // Just load it\n        promises.push(loader(src)\n            .then(value => Loading.isCurrentAttempt(loading, attempt)\n                ? cacheInStore(assets, uri, value)\n                : undefined));\n    }\n    return await Promise.race(promises);\n}\n\n/**\n * @template T\n * @param {AssetStore} assets\n * @param {string} uri\n * @param {T} value\n * @returns {T}\n */\nexport function cacheInStore(assets, uri, value) {\n    const { store, loadings } = assets;\n    store[uri] = value;\n    // Send asset to awaiting loaders...\n    if (uri in loadings) {\n        loadings[uri].resolve(value);\n        delete loadings[uri];\n    }\n    return value;\n}\n\n/**\n * @template T\n * @param {AssetStore} assets\n * @param {string|GlobExp} glob\n * @param {T} value\n * @returns {T}\n */\nexport function cacheDefaultInStore(assets, glob, value) {\n    const { defaults } = assets;\n    if (typeof glob === 'string') {\n        glob = new GlobExp(glob);\n    }\n    const uri = `__default://[${defaults.length}]`;\n    cacheInStore(assets, uri, value);\n    defaults.push(new Fallback(glob, uri));\n    return value;\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri\n */\nexport function unloadInStore(assets, uri) {\n    const { store, loadings } = assets;\n    if (uri in loadings) {\n        loadings[uri].reject(new Error('Stop loading to delete asset.'));\n        delete loadings[uri];\n    }\n    if (uri in store) {\n        delete store[uri];\n    }\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string|GlobExp} glob\n */\nexport function clearInStore(assets, glob) {\n    if (typeof glob === 'string') {\n        glob = new GlobExp(glob);\n    }\n    const { store, loadings } = assets;\n    // Clear loadings\n    for (let [uri, loading] of Object.entries(loadings)) {\n        if (glob.test(uri)) {\n            loading.reject(new Error(`Stop loading to clear assets matching ${glob}`));\n            delete loadings[uri];\n        }\n    }\n    // Clear cache\n    for (let uri of Object.keys(store)) {\n        if (glob.test(uri)) {\n            delete store[uri];\n        }\n    }\n}\n\n/**\n * @param {AssetStore} assets \n */\nexport function resetStore(assets) {\n    const { store, loadings, defaults } = assets;\n    // Clear loadings\n    for (let [uri, loading] of Object.entries(loadings)) {\n        loading.reject(new Error(`Stop loading to clear all assets.`));\n        delete loadings[uri];\n    }\n    // Clear cache\n    for (let uri of Object.keys(store)) {\n        delete store[uri];\n    }\n    // Clear defaults\n    defaults.length = 0;\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri\n * @returns {Promise<object>}\n */\nexport function getLoadingInStore(assets, uri) {\n    const { loadings } = assets;\n    if (uri in loadings) {\n        return loadings[uri].promise;\n    } else {\n        return null;\n    }\n}\n\n/**\n * @param {AssetStore} assets \n * @param {string} uri \n */\nexport function cancelLoadingInStore(assets, uri) {\n    const { loadings } = assets;\n    for (let [uri, loading] of Object.entries(loadings)) {\n        loading.reject(new Error(`Stop loading to clear all assets.`));\n        delete loadings[uri];\n    }\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri\n * @param {number} timeout\n * @returns {Promise<object>}\n */\nexport async function getLoadedInStore(assets, uri, timeout) {\n    const { store, loadings } = assets;\n    if (uri in store) {\n        return store[uri];\n    } else if (uri in loadings) {\n        return loadings[uri].promise;\n    } else {\n        let loading = new Loading(timeout);\n        loadings[uri] = loading;\n        return loading.promise;\n    }\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri \n * @returns {object}\n */\nexport function getDefaultInStore(assets, uri) {\n    const { defaults } = assets;\n    for (let def of defaults) {\n        if (def.glob.test(uri)) {\n            return getCurrentInStore(assets, def.uri);\n        }\n    }\n    return null;\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri\n * @returns {object}\n */\nexport function getCurrentInStore(assets, uri) {\n    return assets.store[uri];\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri \n * @returns {boolean}\n */\nexport function hasInStore(assets, uri) {\n    return Boolean(assets.store[uri]);\n}\n\n/**\n * @param {AssetStore} assets\n * @returns {Array<string>}\n */\nexport function keysInStore(assets) {\n    return Object.keys(assets.store);\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri \n * @returns {boolean}\n */\nexport function isAssetCachedInStore(assets, uri) {\n    return uri in assets.store;\n}\n\n/**\n * @param {AssetStore} assets\n * @param {string} uri \n * @returns {boolean}\n */\nexport function isAssetLoadingInStore(assets, uri) {\n    return uri in assets.loadings;\n}\n\nclass Fallback {\n    /**\n     * @param {GlobExp} glob \n     * @param {string} uri \n     */\n    constructor(glob, uri) {\n        this.glob = glob;\n        this.uri = uri;\n    }\n}\n\nclass Loading {\n\n    /**\n     * @param {Loading} loading\n     */\n    static nextAttempt(loading) {\n        return ++loading._promiseHandle;\n    }\n\n    /**\n     * @param {Loading} loading \n     * @param {number} attempt\n     */\n    static isCurrentAttempt(loading, attempt) {\n        return loading._promiseHandle === attempt;\n    }\n\n    constructor(timeout) {\n        /** @private */\n        this._promiseHandle = 0;\n        /** @private */\n        this._resolve = null;\n        /** @private */\n        this._reject = null;\n        /** @private */\n        this._reason = null;\n        /** @private */\n        this._value = null;\n        /** @private */\n        this._timeoutHandle =\n            Number.isFinite(timeout) && timeout > 0\n                ? setTimeout(() => {\n                    this.reject(`Asset loading exceeded timeout of ${timeout} ms.`);\n                }, timeout)\n                : null;\n        /** @private */\n        this._promise = new Promise((resolve, reject) => {\n            if (this._value) {\n                resolve(this._value);\n            } else {\n                this._resolve = resolve;\n            }\n            if (this._reason) {\n                reject(this._reason);\n            } else {\n                this._reject = reject;\n            }\n        });\n    }\n\n    get promise() {\n        return this._promise;\n    }\n\n    resolve(value) {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n            this._timeoutHandle = null;\n        }\n        if (this._resolve) {\n            this._resolve(value);\n        } else {\n            this._value = value;\n        }\n    }\n\n    reject(reason) {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n            this._timeoutHandle = null;\n        }\n        if (this._reject) {\n            this._reject(reason);\n        } else {\n            this._reason = reason;\n        }\n    }\n}\n", "import { cacheDefaultInStore, cacheInStore, clearInStore, getCurrentInStore, getDefaultInStore, getLoadedInStore, getLoadingInStore, hasInStore, isAssetCachedInStore, isAssetLoadingInStore, keysInStore, loadInStore, resetStore, unloadInStore } from './AssetStore.js';\nimport { GlobExp } from './GlobExp.js';\n\n/**\n * @template T, S\n * @typedef {import('./AssetStore').AssetLoader<T, S>} AssetLoader\n */\n\nexport class AssetManager {\n\n    /**\n     * @param {AssetManager} [parent] \n     */\n    constructor(parent = null) {\n        this.parent = parent;\n        /** @private */\n        this.store = {};\n        /** @private */\n        this.loadings = {};\n        /** @private */\n        this.defaults = [];\n    }\n\n    /**\n     * @param {string} uri \n     * @returns {any}\n     */\n    get(uri) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        if (isAssetCachedInStore(assets, uri)) {\n            return getCurrentInStore(assets, uri);\n        }\n        let def = getDefaultInStore(assets, uri);\n        if (def) {\n            return def;\n        }\n        throw new Error(`Asset '${uri}' not found.`);\n    }\n\n    /**\n     * @template T, S\n     * @param {string} uri \n     * @param {string} filepath\n     * @param {AssetLoader<T, S>} loader \n     * @param {S} opts \n     * @param {number} timeout \n     * @returns {Promise<T>}\n     */\n    async resolve(uri, filepath, loader, opts, timeout) {\n        return this.get(uri) || await this.load(uri, filepath, loader, opts, timeout);\n    }\n\n    /**\n     * @template T\n     * @param {string|GlobExp} uriGlob \n     * @param {T} value \n     * @returns {T}\n     */\n    fallback(uriGlob, value) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        return cacheDefaultInStore(assets, uriGlob, value);\n    }\n\n    /**\n     * @template T\n     * @param {string} uri \n     * @param {T} value \n     * @returns {T}\n     */\n    cache(uri, value) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        return cacheInStore(assets, uri, value);\n    }\n\n    /**\n     * @template T, S\n     * @param {string} uri \n     * @param {string} filepath\n     * @param {AssetLoader<T, S>} loader \n     * @param {S} opts \n     * @param {number} timeout\n     * @returns {Promise<T>}\n     */\n    async load(uri, filepath, loader, opts, timeout) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        if (isAssetCachedInStore(assets, uri)) {\n            return getCurrentInStore(assets, uri);\n        } else if (isAssetLoadingInStore(assets, uri)) {\n            return await getLoadedInStore(assets, uri, timeout);\n        }\n        return await loadInStore(assets, uri, filepath, loader, opts, timeout);\n    }\n\n    /**\n     * @template T, S\n     * @param {string} uri \n     * @param {string} filepath\n     * @param {AssetLoader<T, S>} loader \n     * @param {S} opts \n     * @param {number} timeout\n     * @returns {Promise<T>}\n     */\n    async reload(uri, filepath, loader, opts, timeout) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        return await loadInStore(assets, uri, filepath, loader, opts, timeout);\n    }\n\n    /**\n     * @param {string} uri \n     */\n    unload(uri) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        unloadInStore(assets, uri);\n    }\n\n    /**\n     * @param {string|GlobExp} uriGlob \n     */\n    clear(uriGlob) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        clearInStore(assets, uriGlob);\n    }\n\n    /**\n     * @param {string} uri\n     */\n    current(uri) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        return getCurrentInStore(assets, uri);\n    }\n\n    /**\n     * @param {string} uri \n     */\n    exists(uri) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        return hasInStore(assets, uri);\n    }\n\n    /**\n     * @param {string} uri \n     */\n    loading(uri) {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        if (isAssetLoadingInStore(assets, uri)) {\n            return getLoadingInStore(assets, uri);\n        } else {\n            return null;\n        }\n    }\n\n    keys() {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        return keysInStore(assets);\n    }\n\n    reset() {\n        const assets = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (this));\n        resetStore(assets);\n    }\n}\n", "import { AssetManager } from './AssetManager';\n\nconst DEFAULT_TIMEOUT = 5000;\n\n/** @template T, S */\nexport class AssetRef {\n\n    /**\n     * @param {string} uri \n     * @param {import('./AssetStore').AssetLoader<T, S>} loader \n     * @param {S} [opts] \n     * @param {string} [filepath]\n     * @param {T|AssetRef<T>} [initial]\n     */\n    constructor(uri, loader, opts = undefined, filepath = uri, initial = null) {\n        this.uri = uri;\n        this.loader = loader;\n        this.opts = opts;\n\n        /** @private */\n        this.initial = initial;\n        /** @private */\n        this.filepath = filepath;\n\n        /** @type {AssetManager} */\n        this.source = null;\n        /** @type {T} */\n        this.current = null;\n    }\n\n    /**\n     * @param {AssetManager} assetManager \n     * @param {T} value \n     */\n    cache(assetManager, value) {\n        assetManager.cache(this.uri, value);\n        this.source = assetManager;\n        this.current = value;\n        return this;\n    }\n\n    /**\n     * @param {AssetManager} assetManager \n     * @returns {T}\n     */\n    get(assetManager) {\n        let result;\n        if (!assetManager.exists(this.uri)) {\n            if (this.initial && this.initial instanceof AssetRef) {\n                result = this.initial.get(assetManager);\n            } else {\n                result = this.initial;\n            }\n        } else {\n            result = assetManager.current(this.uri);\n        }\n        this.source = assetManager;\n        this.current = result;\n        return result;\n    }\n\n    /**\n     * @param {AssetManager} assetManager \n     * @param {number} [timeout]\n     */\n    async load(assetManager, timeout = DEFAULT_TIMEOUT) {\n        let result;\n        if (!assetManager.exists(this.uri)) {\n            result = await assetManager.load(this.uri, this.filepath, this.loader, this.opts, timeout);\n            if (!result) {\n                if (this.initial && this.initial instanceof AssetRef) {\n                    let initial = this.initial;\n                    result = await assetManager.load(initial.uri, initial.filepath, initial.loader, initial.opts, timeout);\n                } else {\n                    result = this.initial;\n                }\n            }\n        } else {\n            result = assetManager.current(this.uri);\n        }\n        this.source = assetManager;\n        this.current = result;\n        return result;\n    }\n\n    /**\n     * @param {AssetManager} assetManager \n     * @param {number} [timeout] \n     */\n    async reload(assetManager, timeout = DEFAULT_TIMEOUT) {\n        let result = await assetManager.reload(this.uri, this.filepath, this.loader, this.opts, timeout);\n        this.source = assetManager;\n        this.current = result;\n        return result;\n    }\n}\n", "import { unzip } from 'fflate';\n\nimport { cacheInStore } from './AssetStore.js';\nimport { AssetManager } from './AssetManager.js';\nimport { AssetRef } from './AssetRef.js';\n\n/**\n * Fetch asset pack from url and cache raw file content under `raw://`.\n * \n * @param {string} url\n * @param {(src: Uint8Array, path: string) => void} callback\n */\nexport async function loadAssetPack(url, callback) {\n    let response = await fetch(url);\n    let arrayBuffer = await response.arrayBuffer();\n    await new Promise((resolve, reject) => {\n        unzip(new Uint8Array(arrayBuffer), (err, data) => {\n            if (err) {\n                reject(err);\n            } else {\n                for (let [path, buf] of Object.entries(data)) {\n                    // Standardize WIN paths\n                    path = path.replaceAll('\\\\', '/');\n                    callback(buf, path);\n                }\n                resolve();\n            }\n        });\n    });\n}\n\n/**\n * Fetch asset pack from url and cache raw file content under `raw://`.\n * \n * @param {AssetManager} assets\n * @param {string} url\n * @param {(src: Uint8Array, uri: string, path: string) => void} [callback]\n */\nexport async function cacheAssetPackAsRaw(assets, url, callback = undefined) {\n    const assetStore = /** @type {import('./AssetStore').AssetStore} */ (/** @type {unknown} */ (assets));\n    let rootPath = 'raw://';\n    let response = await fetch(url);\n    let arrayBuffer = await response.arrayBuffer();\n    await new Promise((resolve, reject) => {\n        unzip(new Uint8Array(arrayBuffer), (err, data) => {\n            if (err) {\n                reject(err);\n            } else {\n                for (let [path, buf] of Object.entries(data)) {\n                    // Standardize WIN paths\n                    path = path.replaceAll('\\\\', '/');\n                    // Remove the zip directory name\n                    let i = path.indexOf('/');\n                    if (i >= 0) {\n                        path = path.substring(i + 1);\n                    }\n                    // Put the raw file in cache\n                    let uri = rootPath + path;\n                    cacheInStore(assetStore, uri, buf);\n                    if (callback) {\n                        callback(buf, uri, path);\n                    }\n                }\n                resolve();\n            }\n        });\n    });\n}\n\n/**\n * This is the same as calling `await AssetRef.load()` for each ref.\n * \n * @param {AssetManager} assets\n * @param {Array<AssetRef<?, ?>>} refs \n * @param {number} [timeout] \n */\nexport async function preloadAssetRefs(assets, refs, timeout = 5000) {\n    let promises = [];\n    for (let ref of refs) {\n        promises.push(ref.load(assets, timeout));\n    }\n    await Promise.allSettled(promises);\n}\n", "/**\n * @typedef {Record<string, AtlasSpriteData>} Atlas\n * \n * @typedef AtlasSpriteData\n * @property {number} u\n * @property {number} v\n * @property {number} w\n * @property {number} h\n * @property {number} frames\n * @property {number} cols\n * @property {number} rows\n * @property {string} name\n */\n\n/**\n * @param {string|ArrayBuffer} src\n * @param {{ onprogress: (value: number, loaded: number, total: number) => void }} opts\n * @returns {Promise<Atlas>}\n */\nexport async function AtlasLoader(src, opts = { onprogress: undefined }) {\n  if (typeof src === 'string') {\n    const response = await fetch(src);\n    const arrayBuffer = await response.arrayBuffer();\n    return AtlasLoader(arrayBuffer, opts);\n  } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n    throw new Error(\n      `Cannot load from source - must be an ArrayBuffer or fetchable url, but got instead: ${src}`\n    );\n  }\n  /** @type {ArrayBuffer} */\n  const arrayBuffer = src;\n  const string = new TextDecoder().decode(arrayBuffer);\n  /** @type {Atlas} */\n  let result = {};\n  let lines = string.split('\\n');\n  let progressTotal = lines.length;\n  let progressLoaded = 0;\n  if (opts.onprogress) {\n    opts.onprogress(0, 0, progressTotal);\n  }\n  for (let line of lines) {\n    ++progressLoaded;\n    line = line.trim();\n    if (line.length <= 0) continue;\n    if (line.startsWith('#')) continue;\n    if (line.startsWith('//')) continue;\n\n    let args = [];\n    let i = 0;\n    let j = line.indexOf(' ');\n    while (j >= 0) {\n      args.push(line.substring(i, j));\n      i = j + 1;\n      j = line.indexOf(' ', i);\n    }\n    args.push(line.substring(i));\n\n    let name = args[0];\n    let u = Number.parseInt(args[1]);\n    let v = Number.parseInt(args[2]);\n    let w = Number.parseInt(args[3]);\n    let h = Number.parseInt(args[4]);\n    let frames =\n      args.length >= 6\n        ? Number.parseInt(args[5]) // User-defined\n        : 1; // Default 1 frame\n    let cols =\n      args.length >= 7\n        ? Number.parseInt(args[6]) // User-defined\n        : frames; // Default same as frame count\n    let rows =\n      args.length >= 8\n        ? Number.parseInt(args[7]) // User-defined\n        : frames > cols // If more frames than cols...\n        ? Math.ceil(frames / cols) // ...then expect more rows\n        : 1; // Otherwise, default single row\n\n    result[name] = {\n      u,\n      v,\n      w,\n      h,\n      frames,\n      cols,\n      rows,\n      name,\n    };\n\n    if (opts.onprogress) {\n      opts.onprogress(progressLoaded / progressTotal, progressLoaded, progressTotal);\n    }\n  }\n  if (opts.onprogress) {\n    opts.onprogress(1, progressLoaded, progressLoaded);\n  }\n  return result;\n}\n", "/**\n * @typedef BMFontChar\n * @property {number} id The character id.\n * @property {number} x The left position of the character image in the texture.\n * @property {number} y The top position of the character image in the texture.\n * @property {number} width The width of the character image in the texture.\n * @property {number} height The height of the character image in the texture.\n * @property {number} xoffset How much the current position should be offset when\n *                            copying the image from the texture to the screen.\n * @property {number} yoffset How much the current position should be offset when\n *                            copying the image from the texture to the screen.\n * @property {number} xadvance How much the current position should be advanced\n *                             after drawing the character.\n * @property {number} page The texture page where the character image is found.\n * @property {number} chnl The texture channel where the character image is\n *                         found (1 = blue, 2 = green, 4 = red, 8 = alpha,\n *                         15 = all channels).\n *\n * @typedef BMFontKerning\n * @property {number} first The first character id.\n * @property {number} second The second character id.\n * @property {number} amount How much the x position should be adjusted when\n *                           drawing the second character immediately following\n *                           the first.\n *\n * @typedef BMFontData\n * @property {object} info              This tag holds information on how the\n *                                      font was generated.\n * @property {string} info.face         This is the name of the true type font.\n * @property {number} info.size         The size of the true type font.\n * @property {number} info.bold         The font is bold.\n * @property {number} info.italic\t    The font is italic.\n * @property {string} info.charset\t    The name of the OEM charset used (when\n *                                      not unicode).\n * @property {number} info.unicode\t    Set to 1 if it is the unicode charset.\n * @property {number} info.stretchH\t    The font height stretch in percentage.\n *                                      100% means no stretch.\n * @property {number} info.smooth\t    Set to 1 if smoothing was turned on.\n * @property {number} info.aa\t        The supersampling level used. 1 means no\n *                                      supersampling was used.\n * @property {number} info.padding\t    The padding for each character\n *                                      (up, right, down, left).\n * @property {number} info.spacing\t    The spacing for each character\n *                                      (horizontal, vertical).\n * @property {number} info.outline\t    The outline thickness for the characters.\n * @property {object} common            This tag holds information common to all\n *                                      characters.\n * @property {number} common.lineHeight This is the distance in pixels between\n *                                      each line of text.\n * @property {number} common.base\t    The number of pixels from the absolute\n *                                      top of the line to the base of the characters.\n * @property {number} common.scaleW\t    The width of the texture, normally used\n *                                      to scale the x pos of the character image.\n * @property {number} common.scaleH\t    The height of the texture, normally used\n *                                      to scale the y pos of the character image.\n * @property {number} common.pages\t    The number of texture pages included in\n *                                      the font.\n * @property {number} common.packed\t    Set to 1 if the monochrome characters\n *                                      have been packed into each of the texture\n *                                      channels. In this case alphaChnl describes\n *                                      what is stored in each channel.\n * @property {number} common.alphaChnl\tSet to 0 if the channel holds the glyph data,\n *                                      1 if it holds the outline,\n *                                      2 if it holds the glyph and the outline,\n *                                      3 if its set to zero, and 4 if its set to one.\n * @property {number} common.redChnl\tSet to 0 if the channel holds the glyph data,\n *                                      1 if it holds the outline,\n *                                      2 if it holds the glyph and the outline,\n *                                      3 if its set to zero, and 4 if its set to one.\n * @property {number} common.greenChnl\tSet to 0 if the channel holds the glyph data,\n *                                      1 if it holds the outline,\n *                                      2 if it holds the glyph and the outline,\n *                                      3 if its set to zero, and 4 if its set to one.\n * @property {number} common.blueChnl\tSet to 0 if the channel holds the glyph data,\n *                                      1 if it holds the outline,\n *                                      2 if it holds the glyph and the outline,\n *                                      3 if its set to zero, and 4 if its set to one.\n * @property {object} page              This tag gives the name of a texture\n *                                      file. There is one for each page in the font.\n * @property {number} page.id\t        The page id.\n * @property {number} page.file\t        The texture file name.\n * @property {Array<BMFontChar>} chars  This tag describes characters in the font.\n *                                      There is one for each included character\n *                                      in the font.\n * @property {Array<BMFontKerning>} kernings The kerning information is used to adjust\n *                                           the distance between certain characters,\n *                                           e.g. some characters should be placed\n *                                           closer to each other than others.\n */\n\n/**\n * @param {string|ArrayBuffer} src\n * @returns {Promise<BMFontData>}\n */\nexport async function BMFontLoader(src) {\n  if (typeof src === 'string') {\n    const response = await fetch(src);\n    const arrayBuffer = await response.arrayBuffer();\n    return BMFontLoader(arrayBuffer);\n  } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n    throw new Error(\n      `Cannot load from source - must be an ArrayBuffer or fetchable url, but got instead: ${src}`\n    );\n  }\n  /** @type {ArrayBuffer} */\n  const arrayBuffer = src;\n  return parse(new TextDecoder().decode(arrayBuffer));\n}\n\nconst TAG_PATTERN = /(.+?)\\s+(.*)/;\nconst LINE_PATTERN = /(.+)=(.+)/;\n\n/**\n * @param {string} string\n * @returns {BMFontData}\n */\nfunction parse(string) {\n  let lines = string.split('\\n');\n  let info = {};\n  let common = {};\n  let page = {};\n  let chars = [];\n  let kernings = [];\n  for (let line of lines) {\n    let array = TAG_PATTERN.exec(line);\n    if (!array) {\n      continue;\n    }\n    let [_, tag, props] = array;\n    switch (tag) {\n      case 'info':\n        parseBMLine(info, props);\n        break;\n      case 'common':\n        parseBMLine(common, props);\n        break;\n      case 'page':\n        parseBMLine(page, props);\n        break;\n      case 'chars':\n        // This only has count info. Ignore it.\n        break;\n      case 'char':\n        let char = {};\n        parseBMLine(char, props);\n        if ('id' in char) {\n          chars.push(char);\n        }\n        break;\n      case 'kerning':\n        let kerning = {};\n        parseBMLine(kerning, props);\n        if ('first' in kerning) {\n          kernings.push(kerning);\n        }\n        break;\n      default:\n      // Unknown tag.\n    }\n  }\n  let data = /** @type {BMFontData} */ ({\n    info,\n    common,\n    page,\n    chars,\n    kernings,\n  });\n  return data;\n}\n\nfunction parseBMLine(out, line) {\n  let props = line.split(/\\s+/);\n  for (let prop of props) {\n    let array = LINE_PATTERN.exec(prop);\n    if (!array) {\n      continue;\n    }\n    let [_, key, value] = array;\n    let result = JSON.parse(`[${value}]`);\n    if (result.length === 1) {\n      out[key] = result[0];\n    } else {\n      out[key] = result;\n    }\n  }\n}\n", "/**\n * @param {string|ArrayBuffer} src\n * @param {object} [opts]\n * @param {string} [opts.imageType]\n * @returns {Promise<HTMLImageElement>}\n */\nexport async function ImageLoader(src, opts = undefined) {\n  let { imageType = undefined } = opts || {};\n  if (typeof src === 'string') {\n    const response = await fetch(src);\n    const arrayBuffer = await response.arrayBuffer();\n    if (typeof imageType === 'undefined') {\n      let i = src.lastIndexOf('.');\n      if (i < 0) {\n        throw new Error('Cannot load from url - unknown image type.');\n      } else {\n        imageType = 'image/' + src.slice(i + 1);\n      }\n    }\n    return ImageLoader(arrayBuffer, { ...opts, imageType });\n  } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n    throw new Error(\n      `Cannot load from source - must be an ArrayBuffer or fetchable url, but got instead: ${src}`\n    );\n  }\n  /** @type {ArrayBuffer} */\n  const arrayBuffer = src;\n  if (typeof imageType === 'undefined') {\n    imageType = 'image/png';\n  }\n  let blob = new Blob([arrayBuffer], { type: imageType });\n  let imageUrl = URL.createObjectURL(blob);\n  let image = new Image();\n  return new Promise((resolve, reject) => {\n    image.addEventListener('load', () => {\n      resolve(image);\n    });\n    image.addEventListener('error', (e) => {\n      reject(e);\n    });\n    image.src = imageUrl;\n  });\n}\n", "/**\n * @typedef MeshData\n * @property {Float32Array} positions\n * @property {Float32Array} texcoords\n * @property {Float32Array} normals\n * @property {Uint16Array} indices\n */\n\n/**\n * @param {string|ArrayBuffer} src\n * @returns {Promise<MeshData>}\n */\nexport async function OBJLoader(src) {\n  if (typeof src === 'string') {\n    const response = await fetch(src);\n    const arrayBuffer = await response.arrayBuffer();\n    return OBJLoader(arrayBuffer);\n  } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n    throw new Error(\n      `Cannot load from source - must be an ArrayBuffer or fetchable url, but got instead: ${src}`\n    );\n  }\n  /** @type {ArrayBuffer} */\n  const arrayBuffer = src;\n  return parse(new TextDecoder().decode(arrayBuffer));\n}\n\n/**\n * @param {string} string\n * @returns {MeshData}\n */\nfunction parse(string) {\n  const vertexList = [];\n  const texcoordList = [];\n  const normalList = [];\n\n  const vertexIndices = [];\n  const texcoordIndices = [];\n  const normalIndices = [];\n\n  // # comments\n  const commentPattern = /^#.*/g;\n  // v float float float\n  const vertexPattern = /v\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)/g;\n  // vn float float float\n  const normalPattern = /vn\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)/g;\n  // vt float float float\n  const texcoordPattern = /vt\\s+(\\S+)\\s+(\\S+)/g;\n  // f vertex/uv/normal vertex/uv/normal vertex/uv/normal ...\n  const facePattern =\n    /f\\s+(([^/\\s]*)\\/([^/\\s]*)\\/?([^/\\s]*))\\s+(([^/\\s]*)\\/([^/\\s]*)\\/?([^/\\s]*))\\s+(([^/\\s]*)\\/([^/\\s]*)\\/?([^/\\s]*))(\\s+(([^/\\s]*)\\/([^/\\s]*)\\/?([^/\\s]*)))?/g;\n  // f float float float\n  const faceVertexPattern = /f\\s+([^/\\s]+)\\s+([^/\\s]+)\\s+([^/\\s]+)/g;\n\n  let quad = false;\n  let result = null;\n  let x, y, z, w;\n\n  // Remove all comments\n  string = string.replace(commentPattern, '');\n\n  // [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n  while ((result = vertexPattern.exec(string)) != null) {\n    x = Number.parseFloat(result[1]);\n    y = Number.parseFloat(result[2]);\n    z = Number.parseFloat(result[3]);\n    vertexList.push(x);\n    vertexList.push(y);\n    vertexList.push(z);\n  }\n\n  // [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n  while ((result = normalPattern.exec(string)) != null) {\n    x = Number.parseFloat(result[1]);\n    y = Number.parseFloat(result[2]);\n    z = Number.parseFloat(result[3]);\n    normalList.push(x);\n    normalList.push(y);\n    normalList.push(z);\n  }\n\n  // [\"vt 1.0 2.0\", \"1.0\", \"2.0\"]\n  while ((result = texcoordPattern.exec(string)) != null) {\n    x = Number.parseFloat(result[1]);\n    y = Number.parseFloat(result[2]);\n    texcoordList.push(x);\n    texcoordList.push(y);\n  }\n\n  // [\"f 1/1/1 2/2/2 3/3/3\", \"1/1/1\", \"1\", \"1\", \"1\", \"2/2/2\", \"2\", \"2\", \"2\", \"3/3/3\", \"3\", \"3\", \"3\", \"4/4/4\", \"4\", \"4\", \"4\"]\n  while ((result = facePattern.exec(string)) != null) {\n    // Vertex indices\n    x = Number.parseInt(result[2]);\n    if (Number.isNaN(x)) x = 1;\n    y = Number.parseInt(result[6]);\n    if (Number.isNaN(y)) y = 1;\n    z = Number.parseInt(result[10]);\n    if (Number.isNaN(z)) z = 1;\n    vertexIndices.push(x);\n    vertexIndices.push(y);\n    vertexIndices.push(z);\n\n    // Normal indices\n    x = Number.parseInt(result[4]);\n    if (Number.isNaN(x)) {\n      // No UVs.\n      x = Number.parseInt(result[3]);\n      y = Number.parseInt(result[7]);\n      z = Number.parseInt(result[11]);\n      normalIndices.push(x);\n      normalIndices.push(y);\n      normalIndices.push(z);\n\n      texcoordIndices.push(1);\n      texcoordIndices.push(1);\n      texcoordIndices.push(1);\n    } else {\n      // Maybe UVs.\n      y = Number.parseInt(result[8]);\n      if (Number.isNaN(y)) y = 1;\n      z = Number.parseInt(result[12]);\n      if (Number.isNaN(z)) z = 1;\n      normalIndices.push(x);\n      normalIndices.push(y);\n      normalIndices.push(z);\n\n      // UV indices\n      x = Number.parseInt(result[3]);\n      if (Number.isNaN(x)) x = 1;\n      y = Number.parseInt(result[7]);\n      if (Number.isNaN(y)) y = 1;\n      z = Number.parseInt(result[11]);\n      if (Number.isNaN(z)) z = 1;\n      texcoordIndices.push(x);\n      texcoordIndices.push(y);\n      texcoordIndices.push(z);\n    }\n\n    // Quad face\n    if (typeof result[13] !== 'undefined') {\n      // Vertex indices\n      w = Number.parseInt(result[15]);\n      if (Number.isNaN(w)) w = 1;\n      vertexIndices.push(w);\n\n      // Normal indices\n      w = Number.parseInt(result[17]);\n      if (Number.isNaN(w)) {\n        // No UVs.\n        w = Number.parseInt(result[16]);\n        normalIndices.push(w);\n        texcoordIndices.push(1);\n      } else {\n        // Maybe UVs.\n        normalIndices.push(w);\n\n        w = Number.parseInt(result[16]);\n        texcoordIndices.push(w);\n      }\n\n      quad = true;\n    }\n  }\n\n  // [\"f 1 2 3 4\", \"1\", \"2\", \"3\", \"4\"]\n  while ((result = faceVertexPattern.exec(string)) != null) {\n    // Vertex indices\n    x = Number.parseInt(result[2]);\n    y = Number.parseInt(result[6]);\n    z = Number.parseInt(result[10]);\n    vertexIndices.push(x);\n    vertexIndices.push(y);\n    vertexIndices.push(z);\n\n    // UV indices\n    texcoordIndices.push(1);\n    texcoordIndices.push(1);\n    texcoordIndices.push(1);\n\n    // Normal indices\n    normalIndices.push(1);\n    normalIndices.push(1);\n    normalIndices.push(1);\n\n    // Quad face\n    if (typeof result[13] !== 'undefined') {\n      // Vertex indices\n      w = Number.parseInt(result[14]);\n      vertexIndices.push(w);\n\n      // UV indices\n      texcoordIndices.push(1);\n      // Normal indices\n      normalIndices.push(1);\n\n      quad = true;\n    }\n  }\n\n  let index, size;\n\n  size = vertexIndices.length;\n  const positions = new Float32Array(size * 3);\n  for (let i = 0; i < size; ++i) {\n    index = vertexIndices[i] - 1;\n    positions[i * 3 + 0] = vertexList[index * 3 + 0];\n    positions[i * 3 + 1] = vertexList[index * 3 + 1];\n    positions[i * 3 + 2] = vertexList[index * 3 + 2];\n  }\n\n  size = texcoordIndices.length;\n  const texcoords = new Float32Array(size * 2);\n  for (let i = 0; i < size; ++i) {\n    index = texcoordIndices[i] - 1;\n    texcoords[i * 2 + 0] = texcoordList[index * 2 + 0];\n    texcoords[i * 2 + 1] = texcoordList[index * 2 + 1];\n  }\n\n  size = normalIndices.length;\n  const normals = new Float32Array(size * 3);\n  for (let i = 0; i < size; ++i) {\n    index = normalIndices[i] - 1;\n    normals[i * 3 + 0] = normalList[index * 3 + 0];\n    normals[i * 3 + 1] = normalList[index * 3 + 1];\n    normals[i * 3 + 2] = normalList[index * 3 + 2];\n  }\n\n  // Must be either unsigned short or unsigned byte.\n  size = vertexIndices.length;\n  const indices = new Uint16Array(size);\n  for (let i = 0; i < size; ++i) {\n    indices[i] = i;\n  }\n\n  if (quad) {\n    console.warn('WebGL does not support quad faces, only triangles.');\n  }\n\n  return {\n    positions,\n    texcoords,\n    normals,\n    indices,\n  };\n}\n", "/**\n * @param {string|ArrayBuffer} src\n * @returns {Promise<string>}\n */\nexport async function TextLoader(src) {\n  if (typeof src === 'string') {\n    const response = await fetch(src);\n    const arrayBuffer = await response.arrayBuffer();\n    return TextLoader(arrayBuffer);\n  } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n    throw new Error(\n      'Cannot load from source - must be ' + 'an array buffer or fetchable url'\n    );\n  }\n  /** @type {ArrayBuffer} */\n  const arrayBuffer = src;\n  return new TextDecoder().decode(arrayBuffer);\n}\n", "/**\n * @param {ArrayBuffer|Uint8Array|string} src\n * @param {object} opts\n * @param {AudioContext} opts.audioContext\n * @returns {Promise<AudioBuffer>}\n */\nexport async function AudioBufferLoader(src, opts) {\n  const { audioContext } = opts || {};\n  if (typeof src === 'string') {\n    const response = await fetch(src);\n    const arrayBuffer = await response.arrayBuffer();\n    return AudioBufferLoader(arrayBuffer, { audioContext });\n  } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n    throw new Error(\n      `Cannot load from source - must be an ArrayBuffer or fetchable url, but got instead: ${src}`\n    );\n  }\n  /** @type {ArrayBuffer} */\n  const arrayBuffer = src;\n  let audioArrayBuffer = new ArrayBuffer(arrayBuffer.byteLength);\n  // @ts-ignore\n  new Uint8Array(audioArrayBuffer).set(arrayBuffer);\n  let audioBuffer = await audioContext.decodeAudioData(audioArrayBuffer);\n  return audioBuffer;\n}\n", "/**\n * @param {string|ArrayBuffer} src\n * @returns {Promise<object>}\n */\nexport async function JSONLoader(src) {\n    if (typeof src === 'string') {\n        const response = await fetch(src);\n        const arrayBuffer = await response.arrayBuffer();\n        return JSONLoader(arrayBuffer);\n    } else if (!(src instanceof ArrayBuffer || ArrayBuffer.isView(src))) {\n        throw new Error(\n            `Cannot load from source - must be an ArrayBuffer or fetchable url, but got instead: ${src}`\n        );\n    }\n    /** @type {ArrayBuffer} */\n    const arrayBuffer = src;\n    return JSON.parse(new TextDecoder().decode(arrayBuffer));\n}\n", "/**\n * @typedef Eventable\n * @property {function} on\n * @property {function} off\n * @property {function} once\n * @property {function} emit\n */\n\n/**\n * @version 1.3.0\n * @description\n * # Changelog\n * ## 1.3.0\n * - Return results for emit()\n * ## 1.2.0\n * - Added named exports\n * - Added custom this context\n * - Added some needed explanations for the functions\n * ## 1.1.0\n * - Started versioning\n */\nconst EventableInstance = {\n  /**\n   * Registers an event handler to continually listen for the event.\n   *\n   * @param {string} event The name of the event to listen for.\n   * @param {function} callback The callback function to handle the event.\n   * @param {*} [handle = callback] The handle to refer to this registered callback.\n   * Used by off() to remove handlers. If none specified, it will use the callback\n   * itself as the handle. This must be unique.\n   * @return {Eventable} Self for method-chaining.\n   */\n  on(event, callback, handle = callback) {\n    let callbacks;\n    if (!this.__events.has(event)) {\n      callbacks = new Map();\n      this.__events.set(event, callbacks);\n    } else {\n      callbacks = this.__events.get(event);\n    }\n\n    if (!callbacks.has(handle)) {\n      callbacks.set(handle, callback);\n    } else {\n      throw new Error(\n        `Found callback for event '${event}' with the same handle '${handle}'.`\n      );\n    }\n    return this;\n  },\n\n  /**\n   * Unregisters an event handler to stop listening for the event.\n   *\n   * @param {string} event The name of the event listened for.\n   * @param {*} handle The registered handle to refer to the registered\n   * callback. If no handle was provided when calling on(), the callback\n   * is used as the handle instead.\n   * @return {Eventable} Self for method-chaining.\n   */\n  off(event, handle) {\n    if (this.__events.has(event)) {\n      const callbacks = this.__events.get(event);\n      if (callbacks.has(handle)) {\n        callbacks.delete(handle);\n      } else {\n        throw new Error(\n          `Unable to find callback for event '${event}' with handle '${handle}'.`\n        );\n      }\n    } else {\n      throw new Error(`Unable to find event '${event}'.`);\n    }\n    return this;\n  },\n\n  /**\n   * Registers a one-off event handler to start listening for the next,\n   * and only the next, event.\n   *\n   * @param {string} event The name of the event to listen for.\n   * @param {function} callback The callback function to handle the event.\n   * @param {*} [handle = callback] The handle to refer to this registered callback.\n   * Used by off() to remove handlers. If none specified, it will use the callback\n   * itself as the handle. This must be unique.\n   * @return {Eventable} Self for method-chaining.\n   */\n  once(event, callback, handle = callback) {\n    const func = (...args) => {\n      this.off(event, handle);\n      callback.apply(this.__context || this, args);\n    };\n    return this.on(event, func, handle);\n  },\n\n  /**\n   * Emits the event with the arguments passed on to the registered handlers.\n   * The context of the handlers, if none were initially bound, could be\n   * defined upon calling the Eventable's creation function. Otherwise, the\n   * handler is called with `this` context of the Eventable instance.\n   *\n   * @param {string} event The name of the event to emit.\n   * @param  {...any} args Any arguments to pass to registered handlers.\n   * @return {Array<any>} Array of any returned values of the callbacks.\n   */\n  emit(event, ...args) {\n    if (this.__events.has(event)) {\n      let results = [];\n      const callbacks = Array.from(this.__events.get(event).values());\n      for (const callback of callbacks) {\n        let result = callback.apply(this.__context || this, args);\n        if (result) results.push(result);\n      }\n      return results;\n    } else {\n      this.__events.set(event, new Map());\n      return [];\n    }\n  },\n};\n\n/**\n * Creates an eventable object.\n *\n * @param {Object} [context] The context used for the event handlers.\n * @return {Eventable} The created eventable object.\n */\nfunction create(context = undefined) {\n  const result = Object.create(EventableInstance);\n  result.__events = new Map();\n  result.__context = context;\n  return result;\n}\n\n/**\n * Assigns the passed-in object with eventable properties.\n *\n * @param {Object} dst The object to assign with eventable properties.\n * @param {Object} [context] The context used for the event handlers.\n * @return {Eventable} The resultant eventable object.\n */\nfunction assign(dst, context = undefined) {\n  const result = Object.assign(dst, EventableInstance);\n  result.__events = new Map();\n  result.__context = context;\n  return result;\n}\n\n/**\n * Mixins eventable properties into the passed-in class.\n *\n * @param {Class} targetClass The class to mixin eventable properties.\n * @param {Object} [context] The context used for the event handlers.\n * @return {Class<Eventable>} The resultant eventable-mixed-in class.\n */\nfunction mixin(targetClass, context = undefined) {\n  const targetPrototype = targetClass.prototype;\n  Object.assign(targetPrototype, EventableInstance);\n  targetPrototype.__events = new Map();\n  targetPrototype.__context = context;\n  return targetPrototype;\n}\n\nexport const Eventable = {\n  create,\n  assign,\n  mixin,\n};\n", "/* eslint-disable no-console */\n\n// Log levels\nconst TRACE = 5;\nconst DEBUG = 4;\nconst INFO = 3;\nconst WARN = 2;\nconst ERROR = 1;\nconst OFF = 0;\n\nconst LOG_LEVEL_STYLES = {\n  [TRACE]: styledLogLevel('#7F8C8D'), // Gray\n  [DEBUG]: styledLogLevel('#2ECC71'), // Green\n  [INFO]: styledLogLevel('#4794C8'), // Blue\n  [WARN]: styledLogLevel('#F39C12'), // Yellow\n  [ERROR]: styledLogLevel('#C0392B'), // Red\n  [OFF]: [''],\n};\n\nfunction compareLogLevel(a, b) {\n  return a - b;\n}\n\nfunction styledLogLevel(color) {\n  return [\n    `background: ${color}`,\n    'border-radius: 0.5em',\n    'color: white',\n    'font-weight: bold',\n    'padding: 2px 0.5em',\n  ];\n}\n\n// Useful functions\nfunction noop() {\n  /** Do nothing. */\n}\n\nfunction getStyledMessage(message, styles) {\n  return [`%c${message}`, styles.join(';')];\n}\n\nfunction getConsoleFunction(level) {\n  switch (level) {\n    case TRACE:\n      return console.trace;\n    case DEBUG:\n      return console.log;\n    case INFO:\n      return console.log;\n    case WARN:\n      return console.warn;\n    case ERROR:\n      return console.error;\n    case OFF:\n      return noop;\n    default:\n      return console.log;\n  }\n}\n\nfunction prependMessageTags(out, name, domain, level) {\n  if (name) {\n    out.unshift(`[${name}]`);\n  }\n\n  if (domain) {\n    let tag = getStyledMessage(domain, LOG_LEVEL_STYLES[level]);\n    out.unshift(tag[0], tag[1]);\n  }\n\n  return out;\n}\n\nconst LEVEL = Symbol('level');\nconst DOMAIN = Symbol('domain');\nconst LOGGERS = {\n  /** To be populated by logger instances. */\n};\nlet DEFAULT_LEVEL = WARN;\nlet DEFAULT_DOMAIN = 'app';\nexport class Logger {\n  static get TRACE() {\n    return TRACE;\n  }\n  static get DEBUG() {\n    return DEBUG;\n  }\n  static get INFO() {\n    return INFO;\n  }\n  static get WARN() {\n    return WARN;\n  }\n  static get ERROR() {\n    return ERROR;\n  }\n  static get OFF() {\n    return OFF;\n  }\n\n  /**\n   * Creates or gets the logger for the given unique name.\n   * @param {String} name\n   * @returns {Logger} The logger with the name.\n   */\n  static getLogger(name) {\n    if (name in LOGGERS) {\n      return LOGGERS[name];\n    } else {\n      return (LOGGERS[name] = new Logger(name));\n    }\n  }\n\n  static useDefaultLevel(level) {\n    DEFAULT_LEVEL = level;\n    return this;\n  }\n\n  static useDefaultDomain(domain) {\n    DEFAULT_DOMAIN = domain;\n    return this;\n  }\n\n  constructor(name) {\n    this.name = name;\n    this[LEVEL] = DEFAULT_LEVEL;\n    this[DOMAIN] = DEFAULT_DOMAIN;\n  }\n\n  setLevel(level) {\n    this[LEVEL] = level;\n    return this;\n  }\n\n  getLevel() {\n    return this[LEVEL];\n  }\n\n  setDomain(domain) {\n    this[DOMAIN] = domain;\n    return this;\n  }\n\n  getDomain() {\n    return this[DOMAIN];\n  }\n\n  log(level, ...messages) {\n    if (compareLogLevel(this[LEVEL], level) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], level);\n    getConsoleFunction(level)(...messages);\n  }\n\n  trace(...messages) {\n    if (compareLogLevel(this[LEVEL], TRACE) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], TRACE);\n    getConsoleFunction(TRACE)(...messages);\n  }\n\n  debug(...messages) {\n    if (compareLogLevel(this[LEVEL], DEBUG) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], DEBUG);\n    getConsoleFunction(DEBUG)(...messages);\n  }\n\n  info(...messages) {\n    if (compareLogLevel(this[LEVEL], INFO) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], INFO);\n    getConsoleFunction(INFO)(...messages);\n  }\n\n  warn(...messages) {\n    if (compareLogLevel(this[LEVEL], WARN) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], WARN);\n    getConsoleFunction(WARN)(...messages);\n  }\n\n  error(...messages) {\n    if (compareLogLevel(this[LEVEL], ERROR) < 0) return this;\n    prependMessageTags(messages, this.name, this[DOMAIN], ERROR);\n    getConsoleFunction(ERROR)(...messages);\n  }\n}\n", "// Bresenham's Line Algorithm\nexport function bresenhamLine(fromX, fromY, toX, toY, callback) {\n  let fx = Math.floor(fromX);\n  let fy = Math.floor(fromY);\n  let tx = Math.floor(toX);\n  let ty = Math.floor(toY);\n\n  let dx = Math.abs(toX - fromX);\n  let sx = fromX < toX ? 1 : -1;\n  let dy = -Math.abs(toY - fromY);\n  let sy = fromY < toY ? 1 : -1;\n  let er = dx + dy;\n\n  let x = fx;\n  let y = fy;\n  let flag = callback(x, y);\n  if (typeof flag !== 'undefined') return flag;\n\n  let maxLength = dx * dx + dy * dy;\n  let length = 0;\n  while (length < maxLength && (x !== tx || y !== ty)) {\n    // Make sure it doesn't go overboard.\n    ++length;\n\n    let er2 = er * 2;\n\n    if (er2 >= dy) {\n      er += dy;\n      x += sx;\n    }\n\n    if (er2 <= dx) {\n      er += dx;\n      y += sy;\n    }\n\n    flag = callback(x, y);\n    if (typeof flag !== 'undefined') return flag;\n  }\n}\n", "export const FILE_TYPE_PNG = 'png';\nexport const FILE_TYPE_SVG = 'svg';\n\nexport function downloadText(filename, textData) {\n  downloadURL(filename, getTextDataURI(textData));\n}\n\nexport function downloadImageFromSVG(filename, filetype, svg, width, height) {\n  const blob = createBlobFromSVG(svg);\n  switch (filetype) {\n    case FILE_TYPE_PNG:\n      {\n        const url = URL.createObjectURL(blob);\n\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const pixelRatio = window.devicePixelRatio || 1;\n        canvas.width = width * pixelRatio;\n        canvas.height = height * pixelRatio;\n        canvas.style.width = width + 'px';\n        canvas.style.height = height + 'px';\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n        const image = new Image();\n        image.onload = () => {\n          ctx.drawImage(image, 0, 0);\n          URL.revokeObjectURL(url);\n\n          const imageURI = canvas\n            .toDataURL('image/' + filetype)\n            .replace('image/' + filetype, 'image/octet-stream');\n          downloadURL(filename, imageURI);\n        };\n        image.src = url;\n      }\n      break;\n    case FILE_TYPE_SVG:\n      {\n        const reader = new FileReader();\n        reader.onload = () => {\n          downloadURL(filename, reader.result);\n        };\n        reader.readAsDataURL(blob);\n      }\n      break;\n    default:\n      throw new Error(\"Unknown file type '\" + filetype + \"'\");\n  }\n}\n\nexport function downloadURL(filename, url) {\n  const element = document.createElement('a');\n  const headerIndex = url.indexOf(';');\n  url =\n    url.substring(0, headerIndex + 1) +\n    'headers=Content-Disposition%3A%20attachment%3B%20filename=' +\n    filename +\n    ';' +\n    url.substring(headerIndex + 1);\n  element.setAttribute('href', url);\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n  document.body.removeChild(element);\n}\n\nfunction createBlobFromSVG(svg) {\n  const styledSVG = computeSVGStyles(svg);\n  const serializer = new XMLSerializer();\n  const svgString = serializer.serializeToString(styledSVG);\n  const blob = new Blob([svgString], { type: 'image/svg+xml' });\n  return blob;\n}\n\n// SOURCE: https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser/44769098#44769098\nconst SVG_CONTAINERS = ['svg', 'g'];\nfunction computeSVGStyles(svg, dst = svg.cloneNode(true)) {\n  let sourceChildren = svg.childNodes;\n  let children = dst.childNodes;\n\n  for (var index = 0; index < children.length; index++) {\n    let child = children[index];\n    let tagName = child.tagName;\n    if (SVG_CONTAINERS.indexOf(tagName) != -1) {\n      computeSVGStyles(sourceChildren[index], child);\n    } else if (sourceChildren[index] instanceof Element) {\n      const computedStyle = window.getComputedStyle(sourceChildren[index]);\n\n      let styleAttributes = [];\n      for (let styleName of Object.keys(computedStyle)) {\n        styleAttributes.push(\n          `${styleName}:${computedStyle.getPropertyValue(styleName)};`\n        );\n      }\n\n      child.setAttribute('style', styleAttributes.join(''));\n    }\n  }\n\n  return dst;\n}\n\nfunction getTextDataURI(data) {\n  return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n}\n", "export async function uploadFile(accept = [], multiple = false) {\n  return new Promise((resolve, reject) => {\n    const element = document.createElement('input');\n    element.addEventListener('change', (e) => {\n      if (multiple) {\n        resolve(e.target.files);\n      } else {\n        resolve(e.target.files[0]);\n      }\n    });\n    element.type = 'file';\n    element.accept = accept.join(',');\n    element.style.display = 'none';\n    element.toggleAttribute('multiple', multiple);\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  });\n}\n", "const TOP_INDEX = 0;\n\n// NOTE: Uses a binary heap to sort.\n/**\n * @template T\n */\nexport class PriorityQueue {\n  /**\n   * @param {(a: T, b: T) => number} comparator \n   */\n  constructor(comparator) {\n    /** @private */\n    this._heap = [];\n    /** @private */\n    this._comparator = comparator;\n  }\n\n  get size() {\n    return this._heap.length;\n  }\n\n  clear() {\n    this._heap.length = 0;\n  }\n\n  /**\n   * @param {...T} values\n   */\n  push(...values) {\n    for (let value of values) {\n      this._heap.push(value);\n      this._shiftUp();\n    }\n  }\n\n  /**\n   * @returns {T}\n   */\n  pop() {\n    const result = this.peek();\n    let bottom = bottomIndex(this);\n    if (bottom > TOP_INDEX) {\n      this._swap(TOP_INDEX, bottom);\n    }\n    this._heap.pop();\n    this._shiftDown();\n    return result;\n  }\n\n  /**\n   * Replaces the top value with the new value.\n   * @param {T} value\n   * @returns {T}\n   */\n  replace(value) {\n    const result = this.peek();\n    this._heap[TOP_INDEX] = value;\n    this._shiftDown();\n    return result;\n  }\n\n  /**\n   * @returns {T}\n   */\n  peek() {\n    return this._heap[TOP_INDEX];\n  }\n\n  /**\n   * @param {number} index\n   * @returns {T}\n   */\n  at(index) {\n    return this._heap[index];\n  }\n\n  /**\n   * @param {T} value \n   * @param {number} [fromIndex]\n   */\n  indexOf(value, fromIndex = undefined) {\n    return this._heap.indexOf(value, fromIndex);\n  }\n\n  /**\n   * @param {number} start \n   * @param {number} [deleteCount]\n   * @returns {Array<T>}\n   */\n  splice(start, deleteCount = undefined) {\n    return this._heap.splice(start, deleteCount);\n  }\n\n  /** @private */\n  _compare(i, j) {\n    return this._comparator(this._heap[i], this._heap[j]);\n  }\n\n  /** @private */\n  _swap(i, j) {\n    let result = this._heap[i];\n    this._heap[i] = this._heap[j];\n    this._heap[j] = result;\n  }\n\n  /** @private */\n  _shiftUp() {\n    let node = this._heap.length - 1;\n    let nodeParent;\n    while (\n      node > TOP_INDEX &&\n      this._compare(node, (nodeParent = parentIndex(node)))\n    ) {\n      this._swap(node, nodeParent);\n      node = nodeParent;\n    }\n  }\n\n  /** @private */\n  _shiftDown() {\n    const length = this._heap.length;\n    let node = TOP_INDEX;\n    let nodeMax;\n\n    let nodeLeft = leftIndex(node);\n    let flagLeft = nodeLeft < length;\n    let nodeRight = rightIndex(node);\n    let flagRight = nodeRight < length;\n\n    while (\n      (flagLeft && this._compare(nodeLeft, node)) ||\n      (flagRight && this._compare(nodeRight, node))\n    ) {\n      nodeMax =\n        flagRight && this._compare(nodeRight, nodeLeft) ? nodeRight : nodeLeft;\n      this._swap(node, nodeMax);\n      node = nodeMax;\n\n      nodeLeft = leftIndex(node);\n      flagLeft = nodeLeft < length;\n      nodeRight = rightIndex(node);\n      flagRight = nodeRight < length;\n    }\n  }\n\n  /** @returns {Array<T>} */\n  values() {\n    return this._heap;\n  }\n\n  /** @returns {Iterator<T>} */\n  [Symbol.iterator]() {\n    return this._heap[Symbol.iterator]();\n  }\n}\n\nfunction bottomIndex(queue) {\n  return queue._heap.length - 1;\n}\n\nfunction parentIndex(i) {\n  return ((i + 1) >>> 1) - 1;\n}\n\nfunction leftIndex(i) {\n  return (i << 1) + 1;\n}\n\nfunction rightIndex(i) {\n  return (i + 1) << 1;\n}\n", "/**\n * Generates a uuid v4.\n *\n * @param {number} a The placeholder (serves for recursion within function).\n * @returns {string} The universally unique id.\n */\nexport function uuid(a = undefined) {\n  // https://gist.github.com/jed/982883\n  return a\n    ? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n", "export function lerp(a, b, t) {\n  return a + (b - a) * t;\n}\n\nexport function clamp(value, min, max) {\n  return Math.min(max, Math.max(min, value));\n}\n\nexport function cycle(value, min, max) {\n  let range = max - min;\n  let result = (value - min) % range;\n  if (result < 0) result += range;\n  return result + min;\n}\n\nexport function withinRadius(fromX, fromY, toX, toY, radius) {\n  const dx = fromX - toX;\n  const dy = fromY - toY;\n  return dx * dx + dy * dy <= radius * radius;\n}\n\nexport function distance2(fromX, fromY, toX, toY) {\n  let dx = toX - fromX;\n  let dy = toY - fromY;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function direction2(fromX, fromY, toX, toY) {\n  let dx = toX - fromX;\n  let dy = toY - fromY;\n  return Math.atan2(dy, dx);\n}\n\nexport function lookAt2(radians, target, dt) {\n  let step = cycle(target - radians, -Math.PI, Math.PI);\n  return clamp(radians + step, radians - dt, radians + dt);\n}\n\nconst TO_RAD_FACTOR = Math.PI / 180;\nconst TO_DEG_FACTOR = 180 / Math.PI;\nexport function toRadians(degrees) {\n  return degrees * TO_RAD_FACTOR;\n}\n\nexport function toDegrees(radians) {\n  return radians * TO_DEG_FACTOR;\n}\n", "/**\n * @callback DependencyCallback\n * @param {Object} node The target node to get the dependencies for.\n * @returns {Array<Object>} A list of all dependencies for the given node.\n */\n\n/**\n * Sort an array topologically.\n *\n * @param {Array<Object>} nodes List of all nodes (as long as it includes the root node).\n * @param {DependencyCallback} dependencyCallback A callback to get the dependencies of a node.\n * @returns {Array<Object>} A sorted array of node objects where the dependent nodes are always listed before the dependees.\n */\nexport function topoSort(nodes, dependencyCallback) {\n  let dependencyEntries = [];\n  for (let node of nodes) {\n    let outs = dependencyCallback(node);\n    if (Array.isArray(outs)) {\n      dependencyEntries.push([node, ...outs]);\n    } else if (outs) {\n      throw new Error('Dependency callback must return an array.');\n    }\n  }\n  return computeDependencyList(\n    getNodesFromDependencyEntries(dependencyEntries),\n    getEdgesFromDependencyEntries(dependencyEntries)\n  );\n}\n\nfunction getNodesFromDependencyEntries(dependencyEntries) {\n  let result = new Set();\n  for (let dependencyEntry of dependencyEntries) {\n    for (let value of dependencyEntry) {\n      result.add(value);\n    }\n  }\n  return Array.from(result);\n}\n\nfunction getEdgesFromDependencyEntries(dependencyEntries) {\n  let result = [];\n  for (let dependencyEntry of dependencyEntries) {\n    let source = dependencyEntry[0];\n    for (let i = 1; i < dependencyEntry.length; ++i) {\n      let dependency = dependencyEntry[i];\n      result.push([source, dependency]);\n    }\n  }\n  return result;\n}\n\nfunction computeDependencyList(nodes, edges, dst = []) {\n  // Compute edge outs (more efficient lookup)\n  let edgeOuts = new Map();\n  for (let edge of edges) {\n    if (edge.length > 1) {\n      let source = edge[0];\n      let dest = edge[1];\n      if (!edgeOuts.has(source)) edgeOuts.set(source, new Set());\n      if (!edgeOuts.has(dest)) edgeOuts.set(dest, new Set());\n      edgeOuts.get(source).add(dest);\n    }\n  }\n\n  let context = {\n    edgeMap: edgeOuts,\n    index: nodes.length,\n    visited: new Set(),\n    dst,\n  };\n\n  for (let node of nodes) {\n    visit(context, node, new Set());\n  }\n\n  return dst;\n}\n\nfunction visit(context, node, prev) {\n  if (prev.has(node)) {\n    throw new Error(`Found cyclic dependency for '${node.name || node}'.`);\n  }\n\n  if (context.visited.has(node)) return;\n  context.visited.add(node);\n\n  if (context.edgeMap.has(node)) {\n    let outs = context.edgeMap.get(node);\n    if (outs.size > 0) {\n      prev.add(node);\n      for (let out of outs) {\n        visit(context, out, prev);\n      }\n      prev.delete(node);\n    }\n  }\n\n  context.dst.push(node);\n}\n", "/**\n * @template T\n * @typedef NodeCache<T>\n * @property {Record<T, number>} fscore\n * @property {Record<T, number>} gscore\n * @property {Record<T, number>} hscore\n * @property {Record<T, T>} parents\n */\n\n/**\n * @template T\n * @param {T} startId The unique representation of the starting position. Must be deterministic.\n * @param {T} goalId The unique representation of the stopping position. Must be deterministic.\n * @param {(node: T) => Array<T>} neighborsCallback Get all reachable neighbors from the given node.\n * @param {(from: T, to: T) => number} heuristicCallback Get the heuristics score between the two nodes.\n * @returns {Array<T>} If the goal is not reachable from the start, it will return an empty array.\n */\nexport function astarSearch(\n  startId,\n  goalId,\n  neighborsCallback,\n  heuristicCallback\n) {\n  /** @type {NodeCache<T>} */\n  let cache = createCache();\n  cacheNode(cache, startId);\n  let opened = new Set();\n  let closed = new Set();\n  opened.add(startId);\n  while (opened.size > 0) {\n    let minNodeId;\n    for (let openNodeId of opened) {\n      if (minNodeId) {\n        if (cache.fscore[openNodeId] < cache.fscore[minNodeId]) {\n          minNodeId = openNodeId;\n        }\n      } else {\n        minNodeId = openNodeId;\n      }\n    }\n\n    let currentNodeId = minNodeId;\n    if (currentNodeId === goalId) {\n      // Completed!\n      let result = [];\n      while (cache.parents[currentNodeId]) {\n        result.push(currentNodeId);\n        currentNodeId = cache.parents[currentNodeId];\n      }\n      result.push(currentNodeId);\n      return result.reverse();\n    } else {\n      // Not there yet...\n      closed.add(currentNodeId);\n      opened.delete(currentNodeId);\n      for (let neighborNodeId of neighborsCallback(currentNodeId)) {\n        if (closed.has(neighborNodeId)) continue;\n        let g = cache.gscore[currentNodeId] + 1;\n        let flag = false;\n        if (!opened.has(neighborNodeId)) {\n          flag = true;\n          cacheNode(cache, neighborNodeId);\n          cache.hscore[neighborNodeId] = heuristicCallback(\n            neighborNodeId,\n            goalId\n          );\n          opened.add(neighborNodeId);\n        } else if (g < cache.gscore[neighborNodeId]) {\n          flag = true;\n        }\n        // Use the new g score if better\n        if (flag) {\n          cache.parents[neighborNodeId] = currentNodeId;\n          cache.gscore[neighborNodeId] = g;\n          cache.fscore[neighborNodeId] = g + cache.hscore[neighborNodeId];\n        }\n      }\n    }\n  }\n  return [];\n}\n\n/**\n * @template T\n * @returns {NodeCache<T>}\n */\nfunction createCache() {\n  return {\n    fscore: {},\n    gscore: {},\n    hscore: {},\n    parents: {},\n  };\n}\n\n/**\n * @template T\n * @param {NodeCache<T>} cache\n * @param {T} id\n * @param {number} f\n * @param {number} g\n * @param {number} h\n * @param {T} parent\n * @returns {T}\n */\nfunction cacheNode(\n  cache,\n  id,\n  f = Number.POSITIVE_INFINITY,\n  g = Number.POSITIVE_INFINITY,\n  h = Number.NaN,\n  parent = null\n) {\n  cache.fscore[id] = f;\n  cache.gscore[id] = g;\n  cache.hscore[id] = h;\n  cache.parents[id] = parent;\n  return id;\n}\n", "export function fisherYatesShuffle(array) {\n  for (let i = array.length - 1; i > 0; --i) {\n    let j = Math.floor(Math.random() * (i + 1));\n    let temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n}\n", "export function bitCount(n) {\n  n = n - ((n >> 1) & 0x55555555);\n  n = (n & 0x33333333) + ((n >> 2) & 0x33333333);\n  return (((n + (n >> 4)) & 0xf0f0f0f) * 0x1010101) >> 24;\n}\n", "/**\n * @param {string} searchString\n * @returns {any}\n */\nexport function getURLParameters(searchString = window.location.search) {\n    return Object.fromEntries(new URLSearchParams(searchString).entries());\n}\n", "\n/**\n * @param {number} hexValue\n */\nexport function red(hexValue) {\n    return (hexValue >> 16) & 0xff;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function redf(hexValue) {\n    return ((hexValue >> 16) & 0xff) / 255.0;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function green(hexValue) {\n    return (hexValue >> 8) & 0xff;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function greenf(hexValue) {\n    return ((hexValue >> 8) & 0xff) / 255.0;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function blue(hexValue) {\n    return hexValue & 0xff;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function bluef(hexValue) {\n    return (hexValue & 0xff) / 255.0;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function alpha(hexValue) {\n    return (hexValue >> 24) & 0xff;\n}\n\n/**\n * @param {number} hexValue\n */\nexport function alphaf(hexValue) {\n    return ((hexValue >> 24) & 0xff) / 255.0;\n}\n\n/**\n * @param {number} redf\n * @param {number} greenf\n * @param {number} bluef\n * @param {number} alphaf\n */\nexport function hexf(redf, greenf, bluef, alphaf = 1) {\n    let r = Math.floor(Math.max(Math.min(redf, 1), 0) * 255);\n    let g = Math.floor(Math.max(Math.min(greenf, 1), 0) * 255);\n    let b = Math.floor(Math.max(Math.min(bluef, 1), 0) * 255);\n    let a = Math.floor(Math.max(Math.min(alphaf, 1), 0) * 255);\n    return (\n        ((a & 0xff) << 24) | ((r & 0xff) << 16) | ((g & 0xff) << 8) | (b & 0xff)\n    );\n}\n\n/**\n * @param {number} from\n * @param {number} to \n * @param {number} delta\n */\nexport function mix(from = 0x000000, to = 0xffffff, delta = 0.5) {\n    let rm = this.redf(from);\n    let gm = this.greenf(from);\n    let bm = this.bluef(from);\n    let am = this.alphaf(from);\n    let rf = (this.redf(to) - rm) * delta + rm;\n    let gf = (this.greenf(to) - gm) * delta + gm;\n    let bf = (this.bluef(to) - bm) * delta + bm;\n    let af = (this.alphaf(to) - am) * delta + am;\n    if (af < 0.01) {\n        af = undefined;\n    }\n    return hexf(rf, gf, bf, af);\n}\n\n/**\n * @param {number} hexValue\n */\nexport function toCSSColor(hexValue) {\n    if (typeof hexValue !== 'number') {\n        return hexValue;\n    }\n    let r = red(hexValue).toString(16).padStart(2, '0');\n    let g = green(hexValue).toString(16).padStart(2, '0');\n    let b = blue(hexValue).toString(16).padStart(2, '0');\n    return `#${r}${g}${b}`;\n}\n", "import { mat4, vec3, quat } from 'gl-matrix';\n\nimport { HEX } from '@milque/util';\n\nexport class Tia {\n\n    constructor() {\n        // NOTE: Offset canvas for pixel-perfect rendering.\n        /** @private */\n        this.projectionMatrix = mat4.fromTranslation(mat4.create(), vec3.fromValues(0, 0, 0));\n        /** @private */\n        this.viewMatrix = mat4.create();\n        /** @private */\n        this.position = vec3.create();\n        /** @private */\n        this.rotation = quat.create();\n        /** @private */\n        this.scaling = vec3.fromValues(1, 1, 1);\n        /** @private */\n        this.transformMatrix = mat4.create();\n        /** @private */\n        this.transformStack = [];\n        /** @private */\n        this.oldDOMMatrix = null;\n        /** @private */\n        this.worldDOMMatrix = new DOMMatrix();\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} color \n     */\n    cls(ctx, color = undefined) {\n        this.matBegin(ctx);\n        ctx.resetTransform();\n        if (typeof color === 'undefined') {\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        } else {\n            ctx.fillStyle = HEX.toCSSColor(color);\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        }\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x \n     * @param {number} y \n     * @param {number} radius \n     * @param {number} color \n     */\n    circ(ctx, x, y, radius, color) {\n        this.matBegin(ctx);\n        ctx.strokeStyle = HEX.toCSSColor(color);\n        ctx.beginPath();\n        ctx.arc(x, y, radius, 0, Math.PI * 2);\n        ctx.stroke();\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x \n     * @param {number} y \n     * @param {number} radius \n     * @param {number} color \n     */\n    circFill(ctx, x, y, radius, color) {\n        this.matBegin(ctx);\n        ctx.fillStyle = HEX.toCSSColor(color);\n        ctx.beginPath();\n        ctx.arc(x, y, radius, 0, Math.PI * 2);\n        ctx.fill();\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x1\n     * @param {number} y1\n     * @param {number} x2\n     * @param {number} y2\n     * @param {number} color \n     */\n    rect(ctx, x1, y1, x2, y2, color) {\n        this.matBegin(ctx);\n        ctx.strokeStyle = HEX.toCSSColor(color);\n        ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x1\n     * @param {number} y1\n     * @param {number} x2\n     * @param {number} y2\n     * @param {number} color \n     */\n    rectFill(ctx, x1, y1, x2, y2, color) {\n        this.matBegin(ctx);\n        ctx.fillStyle = HEX.toCSSColor(color);\n        ctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x1\n     * @param {number} y1\n     * @param {number} x2\n     * @param {number} y2\n     * @param {number} color \n     */\n    line(ctx, x1, y1, x2, y2, color) {\n        this.matBegin(ctx);\n        ctx.strokeStyle = HEX.toCSSColor(color);\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x\n     * @param {number} y\n     * @param {number} dw\n     * @param {number} dh\n     * @param {number} angle\n     * @param {number} color \n     */\n    trig(ctx, x, y, dw, dh, angle, color) {\n        this.matBegin(ctx);\n        ctx.fillStyle = HEX.toCSSColor(color);\n        ctx.translate(x, y);\n        ctx.rotate(angle);\n        ctx.beginPath();\n        let dy = dh / 2;\n        let dx = dw / 2;\n        ctx.moveTo(dx, 0);\n        ctx.lineTo(-dx, -dy);\n        ctx.lineTo(-dx, dy);\n        ctx.fill();\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {number} x\n     * @param {number} y\n     * @param {number} dw\n     * @param {number} dh\n     * @param {number} angle\n     * @param {number} color \n     */\n    trigFill(ctx, x, y, dw, dh, angle, color) {\n        this.matBegin(ctx);\n        ctx.fillStyle = HEX.toCSSColor(color);\n        ctx.translate(x, y);\n        ctx.rotate(angle);\n        ctx.beginPath();\n        let dy = dh / 2;\n        let dx = dw / 2;\n        ctx.moveTo(dx, 0);\n        ctx.lineTo(-dx, -dy);\n        ctx.lineTo(-dx, dy);\n        ctx.fill();\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {string} text\n     * @param {number} x\n     * @param {number} y\n     * @param {number} color \n     */\n    print(ctx, text, x, y, color) {\n        this.matBegin(ctx);\n        ctx.fillStyle = HEX.toCSSColor(color);\n        ctx.font = '16px sans-serif';\n        ctx.textBaseline = 'top';\n        ctx.fillText(text, x, y);\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {Exclude<CanvasImageSource, VideoFrame>} spriteImage\n     * @param {number} spriteIndex \n     * @param {number} x \n     * @param {number} y \n     * @param {number} w \n     * @param {number} h \n     * @param {boolean} flipX \n     * @param {boolean} flipY \n     */\n    spr(ctx, spriteImage, spriteIndex, x, y, w, h, flipX = false, flipY = false) {\n        let dx = Math.floor(Number(spriteImage.width) / w);\n        let u = (spriteIndex % dx) * w;\n        let v = (Math.floor(spriteIndex / dx)) * h;\n        this.sprUV(ctx, spriteImage, u, v, w, h, x, y, w, h, flipX, flipY);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     * @param {Exclude<CanvasImageSource, VideoFrame>} spriteImage\n     * @param {number} u\n     * @param {number} v\n     * @param {number} s\n     * @param {number} t\n     * @param {number} x \n     * @param {number} y \n     * @param {number} w \n     * @param {number} h \n     * @param {boolean} flipX \n     * @param {boolean} flipY \n     */\n    sprUV(ctx, spriteImage, u, v, s, t, x, y, w, h, flipX = false, flipY = false) {\n        this.matBegin(ctx);\n        let dx = flipX ? w : 0;\n        let dy = flipY ? h : 0;\n        let dw = flipX ? -1 : 1;\n        let dh = flipY ? -1 : 1;\n        ctx.translate(x + dx, y + dy);\n        ctx.scale(dw, dh);\n        ctx.drawImage(spriteImage, u, v, s - u, t - v, 0, 0, w, h);\n        this.matEnd(ctx);\n    }\n\n    /**\n     * @param {number} x \n     * @param {number} y \n     */\n    camera(x, y, w, h) {\n        mat4.fromTranslation(this.viewMatrix, vec3.fromValues(-x, -y, 0));\n        this.matUpdate();\n    }\n\n    /**\n     * @param {number} x \n     * @param {number} y \n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {number} radians\n     */\n    mat(x, y, scaleX, scaleY, radians) {\n        this.position[0] = x;\n        this.position[1] = y;\n        this.position[2] = 0;\n        this.scaling[0] = scaleX;\n        this.scaling[1] = scaleY;\n        this.scaling[2] = 1;\n        quat.fromEuler(this.rotation, 0, 0, radians);\n        this.matUpdate();\n    }\n\n    /**\n     * @param {number} x \n     * @param {number} y \n     */\n    matPos(x, y) {\n        this.position[0] = x;\n        this.position[1] = y;\n        this.position[2] = 0;\n        this.matUpdate();\n    }\n\n    /**\n     * @param {number} scaleX\n     * @param {number} scaleY\n     */\n    matScale(scaleX, scaleY) {\n        this.scaling[0] = scaleX;\n        this.scaling[1] = scaleY;\n        this.scaling[2] = 1;\n        this.matUpdate();\n    }\n\n    /**\n     * @param {number} angles\n     */\n    matRot(angles) {\n        quat.fromEuler(this.rotation, 0, 0, angles);\n        this.matUpdate();\n    }\n\n    push() {\n        mat4.fromRotationTranslationScale(this.transformMatrix, this.rotation, this.position, this.scaling);\n        quat.identity(this.rotation);\n        vec3.set(this.position, 0, 0, 0);\n        vec3.set(this.scaling, 1, 1, 1);\n        this.transformStack.push(this.transformMatrix);\n        this.transformMatrix = mat4.create();\n        this.matUpdate();\n    }\n\n    pop() {\n        if (this.transformStack.length > 0) {\n            let result = this.transformStack.pop();\n            mat4.getRotation(this.rotation, result);\n            mat4.getScaling(this.scaling, result);\n            mat4.getTranslation(this.position, result);\n        }\n        quat.identity(this.rotation);\n        vec3.set(this.position, 0, 0, 0);\n        vec3.set(this.scaling, 1, 1, 1);\n        mat4.fromRotationTranslationScale(this.transformMatrix, this.rotation, this.position, this.scaling);\n        this.matUpdate();\n    }\n\n    getCurrentMatrix() {\n        return this.worldDOMMatrix;\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     */\n    matBegin(ctx) {\n        this.oldDOMMatrix = ctx.getTransform();\n        ctx.setTransform(this.worldDOMMatrix);\n    }\n\n    /**\n     * @param {CanvasRenderingContext2D} ctx \n     */\n    matEnd(ctx) {\n        ctx.setTransform(this.oldDOMMatrix);\n        this.oldDOMMatrix = null;\n    }\n\n    /**\n     * @private\n     */\n    matUpdate() {\n        // TODO: This doesn't apply sub transformations right...\n        let out = mat4.create();\n        let length = this.transformStack.length;\n        for(let i = length - 1; i >= 0; --i) {\n            let transform = this.transformStack[i];\n            mat4.mul(out, transform, out);\n        }\n        mat4.fromRotationTranslationScale(this.transformMatrix, this.rotation, this.position, this.scaling);\n        mat4.mul(out, out, this.transformMatrix);\n        mat4.mul(out, this.viewMatrix, out);\n        mat4.mul(out, this.projectionMatrix, out);\n        this.worldDOMMatrix.a = out[0]; // m11\n        this.worldDOMMatrix.b = out[1]; // m12\n        this.worldDOMMatrix.c = out[4]; // m21\n        this.worldDOMMatrix.d = out[5]; // m22\n        this.worldDOMMatrix.e = Math.round(out[12]); // m41\n        this.worldDOMMatrix.f = Math.round(out[13]); // m42\n    }\n}\n", "import './reload';\nimport './error';\n\nimport { FlexCanvas } from '@milque/display';\nimport { AnimationFrameLoop } from '@milque/scene';\nimport { AxisBinding, InputPort, KeyCodes } from '@milque/input';\nimport { AssetManager, AssetRef, ImageLoader } from '@milque/asset';\n\nimport { Tia } from './Tia';\n\nwindow.addEventListener('DOMContentLoaded', main);\n\nconst bindings = {\n    cursorX: new AxisBinding('cursorX', KeyCodes.MOUSE_POS_X),\n    cursorY: new AxisBinding('cursorY', KeyCodes.MOUSE_POS_Y),\n};\n\nconst CAR_IMAGE = new AssetRef('car.png', ImageLoader, { imageType: 'png' }, 'car.png');\n\nasync function main() {\n    const { canvas } = FlexCanvas.create({ id: 'display', sizing: 'container' });\n    const ctx = canvas.getContext('2d');\n\n    const assets = new AssetManager();\n    await CAR_IMAGE.load(assets);\n    \n    const inputs = InputPort.create({ for: 'display' });\n    const axb = inputs.getContext('axisbutton');\n    axb.bindKeys(bindings);\n    \n    const tia = new Tia();\n\n    const renderer = {\n        tia,\n        ctx,\n    };\n    \n    const loop = new AnimationFrameLoop(frame => {\n        axb.poll(frame.detail.currentTime);\n\n        tia.camera(0, 0, canvas.width, canvas.height);\n        tia.cls(ctx, 0x000000);\n        tia.rectFill(ctx, 0, 0, 10, 10, 0xFFFFFF);\n        tia.trigFill(ctx, 100, 100, 10, 10, 0, 0xFF0000);\n\n        tia.spr(ctx, CAR_IMAGE.current, 0, 10, 10, 32, 32);\n\n        drawCart(ctx, tia, 20, 100, 10);\n    });\n    loop.start();\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx \n * @param {Tia} tia \n */\nfunction drawCart(ctx, tia, x, y, size) {\n    tia.trigFill(ctx, x, y, size, size, Math.PI / 4, 0xFF0000);\n}\n"],
  "mappings": "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",
  "names": ["path_exports", "__export", "basename", "path_default", "delimiter", "dirname", "extname", "isAbsolute", "join", "normalize", "relative", "resolve", "sep", "normalizeArray", "parts", "allowAboveRoot", "up", "i", "last", "resolvedPath", "resolvedAbsolute", "path", "filter", "p", "isPathAbsolute", "trailingSlash", "substr", "paths", "index", "from", "to", "trim", "arr", "start", "end", "fromParts", "toParts", "length", "samePartsLength", "outputParts", "result", "splitPath", "root", "dir", "ext", "f", "xs", "res", "splitPathRe", "init_path", "__esmMin", "filename", "str", "len", "require_path", "__commonJSMin", "exports", "module", "polyfill", "k", "require_constants", "__commonJSMin", "exports", "module", "path", "WIN_SLASH", "WIN_NO_SLASH", "DOT_LITERAL", "PLUS_LITERAL", "QMARK_LITERAL", "SLASH_LITERAL", "ONE_CHAR", "QMARK", "END_ANCHOR", "START_ANCHOR", "DOTS_SLASH", "NO_DOT", "NO_DOTS", "NO_DOT_SLASH", "NO_DOTS_SLASH", "QMARK_NO_DOT", "STAR", "POSIX_CHARS", "WINDOWS_CHARS", "POSIX_REGEX_SOURCE", "chars", "win32", "require_utils", "__commonJSMin", "exports", "path", "win32", "REGEX_BACKSLASH", "REGEX_REMOVE_BACKSLASH", "REGEX_SPECIAL_CHARS", "REGEX_SPECIAL_CHARS_GLOBAL", "val", "str", "match", "segs", "options", "input", "char", "lastIdx", "idx", "state", "output", "prepend", "append", "require_scan", "__commonJSMin", "exports", "module", "utils", "CHAR_ASTERISK", "CHAR_AT", "CHAR_BACKWARD_SLASH", "CHAR_COMMA", "CHAR_DOT", "CHAR_EXCLAMATION_MARK", "CHAR_FORWARD_SLASH", "CHAR_LEFT_CURLY_BRACE", "CHAR_LEFT_PARENTHESES", "CHAR_LEFT_SQUARE_BRACKET", "CHAR_PLUS", "CHAR_QUESTION_MARK", "CHAR_RIGHT_CURLY_BRACE", "CHAR_RIGHT_PARENTHESES", "CHAR_RIGHT_SQUARE_BRACKET", "isPathSeparator", "code", "depth", "token", "scan", "input", "options", "opts", "length", "scanToEnd", "slashes", "tokens", "parts", "str", "index", "start", "lastIndex", "isBrace", "isBracket", "isGlob", "isExtglob", "isGlobstar", "braceEscaped", "backslashes", "negated", "negatedExtglob", "finished", "braces", "prev", "eos", "peek", "advance", "next", "base", "prefix", "glob", "state", "prevIndex", "idx", "n", "i", "value", "require_parse", "__commonJSMin", "exports", "module", "constants", "utils", "MAX_LENGTH", "POSIX_REGEX_SOURCE", "REGEX_NON_SPECIAL_CHARS", "REGEX_SPECIAL_CHARS_BACKREF", "REPLACEMENTS", "expandRange", "args", "options", "value", "v", "syntaxError", "type", "char", "parse", "input", "opts", "max", "len", "bos", "tokens", "capture", "win32", "PLATFORM_CHARS", "EXTGLOB_CHARS", "DOT_LITERAL", "PLUS_LITERAL", "SLASH_LITERAL", "ONE_CHAR", "DOTS_SLASH", "NO_DOT", "NO_DOT_SLASH", "NO_DOTS_SLASH", "QMARK", "QMARK_NO_DOT", "STAR", "START_ANCHOR", "globstar", "nodot", "qmarkNoDot", "star", "state", "extglobs", "braces", "stack", "prev", "eos", "peek", "n", "advance", "remaining", "consume", "num", "append", "token", "negate", "count", "increment", "decrement", "push", "tok", "isBrace", "isExtglob", "extglobOpen", "output", "extglobClose", "rest", "extglobStar", "expression", "backslashes", "m", "esc", "chars", "first", "index", "next", "match", "slashes", "inner", "idx", "pre", "posix", "extglob", "prevValue", "escaped", "open", "brace", "arr", "range", "i", "out", "toks", "t", "prior", "before", "isStart", "afterStar", "after", "end", "NO_DOTS", "slashDot", "create", "str", "source", "require_picomatch", "__commonJSMin", "exports", "module", "path", "scan", "parse", "utils", "constants", "isObject", "val", "picomatch", "glob", "options", "returnState", "fns", "input", "str", "isMatch", "state", "isState", "opts", "posix", "regex", "isIgnored", "ignoreOpts", "matcher", "returnObject", "match", "output", "result", "format", "patterns", "pattern", "p", "returnOutput", "prepend", "append", "source", "parsed", "err", "require_picomatch", "__commonJSMin", "exports", "module", "error", "errored", "e", "INNER_HTML", "INNER_STYLE", "MODE_NOSCALE", "MODE_FIT", "MODE_SCALE", "MODE_FILL", "MODE_STRETCH", "DEFAULT_MODE", "MODE_FIT", "DELAYED_RESIZE_MILLIS", "DisplayPort", "_DisplayPort", "opts", "root", "id", "mode", "width", "DEFAULT_WIDTH", "height", "DEFAULT_HEIGHT", "debug", "result", "customElements", "t", "INNER_HTML", "INNER_STYLE", "value", "shadowRoot", "upgradeProperty", "attribute", "prev", "canvas", "el", "contextId", "options", "now", "deltaTime", "frames", "MODE_NOSCALE", "detail", "canvasWidth", "canvasHeight", "force", "clientRect", "clientWidth", "clientHeight", "MODE_STRETCH", "MODE_FILL", "MODE_SCALE", "ratioX", "ratioY", "fontSize", "contentStyle", "element", "propertyName", "SCALING_SCALE", "SIZING_CONTAINER", "FlexCanvas", "_FlexCanvas", "scaling", "sizing", "x", "y", "EPSILON", "ARRAY_TYPE", "RANDOM", "degree", "y", "i", "create", "out", "ARRAY_TYPE", "mat4_exports", "__export", "add", "adjoint", "clone", "copy", "create", "determinant", "equals", "exactEquals", "frob", "fromQuat", "fromQuat2", "fromRotation", "fromRotationTranslation", "fromRotationTranslationScale", "fromRotationTranslationScaleOrigin", "fromScaling", "fromTranslation", "fromValues", "fromXRotation", "fromYRotation", "fromZRotation", "frustum", "getRotation", "getScaling", "getTranslation", "identity", "invert", "lookAt", "mul", "multiply", "multiplyScalar", "multiplyScalarAndAdd", "ortho", "orthoNO", "orthoZO", "perspective", "perspectiveFromFieldOfView", "perspectiveNO", "perspectiveZO", "rotate", "rotateX", "rotateY", "rotateZ", "scale", "set", "str", "sub", "subtract", "targetTo", "translate", "transpose", "create", "out", "ARRAY_TYPE", "clone", "a", "copy", "fromValues", "m00", "m01", "m02", "m03", "m10", "m11", "m12", "m13", "m20", "m21", "m22", "m23", "m30", "m31", "m32", "m33", "set", "identity", "transpose", "a01", "a02", "a03", "a12", "a13", "a23", "invert", "a00", "a10", "a11", "a20", "a21", "a22", "a30", "a31", "a32", "a33", "b00", "b01", "b02", "b03", "b04", "b05", "b06", "b07", "b08", "b09", "b10", "b11", "det", "adjoint", "determinant", "multiply", "b", "b0", "b1", "b2", "b3", "translate", "v", "x", "y", "z", "scale", "rotate", "rad", "axis", "len", "s", "c", "t", "b12", "b20", "b21", "b22", "EPSILON", "rotateX", "rotateY", "rotateZ", "fromTranslation", "fromScaling", "fromRotation", "fromXRotation", "fromYRotation", "fromZRotation", "fromRotationTranslation", "q", "w", "x2", "y2", "z2", "xx", "xy", "xz", "yy", "yz", "zz", "wx", "wy", "wz", "fromQuat2", "translation", "bx", "by", "bz", "bw", "ax", "ay", "az", "aw", "magnitude", "getTranslation", "mat", "getScaling", "getRotation", "scaling", "is1", "is2", "is3", "sm11", "sm12", "sm13", "sm21", "sm22", "sm23", "sm31", "sm32", "sm33", "trace", "S", "fromRotationTranslationScale", "sx", "sy", "sz", "fromRotationTranslationScaleOrigin", "o", "ox", "oy", "oz", "out0", "out1", "out2", "out4", "out5", "out6", "out8", "out9", "out10", "fromQuat", "yx", "zx", "zy", "frustum", "left", "right", "bottom", "top", "near", "far", "rl", "tb", "nf", "perspectiveNO", "fovy", "aspect", "f", "perspective", "perspectiveZO", "perspectiveFromFieldOfView", "fov", "upTan", "downTan", "leftTan", "rightTan", "xScale", "yScale", "orthoNO", "lr", "bt", "ortho", "orthoZO", "lookAt", "eye", "center", "up", "x0", "x1", "y0", "y1", "z0", "z1", "eyex", "eyey", "eyez", "upx", "upy", "upz", "centerx", "centery", "centerz", "targetTo", "target", "str", "frob", "add", "subtract", "multiplyScalar", "multiplyScalarAndAdd", "exactEquals", "equals", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "a14", "a15", "b4", "b5", "b6", "b7", "b8", "b9", "b13", "b14", "b15", "mul", "sub", "quat_exports", "__export", "add", "calculateW", "clone", "conjugate", "copy", "create", "dot", "equals", "exactEquals", "exp", "fromEuler", "fromMat3", "fromValues", "getAngle", "getAxisAngle", "identity", "invert", "len", "length", "lerp", "ln", "mul", "multiply", "normalize", "pow", "random", "rotateX", "rotateY", "rotateZ", "rotationTo", "scale", "set", "setAxes", "setAxisAngle", "slerp", "sqlerp", "sqrLen", "squaredLength", "str", "vec3_exports", "__export", "add", "angle", "bezier", "ceil", "clone", "copy", "create", "cross", "dist", "distance", "div", "divide", "dot", "equals", "exactEquals", "floor", "forEach", "fromValues", "hermite", "inverse", "len", "length", "lerp", "max", "min", "mul", "multiply", "negate", "normalize", "random", "rotateX", "rotateY", "rotateZ", "round", "scale", "scaleAndAdd", "set", "sqrDist", "sqrLen", "squaredDistance", "squaredLength", "str", "sub", "subtract", "transformMat3", "transformMat4", "transformQuat", "zero", "create", "out", "ARRAY_TYPE", "clone", "a", "length", "x", "y", "z", "fromValues", "copy", "set", "add", "b", "subtract", "multiply", "divide", "ceil", "floor", "min", "max", "round", "scale", "scaleAndAdd", "distance", "squaredDistance", "squaredLength", "negate", "inverse", "normalize", "len", "dot", "cross", "ax", "ay", "az", "bx", "by", "bz", "lerp", "t", "hermite", "c", "d", "factorTimes2", "factor1", "factor2", "factor3", "factor4", "bezier", "inverseFactor", "inverseFactorTimesTwo", "random", "r", "RANDOM", "zScale", "transformMat4", "m", "w", "transformMat3", "transformQuat", "q", "qx", "qy", "qz", "qw", "uvx", "uvy", "uvz", "uuvx", "uuvy", "uuvz", "w2", "rotateX", "rad", "p", "rotateY", "rotateZ", "angle", "mag1", "mag2", "mag", "cosine", "zero", "str", "exactEquals", "equals", "a0", "a1", "a2", "b0", "b1", "b2", "EPSILON", "sub", "mul", "div", "dist", "sqrDist", "sqrLen", "forEach", "vec", "stride", "offset", "count", "fn", "arg", "i", "create", "out", "ARRAY_TYPE", "clone", "a", "fromValues", "x", "y", "z", "w", "copy", "set", "add", "b", "scale", "out", "a", "b", "length", "a", "x", "y", "z", "w", "squaredLength", "normalize", "out", "a", "x", "y", "z", "w", "len", "dot", "b", "lerp", "out", "a", "b", "t", "ax", "ay", "az", "aw", "exactEquals", "a", "b", "equals", "a0", "a1", "a2", "a3", "b0", "b1", "b2", "b3", "EPSILON", "forEach", "vec", "create", "a", "stride", "offset", "count", "fn", "arg", "i", "create", "out", "ARRAY_TYPE", "identity", "setAxisAngle", "axis", "rad", "s", "getAxisAngle", "out_axis", "q", "EPSILON", "getAngle", "a", "b", "dotproduct", "dot", "multiply", "ax", "ay", "az", "aw", "bx", "by", "bz", "bw", "rotateX", "rotateY", "rotateZ", "calculateW", "x", "y", "z", "exp", "w", "r", "et", "ln", "t", "pow", "scale", "slerp", "omega", "cosom", "sinom", "scale0", "scale1", "random", "u1", "RANDOM", "u2", "u3", "sqrt1MinusU1", "sqrtU1", "invert", "a0", "a1", "a2", "a3", "invDot", "conjugate", "fromMat3", "m", "fTrace", "fRoot", "i", "j", "k", "fromEuler", "halfToRad", "sx", "cx", "sy", "cy", "sz", "cz", "str", "clone", "fromValues", "copy", "set", "add", "mul", "lerp", "length", "len", "squaredLength", "sqrLen", "normalize", "exactEquals", "equals", "rotationTo", "tmpvec3", "xUnitVec3", "yUnitVec3", "cross", "sqlerp", "temp1", "temp2", "c", "d", "setAxes", "matr", "view", "right", "up", "UP", "vec3_exports", "DEFAULT_FOVY", "TO_RAD_FACTOR", "AnimationFrameLoop", "callback", "opts", "animationFrameHandler", "now", "d", "InputState", "size", "newSize", "code", "value", "delta", "now", "opts", "AxisState", "state", "c", "i", "oldState", "oldSize", "newState", "accumulatedValue", "accumulatedDelta", "len", "inverted", "x", "dx", "prev", "CLEAR_POLL_BITS", "CLEAR_DOWN_STATE_BITS", "CLEAR_INVERTED_MODIFIER_BITS", "DOWN_STATE_BIT", "PRESSED_STATE_BIT", "REPEATED_STATE_BIT", "RELEASED_STATE_BIT", "INVERTED_MODIFIER_BIT", "ButtonState", "modifier", "result", "down", "pressed", "repeated", "released", "v", "m", "bits", "isDown", "wasDown", "KeyCode", "_KeyCode", "string", "device", "key", "from", "isKeyCode", "object", "KEYBOARD", "MOUSE", "KEY_A", "KEY_B", "KEY_C", "KEY_D", "KEY_E", "KEY_F", "KEY_G", "KEY_H", "KEY_I", "KEY_J", "KEY_K", "KEY_L", "KEY_M", "KEY_N", "KEY_O", "KEY_P", "KEY_Q", "KEY_R", "KEY_S", "KEY_T", "KEY_U", "KEY_V", "KEY_W", "KEY_X", "KEY_Y", "KEY_Z", "DIGIT_0", "DIGIT_1", "DIGIT_2", "DIGIT_3", "DIGIT_4", "DIGIT_5", "DIGIT_6", "DIGIT_7", "DIGIT_8", "DIGIT_9", "MINUS", "EQUAL", "BRACKET_LEFT", "BRACKET_RIGHT", "SEMICOLON", "QUOTE", "BACKQUOTE", "BACKSLASH", "COMMA", "PERIOD", "SLASH", "ESCAPE", "SPACE", "CAPS_LOCK", "BACKSPACE", "DELETE", "TAB", "ENTER", "ARROW_UP", "ARROW_DOWN", "ARROW_LEFT", "ARROW_RIGHT", "MOUSE_BUTTON_0", "MOUSE_BUTTON_1", "MOUSE_BUTTON_2", "MOUSE_BUTTON_3", "MOUSE_BUTTON_4", "MOUSE_POS_X", "MOUSE_POS_Y", "MOUSE_WHEEL_X", "MOUSE_WHEEL_Y", "MOUSE_WHEEL_Z", "InputBinding", "name", "axb", "stringsToKeyCodes", "strings", "str", "keyCode", "e", "keyName", "camelToSnakeCase", "KeyCodes", "_", "a", "b", "AxisBinding", "_AxisBinding", "keyCodes", "InputDevice", "keyCode", "deviceName", "eventTarget", "listeners", "event", "listener", "list", "flag", "KeyboardDevice", "opts", "ignoreRepeat", "DEFAULT_LINE_PIXELS", "DEFAULT_PAGE_PIXELS", "MouseDevice", "eventsOnFocus", "force", "dx", "dy", "dz", "result", "element", "clientWidth", "clientHeight", "rect", "x", "y", "InputCode", "t", "INNER_HTML", "INNER_STYLE", "customElements", "value", "c", "shadowRoot", "attribute", "prev", "AutoPoller", "pollable", "handle", "now", "DeviceInputAdapter", "bindings", "input", "device", "code", "movement", "control", "shift", "alt", "index", "Binding", "InputBindings", "binding", "inputMap", "bindingMap", "boundList", "i", "deviceCodeBindings", "codeBindings", "InputContext", "ButtonState", "AxisState", "oldEventTarget", "current", "next", "type", "name", "negativeCode", "positiveCode", "include", "buttons", "axes", "axis", "InputPort", "_InputPort", "root", "id", "forId", "autopoll", "ctx", "target", "contextId", "options", "context", "inputs", "primaryElements", "entries", "primary", "createInputTableEntry", "entry", "key", "row", "data", "output", "kbd", "KEYBOARD_SOURCE", "MOUSE_SOURCE", "GlobExp", "_GlobExp", "pattern", "source", "string", "FILE_URI_PREFIX_PATTERN", "loadInStore", "assets", "uri", "src", "loader", "opts", "timeout", "loadings", "loading", "Loading", "attempt", "promises", "getLoadedInStore", "cached", "value", "cacheInStore", "store", "cacheDefaultInStore", "glob", "defaults", "Fallback", "unloadInStore", "clearInStore", "resetStore", "getLoadingInStore", "getDefaultInStore", "def", "getCurrentInStore", "hasInStore", "keysInStore", "isAssetCachedInStore", "isAssetLoadingInStore", "resolve", "reject", "reason", "AssetManager", "parent", "filepath", "uriGlob", "DEFAULT_TIMEOUT", "AssetRef", "_AssetRef", "initial", "assetManager", "result", "ImageLoader", "src", "opts", "imageType", "arrayBuffer", "i", "blob", "imageUrl", "image", "resolve", "reject", "e", "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "OFF", "LOG_LEVEL_STYLES", "styledLogLevel", "styledLogLevel", "color", "LEVEL", "DOMAIN", "TOP_INDEX", "PriorityQueue", "comparator", "values", "value", "result", "bottom", "bottomIndex", "index", "fromIndex", "start", "deleteCount", "i", "j", "node", "nodeParent", "parentIndex", "length", "nodeMax", "nodeLeft", "leftIndex", "flagLeft", "nodeRight", "rightIndex", "flagRight", "queue", "TO_RAD_FACTOR", "TO_DEG_FACTOR", "red", "hexValue", "redf", "green", "greenf", "blue", "bluef", "alpha", "alphaf", "hexf", "r", "g", "b", "mix", "from", "to", "delta", "rm", "gm", "bm", "am", "rf", "gf", "bf", "af", "toCSSColor", "Tia", "mat4_exports", "vec3_exports", "quat_exports", "ctx", "color", "Hex", "x", "y", "radius", "x1", "y1", "x2", "y2", "dw", "dh", "angle", "dy", "dx", "text", "spriteImage", "spriteIndex", "w", "h", "flipX", "flipY", "u", "v", "s", "t", "scaleX", "scaleY", "radians", "angles", "result", "out", "length", "i", "transform", "main", "bindings", "AxisBinding", "KeyCodes", "CAR_IMAGE", "AssetRef", "ImageLoader", "canvas", "FlexCanvas", "ctx", "assets", "AssetManager", "axb", "InputPort", "tia", "Tia", "renderer", "AnimationFrameLoop", "frame", "drawCart", "x", "y", "size"]
}
