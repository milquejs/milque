(()=>{var zn=Object.create,It=Object.defineProperty,Fn=Object.getPrototypeOf,Yn=Object.prototype.hasOwnProperty,Gn=Object.getOwnPropertyNames,Wn=Object.getOwnPropertyDescriptor;var jn=n=>It(n,"__esModule",{value:!0});var qn=(n,t)=>()=>(n&&(t=n(n=0)),t),dt=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ie=(n,t)=>{for(var e in t)It(n,e,{get:t[e],enumerable:!0})},Xn=(n,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Gn(t))!Yn.call(n,s)&&s!=="default"&&It(n,s,{get:()=>t[s],enumerable:!(e=Wn(t,s))||e.enumerable});return n},Zn=n=>Xn(jn(It(n!=null?zn(Fn(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var We={};Ie(We,{basename:()=>Je,default:()=>Ti,delimiter:()=>Qe,dirname:()=>Ve,extname:()=>tn,isAbsolute:()=>ue,join:()=>qe,normalize:()=>he,relative:()=>Xe,resolve:()=>Mt,sep:()=>Ze});function je(n,t){for(var e=0,s=n.length-1;s>=0;s--){var i=n[s];i==="."?n.splice(s,1):i===".."?(n.splice(s,1),e++):e&&(n.splice(s,1),e--)}if(t)for(;e--;e)n.unshift("..");return n}function Mt(){for(var n="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var s=e>=0?arguments[e]:"/";if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)continue;n=s+"/"+n,t=s.charAt(0)==="/"}return n=je(le(n.split("/"),function(i){return!!i}),!t).join("/"),(t?"/":"")+n||"."}function he(n){var t=ue(n),e=Ri(n,-1)==="/";return n=je(le(n.split("/"),function(s){return!!s}),!t).join("/"),!n&&!t&&(n="."),n&&e&&(n+="/"),(t?"/":"")+n}function ue(n){return n.charAt(0)==="/"}function qe(){var n=Array.prototype.slice.call(arguments,0);return he(le(n,function(t,e){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Xe(n,t){n=Mt(n).substr(1),t=Mt(t).substr(1);function e(f){for(var p=0;p<f.length&&f[p]==="";p++);for(var m=f.length-1;m>=0&&f[m]==="";m--);return p>m?[]:f.slice(p,m-p+1)}for(var s=e(n.split("/")),i=e(t.split("/")),r=Math.min(s.length,i.length),o=r,l=0;l<r;l++)if(s[l]!==i[l]){o=l;break}for(var a=[],l=o;l<s.length;l++)a.push("..");return a=a.concat(i.slice(o)),a.join("/")}function Ve(n){var t=ae(n),e=t[0],s=t[1];return!e&&!s?".":(s&&(s=s.substr(0,s.length-1)),e+s)}function Je(n,t){var e=ae(n)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function tn(n){return ae(n)[3]}function le(n,t){if(n.filter)return n.filter(t);for(var e=[],s=0;s<n.length;s++)t(n[s],s,n)&&e.push(n[s]);return e}var Ci,ae,Ze,Qe,Ti,Ri,en=qn(()=>{Ci=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ae=function(n){return Ci.exec(n).slice(1)};Ze="/",Qe=":";Ti={extname:tn,basename:Je,dirname:Ve,sep:Ze,delimiter:Qe,relative:Xe,join:qe,isAbsolute:ue,normalize:he,resolve:Mt};Ri="ab".substr(-1)==="b"?function(n,t,e){return n.substr(t,e)}:function(n,t,e){return t<0&&(t=n.length+t),n.substr(t,e)}});var Dt=dt((Gr,Ht)=>{var ft=(en(),We);ft&&ft.default?Ht.exports=ft.default:ft&&(Ht.exports=ft);if(ft)for(let n in ft)Ht.exports[n]=ft[n]});var xt=dt((Wr,nn)=>{"use strict";var Li=Dt(),ot="\\\\/",sn=`[^${ot}]`,ut="\\.",Oi="\\+",Ii="\\?",Kt="\\/",Bi="(?=.)",rn="[^/]",ce=`(?:${Kt}|$)`,on=`(?:^|${Kt})`,fe=`${ut}{1,2}${ce}`,Mi=`(?!${ut})`,Hi=`(?!${on}${fe})`,Di=`(?!${ut}{0,1}${ce})`,Ki=`(?!${fe})`,ki=`[^.${Kt}]`,Pi=`${rn}*?`,an={DOT_LITERAL:ut,PLUS_LITERAL:Oi,QMARK_LITERAL:Ii,SLASH_LITERAL:Kt,ONE_CHAR:Bi,QMARK:rn,END_ANCHOR:ce,DOTS_SLASH:fe,NO_DOT:Mi,NO_DOTS:Hi,NO_DOT_SLASH:Di,NO_DOTS_SLASH:Ki,QMARK_NO_DOT:ki,STAR:Pi,START_ANCHOR:on},$i={...an,SLASH_LITERAL:`[${ot}]`,QMARK:sn,STAR:`${sn}*?`,DOTS_SLASH:`${ut}{1,2}(?:[${ot}]|$)`,NO_DOT:`(?!${ut})`,NO_DOTS:`(?!(?:^|[${ot}])${ut}{1,2}(?:[${ot}]|$))`,NO_DOT_SLASH:`(?!${ut}{0,1}(?:[${ot}]|$))`,NO_DOTS_SLASH:`(?!${ut}{1,2}(?:[${ot}]|$))`,QMARK_NO_DOT:`[^.${ot}]`,START_ANCHOR:`(?:^|[${ot}])`,END_ANCHOR:`(?:[${ot}]|$)`},Ui={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};nn.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Ui,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Li.sep,extglobChars(n){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${n.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(n){return n===!0?$i:an}}});var kt=dt(V=>{"use strict";var Ni=Dt(),zi=!1,{REGEX_BACKSLASH:Fi,REGEX_REMOVE_BACKSLASH:Yi,REGEX_SPECIAL_CHARS:Gi,REGEX_SPECIAL_CHARS_GLOBAL:Wi}=xt();V.isObject=n=>n!==null&&typeof n=="object"&&!Array.isArray(n);V.hasRegexChars=n=>Gi.test(n);V.isRegexChar=n=>n.length===1&&V.hasRegexChars(n);V.escapeRegex=n=>n.replace(Wi,"\\$1");V.toPosixSlashes=n=>n.replace(Fi,"/");V.removeBackslashes=n=>n.replace(Yi,t=>t==="\\"?"":t);V.supportsLookbehinds=()=>{let n=process.version.slice(1).split(".").map(Number);return n.length===3&&n[0]>=9||n[0]===8&&n[1]>=10};V.isWindows=n=>n&&typeof n.windows=="boolean"?n.windows:zi===!0||Ni.sep==="\\";V.escapeLast=(n,t,e)=>{let s=n.lastIndexOf(t,e);return s===-1?n:n[s-1]==="\\"?V.escapeLast(n,t,s-1):`${n.slice(0,s)}\\${n.slice(s)}`};V.removePrefix=(n,t={})=>{let e=n;return e.startsWith("./")&&(e=e.slice(2),t.prefix="./"),e};V.wrapOutput=(n,t={},e={})=>{let s=e.contains?"":"^",i=e.contains?"":"$",r=`${s}(?:${n})${i}`;return t.negated===!0&&(r=`(?:^(?!${r}).*$)`),r}});var vn=dt((qr,ln)=>{"use strict";var un=kt(),{CHAR_ASTERISK:pe,CHAR_AT:ji,CHAR_BACKWARD_SLASH:St,CHAR_COMMA:qi,CHAR_DOT:de,CHAR_EXCLAMATION_MARK:ve,CHAR_FORWARD_SLASH:hn,CHAR_LEFT_CURLY_BRACE:ge,CHAR_LEFT_PARENTHESES:me,CHAR_LEFT_SQUARE_BRACKET:Xi,CHAR_PLUS:Zi,CHAR_QUESTION_MARK:cn,CHAR_RIGHT_CURLY_BRACE:Qi,CHAR_RIGHT_PARENTHESES:fn,CHAR_RIGHT_SQUARE_BRACKET:Vi}=xt(),pn=n=>n===hn||n===St,dn=n=>{n.isPrefix!==!0&&(n.depth=n.isGlobstar?Infinity:1)},Ji=(n,t)=>{let e=t||{},s=n.length-1,i=e.parts===!0||e.scanToEnd===!0,r=[],o=[],l=[],a=n,f=-1,p=0,m=0,w=!1,T=!1,x=!1,R=!1,D=!1,W=!1,z=!1,L=!1,N=!1,I=!1,F=0,H,E,S={value:"",depth:0,isGlob:!1},$=()=>f>=s,c=()=>a.charCodeAt(f+1),O=()=>(H=E,a.charCodeAt(++f));for(;f<s;){E=O();let Y;if(E===St){z=S.backslashes=!0,E=O(),E===ge&&(W=!0);continue}if(W===!0||E===ge){for(F++;$()!==!0&&(E=O());){if(E===St){z=S.backslashes=!0,O();continue}if(E===ge){F++;continue}if(W!==!0&&E===de&&(E=O())===de){if(w=S.isBrace=!0,x=S.isGlob=!0,I=!0,i===!0)continue;break}if(W!==!0&&E===qi){if(w=S.isBrace=!0,x=S.isGlob=!0,I=!0,i===!0)continue;break}if(E===Qi&&(F--,F===0)){W=!1,w=S.isBrace=!0,I=!0;break}}if(i===!0)continue;break}if(E===hn){if(r.push(f),o.push(S),S={value:"",depth:0,isGlob:!1},I===!0)continue;if(H===de&&f===p+1){p+=2;continue}m=f+1;continue}if(e.noext!==!0&&(E===Zi||E===ji||E===pe||E===cn||E===ve)===!0&&c()===me){if(x=S.isGlob=!0,R=S.isExtglob=!0,I=!0,E===ve&&f===p&&(N=!0),i===!0){for(;$()!==!0&&(E=O());){if(E===St){z=S.backslashes=!0,E=O();continue}if(E===fn){x=S.isGlob=!0,I=!0;break}}continue}break}if(E===pe){if(H===pe&&(D=S.isGlobstar=!0),x=S.isGlob=!0,I=!0,i===!0)continue;break}if(E===cn){if(x=S.isGlob=!0,I=!0,i===!0)continue;break}if(E===Xi){for(;$()!==!0&&(Y=O());){if(Y===St){z=S.backslashes=!0,O();continue}if(Y===Vi){T=S.isBracket=!0,x=S.isGlob=!0,I=!0;break}}if(i===!0)continue;break}if(e.nonegate!==!0&&E===ve&&f===p){L=S.negated=!0,p++;continue}if(e.noparen!==!0&&E===me){if(x=S.isGlob=!0,i===!0){for(;$()!==!0&&(E=O());){if(E===me){z=S.backslashes=!0,E=O();continue}if(E===fn){I=!0;break}}continue}break}if(x===!0){if(I=!0,i===!0)continue;break}}e.noext===!0&&(R=!1,x=!1);let C=a,J="",h="";p>0&&(J=a.slice(0,p),a=a.slice(p),m-=p),C&&x===!0&&m>0?(C=a.slice(0,m),h=a.slice(m)):x===!0?(C="",h=a):C=a,C&&C!==""&&C!=="/"&&C!==a&&pn(C.charCodeAt(C.length-1))&&(C=C.slice(0,-1)),e.unescape===!0&&(h&&(h=un.removeBackslashes(h)),C&&z===!0&&(C=un.removeBackslashes(C)));let u={prefix:J,input:n,start:p,base:C,glob:h,isBrace:w,isBracket:T,isGlob:x,isExtglob:R,isGlobstar:D,negated:L,negatedExtglob:N};if(e.tokens===!0&&(u.maxDepth=0,pn(E)||o.push(S),u.tokens=o),e.parts===!0||e.tokens===!0){let Y;for(let A=0;A<r.length;A++){let Z=Y?Y+1:p,G=r[A],j=n.slice(Z,G);e.tokens&&(A===0&&p!==0?(o[A].isPrefix=!0,o[A].value=J):o[A].value=j,dn(o[A]),u.maxDepth+=o[A].depth),(A!==0||j!=="")&&l.push(j),Y=G}if(Y&&Y+1<n.length){let A=n.slice(Y+1);l.push(A),e.tokens&&(o[o.length-1].value=A,dn(o[o.length-1]),u.maxDepth+=o[o.length-1].depth)}u.slashes=r,u.parts=l}return u};ln.exports=Ji});var yn=dt((Xr,gn)=>{"use strict";var Pt=xt(),tt=kt(),{MAX_LENGTH:$t,POSIX_REGEX_SOURCE:tr,REGEX_NON_SPECIAL_CHARS:er,REGEX_SPECIAL_CHARS_BACKREF:nr,REPLACEMENTS:mn}=Pt,sr=(n,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...n,t);n.sort();let e=`[${n.join("-")}]`;try{new RegExp(e)}catch(s){return n.map(i=>tt.escapeRegex(i)).join("..")}return e},Et=(n,t)=>`Missing ${n}: "${t}" - use "\\\\${t}" to match literal characters`,En=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a string");n=mn[n]||n;let e={...t},s=typeof e.maxLength=="number"?Math.min($t,e.maxLength):$t,i=n.length;if(i>s)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${s}`);let r={type:"bos",value:"",output:e.prepend||""},o=[r],l=e.capture?"":"?:",a=tt.isWindows(t),f=Pt.globChars(a),p=Pt.extglobChars(f),{DOT_LITERAL:m,PLUS_LITERAL:w,SLASH_LITERAL:T,ONE_CHAR:x,DOTS_SLASH:R,NO_DOT:D,NO_DOT_SLASH:W,NO_DOTS_SLASH:z,QMARK:L,QMARK_NO_DOT:N,STAR:I,START_ANCHOR:F}=f,H=g=>`(${l}(?:(?!${F}${g.dot?R:m}).)*?)`,E=e.dot?"":D,S=e.dot?L:N,$=e.bash===!0?H(e):I;e.capture&&($=`(${$})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let c={input:n,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};n=tt.removePrefix(n,c),i=n.length;let O=[],C=[],J=[],h=r,u,Y=()=>c.index===i-1,A=c.peek=(g=1)=>n[c.index+g],Z=c.advance=()=>n[++c.index]||"",G=()=>n.slice(c.index+1),j=(g="",B=0)=>{c.consumed+=g,c.index+=B},it=g=>{c.output+=g.output!=null?g.output:g.value,j(g.value)},bt=()=>{let g=1;for(;A()==="!"&&(A(2)!=="("||A(3)==="?");)Z(),c.start++,g++;return g%2==0?!1:(c.negated=!0,c.start++,!0)},ct=g=>{c[g]++,J.push(g)},rt=g=>{c[g]--,J.pop()},_=g=>{if(h.type==="globstar"){let B=c.braces>0&&(g.type==="comma"||g.type==="brace"),d=g.extglob===!0||O.length&&(g.type==="pipe"||g.type==="paren");g.type!=="slash"&&g.type!=="paren"&&!B&&!d&&(c.output=c.output.slice(0,-h.output.length),h.type="star",h.value="*",h.output=$,c.output+=h.output)}if(O.length&&g.type!=="paren"&&(O[O.length-1].inner+=g.value),(g.value||g.output)&&it(g),h&&h.type==="text"&&g.type==="text"){h.value+=g.value,h.output=(h.output||"")+g.value;return}g.prev=h,o.push(g),h=g},pt=(g,B)=>{let d={...p[B],conditions:1,inner:""};d.prev=h,d.parens=c.parens,d.output=c.output;let b=(e.capture?"(":"")+d.open;ct("parens"),_({type:g,value:B,output:c.output?"":x}),_({type:"paren",extglob:!0,value:Z(),output:b}),O.push(d)},Lt=g=>{let B=g.close+(e.capture?")":""),d;if(g.type==="negate"){let b=$;g.inner&&g.inner.length>1&&g.inner.includes("/")&&(b=H(e)),(b!==$||Y()||/^\)+$/.test(G()))&&(B=g.close=`)$))${b}`),g.inner.includes("*")&&(d=G())&&/^\.[^\\/.]+$/.test(d)&&(B=g.close=`)${d})${b})`),g.prev.type==="bos"&&(c.negatedExtglob=!0)}_({type:"paren",extglob:!0,value:u,output:B}),rt("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(n)){let g=!1,B=n.replace(nr,(d,b,K,X,U,jt)=>X==="\\"?(g=!0,d):X==="?"?b?b+X+(U?L.repeat(U.length):""):jt===0?S+(U?L.repeat(U.length):""):L.repeat(K.length):X==="."?m.repeat(K.length):X==="*"?b?b+X+(U?$:""):$:b?d:`\\${d}`);return g===!0&&(e.unescape===!0?B=B.replace(/\\/g,""):B=B.replace(/\\+/g,d=>d.length%2==0?"\\\\":d?"\\":"")),B===n&&e.contains===!0?(c.output=n,c):(c.output=tt.wrapOutput(B,c,t),c)}for(;!Y();){if(u=Z(),u==="\0")continue;if(u==="\\"){let d=A();if(d==="/"&&e.bash!==!0||d==="."||d===";")continue;if(!d){u+="\\",_({type:"text",value:u});continue}let b=/^\\+/.exec(G()),K=0;if(b&&b[0].length>2&&(K=b[0].length,c.index+=K,K%2!=0&&(u+="\\")),e.unescape===!0?u=Z():u+=Z(),c.brackets===0){_({type:"text",value:u});continue}}if(c.brackets>0&&(u!=="]"||h.value==="["||h.value==="[^")){if(e.posix!==!1&&u===":"){let d=h.value.slice(1);if(d.includes("[")&&(h.posix=!0,d.includes(":"))){let b=h.value.lastIndexOf("["),K=h.value.slice(0,b),X=h.value.slice(b+2),U=tr[X];if(U){h.value=K+U,c.backtrack=!0,Z(),!r.output&&o.indexOf(h)===1&&(r.output=x);continue}}}(u==="["&&A()!==":"||u==="-"&&A()==="]")&&(u=`\\${u}`),u==="]"&&(h.value==="["||h.value==="[^")&&(u=`\\${u}`),e.posix===!0&&u==="!"&&h.value==="["&&(u="^"),h.value+=u,it({value:u});continue}if(c.quotes===1&&u!=='"'){u=tt.escapeRegex(u),h.value+=u,it({value:u});continue}if(u==='"'){c.quotes=c.quotes===1?0:1,e.keepQuotes===!0&&_({type:"text",value:u});continue}if(u==="("){ct("parens"),_({type:"paren",value:u});continue}if(u===")"){if(c.parens===0&&e.strictBrackets===!0)throw new SyntaxError(Et("opening","("));let d=O[O.length-1];if(d&&c.parens===d.parens+1){Lt(O.pop());continue}_({type:"paren",value:u,output:c.parens?")":"\\)"}),rt("parens");continue}if(u==="["){if(e.nobracket===!0||!G().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(Et("closing","]"));u=`\\${u}`}else ct("brackets");_({type:"bracket",value:u});continue}if(u==="]"){if(e.nobracket===!0||h&&h.type==="bracket"&&h.value.length===1){_({type:"text",value:u,output:`\\${u}`});continue}if(c.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(Et("opening","["));_({type:"text",value:u,output:`\\${u}`});continue}rt("brackets");let d=h.value.slice(1);if(h.posix!==!0&&d[0]==="^"&&!d.includes("/")&&(u=`/${u}`),h.value+=u,it({value:u}),e.literalBrackets===!1||tt.hasRegexChars(d))continue;let b=tt.escapeRegex(h.value);if(c.output=c.output.slice(0,-h.value.length),e.literalBrackets===!0){c.output+=b,h.value=b;continue}h.value=`(${l}${b}|${h.value})`,c.output+=h.value;continue}if(u==="{"&&e.nobrace!==!0){ct("braces");let d={type:"brace",value:u,output:"(",outputIndex:c.output.length,tokensIndex:c.tokens.length};C.push(d),_(d);continue}if(u==="}"){let d=C[C.length-1];if(e.nobrace===!0||!d){_({type:"text",value:u,output:u});continue}let b=")";if(d.dots===!0){let K=o.slice(),X=[];for(let U=K.length-1;U>=0&&(o.pop(),K[U].type!=="brace");U--)K[U].type!=="dots"&&X.unshift(K[U].value);b=sr(X,e),c.backtrack=!0}if(d.comma!==!0&&d.dots!==!0){let K=c.output.slice(0,d.outputIndex),X=c.tokens.slice(d.tokensIndex);d.value=d.output="\\{",u=b="\\}",c.output=K;for(let U of X)c.output+=U.output||U.value}_({type:"brace",value:u,output:b}),rt("braces"),C.pop();continue}if(u==="|"){O.length>0&&O[O.length-1].conditions++,_({type:"text",value:u});continue}if(u===","){let d=u,b=C[C.length-1];b&&J[J.length-1]==="braces"&&(b.comma=!0,d="|"),_({type:"comma",value:u,output:d});continue}if(u==="/"){if(h.type==="dot"&&c.index===c.start+1){c.start=c.index+1,c.consumed="",c.output="",o.pop(),h=r;continue}_({type:"slash",value:u,output:T});continue}if(u==="."){if(c.braces>0&&h.type==="dot"){h.value==="."&&(h.output=m);let d=C[C.length-1];h.type="dots",h.output+=u,h.value+=u,d.dots=!0;continue}if(c.braces+c.parens===0&&h.type!=="bos"&&h.type!=="slash"){_({type:"text",value:u,output:m});continue}_({type:"dot",value:u,output:m});continue}if(u==="?"){if(!(h&&h.value==="(")&&e.noextglob!==!0&&A()==="("&&A(2)!=="?"){pt("qmark",u);continue}if(h&&h.type==="paren"){let b=A(),K=u;if(b==="<"&&!tt.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(h.value==="("&&!/[!=<:]/.test(b)||b==="<"&&!/<([!=]|\w+>)/.test(G()))&&(K=`\\${u}`),_({type:"text",value:u,output:K});continue}if(e.dot!==!0&&(h.type==="slash"||h.type==="bos")){_({type:"qmark",value:u,output:N});continue}_({type:"qmark",value:u,output:L});continue}if(u==="!"){if(e.noextglob!==!0&&A()==="("&&(A(2)!=="?"||!/[!=<:]/.test(A(3)))){pt("negate",u);continue}if(e.nonegate!==!0&&c.index===0){bt();continue}}if(u==="+"){if(e.noextglob!==!0&&A()==="("&&A(2)!=="?"){pt("plus",u);continue}if(h&&h.value==="("||e.regex===!1){_({type:"plus",value:u,output:w});continue}if(h&&(h.type==="bracket"||h.type==="paren"||h.type==="brace")||c.parens>0){_({type:"plus",value:u});continue}_({type:"plus",value:w});continue}if(u==="@"){if(e.noextglob!==!0&&A()==="("&&A(2)!=="?"){_({type:"at",extglob:!0,value:u,output:""});continue}_({type:"text",value:u});continue}if(u!=="*"){(u==="$"||u==="^")&&(u=`\\${u}`);let d=er.exec(G());d&&(u+=d[0],c.index+=d[0].length),_({type:"text",value:u});continue}if(h&&(h.type==="globstar"||h.star===!0)){h.type="star",h.star=!0,h.value+=u,h.output=$,c.backtrack=!0,c.globstar=!0,j(u);continue}let g=G();if(e.noextglob!==!0&&/^\([^?]/.test(g)){pt("star",u);continue}if(h.type==="star"){if(e.noglobstar===!0){j(u);continue}let d=h.prev,b=d.prev,K=d.type==="slash"||d.type==="bos",X=b&&(b.type==="star"||b.type==="globstar");if(e.bash===!0&&(!K||g[0]&&g[0]!=="/")){_({type:"star",value:u,output:""});continue}let U=c.braces>0&&(d.type==="comma"||d.type==="brace"),jt=O.length&&(d.type==="pipe"||d.type==="paren");if(!K&&d.type!=="paren"&&!U&&!jt){_({type:"star",value:u,output:""});continue}for(;g.slice(0,3)==="/**";){let Ot=n[c.index+4];if(Ot&&Ot!=="/")break;g=g.slice(3),j("/**",3)}if(d.type==="bos"&&Y()){h.type="globstar",h.value+=u,h.output=H(e),c.output=h.output,c.globstar=!0,j(u);continue}if(d.type==="slash"&&d.prev.type!=="bos"&&!X&&Y()){c.output=c.output.slice(0,-(d.output+h.output).length),d.output=`(?:${d.output}`,h.type="globstar",h.output=H(e)+(e.strictSlashes?")":"|$)"),h.value+=u,c.globstar=!0,c.output+=d.output+h.output,j(u);continue}if(d.type==="slash"&&d.prev.type!=="bos"&&g[0]==="/"){let Ot=g[1]!==void 0?"|$":"";c.output=c.output.slice(0,-(d.output+h.output).length),d.output=`(?:${d.output}`,h.type="globstar",h.output=`${H(e)}${T}|${T}${Ot})`,h.value+=u,c.output+=d.output+h.output,c.globstar=!0,j(u+Z()),_({type:"slash",value:"/",output:""});continue}if(d.type==="bos"&&g[0]==="/"){h.type="globstar",h.value+=u,h.output=`(?:^|${T}|${H(e)}${T})`,c.output=h.output,c.globstar=!0,j(u+Z()),_({type:"slash",value:"/",output:""});continue}c.output=c.output.slice(0,-h.output.length),h.type="globstar",h.output=H(e),h.value+=u,c.output+=h.output,c.globstar=!0,j(u);continue}let B={type:"star",value:u,output:$};if(e.bash===!0){B.output=".*?",(h.type==="bos"||h.type==="slash")&&(B.output=E+B.output),_(B);continue}if(h&&(h.type==="bracket"||h.type==="paren")&&e.regex===!0){B.output=u,_(B);continue}(c.index===c.start||h.type==="slash"||h.type==="dot")&&(h.type==="dot"?(c.output+=W,h.output+=W):e.dot===!0?(c.output+=z,h.output+=z):(c.output+=E,h.output+=E),A()!=="*"&&(c.output+=x,h.output+=x)),_(B)}for(;c.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(Et("closing","]"));c.output=tt.escapeLast(c.output,"["),rt("brackets")}for(;c.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(Et("closing",")"));c.output=tt.escapeLast(c.output,"("),rt("parens")}for(;c.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(Et("closing","}"));c.output=tt.escapeLast(c.output,"{"),rt("braces")}if(e.strictSlashes!==!0&&(h.type==="star"||h.type==="bracket")&&_({type:"maybe_slash",value:"",output:`${T}?`}),c.backtrack===!0){c.output="";for(let g of c.tokens)c.output+=g.output!=null?g.output:g.value,g.suffix&&(c.output+=g.suffix)}return c};En.fastpaths=(n,t)=>{let e={...t},s=typeof e.maxLength=="number"?Math.min($t,e.maxLength):$t,i=n.length;if(i>s)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${s}`);n=mn[n]||n;let r=tt.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:l,ONE_CHAR:a,DOTS_SLASH:f,NO_DOT:p,NO_DOTS:m,NO_DOTS_SLASH:w,STAR:T,START_ANCHOR:x}=Pt.globChars(r),R=e.dot?m:p,D=e.dot?w:p,W=e.capture?"":"?:",z={negated:!1,prefix:""},L=e.bash===!0?".*?":T;e.capture&&(L=`(${L})`);let N=E=>E.noglobstar===!0?L:`(${W}(?:(?!${x}${E.dot?f:o}).)*?)`,I=E=>{switch(E){case"*":return`${R}${a}${L}`;case".*":return`${o}${a}${L}`;case"*.*":return`${R}${L}${o}${a}${L}`;case"*/*":return`${R}${L}${l}${a}${D}${L}`;case"**":return R+N(e);case"**/*":return`(?:${R}${N(e)}${l})?${D}${a}${L}`;case"**/*.*":return`(?:${R}${N(e)}${l})?${D}${L}${o}${a}${L}`;case"**/.*":return`(?:${R}${N(e)}${l})?${o}${a}${L}`;default:{let S=/^(.*?)\.(\w+)$/.exec(E);if(!S)return;let $=I(S[1]);return $?$+o+S[2]:void 0}}},F=tt.removePrefix(n,z),H=I(F);return H&&e.strictSlashes!==!0&&(H+=`${l}?`),H};gn.exports=En});var _n=dt((Zr,wn)=>{"use strict";var ir=Dt(),rr=vn(),Ee=yn(),ye=kt(),or=xt(),ar=n=>n&&typeof n=="object"&&!Array.isArray(n),k=(n,t,e=!1)=>{if(Array.isArray(n)){let p=n.map(w=>k(w,t,e));return w=>{for(let T of p){let x=T(w);if(x)return x}return!1}}let s=ar(n)&&n.tokens&&n.input;if(n===""||typeof n!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},r=ye.isWindows(t),o=s?k.compileRe(n,t):k.makeRe(n,t,!1,!0),l=o.state;delete o.state;let a=()=>!1;if(i.ignore){let p={...t,ignore:null,onMatch:null,onResult:null};a=k(i.ignore,p,e)}let f=(p,m=!1)=>{let{isMatch:w,match:T,output:x}=k.test(p,o,t,{glob:n,posix:r}),R={glob:n,state:l,regex:o,posix:r,input:p,output:x,match:T,isMatch:w};return typeof i.onResult=="function"&&i.onResult(R),w===!1?(R.isMatch=!1,m?R:!1):a(p)?(typeof i.onIgnore=="function"&&i.onIgnore(R),R.isMatch=!1,m?R:!1):(typeof i.onMatch=="function"&&i.onMatch(R),m?R:!0)};return e&&(f.state=l),f};k.test=(n,t,e,{glob:s,posix:i}={})=>{if(typeof n!="string")throw new TypeError("Expected input to be a string");if(n==="")return{isMatch:!1,output:""};let r=e||{},o=r.format||(i?ye.toPosixSlashes:null),l=n===s,a=l&&o?o(n):n;return l===!1&&(a=o?o(n):n,l=a===s),(l===!1||r.capture===!0)&&(r.matchBase===!0||r.basename===!0?l=k.matchBase(n,t,e,i):l=t.exec(a)),{isMatch:Boolean(l),match:l,output:a}};k.matchBase=(n,t,e,s=ye.isWindows(e))=>(t instanceof RegExp?t:k.makeRe(t,e)).test(ir.basename(n));k.isMatch=(n,t,e)=>k(t,e)(n);k.parse=(n,t)=>Array.isArray(n)?n.map(e=>k.parse(e,t)):Ee(n,{...t,fastpaths:!1});k.scan=(n,t)=>rr(n,t);k.compileRe=(n,t,e=!1,s=!1)=>{if(e===!0)return n.output;let i=t||{},r=i.contains?"":"^",o=i.contains?"":"$",l=`${r}(?:${n.output})${o}`;n&&n.negated===!0&&(l=`^(?!${l}).*$`);let a=k.toRegex(l,t);return s===!0&&(a.state=n),a};k.makeRe=(n,t={},e=!1,s=!1)=>{if(!n||typeof n!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(n[0]==="."||n[0]==="*")&&(i.output=Ee.fastpaths(n,t)),i.output||(i=Ee(n,t)),k.compileRe(i,t,e,s)};k.toRegex=(n,t)=>{try{let e=t||{};return new RegExp(n,e.flags||(e.nocase?"i":""))}catch(e){if(t&&t.debug===!0)throw e;return/$^/}};k.constants=or;wn.exports=k});var An=dt((Qr,bn)=>{"use strict";bn.exports=_n()});var Qn=`<div class="container">
  <label class="hidden" id="title">display-port</label>
  <label class="hidden" id="fps">00</label>
  <label class="hidden" id="dimension">0x0</label>
  <div class="content">
    <canvas> Oh no! Your browser does not support canvas. </canvas>
    <slot id="inner"></slot>
  </div>
  <slot name="frame"></slot>
</div>
`,Vn=`:host {
  display: inline-block;
  color: #555555;
}

.container {
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
}

.content {
  position: relative;
  margin: auto;
}

.content > *:not(canvas) {
  width: 100%;
  height: 100%;
}

canvas {
  background: #000000;
  image-rendering: pixelated;
}

label {
  position: absolute;
  font-family: monospace;
  color: currentColor;
}

#inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

#title {
  left: 0.5rem;
  top: 0.5rem;
}

#fps {
  right: 0.5rem;
  top: 0.5rem;
}

#dimension {
  left: 0.5rem;
  bottom: 0.5rem;
}

.hidden {
  display: none;
}

:host([debug]) .container {
  outline: 6px dashed rgba(0, 0, 0, 0.1);
  outline-offset: -4px;
  background-color: rgba(0, 0, 0, 0.1);
}

:host([mode='noscale']) canvas {
  margin: 0;
  top: 0;
  left: 0;
}

:host([mode='stretch']) canvas,
:host([mode='scale']) canvas {
  width: 100%;
  height: 100%;
}

:host([mode='fit']),
:host([mode='scale']),
:host([mode='center']),
:host([mode='stretch']),
:host([mode='fill']) {
  width: 100%;
  height: 100%;
}

:host([full]) {
  width: 100vw !important;
  height: 100vh !important;
}

:host([disabled]) {
  display: none;
}

slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

::slotted(*) {
  pointer-events: auto;
}
`,Be="noscale",qt="fit",Me="scale",He="fill",De="stretch",Jn=300,ts=150,es=qt,ns=200,Ke=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Qn,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=Vn,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("display-port",this)}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(t){this.setAttribute("mode",t)}get debug(){return this._debug}set debug(t){this.toggleAttribute("debug",t)}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get width(){return this._width}set width(t){this.setAttribute("width",String(t))}get height(){return this._height}set height(t){this.setAttribute("height",String(t))}get onframe(){return this._onframe}set onframe(t){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=t,this._onframe&&this.addEventListener("frame",t)}constructor(){super();let t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=t.querySelector("canvas"),this._contentElement=t.querySelector(".content"),this._innerElement=t.querySelector("#inner"),this._titleElement=t.querySelector("#title"),this._fpsElement=t.querySelector("#fps"),this._dimensionElement=t.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=Jn,this._height=ts,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this._frameEvent=new CustomEvent("frame",{composed:!0,bubbles:!1,detail:{now:0,prevTime:0,deltaTime:0,canvas:this._canvasElement}}),this._resizeEvent=new CustomEvent("resize",{composed:!0,bubbles:!1,detail:{width:0,height:0}}),this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){mt(this,"mode"),mt(this,"debug"),mt(this,"disabled"),mt(this,"width"),mt(this,"height"),mt(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",es),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.updateCanvasSize(!0),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(t,e,s){switch(t){case"debug":this._debug=s!==null;break;case"disabled":this._disabled=s!==null;break;case"width":this._width=Number(s);break;case"height":this._height=Number(s);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+s+"}}").bind(this);break}switch(t){case"disabled":s?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",s),this._fpsElement.classList.toggle("hidden",s),this._dimensionElement.classList.toggle("hidden",s);break}}getContext(t="2d",e=void 0){return this._canvasElement.getContext(t,e)}pause(){cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=requestAnimationFrame(this.update)}update(t){this._animationRequestHandle=requestAnimationFrame(this.update),this.updateCanvasSize(!1);let e=t-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=t,this._debug){let r=e<=0?"--":String(Math.round(1e3/e)).padStart(2,"0");if(this._fpsElement.textContent!==r&&(this._fpsElement.textContent=r),this.mode===Be){let l=`${this._width}x${this._height}`;this._dimensionElement.textContent!==l&&(this._dimensionElement.textContent=l)}else{let l=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==l&&(this._dimensionElement.textContent=l)}}let i=this._frameEvent.detail;i.now=t,i.prevTime=this._prevAnimationFrameTime,i.deltaTime=e,this.dispatchEvent(this._frameEvent)}onDelayCanvasResize(){this._resizeTimeoutHandle=0,this.updateCanvasSize(!0)}delayCanvasResize(t,e){(t!==this._resizeCanvasWidth||e!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=t,this._resizeCanvasHeight=e,this._resizeTimeoutHandle&&clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=setTimeout(this.onDelayCanvasResize,ns))}updateCanvasSize(t=!0){let e=this.shadowRoot.host.getBoundingClientRect(),s=e.width,i=e.height,r=this._canvasElement,o=this._width,l=this._height,a=this.mode;if(a===De||a===He)o=s,l=i;else if(a!==Be&&(s<o||i<l||a===qt||a==Me)){let p=s/o,m=i/l;p<m?(o=s,l=l*p):(o=o*m,l=i)}if(o=Math.floor(o),l=Math.floor(l),typeof t=="undefined"&&(t=r.clientWidth!==o||r.clientHeight!==l),!t){this.delayCanvasResize(o,l);return}let f=Math.min(o/this._width,l/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${f}em`,t){a===Me?(r.width=this._width,r.height=this._height):a!==De&&(r.width=o,r.height=l);let p=this._contentElement.style;p.width=`${o}px`,p.height=`${l}px`,(a===qt||a===He)&&(this._width=o,this._height=l);let w=this._resizeEvent.detail;w.width=o,w.height=l,this.dispatchEvent(this._resizeEvent)}}};Ke.define();function mt(n,t){if(Object.prototype.hasOwnProperty.call(n,t)){let e=n[t];delete n[t],n[t]=e}}var Xt=class{get polling(){return performance.now()-this._lastPollingTime<1e3}get value(){return 0}get size(){return this._size}constructor(t){this._size=t,this._lastPollingTime=Number.MIN_SAFE_INTEGER}resize(t){this._size=t}getState(t){throw new Error("Missing implementation.")}onUpdate(t,e,s){throw new Error("Missing implementation.")}onStatus(t,e){throw new Error("Missing implementation.")}onPoll(t){this._lastPollingTime=t}onBind(t,e={}){t>=this._size&&this.resize(t+1)}onUnbind(){this.resize(0)}},At=class extends Xt{static createAxisBindingState(){return{value:0,delta:0,inverted:!1}}get delta(){return this._delta}get value(){return this._value}constructor(t=0){super(t);let e=new Array;for(let s=0;s<t;++s)e.push(this.constructor.createAxisBindingState());this._state=e,this._value=0,this._delta=0}resize(t){let e=this._state,s=e.length,i;if(t<=s)i=e.slice(0,t);else{i=e;for(let r=s;r<t;++r)i.push(this.constructor.createAxisBindingState())}this._state=i,super.resize(t)}getState(t){return this._state[t].value}onPoll(t){let e=this._state,s=0,i=0,r=e.length;for(let o=0;o<r;++o){let l=e[o];s+=l.value*(l.inverted?-1:1),i+=l.delta,e[o].delta=0}this._value=s,this._delta=i,super.onPoll(t)}onUpdate(t,e,s){typeof e=="undefined"?this.onAxisChange(t,s):this.onAxisMove(t,e,s)}onStatus(t,e){this.onAxisStatus(t,e)}onBind(t,e={}){super.onBind(t,e);let{inverted:s=!1}=e,i=this._state;i[t].inverted=s}onAxisMove(t,e,s){let i=this._state[t];i.value=e,i.delta+=s}onAxisChange(t,e){let s=this._state[t];s.value+=e,s.delta+=e}onAxisStatus(t,e){let s=this._state[t],i=s.value;s.value=e,s.delta=e-i}},ss=241,ke=254,is=239,vt=1,Zt=2,Qt=4,Vt=8,Jt=16,Bt=class extends Xt{get pressed(){return this._pressed}get repeated(){return this._repeated}get released(){return this._released}get down(){return this._down}get value(){return this._value}constructor(t=0){super(t);this._state=new Uint8Array(t),this._value=0,this._down=!1,this._pressed=!1,this._repeated=!1,this._released=!1}resize(t){let e=this._state,s=e.length,i;t<=s?i=e.slice(0,t):(i=new Uint8Array(t),i.set(e)),this._state=i,super.resize(t)}getState(t){let e=this._state[t],s=e&Jt?-1:1;return(e&vt?1:0)*s}onPoll(t){let e=this._state,s=0,i=0,r=0,o=0,l=0,a=e.length;for(let f=0;f<a;++f){let p=e[f],m=p&vt,w=p&Jt;i|=m,r|=p&Zt,o|=p&Qt,l|=p&Vt,s+=(m?1:0)*(w?-1:1),e[f]&=ss}this._value=s,this._down=i!==0,this._pressed=r!==0,this._repeated=o!==0,this._released=l!==0,super.onPoll(t)}onUpdate(t,e,s){s>0?this.onButtonPressed(t):this.onButtonReleased(t)}onStatus(t,e){this.onButtonStatus(t,e!==0)}onBind(t,e={}){super.onBind(t,e);let{inverted:s=!1}=e,i=this._state;s?i[t]|=Jt:i[t]&=is}onButtonPressed(t){let e=this._state,s=e[t];s&vt||(s|=Zt,s|=vt),s|=Qt,e[t]=s}onButtonReleased(t){let e=this._state,s=e[t];s&vt&&(s|=Vt,s&=ke),e[t]=s}onButtonStatus(t,e){let s=this._state,i=s[t],r=Boolean(i&vt);e?i|=vt:i&=ke,r&&!e&&(i|=Vt),!r&&e&&(i|=Zt,i|=Qt),s[t]=i}},v=class{static parse(t){t=t.trim();let e=t.indexOf(".");if(e<0)throw new Error("Missing device separator for key code.");let s=t.substring(0,e);if(s.length<0)throw new Error("Missing device for key code.");let i=t.substring(e+1);if(i.length<0)throw new Error("Missing code for key code.");return new v(s,i)}constructor(t,e){this.device=t,this.code=e}toString(){return`${this.device}.${this.code}`}};function te(n,t){return new v(n,t)}function rs(n){return"device"in n&&"code"in n}var y="Keyboard",nt="Mouse",os=new v(y,"KeyA"),as=new v(y,"KeyB"),ls=new v(y,"KeyC"),us=new v(y,"KeyD"),hs=new v(y,"KeyE"),cs=new v(y,"KeyF"),fs=new v(y,"KeyG"),ps=new v(y,"KeyH"),ds=new v(y,"KeyI"),vs=new v(y,"KeyJ"),gs=new v(y,"KeyK"),ms=new v(y,"KeyL"),Es=new v(y,"KeyM"),ys=new v(y,"KeyN"),ws=new v(y,"KeyO"),_s=new v(y,"KeyP"),bs=new v(y,"KeyQ"),As=new v(y,"KeyR"),xs=new v(y,"KeyS"),Ss=new v(y,"KeyT"),Cs=new v(y,"KeyU"),Rs=new v(y,"KeyV"),Ts=new v(y,"KeyW"),Ls=new v(y,"KeyX"),Os=new v(y,"KeyY"),Is=new v(y,"KeyZ"),Bs=new v(y,"Digit0"),Ms=new v(y,"Digit1"),Hs=new v(y,"Digit2"),Ds=new v(y,"Digit3"),Ks=new v(y,"Digit4"),ks=new v(y,"Digit5"),Ps=new v(y,"Digit6"),$s=new v(y,"Digit7"),Us=new v(y,"Digit8"),Ns=new v(y,"Digit9"),zs=new v(y,"Minus"),Fs=new v(y,"Equal"),Ys=new v(y,"BracketLeft"),Gs=new v(y,"BracketRight"),Ws=new v(y,"Semicolon"),js=new v(y,"Quote"),qs=new v(y,"Backquote"),Xs=new v(y,"Backslash"),Zs=new v(y,"Comma"),Qs=new v(y,"Period"),Vs=new v(y,"Slash"),Js=new v(y,"Escape"),ti=new v(y,"Space"),ei=new v(y,"CapsLock"),ni=new v(y,"Backspace"),si=new v(y,"Delete"),ii=new v(y,"Tab"),ri=new v(y,"Enter"),oi=new v(y,"ArrowUp"),ai=new v(y,"ArrowDown"),li=new v(y,"ArrowLeft"),ui=new v(y,"ArrowRight"),hi=new v(nt,"Button0"),ci=new v(nt,"Button1"),fi=new v(nt,"Button2"),pi=new v(nt,"Button3"),di=new v(nt,"Button4"),vi=new v(nt,"PosX"),gi=new v(nt,"PosY"),mi=new v(nt,"WheelX"),Ei=new v(nt,"WheelY"),yi=new v(nt,"WheelZ"),P=Object.freeze({__proto__:null,from:te,isKeyCode:rs,KEYBOARD:y,MOUSE:nt,KEY_A:os,KEY_B:as,KEY_C:ls,KEY_D:us,KEY_E:hs,KEY_F:cs,KEY_G:fs,KEY_H:ps,KEY_I:ds,KEY_J:vs,KEY_K:gs,KEY_L:ms,KEY_M:Es,KEY_N:ys,KEY_O:ws,KEY_P:_s,KEY_Q:bs,KEY_R:As,KEY_S:xs,KEY_T:Ss,KEY_U:Cs,KEY_V:Rs,KEY_W:Ts,KEY_X:Ls,KEY_Y:Os,KEY_Z:Is,DIGIT_0:Bs,DIGIT_1:Ms,DIGIT_2:Hs,DIGIT_3:Ds,DIGIT_4:Ks,DIGIT_5:ks,DIGIT_6:Ps,DIGIT_7:$s,DIGIT_8:Us,DIGIT_9:Ns,MINUS:zs,EQUAL:Fs,BRACKET_LEFT:Ys,BRACKET_RIGHT:Gs,SEMICOLON:Ws,QUOTE:js,BACKQUOTE:qs,BACKSLASH:Xs,COMMA:Zs,PERIOD:Qs,SLASH:Vs,ESCAPE:Js,SPACE:ti,CAPS_LOCK:ei,BACKSPACE:ni,DELETE:si,TAB:ii,ENTER:ri,ARROW_UP:oi,ARROW_DOWN:ai,ARROW_LEFT:li,ARROW_RIGHT:ui,MOUSE_BUTTON_0:hi,MOUSE_BUTTON_1:ci,MOUSE_BUTTON_2:fi,MOUSE_BUTTON_3:pi,MOUSE_BUTTON_4:di,MOUSE_POS_X:vi,MOUSE_POS_Y:gi,MOUSE_WHEEL_X:mi,MOUSE_WHEEL_Y:Ei,MOUSE_WHEEL_Z:yi}),ee=class{get polling(){return this.ref?this.ref.polling:!1}get value(){return!this.ref||this.disabled?0:this.ref.value}constructor(t){this.name=t,this.ref=null,this.disabled=!1}register(t){throw new Error("Unsupported operation.")}disable(t=!0){return this.disabled=t,this}getState(t){return!this.ref||this.disabled?0:this.ref.getState(t)}};function Pe(n){Array.isArray(n)||(n=[n]);let t=[];for(let e of n){let s;try{s=v.parse(e)}catch(i){let r=wi(e).toUpperCase();if(!(r in P))throw new Error("Invalid key code string - "+i);s=P[r]}t.push(s)}return t}function wi(n){return n.replace(/([a-z]|(?:[A-Z0-9]+))([A-Z0-9]|$)/g,function(t,e,s){return e+(s&&"_"+s)}).toLowerCase()}var gt=class extends ee{static fromBind(t,e,s,i=void 0){return new gt(t,te(e,s),i)}static fromString(t,...e){let s=Pe(e);return new gt(t,s)}get delta(){return!this.ref||this.disabled?0:this.ref.delta}constructor(t,e,s=void 0){super(t);this.keyCodes=Array.isArray(e)?e:[e],this.opts=s}register(t){let e=this.name,s=this.opts;for(let i of this.keyCodes)t.bindAxis(e,i.device,i.code,s);return this.ref=t.getAxis(e),this}},Q=class extends ee{static fromBind(t,e,s,i=void 0){return new Q(t,te(e,s),i)}static fromString(t,...e){let s=Pe(e);return new Q(t,s)}get pressed(){return!this.ref||this.disabled?!1:this.ref.pressed}get repeated(){return!this.ref||this.disabled?!1:this.ref.repeated}get released(){return!this.ref||this.disabled?!1:this.ref.released}get down(){return!this.ref||this.disabled?!1:this.ref.down}constructor(t,e,s=void 0){super(t);this.keyCodes=Array.isArray(e)?e:[e],this.opts=s}register(t){let e=this.name,s=this.opts;for(let i of this.keyCodes)t.bindButton(e,i.device,i.code,s);return this.ref=t.getButton(e),this}};var ne=class{static isAxis(t){return!1}static isButton(t){return!1}constructor(t,e){if(!e)throw new Error(`Missing event target for device ${t}.`);this.name=t,this.eventTarget=e,this.listeners={input:[]}}setEventTarget(t){if(!t)throw new Error(`Missing event target for device ${this.name}.`);this.eventTarget=t}destroy(){let t=this.listeners;for(let e in t)t[e].length=0}addEventListener(t,e){let s=this.listeners;t in s?s[t].push(e):s[t]=[e]}removeEventListener(t,e){let s=this.listeners;if(t in s){let i=s[t],r=i.indexOf(e);r>=0&&i.splice(r,1)}}dispatchInputEvent(t){let e=0;for(let s of this.listeners.input)e|=s(t);return Boolean(e)}},$e=class extends ne{static isAxis(t){return!1}static isButton(t){return!0}constructor(t,e,s={}){super(t,e);let{ignoreRepeat:i=!0}=s;this.ignoreRepeat=i,this._eventObject={target:e,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let t=this.eventTarget;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(t){if(t.repeat&&this.ignoreRepeat)return t.preventDefault(),t.stopPropagation(),!1;let e=this._eventObject;if(e.code=t.code,e.event="pressed",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e))return t.preventDefault(),t.stopPropagation(),!1}onKeyUp(t){let e=this._eventObject;if(e.code=t.code,e.event="released",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e))return t.preventDefault(),t.stopPropagation(),!1}},se=10,ie=100,Ue=class extends ne{static isAxis(t){return t==="PosX"||t==="PosY"||t==="WheelX"||t==="WheelY"||t==="WheelZ"}static isButton(t){return!this.isAxis(t)}constructor(t,e,s={}){super(t,e);let{eventsOnFocus:i=!0}=s;this.eventsOnFocus=i,this.canvasTarget=this.getCanvasFromEventTarget(e),this._downHasFocus=!1,this._eventObject={target:e,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:e,device:t,code:"",event:"move",value:0,movement:0},this._wheelObject={target:e,device:t,code:"",event:"wheel",movement:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("contextmenu",this.onContextMenu),e.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),this.canvasTarget=this.getCanvasFromEventTarget(t),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let t=this.eventTarget;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("contextmenu",this.onContextMenu),t.removeEventListener("wheel",this.onWheel),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(t=!0){t?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(t){this._downHasFocus=!0;let e=this._eventObject;if(e.code="Button"+t.button,e.event="pressed",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e)&&document.activeElement===this.eventTarget)return t.preventDefault(),t.stopPropagation(),!1}onContextMenu(t){return t.preventDefault(),t.stopPropagation(),!1}onWheel(t){let e,s,i;switch(t.deltaMode){case WheelEvent.DOM_DELTA_LINE:e=t.deltaX*se,s=t.deltaY*se,i=t.deltaZ*se;break;case WheelEvent.DOM_DELTA_PAGE:e=t.deltaX*ie,s=t.deltaY*ie,i=t.deltaZ*ie;break;case WheelEvent.DOM_DELTA_PIXEL:default:e=t.deltaX,s=t.deltaY,i=t.deltaZ;break}let r=0,o=this._wheelObject;if(o.code="WheelX",o.movement=e,r|=this.dispatchInputEvent(o),o.code="WheelY",o.movement=s,r|=this.dispatchInputEvent(o),o.code="WheelZ",o.movement=i,r|=this.dispatchInputEvent(o),r)return t.preventDefault(),t.stopPropagation(),!1}onMouseUp(t){if(!this._downHasFocus)return;this._downHasFocus=!1;let e=this._eventObject;if(e.code="Button"+t.button,e.event="released",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e))return t.preventDefault(),t.stopPropagation(),!1}onMouseMove(t){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;let e=this.canvasTarget,{clientWidth:s,clientHeight:i}=e,r=e.getBoundingClientRect(),o=t.movementX/s,l=t.movementY/i,a=(t.clientX-r.left)/s,f=(t.clientY-r.top)/i,p=this._positionObject;p.code="PosX",p.value=a,p.movement=o,this.dispatchInputEvent(p),p.code="PosY",p.value=f,p.movement=l,this.dispatchInputEvent(p)}getCanvasFromEventTarget(t){return t instanceof HTMLCanvasElement?t:t.canvas||t.querySelector("canvas")||t.shadowRoot&&t.shadowRoot.querySelector("canvas")||t}},_i=`<kbd>
  <span id="name"><slot></slot></span>
  <span id="value" class="hidden"></span>
</kbd>
`,bi=`kbd {
  position: relative;
  display: inline-block;
  border-radius: 3px;
  border: 1px solid #888888;
  font-size: 0.85em;
  font-weight: 700;
  text-rendering: optimizeLegibility;
  line-height: 12px;
  height: 14px;
  padding: 2px 4px;
  color: #444444;
  background-color: #eeeeee;
  box-shadow: inset 0 -3px 0 #aaaaaa;
  overflow: hidden;
}

kbd:empty::after {
  content: '<?>';
  opacity: 0.6;
}

.disabled {
  opacity: 0.6;
  box-shadow: none;
  background-color: #aaaaaa;
}

.hidden {
  display: none;
}

#value {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  font-size: 0.85em;
  padding: 0 4px;
  padding-top: 2px;
  color: #cccccc;
  background-color: #333333;
  box-shadow: inset 0 3px 0 #222222;
}
`,re=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=_i,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=bi,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-code",this)}static get observedAttributes(){return["name","value","disabled"]}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get value(){return this._value}set value(t){this.setAttribute("value",t)}get name(){return this._name}set name(t){this.setAttribute("name",t)}constructor(){super();this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._name="",this._value="",this._disabled=!1,this._kbdElement=this.shadowRoot.querySelector("kbd"),this._nameElement=this.shadowRoot.querySelector("#name"),this._valueElement=this.shadowRoot.querySelector("#value")}attributeChangedCallback(t,e,s){switch(t){case"name":this._name=s,this._nameElement.textContent=s;break;case"value":this._value=s,s!==null?(this._valueElement.classList.toggle("hidden",!1),this._valueElement.textContent=s,this._kbdElement.style.paddingRight=`${this._valueElement.clientWidth+4}px`):this._valueElement.classList.toggle("hidden",!0);break;case"disabled":this._disabled=s!==null,this._kbdElement.classList.toggle("disabled",s!==null);break}}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"name")){let t=this.name;delete this.name,this.name=t}if(Object.prototype.hasOwnProperty.call(this,"value")){let t=this.value;delete this.value,this.value=t}if(Object.prototype.hasOwnProperty.call(this,"disabled")){let t=this.disabled;delete this.disabled,this.disabled=t}}};re.define();var Ai=`<table>
  <thead>
    <tr class="tableHeader">
      <th colspan="3">
        <span class="tableTitle">
          <label id="title"> input-source </label>
          <span id="slotContainer">
            <slot></slot>
          </span>
          <p>
            <label for="poll">poll</label>
            <output id="poll"></output>
          </p>
          <p>
            <label for="focus">focus</label>
            <output id="focus"></output>
          </p>
        </span>
      </th>
    </tr>
    <tr class="colHeader">
      <th>name</th>
      <th>value</th>
      <th>key</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
`,xi=`:host {
  display: block;
}

table {
  border-collapse: collapse;
  font-family: monospace;
}

table,
th,
td {
  border: 1px solid #666666;
}

th,
td {
  padding: 5px 10px;
}

td {
  text-align: center;
}

thead th {
  padding: 0;
}

.colHeader > th {
  font-size: 0.8em;
  padding: 0 10px;
  letter-spacing: 3px;
  background-color: #aaaaaa;
  color: #666666;
}

tbody output {
  border-radius: 0.3em;
  padding: 3px;
}

tr:not(.primary) .name,
tr:not(.primary) .value {
  opacity: 0.3;
}

tr:nth-child(2n) {
  background-color: #eeeeee;
}

.tableHeader {
  color: #666666;
}

.tableTitle {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px;
}

#slotContainer {
  flex: 1;
}

p {
  display: inline;
  margin: 0;
  padding: 0;
  padding-right: 10px;
}

#poll:empty::after,
#focus:empty::after {
  content: '\u2717';
  color: #ff0000;
}
`,Ne=class{constructor(t){this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null,this.pollable=t}get running(){return this.animationFrameHandle!==null}start(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}stop(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=null}onAnimationFrame(t){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.pollable.onPoll(t)}},ze=class{constructor(t){this.onInput=this.onInput.bind(this),this.onPoll=this.onPoll.bind(this),this.bindings=t}onPoll(t){for(let e of this.bindings.getInputs())e.onPoll(t)}onInput(t){let{device:e,code:s,event:i,value:r,movement:o,control:l,shift:a,alt:f}=t,p=this.bindings.getBindings(e,s);switch(i){case"pressed":for(let{input:m,index:w}of p)m.onUpdate(w,1,1);break;case"released":for(let{input:m,index:w}of p)m.onUpdate(w,0,-1);break;case"move":for(let{input:m,index:w}of p)m.onUpdate(w,r,o);break;case"wheel":for(let{input:m,index:w}of p)m.onUpdate(w,void 0,o);break}return p.length>0}},oe=class{constructor(t,e,s,i){this.device=t,this.code=e,this.input=s,this.index=i}},Fe=class{constructor(){this.bindingMap={},this.inputMap=new Map}clear(){for(let t of this.inputMap.keys())t.onUnbind();this.inputMap.clear(),this.bindingMap={}}bind(t,e,s,i={inverted:!1}){let r,o=this.inputMap;if(o.has(t)){let a=o.get(t),f=t.size;t.onBind(f,i),r=new oe(e,s,t,f),a.push(r)}else{let a=[];o.set(t,a);let f=0;t.onBind(f,i),r=new oe(e,s,t,f),a.push(r)}let l=this.bindingMap;e in l?s in l[e]?l[e][s].push(r):l[e][s]=[r]:l[e]={[s]:[r]}}unbind(t){let e=this.inputMap;if(e.has(t)){let s=this.bindingMap,i=e.get(t);for(let r of i){let{device:o,code:l}=r,a=s[o][l],f=a.indexOf(r);a.splice(f,1)}i.length=0,t.onUnbind(),e.delete(t)}}isBound(t){return this.inputMap.has(t)}getInputs(){return this.inputMap.keys()}getBindingsByInput(t){return this.inputMap.get(t)}getBindings(t,e){let s=this.bindingMap;if(t in s){let i=s[t];if(e in i)return i[e]}return[]}},Ye=class{constructor(t,e={}){this.inputs={},this.devices=[new Ue("Mouse",t),new $e("Keyboard",t)],this.bindings=new Fe,this.adapter=new ze(this.bindings),this.autopoller=new Ne(this.adapter),this.eventTarget=t,this.anyButton=new Bt(1),this.anyButtonDevice="",this.anyButtonCode="",this.anyAxis=new At(1),this.anyAxisDevice="",this.anyAxisCode="",this.listeners={bind:[],unbind:[],focus:[],blur:[]},this.onInput=this.onInput.bind(this),this.onEventTargetBlur=this.onEventTargetBlur.bind(this),this.onEventTargetFocus=this.onEventTargetFocus.bind(this),t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur);for(let s of this.devices)s.addEventListener("input",this.onInput)}get autopoll(){return this.autopoller.running}set autopoll(t){this.toggleAutoPoll(t)}destroy(){let t=this.listeners;for(let s in t)t[s].length=0;this.autopoller.running&&this.autopoller.stop();for(let s of this.devices)s.removeEventListener("input",this.onInput),s.destroy();let e=this.eventTarget;e.removeEventListener("focus",this.onEventTargetFocus),e.removeEventListener("blur",this.onEventTargetBlur)}setEventTarget(t){let e=this.eventTarget;e.removeEventListener("focus",this.onEventTargetFocus),e.removeEventListener("blur",this.onEventTargetBlur),this.eventTarget=t;for(let s of this.devices)s.setEventTarget(t);t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur)}toggleAutoPoll(t=void 0){let e=this.autopoller.running,s=typeof t=="undefined"?!e:Boolean(t);s!==e&&(s?this.autopoller.start():this.autopoller.stop())}addEventListener(t,e){let s=this.listeners;t in s?s[t].push(e):s[t]=[e]}removeEventListener(t,e){let s=this.listeners;if(t in s){let i=s[t],r=i.indexOf(e);r>=0&&i.splice(r,1)}}dispatchEvent(t){let{type:e}=t,s=0;for(let i of this.listeners[e])s|=i(t)?1:0;return Boolean(s)}poll(t=performance.now()){if(this.autopoller.running)throw new Error("Should not manually poll() while autopolling.");this.onPoll(t)}onInput(t){let e=this.adapter.onInput(t);switch(t.event){case"pressed":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,1,1);break;case"released":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,0,-1);break;case"move":case"wheel":this.anyAxisDevice=t.device,this.anyAxisCode=t.code,this.anyAxis.onUpdate(0,t.value,t.movement);break}return e}onPoll(t){this.adapter.onPoll(t),this.anyButton.onPoll(t),this.anyAxis.onPoll(t)}onBind(){this.dispatchEvent({type:"bind"})}onUnbind(){this.dispatchEvent({type:"unbind"})}onEventTargetFocus(){this.dispatchEvent({type:"focus"})}onEventTargetBlur(){for(let t of this.bindings.getInputs())t.onStatus(0,0);this.anyButton.onStatus(0,0),this.anyAxis.onStatus(0,0),this.dispatchEvent({type:"blur"})}bindBindings(t){for(let e of t)e.register(this)}bindButton(t,e,s,i=void 0){let r;this.hasButton(t)?r=this.getButton(t):(r=new Bt(1),this.inputs[t]=r),this.bindings.bind(r,e,s,i),this.onBind()}bindAxis(t,e,s,i=void 0){let r;this.hasAxis(t)?r=this.getAxis(t):(r=new At(1),this.inputs[t]=r),this.bindings.bind(r,e,s,i),this.onBind()}bindAxisButtons(t,e,s,i){let r;this.hasAxis(t)?r=this.getAxis(t):(r=new At(2),this.inputs[t]=r),this.bindings.bind(r,e,i),this.bindings.bind(r,e,s,{inverted:!0}),this.onBind()}unbindButton(t){if(this.hasButton(t)){let e=this.getButton(t);delete this.inputs[t],this.bindings.unbind(e),this.onUnbind()}}unbindAxis(t){if(this.hasAxis(t)){let e=this.getAxis(t);delete this.inputs[t],this.bindings.unbind(e),this.onUnbind()}}getInput(t){return this.inputs[t]}getButton(t){return this.inputs[t]}getAxis(t){return this.inputs[t]}hasButton(t){return t in this.inputs&&this.inputs[t]instanceof Bt}hasAxis(t){return t in this.inputs&&this.inputs[t]instanceof At}isButtonDown(t){return this.inputs[t].down}isButtonPressed(t){return this.inputs[t].pressed}isButtonReleased(t){return this.inputs[t].released}getInputValue(t){return this.inputs[t].value}getButtonValue(t){return this.inputs[t].value}getAxisValue(t){return this.inputs[t].value}getAxisDelta(t){return this.inputs[t].delta}isAnyButtonDown(t=void 0){if(typeof t=="undefined")return this.anyButton.down;{let e=this.inputs;for(let s of t)if(e[s].down)return!0}return!1}isAnyButtonPressed(t=void 0){if(typeof t=="undefined")return this.anyButton.pressed;{let e=this.inputs;for(let s of t)if(e[s].pressed)return!0}return!1}isAnyButtonReleased(t=void 0){if(typeof t=="undefined")return this.anyButton.released;{let e=this.inputs;for(let s of t)if(e[s].released)return!0}return!1}getAnyAxisValue(t=void 0){if(typeof t=="undefined")return this.anyAxis.value;{let e=this.inputs;for(let s of t){let i=e[s];if(i.value)return i.value}}return 0}getAnyAxisDelta(t=void 0){if(typeof t=="undefined")return this.anyAxis.delta;{let e=this.inputs;for(let s of t){let i=e[s];if(i.delta)return i.delta}}return 0}getLastButtonDevice(){return this.anyButtonDevice}getLastButtonCode(){return this.anyButtonCode}getLastAxisDevice(){return this.anyAxisDevice}getLastAxisCode(){return this.anyAxisCode}getMouse(){return this.devices[0]}getKeyboard(){return this.devices[1]}},Ge=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Ai,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=xi,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-port",this)}static get observedAttributes(){return["autopoll","for"]}get autopoll(){return this._autopoll}set autopoll(t){this.toggleAttribute("autopoll",t)}get for(){return this._for}set for(t){this.setAttribute("for",t)}constructor(){super();let t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._titleElement=t.querySelector("#title"),this._pollElement=t.querySelector("#poll"),this._focusElement=t.querySelector("#focus"),this._bodyElement=t.querySelector("tbody"),this._outputElements={},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null;let e=this;this._for="",this._eventTarget=e,this._autopoll=!1,this._context=null,this.onInputContextBind=this.onInputContextBind.bind(this),this.onInputContextUnbind=this.onInputContextUnbind.bind(this),this.onInputContextFocus=this.onInputContextFocus.bind(this),this.onInputContextBlur=this.onInputContextBlur.bind(this)}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"for")){let t=this.for;delete this.for,this.for=t}if(Object.prototype.hasOwnProperty.call(this,"autopoll")){let t=this.autopoll;delete this.autopoll,this.autopoll=t}this.updateTable(),this.updateTableValues(),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){let t=this._context;t&&(t.removeEventListener("bind",this.onInputContextBind),t.removeEventListener("unbind",this.onInputContextUnbind),t.removeEventListener("blur",this.onInputContextBlur),t.removeEventListener("focus",this.onInputContextFocus),t.destroy(),this._context=null)}attributeChangedCallback(t,e,s){switch(t){case"for":{this._for=s;let i,r;s?(i=document.getElementById(s),r=`${i.tagName.toLowerCase()}#${s}`):(i=this,r="input-port"),this._eventTarget=i,this._context&&this._context.setEventTarget(this._eventTarget),this._titleElement.innerHTML=`for ${r}`}break;case"autopoll":this._autopoll=s!==null,this._context&&this._context.toggleAutoPoll(this._autopoll);break}}onAnimationFrame(){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.updateTableValues(),this.updatePollStatus()}onInputContextBind(){return this.updateTable(),!0}onInputContextUnbind(){return this.updateTable(),!0}onInputContextFocus(){return this._focusElement.innerHTML="\u2713",!0}onInputContextBlur(){return this._focusElement.innerHTML="",!0}getContext(t="axisbutton",e=void 0){switch(t){case"axisbutton":if(!this._context){let s=new Ye(this._eventTarget,e);s.addEventListener("bind",this.onInputContextBind),s.addEventListener("unbind",this.onInputContextUnbind),s.addEventListener("blur",this.onInputContextBlur),s.addEventListener("focus",this.onInputContextFocus),this._autopoll&&s.toggleAutoPoll(!0),this._context=s}return this._context;default:throw new Error(`Input context id '${t}' is not supported.`)}}updateTable(){if(this.isConnected)if(this._context){let t=this._context,e=t.inputs,s=t.bindings,i={},r=[];for(let o of Object.keys(e)){let l=e[o],a=!0;for(let f of s.getBindingsByInput(l)){let p=Si(`${l.constructor.name}.${o}`,`${f.device}.${f.code}`,0,a);r.push(p),a&&(i[o]=p.querySelector("output"),a=!1)}}this._outputElements=i,this._bodyElement.innerHTML="";for(let o of r)this._bodyElement.appendChild(o)}else{this._outputElements={},this._bodyElement.innerHTML="";return}else return}updateTableValues(){if(this.isConnected)if(this._context){let e=this._context.inputs;for(let s of Object.keys(this._outputElements)){let i=this._outputElements[s],r=e[s].value;i.innerText=Number(r).toFixed(2)}}else{for(let t of Object.keys(this._outputElements)){let e=this._outputElements[t];e.innerText="---"}return}else return}updatePollStatus(){if(this.isConnected)if(this._context){let e=this._context.inputs;for(let s of Object.values(e))if(!s.polling){this._pollElement.innerHTML="";return}this._pollElement.innerHTML="\u2713"}else{this._pollElement.innerHTML="-";return}else return}};Ge.define();function Si(n,t,e,s=!0){let i=document.createElement("tr");s&&i.classList.add("primary");{let r=document.createElement("td");r.textContent=n,r.classList.add("name"),i.appendChild(r)}{let r=document.createElement("td"),o=document.createElement("output");s?o.innerText=Number(e).toFixed(2):o.innerText="---",o.classList.add("value"),r.appendChild(o),i.appendChild(r)}{let r=document.createElement("td");r.classList.add("key");let o=new re;o.innerText=t,r.appendChild(o),i.appendChild(r)}return i}var Fr=Symbol("keyboardSource");var Yr=Symbol("mouseSource");var Ar=Zn(An());var xn={},lr=function(n,t,e,s,i){var r=new Worker(xn[t]||(xn[t]=URL.createObjectURL(new Blob([n],{type:"text/javascript"}))));return r.onerror=function(o){return i(o.error,null)},r.onmessage=function(o){return i(null,o.data)},r.postMessage(e,s),r},q=Uint8Array,at=Uint16Array,Ct=Uint32Array,we=new q([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_e=new q([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sn=new q([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cn=function(n,t){for(var e=new at(31),s=0;s<31;++s)e[s]=t+=1<<n[s-1];for(var i=new Ct(e[30]),s=1;s<30;++s)for(var r=e[s];r<e[s+1];++r)i[r]=r-e[s]<<5|s;return[e,i]},Rn=Cn(we,2),be=Rn[0],ur=Rn[1];be[28]=258,ur[258]=28;var Tn=Cn(_e,0),Ln=Tn[0],Jr=Tn[1],Ut=new at(32768);for(var M=0;M<32768;++M)ht=(M&43690)>>>1|(M&21845)<<1,ht=(ht&52428)>>>2|(ht&13107)<<2,ht=(ht&61680)>>>4|(ht&3855)<<4,Ut[M]=((ht&65280)>>>8|(ht&255)<<8)>>>1;var ht,yt=function(n,t,e){for(var s=n.length,i=0,r=new at(t);i<s;++i)++r[n[i]-1];var o=new at(t);for(i=0;i<t;++i)o[i]=o[i-1]+r[i-1]<<1;var l;if(e){l=new at(1<<t);var a=15-t;for(i=0;i<s;++i)if(n[i])for(var f=i<<4|n[i],p=t-n[i],m=o[n[i]-1]++<<p,w=m|(1<<p)-1;m<=w;++m)l[Ut[m]>>>a]=f}else for(l=new at(s),i=0;i<s;++i)n[i]&&(l[i]=Ut[o[n[i]-1]++]>>>15-n[i]);return l},Rt=new q(288);for(var M=0;M<144;++M)Rt[M]=8;for(var M=144;M<256;++M)Rt[M]=9;for(var M=256;M<280;++M)Rt[M]=7;for(var M=280;M<288;++M)Rt[M]=8;var On=new q(32);for(var M=0;M<32;++M)On[M]=5;var In=yt(Rt,9,1);var Bn=yt(On,5,1),Nt=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},et=function(n,t,e){var s=t/8|0;return(n[s]|n[s+1]<<8)>>(t&7)&e},zt=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},Mn=function(n){return(n/8|0)+(n&7&&1)},Ft=function(n,t,e){(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length);var s=new(n instanceof at?at:n instanceof Ct?Ct:q)(e-t);return s.set(n.subarray(t,e)),s},Hn=function(n,t,e){var s=n.length;if(!s||e&&!e.l&&s<5)return t||new q(0);var i=!t||e,r=!e||e.i;e||(e={}),t||(t=new q(s*3));var o=function(_){var pt=t.length;if(_>pt){var Lt=new q(Math.max(pt*2,_));Lt.set(t),t=Lt}},l=e.f||0,a=e.p||0,f=e.b||0,p=e.l,m=e.d,w=e.m,T=e.n,x=s*8;do{if(!p){e.f=l=et(n,a,1);var R=et(n,a+1,3);if(a+=3,R)if(R==1)p=In,m=Bn,w=9,T=5;else if(R==2){var L=et(n,a,31)+257,N=et(n,a+10,15)+4,I=L+et(n,a+5,31)+1;a+=14;for(var F=new q(I),H=new q(19),E=0;E<N;++E)H[Sn[E]]=et(n,a+E*3,7);a+=N*3;for(var S=Nt(H),$=(1<<S)-1,c=yt(H,S,1),E=0;E<I;){var O=c[et(n,a,$)];a+=O&15;var D=O>>>4;if(D<16)F[E++]=D;else{var C=0,J=0;for(D==16?(J=3+et(n,a,3),a+=2,C=F[E-1]):D==17?(J=3+et(n,a,7),a+=3):D==18&&(J=11+et(n,a,127),a+=7);J--;)F[E++]=C}}var h=F.subarray(0,L),u=F.subarray(L);w=Nt(h),T=Nt(u),p=yt(h,w,1),m=yt(u,T,1)}else throw"invalid block type";else{var D=Mn(a)+4,W=n[D-4]|n[D-3]<<8,z=D+W;if(z>s){if(r)throw"unexpected EOF";break}i&&o(f+W),t.set(n.subarray(D,z),f),e.b=f+=W,e.p=a=z*8;continue}if(a>x){if(r)throw"unexpected EOF";break}}i&&o(f+131072);for(var Y=(1<<w)-1,A=(1<<T)-1,Z=a;;Z=a){var C=p[zt(n,a)&Y],G=C>>>4;if(a+=C&15,a>x){if(r)throw"unexpected EOF";break}if(!C)throw"invalid length/literal";if(G<256)t[f++]=G;else if(G==256){Z=a,p=null;break}else{var j=G-254;if(G>264){var E=G-257,it=we[E];j=et(n,a,(1<<it)-1)+be[E],a+=it}var bt=m[zt(n,a)&A],ct=bt>>>4;if(!bt)throw"invalid distance";a+=bt&15;var u=Ln[ct];if(ct>3){var it=_e[ct];u+=zt(n,a)&(1<<it)-1,a+=it}if(a>x){if(r)throw"unexpected EOF";break}i&&o(f+131072);for(var rt=f+j;f<rt;f+=4)t[f]=t[f-u],t[f+1]=t[f+1-u],t[f+2]=t[f+2-u],t[f+3]=t[f+3-u];f=rt}}e.l=p,e.p=Z,e.b=f,p&&(l=1,e.m=w,e.d=m,e.n=T)}while(!l);return f==t.length?t:Ft(t,0,f)};var hr=new q(0);var cr=function(n,t){var e={};for(var s in n)e[s]=n[s];for(var s in t)e[s]=t[s];return e},Dn=function(n,t,e){for(var s=n(),i=n.toString(),r=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<s.length;++o){var l=s[o],a=r[o];if(typeof l=="function"){t+=";"+a+"=";var f=l.toString();if(l.prototype)if(f.indexOf("[native code]")!=-1){var p=f.indexOf(" ",8)+1;t+=f.slice(p,f.indexOf("(",p))}else{t+=f;for(var m in l.prototype)t+=";"+a+".prototype."+m+"="+l.prototype[m].toString()}else t+=f}else e[a]=l}return[t,e]},Yt=[],fr=function(n){var t=[];for(var e in n)(n[e]instanceof q||n[e]instanceof at||n[e]instanceof Ct)&&t.push((n[e]=new n[e].constructor(n[e])).buffer);return t},pr=function(n,t,e,s){var i;if(!Yt[e]){for(var r="",o={},l=n.length-1,a=0;a<l;++a)i=Dn(n[a],r,o),r=i[0],o=i[1];Yt[e]=Dn(n[l],r,o)}var f=cr({},Yt[e][1]);return lr(Yt[e][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",e,f,fr(f),s)},dr=function(){return[q,at,Ct,we,_e,Sn,be,Ln,In,Bn,Ut,yt,Nt,et,zt,Mn,Ft,Hn,Ae,Kn,kn]};var Kn=function(n){return postMessage(n,[n.buffer])},kn=function(n){return n&&n.size&&new q(n.size)},vr=function(n,t,e,s,i,r){var o=pr(e,s,i,function(l,a){o.terminate(),r(l,a)});return o.postMessage([n,t],t.consume?[n.buffer]:[]),function(){o.terminate()}};var lt=function(n,t){return n[t]|n[t+1]<<8},st=function(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24)>>>0},xe=function(n,t){return st(n,t)+st(n,t+4)*4294967296};function gr(n,t,e){if(e||(e=t,t={}),typeof e!="function")throw"no callback";return vr(n,t,[dr],function(s){return Kn(Ae(s.data[0],kn(s.data[1])))},1,e)}function Ae(n,t){return Hn(n,t)}var to=typeof TextEncoder!="undefined"&&new TextEncoder,Se=typeof TextDecoder!="undefined"&&new TextDecoder,mr=0;try{Se.decode(hr,{stream:!0}),mr=1}catch(n){}var Er=function(n){for(var t="",e=0;;){var s=n[e++],i=(s>127)+(s>223)+(s>239);if(e+i>n.length)return[t,Ft(n,e-1)];i?i==3?(s=((s&15)<<18|(n[e++]&63)<<12|(n[e++]&63)<<6|n[e++]&63)-65536,t+=String.fromCharCode(55296|s>>10,56320|s&1023)):i&1?t+=String.fromCharCode((s&31)<<6|n[e++]&63):t+=String.fromCharCode((s&15)<<12|(n[e++]&63)<<6|n[e++]&63):t+=String.fromCharCode(s)}};function yr(n,t){if(t){for(var e="",s=0;s<n.length;s+=16384)e+=String.fromCharCode.apply(null,n.subarray(s,s+16384));return e}else{if(Se)return Se.decode(n);var i=Er(n),r=i[0],o=i[1];if(o.length)throw"invalid utf-8 data";return r}}var wr=function(n,t){return t+30+lt(n,t+26)+lt(n,t+28)},br=function(n,t,e){var s=lt(n,t+28),i=yr(n.subarray(t+46,t+46+s),!(lt(n,t+8)&2048)),r=t+46+s,o=st(n,t+20),l=e&&o==4294967295?_r(n,r):[o,st(n,t+24),st(n,t+42)],a=l[0],f=l[1],p=l[2];return[lt(n,t+10),a,f,i,r+lt(n,t+30)+lt(n,t+32),p]},_r=function(n,t){for(;lt(n,t)!=1;t+=4+lt(n,t+2));return[xe(n,t+12),xe(n,t+4),xe(n,t+20)]};function Ce(n,t){if(typeof t!="function")throw"no callback";for(var e=[],s=function(){for(var w=0;w<e.length;++w)e[w]()},i={},r=n.length-22;st(n,r)!=101010256;--r)if(!r||n.length-r>65558){t("invalid zip file",null);return}var o=lt(n,r+8);o||t(null,{});var l=o,a=st(n,r+16),f=a==4294967295;if(f){if(r=st(n,r-12),st(n,r)!=101075792){t("invalid zip file",null);return}l=o=st(n,r+32),a=st(n,r+48)}for(var p=function(w){var T=br(n,a,f),x=T[0],R=T[1],D=T[2],W=T[3],z=T[4],L=T[5],N=wr(n,L);a=z;var I=function(H,E){H?(s(),t(H,null)):(i[W]=E,--o||t(null,i))};if(!x)I(null,Ft(n,N,N+R));else if(x==8){var F=n.subarray(N,N+R);if(R<32e4)try{I(null,Ae(F,new q(D)))}catch(H){I(H,null)}else e.push(gr(F,{size:D},I))}else I("unknown compression type "+x,null)},m=0;m<l;++m)p(m);return s}var xr=/^([_\w\d]+)\:\/\//,Pn=5e3;async function Sr(n,t,e,s,i=Pn){let{cache:r,loadings:o}=n;if(t in r)return r[t];let l;if(t in o){if(l=o[t],l.active)return o[t].promise}else l=new Re(i),o[t]=l;let a=[l.promise];return xr.test(e)?a.push($n(n,e,i).then(f=>s(f)).then(f=>wt(n,t,f))):a.push(fetch(e).then(f=>f.arrayBuffer()).then(f=>s(f)).then(f=>wt(n,t,f))),await Promise.race(a)}function wt(n,t,e){let{cache:s,loadings:i}=n;return s[t]=e,t in i&&(i[t].resolve(e),delete i[t]),e}function Cr(n,t){let{cache:e,loadings:s}=n;t in s&&(s[t].reject(new Error("Stop loading to delete asset.")),delete s[t]),t in e&&delete e[t]}async function $n(n,t,e=Pn){let{cache:s,loadings:i}=n;if(t in s)return s[t];if(t in i)return i[t].promise;{let r=new Re(e);return i[t]=r,r.promise}}function Rr(n,t){let{defaults:e}=n;for(let s of e)if(s.glob.test(t))return Te(n,s.uri);return null}function Te(n,t){return n.cache[t]}function Tr(n){return Object.keys(n.cache)}var Re=class{constructor(t){this.active=!1,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(t)&&t>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)},t):null,this._promise=new Promise((e,s)=>{this._value?e(this._value):this._resolve=e,this._reason?s(this._reason):this._reject=s})}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}},Le=class{constructor(t,e,s){this.uri=t,this.source=e,this.loader=s,this.store=null}get current(){return Te(this.store,this.uri)}set current(t){wt(this.store,this.uri,t)}get default(){return Rr(this.store,this.uri)}get loaded(){return $n(this.store,this.uri)}async preload(t,e=void 0,s=void 0){return this.store=t,typeof s!="undefined"?wt(t,this.uri,s):await Sr(this.store,this.uri,this.source,this.loader,e),this}async unload(){return Cr(this.store,this.uri),this.store=null,this}},Lr=5e3,Tt={cache:{},loadings:{},defaults:[]};async function Or(n,t=void 0){let e="raw://",i=await(await fetch(n)).arrayBuffer();await new Promise((r,o)=>{Ce(new Uint8Array(i),(l,a)=>{if(l)o(l);else{for(let[f,p]of Object.entries(a)){f=f.replaceAll("\\","/");let m=f.indexOf("/");m>=0&&(f=f.substring(m+1));let w=e+f;wt(Tt,w,p),t&&t(p,w,f)}r()}})})}async function Ir(n,t){let s=await(await fetch(n)).arrayBuffer();await new Promise((i,r)=>{Ce(new Uint8Array(s),(o,l)=>{if(o)r(o);else{for(let[a,f]of Object.entries(l))a=a.replaceAll("\\","/"),t(f,a);i()}})})}async function Br(n,t=Lr){let e=[];for(let s of n)e.push(s.preload(Tt,t));await Promise.allSettled(e)}function Mr(n,t){return wt(Tt,n,t)}function Hr(){return Tr(Tt)}function Dr(n){return Te(Tt,n)}var Gt=Object.freeze({__proto__:null,loadAssetPackAsRaw:Or,loadAssetPack:Ir,loadAssetRefs:Br,cache:Mr,keys:Hr,current:Dr});window.addEventListener("error",Wt,!0);window.addEventListener("unhandledrejection",Wt,!0);function Wt(n){typeof n=="object"?n instanceof PromiseRejectionEvent?Wt(n.reason):n instanceof ErrorEvent?Wt(n.error):n instanceof Error?window.alert(n.stack):window.alert(JSON.stringify(n)):window.alert(n)}var Un={CursorX:new gt("cursorX",[P.MOUSE_POS_X]),CursorY:new gt("cursorY",[P.MOUSE_POS_Y]),CursorMain:new Q("cursorMain",P.MOUSE_BUTTON_0),CursorAlt:new Q("cursorAlt",P.MOUSE_BUTTON_2),MoveLeft:new Q("moveLeft",[P.KEY_A,P.ARROW_LEFT]),MoveRight:new Q("moveRight",[P.KEY_D,P.ARROW_RIGHT]),MoveUp:new Q("moveUp",[P.KEY_W,P.ARROW_UP]),MoveDown:new Q("moveDown",[P.KEY_S,P.ARROW_DOWN]),MainAction:new Q("mainAction",[P.KEY_Z,P.KEY_Q]),AltAction:new Q("altAction",[P.KEY_X,P.KEY_E]),Evade:new Q("evade",[P.SPACE])};async function Oe(n,t=void 0){if(typeof n=="string"){let l=await(await fetch(n)).arrayBuffer();if(typeof t=="undefined"){let a=n.lastIndexOf(".");if(a<0)throw new Error("Cannot load from url - unknown image type.");t="image/"+n.slice(a+1)}return Oe(l,t)}else if(!(n instanceof ArrayBuffer||ArrayBuffer.isView(n)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let e=n;typeof t=="undefined"&&(t="image/png");let s=new Blob([e],{type:t}),i=URL.createObjectURL(s),r=new Image;return new Promise((o,l)=>{r.addEventListener("load",()=>{o(r)}),r.addEventListener("error",a=>{l(a)}),r.src=i})}var Nn={ImageToast:new Le("toast","res/toast.png",Oe)};var _t={};Ie(_t,{connectInputs:()=>Kr,preloadAssetPack:()=>kr,preloadAssets:()=>Pr});async function Kr(n,t="input-port"){let s=document.querySelector(t).getContext("axisbutton");return s.bindBindings(Object.values(n)),s}async function kr(){await Gt.loadAssetPack("res.pack",(n,t)=>Gt.cache(t,n))}async function Pr(n,t="asset-port"){await Gt.loadAssetRefs(Object.values(n))}async function $r(){await _t.connectInputs(Un),await _t.preloadAssetPack(),await _t.preloadAssets(Nn)}window.addEventListener("DOMContentLoaded",$r);})();
//# sourceMappingURL=main.js.map
