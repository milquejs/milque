(()=>{var bi=Object.create,je=Object.defineProperty;var Ai=Object.getOwnPropertyDescriptor;var Si=Object.getOwnPropertyNames;var Ri=Object.getPrototypeOf,Ti=Object.prototype.hasOwnProperty;var Ci=e=>je(e,"__esModule",{value:!0});var Ii=(e,t)=>()=>(e&&(t=e(e=0)),t),Ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ge=(e,t)=>{for(var n in t)je(e,n,{get:t[n],enumerable:!0})},Li=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Si(t))!Ti.call(e,r)&&r!=="default"&&je(e,r,{get:()=>t[r],enumerable:!(n=Ai(t,r))||n.enumerable});return e},Oi=e=>Li(Ci(je(e!=null?bi(Ri(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Ln={};Ge(Ln,{basename:()=>Cn,default:()=>qi,delimiter:()=>Rn,dirname:()=>Tn,extname:()=>In,isAbsolute:()=>It,join:()=>bn,normalize:()=>Ct,relative:()=>An,resolve:()=>Ze,sep:()=>Sn});function _n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];i==="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function Ze(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=_n(Lt(e.split("/"),function(i){return!!i}),!t).join("/"),(t?"/":"")+e||"."}function Ct(e){var t=It(e),n=Wi(e,-1)==="/";return e=_n(Lt(e.split("/"),function(r){return!!r}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function It(e){return e.charAt(0)==="/"}function bn(){var e=Array.prototype.slice.call(arguments,0);return Ct(Lt(e,function(t,n){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function An(e,t){e=Ze(e).substr(1),t=Ze(t).substr(1);function n(h){for(var c=0;c<h.length&&h[c]==="";c++);for(var f=h.length-1;f>=0&&h[f]==="";f--);return c>f?[]:h.slice(c,f-c+1)}for(var r=n(e.split("/")),i=n(t.split("/")),s=Math.min(r.length,i.length),a=s,o=0;o<s;o++)if(r[o]!==i[o]){a=o;break}for(var l=[],o=a;o<r.length;o++)l.push("..");return l=l.concat(i.slice(a)),l.join("/")}function Tn(e){var t=Tt(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)}function Cn(e,t){var n=Tt(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function In(e){return Tt(e)[3]}function Lt(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var Gi,Tt,Sn,Rn,qi,Wi,On=Ii(()=>{Gi=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Tt=function(e){return Gi.exec(e).slice(1)};Sn="/",Rn=":";qi={extname:In,basename:Cn,dirname:Tn,sep:Sn,delimiter:Rn,relative:An,join:bn,isAbsolute:It,normalize:Ct,resolve:Ze};Wi="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}});var Je=Ee((Bh,Qe)=>{var _e=(On(),Ln);if(_e&&_e.default){Qe.exports=_e.default;for(let e in _e)Qe.exports[e]=_e[e]}else _e&&(Qe.exports=_e)});var De=Ee((zh,zn)=>{"use strict";var Xi=Je(),he="\\\\/",Nn=`[^${he}]`,ue="\\.",Vi="\\+",Zi="\\?",et="\\/",Qi="(?=.)",Pn="[^/]",Ot=`(?:${et}|$)`,Dn=`(?:^|${et})`,Nt=`${ue}{1,2}${Ot}`,Ji=`(?!${ue})`,es=`(?!${Dn}${Nt})`,ts=`(?!${ue}{0,1}${Ot})`,ns=`(?!${Nt})`,rs=`[^.${et}]`,is=`${Pn}*?`,Bn={DOT_LITERAL:ue,PLUS_LITERAL:Vi,QMARK_LITERAL:Zi,SLASH_LITERAL:et,ONE_CHAR:Qi,QMARK:Pn,END_ANCHOR:Ot,DOTS_SLASH:Nt,NO_DOT:Ji,NO_DOTS:es,NO_DOT_SLASH:ts,NO_DOTS_SLASH:ns,QMARK_NO_DOT:rs,STAR:is,START_ANCHOR:Dn},ss={...Bn,SLASH_LITERAL:`[${he}]`,QMARK:Nn,STAR:`${Nn}*?`,DOTS_SLASH:`${ue}{1,2}(?:[${he}]|$)`,NO_DOT:`(?!${ue})`,NO_DOTS:`(?!(?:^|[${he}])${ue}{1,2}(?:[${he}]|$))`,NO_DOT_SLASH:`(?!${ue}{0,1}(?:[${he}]|$))`,NO_DOTS_SLASH:`(?!${ue}{1,2}(?:[${he}]|$))`,QMARK_NO_DOT:`[^.${he}]`,START_ANCHOR:`(?:^|[${he}])`,END_ANCHOR:`(?:[${he}]|$)`},as={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};zn.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:as,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Xi.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?ss:Bn}}});var tt=Ee(ee=>{"use strict";var os=Je(),ls=!1,{REGEX_BACKSLASH:hs,REGEX_REMOVE_BACKSLASH:cs,REGEX_SPECIAL_CHARS:fs,REGEX_SPECIAL_CHARS_GLOBAL:us}=De();ee.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);ee.hasRegexChars=e=>fs.test(e);ee.isRegexChar=e=>e.length===1&&ee.hasRegexChars(e);ee.escapeRegex=e=>e.replace(us,"\\$1");ee.toPosixSlashes=e=>e.replace(hs,"/");ee.removeBackslashes=e=>e.replace(cs,t=>t==="\\"?"":t);ee.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};ee.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:ls===!0||os.sep==="\\";ee.escapeLast=(e,t,n)=>{let r=e.lastIndexOf(t,n);return r===-1?e:e[r-1]==="\\"?ee.escapeLast(e,t,r-1):`${e.slice(0,r)}\\${e.slice(r)}`};ee.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n};ee.wrapOutput=(e,t={},n={})=>{let r=n.contains?"":"^",i=n.contains?"":"$",s=`${r}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var jn=Ee((kh,Yn)=>{"use strict";var Hn=tt(),{CHAR_ASTERISK:Pt,CHAR_AT:ps,CHAR_BACKWARD_SLASH:Be,CHAR_COMMA:ds,CHAR_DOT:Dt,CHAR_EXCLAMATION_MARK:Bt,CHAR_FORWARD_SLASH:kn,CHAR_LEFT_CURLY_BRACE:zt,CHAR_LEFT_PARENTHESES:Ht,CHAR_LEFT_SQUARE_BRACKET:vs,CHAR_PLUS:gs,CHAR_QUESTION_MARK:$n,CHAR_RIGHT_CURLY_BRACE:ms,CHAR_RIGHT_PARENTHESES:Kn,CHAR_RIGHT_SQUARE_BRACKET:xs}=De(),Un=e=>e===kn||e===Be,Fn=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?Infinity:1)},ys=(e,t)=>{let n=t||{},r=e.length-1,i=n.parts===!0||n.scanToEnd===!0,s=[],a=[],o=[],l=e,h=-1,c=0,f=0,u=!1,d=!1,y=!1,v=!1,p=!1,w=!1,L=!1,M=!1,R=!1,A=!1,T=0,B,E,C={value:"",depth:0,isGlob:!1},D=()=>h>=r,g=()=>l.charCodeAt(h+1),O=()=>(B=E,l.charCodeAt(++h));for(;h<r;){E=O();let F;if(E===Be){L=C.backslashes=!0,E=O(),E===zt&&(w=!0);continue}if(w===!0||E===zt){for(T++;D()!==!0&&(E=O());){if(E===Be){L=C.backslashes=!0,O();continue}if(E===zt){T++;continue}if(w!==!0&&E===Dt&&(E=O())===Dt){if(u=C.isBrace=!0,y=C.isGlob=!0,A=!0,i===!0)continue;break}if(w!==!0&&E===ds){if(u=C.isBrace=!0,y=C.isGlob=!0,A=!0,i===!0)continue;break}if(E===ms&&(T--,T===0)){w=!1,u=C.isBrace=!0,A=!0;break}}if(i===!0)continue;break}if(E===kn){if(s.push(h),a.push(C),C={value:"",depth:0,isGlob:!1},A===!0)continue;if(B===Dt&&h===c+1){c+=2;continue}f=h+1;continue}if(n.noext!==!0&&(E===gs||E===ps||E===Pt||E===$n||E===Bt)===!0&&g()===Ht){if(y=C.isGlob=!0,v=C.isExtglob=!0,A=!0,E===Bt&&h===c&&(R=!0),i===!0){for(;D()!==!0&&(E=O());){if(E===Be){L=C.backslashes=!0,E=O();continue}if(E===Kn){y=C.isGlob=!0,A=!0;break}}continue}break}if(E===Pt){if(B===Pt&&(p=C.isGlobstar=!0),y=C.isGlob=!0,A=!0,i===!0)continue;break}if(E===$n){if(y=C.isGlob=!0,A=!0,i===!0)continue;break}if(E===vs){for(;D()!==!0&&(F=O());){if(F===Be){L=C.backslashes=!0,O();continue}if(F===xs){d=C.isBracket=!0,y=C.isGlob=!0,A=!0;break}}if(i===!0)continue;break}if(n.nonegate!==!0&&E===Bt&&h===c){M=C.negated=!0,c++;continue}if(n.noparen!==!0&&E===Ht){if(y=C.isGlob=!0,i===!0){for(;D()!==!0&&(E=O());){if(E===Ht){L=C.backslashes=!0,E=O();continue}if(E===Kn){A=!0;break}}continue}break}if(y===!0){if(A=!0,i===!0)continue;break}}n.noext===!0&&(v=!1,y=!1);let N=l,P="",m="";c>0&&(P=l.slice(0,c),l=l.slice(c),f-=c),N&&y===!0&&f>0?(N=l.slice(0,f),m=l.slice(f)):y===!0?(N="",m=l):N=l,N&&N!==""&&N!=="/"&&N!==l&&Un(N.charCodeAt(N.length-1))&&(N=N.slice(0,-1)),n.unescape===!0&&(m&&(m=Hn.removeBackslashes(m)),N&&L===!0&&(N=Hn.removeBackslashes(N)));let x={prefix:P,input:e,start:c,base:N,glob:m,isBrace:u,isBracket:d,isGlob:y,isExtglob:v,isGlobstar:p,negated:M,negatedExtglob:R};if(n.tokens===!0&&(x.maxDepth=0,Un(E)||a.push(C),x.tokens=a),n.parts===!0||n.tokens===!0){let F;for(let k=0;k<s.length;k++){let X=F?F+1:c,V=s[k],Z=e.slice(X,V);n.tokens&&(k===0&&c!==0?(a[k].isPrefix=!0,a[k].value=P):a[k].value=Z,Fn(a[k]),x.maxDepth+=a[k].depth),(k!==0||Z!=="")&&o.push(Z),F=V}if(F&&F+1<e.length){let k=e.slice(F+1);o.push(k),n.tokens&&(a[a.length-1].value=k,Fn(a[a.length-1]),x.maxDepth+=a[a.length-1].depth)}x.slashes=s,x.parts=o}return x};Yn.exports=ys});var Wn=Ee(($h,qn)=>{"use strict";var nt=De(),ne=tt(),{MAX_LENGTH:rt,POSIX_REGEX_SOURCE:ws,REGEX_NON_SPECIAL_CHARS:Es,REGEX_SPECIAL_CHARS_BACKREF:Ms,REPLACEMENTS:Gn}=nt,_s=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let n=`[${e.join("-")}]`;try{new RegExp(n)}catch(r){return e.map(i=>ne.escapeRegex(i)).join("..")}return n},Re=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,kt=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=Gn[e]||e;let n={...t},r=typeof n.maxLength=="number"?Math.min(rt,n.maxLength):rt,i=e.length;if(i>r)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${r}`);let s={type:"bos",value:"",output:n.prepend||""},a=[s],o=n.capture?"":"?:",l=ne.isWindows(t),h=nt.globChars(l),c=nt.extglobChars(h),{DOT_LITERAL:f,PLUS_LITERAL:u,SLASH_LITERAL:d,ONE_CHAR:y,DOTS_SLASH:v,NO_DOT:p,NO_DOT_SLASH:w,NO_DOTS_SLASH:L,QMARK:M,QMARK_NO_DOT:R,STAR:A,START_ANCHOR:T}=h,B=S=>`(${o}(?:(?!${T}${S.dot?v:f}).)*?)`,E=n.dot?"":p,C=n.dot?M:R,D=n.bash===!0?B(n):A;n.capture&&(D=`(${D})`),typeof n.noext=="boolean"&&(n.noextglob=n.noext);let g={input:e,index:-1,start:0,dot:n.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=ne.removePrefix(e,g),i=e.length;let O=[],N=[],P=[],m=s,x,F=()=>g.index===i-1,k=g.peek=(S=1)=>e[g.index+S],X=g.advance=()=>e[++g.index]||"",V=()=>e.slice(g.index+1),Z=(S="",K=0)=>{g.consumed+=S,g.index+=K},ae=S=>{g.output+=S.output!=null?S.output:S.value,Z(S.value)},Le=()=>{let S=1;for(;k()==="!"&&(k(2)!=="("||k(3)==="?");)X(),g.start++,S++;return S%2==0?!1:(g.negated=!0,g.start++,!0)},ve=S=>{g[S]++,P.push(S)},oe=S=>{g[S]--,P.pop()},z=S=>{if(m.type==="globstar"){let K=g.braces>0&&(S.type==="comma"||S.type==="brace"),_=S.extglob===!0||O.length&&(S.type==="pipe"||S.type==="paren");S.type!=="slash"&&S.type!=="paren"&&!K&&!_&&(g.output=g.output.slice(0,-m.output.length),m.type="star",m.value="*",m.output=D,g.output+=m.output)}if(O.length&&S.type!=="paren"&&(O[O.length-1].inner+=S.value),(S.value||S.output)&&ae(S),m&&m.type==="text"&&S.type==="text"){m.value+=S.value,m.output=(m.output||"")+S.value;return}S.prev=m,a.push(S),m=S},we=(S,K)=>{let _={...c[K],conditions:1,inner:""};_.prev=m,_.parens=g.parens,_.output=g.output;let H=(n.capture?"(":"")+_.open;ve("parens"),z({type:S,value:K,output:g.output?"":y}),z({type:"paren",extglob:!0,value:X(),output:H}),O.push(_)},Fe=S=>{let K=S.close+(n.capture?")":""),_;if(S.type==="negate"){let H=D;if(S.inner&&S.inner.length>1&&S.inner.includes("/")&&(H=B(n)),(H!==D||F()||/^\)+$/.test(V()))&&(K=S.close=`)$))${H}`),S.inner.includes("*")&&(_=V())&&/^\.[^\\/.]+$/.test(_)){let Y=kt(_,{...t,fastpaths:!1}).output;K=S.close=`)${Y})${H})`}S.prev.type==="bos"&&(g.negatedExtglob=!0)}z({type:"paren",extglob:!0,value:x,output:K}),oe("parens")};if(n.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let S=!1,K=e.replace(Ms,(_,H,Y,Q,q,gt)=>Q==="\\"?(S=!0,_):Q==="?"?H?H+Q+(q?M.repeat(q.length):""):gt===0?C+(q?M.repeat(q.length):""):M.repeat(Y.length):Q==="."?f.repeat(Y.length):Q==="*"?H?H+Q+(q?D:""):D:H?_:`\\${_}`);return S===!0&&(n.unescape===!0?K=K.replace(/\\/g,""):K=K.replace(/\\+/g,_=>_.length%2==0?"\\\\":_?"\\":"")),K===e&&n.contains===!0?(g.output=e,g):(g.output=ne.wrapOutput(K,g,t),g)}for(;!F();){if(x=X(),x==="\0")continue;if(x==="\\"){let _=k();if(_==="/"&&n.bash!==!0||_==="."||_===";")continue;if(!_){x+="\\",z({type:"text",value:x});continue}let H=/^\\+/.exec(V()),Y=0;if(H&&H[0].length>2&&(Y=H[0].length,g.index+=Y,Y%2!=0&&(x+="\\")),n.unescape===!0?x=X():x+=X(),g.brackets===0){z({type:"text",value:x});continue}}if(g.brackets>0&&(x!=="]"||m.value==="["||m.value==="[^")){if(n.posix!==!1&&x===":"){let _=m.value.slice(1);if(_.includes("[")&&(m.posix=!0,_.includes(":"))){let H=m.value.lastIndexOf("["),Y=m.value.slice(0,H),Q=m.value.slice(H+2),q=ws[Q];if(q){m.value=Y+q,g.backtrack=!0,X(),!s.output&&a.indexOf(m)===1&&(s.output=y);continue}}}(x==="["&&k()!==":"||x==="-"&&k()==="]")&&(x=`\\${x}`),x==="]"&&(m.value==="["||m.value==="[^")&&(x=`\\${x}`),n.posix===!0&&x==="!"&&m.value==="["&&(x="^"),m.value+=x,ae({value:x});continue}if(g.quotes===1&&x!=='"'){x=ne.escapeRegex(x),m.value+=x,ae({value:x});continue}if(x==='"'){g.quotes=g.quotes===1?0:1,n.keepQuotes===!0&&z({type:"text",value:x});continue}if(x==="("){ve("parens"),z({type:"paren",value:x});continue}if(x===")"){if(g.parens===0&&n.strictBrackets===!0)throw new SyntaxError(Re("opening","("));let _=O[O.length-1];if(_&&g.parens===_.parens+1){Fe(O.pop());continue}z({type:"paren",value:x,output:g.parens?")":"\\)"}),oe("parens");continue}if(x==="["){if(n.nobracket===!0||!V().includes("]")){if(n.nobracket!==!0&&n.strictBrackets===!0)throw new SyntaxError(Re("closing","]"));x=`\\${x}`}else ve("brackets");z({type:"bracket",value:x});continue}if(x==="]"){if(n.nobracket===!0||m&&m.type==="bracket"&&m.value.length===1){z({type:"text",value:x,output:`\\${x}`});continue}if(g.brackets===0){if(n.strictBrackets===!0)throw new SyntaxError(Re("opening","["));z({type:"text",value:x,output:`\\${x}`});continue}oe("brackets");let _=m.value.slice(1);if(m.posix!==!0&&_[0]==="^"&&!_.includes("/")&&(x=`/${x}`),m.value+=x,ae({value:x}),n.literalBrackets===!1||ne.hasRegexChars(_))continue;let H=ne.escapeRegex(m.value);if(g.output=g.output.slice(0,-m.value.length),n.literalBrackets===!0){g.output+=H,m.value=H;continue}m.value=`(${o}${H}|${m.value})`,g.output+=m.value;continue}if(x==="{"&&n.nobrace!==!0){ve("braces");let _={type:"brace",value:x,output:"(",outputIndex:g.output.length,tokensIndex:g.tokens.length};N.push(_),z(_);continue}if(x==="}"){let _=N[N.length-1];if(n.nobrace===!0||!_){z({type:"text",value:x,output:x});continue}let H=")";if(_.dots===!0){let Y=a.slice(),Q=[];for(let q=Y.length-1;q>=0&&(a.pop(),Y[q].type!=="brace");q--)Y[q].type!=="dots"&&Q.unshift(Y[q].value);H=_s(Q,n),g.backtrack=!0}if(_.comma!==!0&&_.dots!==!0){let Y=g.output.slice(0,_.outputIndex),Q=g.tokens.slice(_.tokensIndex);_.value=_.output="\\{",x=H="\\}",g.output=Y;for(let q of Q)g.output+=q.output||q.value}z({type:"brace",value:x,output:H}),oe("braces"),N.pop();continue}if(x==="|"){O.length>0&&O[O.length-1].conditions++,z({type:"text",value:x});continue}if(x===","){let _=x,H=N[N.length-1];H&&P[P.length-1]==="braces"&&(H.comma=!0,_="|"),z({type:"comma",value:x,output:_});continue}if(x==="/"){if(m.type==="dot"&&g.index===g.start+1){g.start=g.index+1,g.consumed="",g.output="",a.pop(),m=s;continue}z({type:"slash",value:x,output:d});continue}if(x==="."){if(g.braces>0&&m.type==="dot"){m.value==="."&&(m.output=f);let _=N[N.length-1];m.type="dots",m.output+=x,m.value+=x,_.dots=!0;continue}if(g.braces+g.parens===0&&m.type!=="bos"&&m.type!=="slash"){z({type:"text",value:x,output:f});continue}z({type:"dot",value:x,output:f});continue}if(x==="?"){if(!(m&&m.value==="(")&&n.noextglob!==!0&&k()==="("&&k(2)!=="?"){we("qmark",x);continue}if(m&&m.type==="paren"){let H=k(),Y=x;if(H==="<"&&!ne.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(m.value==="("&&!/[!=<:]/.test(H)||H==="<"&&!/<([!=]|\w+>)/.test(V()))&&(Y=`\\${x}`),z({type:"text",value:x,output:Y});continue}if(n.dot!==!0&&(m.type==="slash"||m.type==="bos")){z({type:"qmark",value:x,output:R});continue}z({type:"qmark",value:x,output:M});continue}if(x==="!"){if(n.noextglob!==!0&&k()==="("&&(k(2)!=="?"||!/[!=<:]/.test(k(3)))){we("negate",x);continue}if(n.nonegate!==!0&&g.index===0){Le();continue}}if(x==="+"){if(n.noextglob!==!0&&k()==="("&&k(2)!=="?"){we("plus",x);continue}if(m&&m.value==="("||n.regex===!1){z({type:"plus",value:x,output:u});continue}if(m&&(m.type==="bracket"||m.type==="paren"||m.type==="brace")||g.parens>0){z({type:"plus",value:x});continue}z({type:"plus",value:u});continue}if(x==="@"){if(n.noextglob!==!0&&k()==="("&&k(2)!=="?"){z({type:"at",extglob:!0,value:x,output:""});continue}z({type:"text",value:x});continue}if(x!=="*"){(x==="$"||x==="^")&&(x=`\\${x}`);let _=Es.exec(V());_&&(x+=_[0],g.index+=_[0].length),z({type:"text",value:x});continue}if(m&&(m.type==="globstar"||m.star===!0)){m.type="star",m.star=!0,m.value+=x,m.output=D,g.backtrack=!0,g.globstar=!0,Z(x);continue}let S=V();if(n.noextglob!==!0&&/^\([^?]/.test(S)){we("star",x);continue}if(m.type==="star"){if(n.noglobstar===!0){Z(x);continue}let _=m.prev,H=_.prev,Y=_.type==="slash"||_.type==="bos",Q=H&&(H.type==="star"||H.type==="globstar");if(n.bash===!0&&(!Y||S[0]&&S[0]!=="/")){z({type:"star",value:x,output:""});continue}let q=g.braces>0&&(_.type==="comma"||_.type==="brace"),gt=O.length&&(_.type==="pipe"||_.type==="paren");if(!Y&&_.type!=="paren"&&!q&&!gt){z({type:"star",value:x,output:""});continue}for(;S.slice(0,3)==="/**";){let Ye=e[g.index+4];if(Ye&&Ye!=="/")break;S=S.slice(3),Z("/**",3)}if(_.type==="bos"&&F()){m.type="globstar",m.value+=x,m.output=B(n),g.output=m.output,g.globstar=!0,Z(x);continue}if(_.type==="slash"&&_.prev.type!=="bos"&&!Q&&F()){g.output=g.output.slice(0,-(_.output+m.output).length),_.output=`(?:${_.output}`,m.type="globstar",m.output=B(n)+(n.strictSlashes?")":"|$)"),m.value+=x,g.globstar=!0,g.output+=_.output+m.output,Z(x);continue}if(_.type==="slash"&&_.prev.type!=="bos"&&S[0]==="/"){let Ye=S[1]!==void 0?"|$":"";g.output=g.output.slice(0,-(_.output+m.output).length),_.output=`(?:${_.output}`,m.type="globstar",m.output=`${B(n)}${d}|${d}${Ye})`,m.value+=x,g.output+=_.output+m.output,g.globstar=!0,Z(x+X()),z({type:"slash",value:"/",output:""});continue}if(_.type==="bos"&&S[0]==="/"){m.type="globstar",m.value+=x,m.output=`(?:^|${d}|${B(n)}${d})`,g.output=m.output,g.globstar=!0,Z(x+X()),z({type:"slash",value:"/",output:""});continue}g.output=g.output.slice(0,-m.output.length),m.type="globstar",m.output=B(n),m.value+=x,g.output+=m.output,g.globstar=!0,Z(x);continue}let K={type:"star",value:x,output:D};if(n.bash===!0){K.output=".*?",(m.type==="bos"||m.type==="slash")&&(K.output=E+K.output),z(K);continue}if(m&&(m.type==="bracket"||m.type==="paren")&&n.regex===!0){K.output=x,z(K);continue}(g.index===g.start||m.type==="slash"||m.type==="dot")&&(m.type==="dot"?(g.output+=w,m.output+=w):n.dot===!0?(g.output+=L,m.output+=L):(g.output+=E,m.output+=E),k()!=="*"&&(g.output+=y,m.output+=y)),z(K)}for(;g.brackets>0;){if(n.strictBrackets===!0)throw new SyntaxError(Re("closing","]"));g.output=ne.escapeLast(g.output,"["),oe("brackets")}for(;g.parens>0;){if(n.strictBrackets===!0)throw new SyntaxError(Re("closing",")"));g.output=ne.escapeLast(g.output,"("),oe("parens")}for(;g.braces>0;){if(n.strictBrackets===!0)throw new SyntaxError(Re("closing","}"));g.output=ne.escapeLast(g.output,"{"),oe("braces")}if(n.strictSlashes!==!0&&(m.type==="star"||m.type==="bracket")&&z({type:"maybe_slash",value:"",output:`${d}?`}),g.backtrack===!0){g.output="";for(let S of g.tokens)g.output+=S.output!=null?S.output:S.value,S.suffix&&(g.output+=S.suffix)}return g};kt.fastpaths=(e,t)=>{let n={...t},r=typeof n.maxLength=="number"?Math.min(rt,n.maxLength):rt,i=e.length;if(i>r)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${r}`);e=Gn[e]||e;let s=ne.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:l,DOTS_SLASH:h,NO_DOT:c,NO_DOTS:f,NO_DOTS_SLASH:u,STAR:d,START_ANCHOR:y}=nt.globChars(s),v=n.dot?f:c,p=n.dot?u:c,w=n.capture?"":"?:",L={negated:!1,prefix:""},M=n.bash===!0?".*?":d;n.capture&&(M=`(${M})`);let R=E=>E.noglobstar===!0?M:`(${w}(?:(?!${y}${E.dot?h:a}).)*?)`,A=E=>{switch(E){case"*":return`${v}${l}${M}`;case".*":return`${a}${l}${M}`;case"*.*":return`${v}${M}${a}${l}${M}`;case"*/*":return`${v}${M}${o}${l}${p}${M}`;case"**":return v+R(n);case"**/*":return`(?:${v}${R(n)}${o})?${p}${l}${M}`;case"**/*.*":return`(?:${v}${R(n)}${o})?${p}${M}${a}${l}${M}`;case"**/.*":return`(?:${v}${R(n)}${o})?${a}${l}${M}`;default:{let C=/^(.*?)\.(\w+)$/.exec(E);if(!C)return;let D=A(C[1]);return D?D+a+C[2]:void 0}}},T=ne.removePrefix(e,L),B=A(T);return B&&n.strictSlashes!==!0&&(B+=`${o}?`),B};qn.exports=kt});var Vn=Ee((Kh,Xn)=>{"use strict";var bs=Je(),As=jn(),$t=Wn(),Kt=tt(),Ss=De(),Rs=e=>e&&typeof e=="object"&&!Array.isArray(e),G=(e,t,n=!1)=>{if(Array.isArray(e)){let c=e.map(u=>G(u,t,n));return u=>{for(let d of c){let y=d(u);if(y)return y}return!1}}let r=Rs(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!r)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=Kt.isWindows(t),a=r?G.compileRe(e,t):G.makeRe(e,t,!1,!0),o=a.state;delete a.state;let l=()=>!1;if(i.ignore){let c={...t,ignore:null,onMatch:null,onResult:null};l=G(i.ignore,c,n)}let h=(c,f=!1)=>{let{isMatch:u,match:d,output:y}=G.test(c,a,t,{glob:e,posix:s}),v={glob:e,state:o,regex:a,posix:s,input:c,output:y,match:d,isMatch:u};return typeof i.onResult=="function"&&i.onResult(v),u===!1?(v.isMatch=!1,f?v:!1):l(c)?(typeof i.onIgnore=="function"&&i.onIgnore(v),v.isMatch=!1,f?v:!1):(typeof i.onMatch=="function"&&i.onMatch(v),f?v:!0)};return n&&(h.state=o),h};G.test=(e,t,n,{glob:r,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=n||{},a=s.format||(i?Kt.toPosixSlashes:null),o=e===r,l=o&&a?a(e):e;return o===!1&&(l=a?a(e):e,o=l===r),(o===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?o=G.matchBase(e,t,n,i):o=t.exec(l)),{isMatch:Boolean(o),match:o,output:l}};G.matchBase=(e,t,n,r=Kt.isWindows(n))=>(t instanceof RegExp?t:G.makeRe(t,n)).test(bs.basename(e));G.isMatch=(e,t,n)=>G(t,n)(e);G.parse=(e,t)=>Array.isArray(e)?e.map(n=>G.parse(n,t)):$t(e,{...t,fastpaths:!1});G.scan=(e,t)=>As(e,t);G.compileRe=(e,t,n=!1,r=!1)=>{if(n===!0)return e.output;let i=t||{},s=i.contains?"":"^",a=i.contains?"":"$",o=`${s}(?:${e.output})${a}`;e&&e.negated===!0&&(o=`^(?!${o}).*$`);let l=G.toRegex(o,t);return r===!0&&(l.state=e),l};G.makeRe=(e,t={},n=!1,r=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=$t.fastpaths(e,t)),i.output||(i=$t(e,t)),G.compileRe(i,t,n,r)};G.toRegex=(e,t)=>{try{let n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(n){if(t&&t.debug===!0)throw n;return/$^/}};G.constants=Ss;Xn.exports=G});var Qn=Ee((Uh,Zn)=>{"use strict";Zn.exports=Vn()});var Ni=`
<div class="container">
  <label class="hidden" id="title">display-port</label>
  <label class="hidden" id="fps">00</label>
  <label class="hidden" id="dimension">0x0</label>
  <div class="content">
    <slot id="inner">
      <canvas>
        Oh no! Your browser does not support canvas.
      </canvas>
    </slot>
    <slot name="overlay"></slot>
  </div>
  <slot name="frame"></slot>
</div>`,Pi=`
:host {
  display: inline-block;
  color: #555555;
}

.container {
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
}

.content {
  position: relative;
  margin: auto;
  overflow: hidden;
}

.content > *:not(canvas) {
  width: 100%;
  height: 100%;
}

canvas {
  background: #000000;
  image-rendering: pixelated;
}

label {
  position: absolute;
  font-family: monospace;
  color: currentColor;
}

#inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

#title {
  left: 0.5rem;
  top: 0.5rem;
}

#fps {
  right: 0.5rem;
  top: 0.5rem;
}

#dimension {
  left: 0.5rem;
  bottom: 0.5rem;
}

.hidden {
  display: none;
}

:host([debug]) .container {
  outline: 6px dashed rgba(0, 0, 0, 0.1);
  outline-offset: -4px;
  background-color: rgba(0, 0, 0, 0.1);
}

:host([mode='noscale']) canvas {
  margin: 0;
  top: 0;
  left: 0;
}

:host([mode='stretch']) canvas,
:host([mode='scale']) canvas {
  width: 100%;
  height: 100%;
}

:host([mode='fit']),
:host([mode='scale']),
:host([mode='center']),
:host([mode='stretch']),
:host([mode='fill']) {
  width: 100%;
  height: 100%;
}

:host([full]) {
  width: 100vw !important;
  height: 100vh !important;
}

:host([disabled]) {
  display: none;
}

slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

::slotted(*) {
  pointer-events: auto;
}`,an="noscale";var mt="fit",on="scale",ln="fill",hn="stretch",cn=300,fn=150,un=mt,Di=200,Oe=class extends HTMLElement{static create(t={}){let{root:n=document.body,id:r=void 0,mode:i=un,width:s=cn,height:a=fn,debug:o=!1}=t||{},l=new Oe;return l.id=r,l.mode=i,l.width=s,l.height=a,l.debug=o,n.appendChild(l),l}static define(t=window.customElements){t.define("display-port",this)}static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Ni,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=Pi,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(t){this.setAttribute("mode",t)}get debug(){return this._debug}set debug(t){this.toggleAttribute("debug",t)}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get width(){return this._width}set width(t){this.setAttribute("width",String(t))}get height(){return this._height}set height(t){this.setAttribute("height",String(t))}get onframe(){return this._onframe}set onframe(t){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=t,this._onframe&&this.addEventListener("frame",t)}constructor(){super();let t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=null,this._contentElement=t.querySelector(".content"),this._innerElement=t.querySelector("#inner"),this._titleElement=t.querySelector("#title"),this._fpsElement=t.querySelector("#fps"),this._dimensionElement=t.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=cn,this._height=fn,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this._frameEvent=new CustomEvent("frame",{composed:!0,bubbles:!1,detail:{now:0,prevTime:0,deltaTime:0,canvas:this._canvasElement}}),this._resizeEvent=new CustomEvent("resize",{composed:!0,bubbles:!1,detail:{width:0,height:0}}),this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this),this.onSlotChange=this.onSlotChange.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){Se(this,"mode"),Se(this,"debug"),Se(this,"disabled"),Se(this,"width"),Se(this,"height"),Se(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode",un),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this._innerElement.addEventListener("slotchange",this.onSlotChange),this._canvasElement=this._innerElement.querySelector("canvas"),this._canvasElement&&(this.updateCanvasSize(!0),this.resume())}disconnectedCallback(){this._innerElement.removeEventListener("slotchange",this.onSlotChange),this.pause()}attributeChangedCallback(t,n,r){switch(t){case"debug":this._debug=r!==null;break;case"disabled":this._disabled=r!==null;break;case"width":this._width=Number(r);break;case"height":this._height=Number(r);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+r+"}}").bind(this);break}switch(t){case"disabled":r?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",r),this._fpsElement.classList.toggle("hidden",r),this._dimensionElement.classList.toggle("hidden",r);break}}onSlotChange(t){let i=t.target.assignedElements({flatten:!0}).find(s=>s instanceof HTMLCanvasElement);if(!i)throw new Error("No valid canvas element found for display.");this._canvasElement=i,this.updateCanvasSize(!0),this.resume()}getContext(t="2d",n=void 0){return this._canvasElement.getContext(t,n)}pause(){window.cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=window.requestAnimationFrame(this.update)}update(t){this._animationRequestHandle=window.requestAnimationFrame(this.update),this.updateCanvasSize(!1);let n=t-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=t,this._debug){let s=n<=0?"--":String(Math.round(1e3/n)).padStart(2,"0");if(this._fpsElement.textContent!==s&&(this._fpsElement.textContent=s),this.mode===an){let o=`${this._width}x${this._height}`;this._dimensionElement.textContent!==o&&(this._dimensionElement.textContent=o)}else{let o=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==o&&(this._dimensionElement.textContent=o)}}let i=this._frameEvent.detail;i.now=t,i.prevTime=this._prevAnimationFrameTime,i.deltaTime=n,this.dispatchEvent(this._frameEvent)}onDelayCanvasResize(){this._resizeTimeoutHandle=null,this.updateCanvasSize(!0)}delayCanvasResize(t,n){(t!==this._resizeCanvasWidth||n!==this._resizeCanvasHeight)&&(this._resizeCanvasWidth=t,this._resizeCanvasHeight=n,this._resizeTimeoutHandle&&window.clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=window.setTimeout(this.onDelayCanvasResize,Di))}updateCanvasSize(t=!0){let n=this.shadowRoot.host.getBoundingClientRect(),r=n.width,i=n.height,s=this._canvasElement,a=this._width,o=this._height,l=this.mode;if(l===hn||l===ln)a=r,o=i;else if(l!==an&&(r<a||i<o||l===mt||l==on)){let c=r/a,f=i/o;c<f?(a=r,o=o*c):(a=a*f,o=i)}if(a=Math.floor(a),o=Math.floor(o),typeof t=="undefined"&&(t=s.clientWidth!==a||s.clientHeight!==o),!t){this.delayCanvasResize(a,o);return}let h=Math.min(a/this._width,o/this._height)*.5;if(this._innerElement.style.fontSize=`font-size: ${h}em`,t){l===on?(s.width=this._width,s.height=this._height):l!==hn&&(s.width=a,s.height=o);let c=this._contentElement.style;c.width=`${a}px`,c.height=`${o}px`,(l===mt||l===ln)&&(this._width=a,this._height=o);let u=this._resizeEvent.detail;u.width=a,u.height=o,this.dispatchEvent(this._resizeEvent)}}};function Se(e,t){if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];delete e[t],e[t]=n}}var Bi=`<div class="container">
  <div class="padding"></div>
  <div class="innerContainer">
    <div class="padding"></div>
    <slot><canvas>Oh no! Your browser does not support canvas.</canvas></slot>
    <div class="padding"></div>
  </div>
  <div class="padding"></div>
</div>`,zi=`
:host {
  display: inline-block;
  flex: 1;
  --width: 300px;
  --height: 150px;
}
:host([scaling="noscale"]) {
  width: var(--width);
  height: var(--height);
}
:host([sizing="viewport"]) {
    position: fixed;
    top: 0;
    left: 0;
}
.container {
  position: relative;
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.innerContainer {
  display: flex;
  flex-direction: column;
}
.padding {
  flex: 1;
}`,pn="scale",Hi="conatiner",dn=300,vn=150,qe=class extends HTMLElement{static create(t={}){let{root:n=document.body,id:r=void 0,scaling:i=pn,sizing:s=Hi,width:a=dn,height:o=vn}=t||{};window.customElements.get("flex-canvas")||window.customElements.define("flex-canvas",qe);let l=new qe;return l.id=r,l.scaling=i,l.sizing=s,l.width=a,l.height=o,n.appendChild(l),l}static define(t=window.customElements){t.define("flex-canvas",this)}static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Bi,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=zi,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static get observedAttributes(){return["sizing","width","height","resize-delay"]}get scaling(){return this.getAttribute("scaling")}set scaling(t){this.setAttribute("scaling",t)}get sizing(){return this._sizing}set sizing(t){this.setAttribute("sizing",String(t))}get resizeDelay(){return this._resizeDelay}set resizeDelay(t){this.setAttribute("resize-delay",String(t))}get width(){return this._width}set width(t){this.setAttribute("width",String(t))}get height(){return this._height}set height(t){this.setAttribute("height",String(t))}get canvas(){return this.canvasElement}constructor(){super();let t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._sizing="none",this._width=dn,this._height=vn,this._resizeDelay=0,this.animationFrameHandle=0,this.resizeTimeoutHandle=0,this.resizeCanvasWidth=0,this.resizeCanvasHeight=0,this.canvasSlotElement=t.querySelector("slot"),this.canvasElement=null,this.onResize=this.onResize.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onSlotChange=this.onSlotChange.bind(this)}connectedCallback(){Ne(this,"scaling"),Ne(this,"sizing"),Ne(this,"width"),Ne(this,"height"),Ne(this,"resize-delay"),this.hasAttribute("scaling")||this.setAttribute("scaling",pn),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.canvasSlotElement.addEventListener("slotchange",this.onSlotChange),this.canvasElement||this.setCanvasElement(this.canvasSlotElement.querySelector("canvas"))}disconnectedCallback(){cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=null,this.canvasSlotElement.removeEventListener("slotchange",this.onSlotChange)}attributeChangedCallback(t,n,r){switch(t){case"sizing":switch(this._sizing=String(r),this._sizing){case"none":this.style.removeProperty("width"),this.style.removeProperty("height");break;case"container":this.style.setProperty("width","100%"),this.style.setProperty("height","100%");break;case"viewport":this.style.setProperty("width","100vw"),this.style.setProperty("height","100vh");break;default:let[i,s]=this._sizing.split(" ");i&&s&&(this.style.setProperty("width",i),this.style.setProperty("height",s));break}break;case"width":this._width=Number(r),this.canvasElement&&(this.canvasElement.width=this._width);break;case"height":this._height=Number(r),this.canvasElement&&(this.canvasElement.height=this._height);break;case"resize-delay":this._resizeDelay=Number(r);break}}onAnimationFrame(t){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),!(this.clientWidth===this.resizeCanvasWidth&&this.clientHeight===this.resizeCanvasHeight)&&(this.resizeCanvasWidth=this.clientWidth,this.resizeCanvasHeight=this.clientHeight,this._resizeDelay>0?this.resizeTimeoutHandle||(this.resizeTimeoutHandle=window.setTimeout(this.onResize,this._resizeDelay)):this.onResize())}onResize(){window.clearTimeout(this.resizeTimeoutHandle),this.resizeTimeoutHandle=null;let t=this.canvasElement;if(!t)return;let n=this.scaling,r=this.getBoundingClientRect(),i=r.width,s=r.height,a=this._width,o=this._height,l=i/a,h=s/o;n==="noscale"&&(this.style.setProperty("--width",`${a}px`),this.style.setProperty("--height",`${o}px`)),n==="scale"&&(l<h?(t.style.setProperty("width",`${Math.floor(i)}px`),t.style.setProperty("height",`${Math.floor(o*l)}px`)):(t.style.setProperty("width",`${Math.floor(a*h)}px`),t.style.setProperty("height",`${Math.floor(s)}px`))),n==="stretch"&&(t.style.setProperty("width",`${Math.floor(i)}px`),t.style.setProperty("height",`${Math.floor(s)}px`)),n==="fit"&&(l<h?(a=Math.floor(i),o=Math.floor(o*l),t.style.setProperty("width",`${a}px`),t.style.setProperty("height",`${o}px`)):(a=Math.floor(a*h),o=Math.floor(s),t.style.setProperty("width",`${a}px`),t.style.setProperty("height",`${o}px`)),t.width!==a&&(t.width=a),t.height!==o&&(t.height=o)),n==="fill"&&(l<h?(a=Math.floor(i),o=Math.floor(s),t.style.setProperty("width",`${a}px`),t.style.setProperty("height",`${o}px`)):(a=Math.floor(i),o=Math.floor(s),t.style.setProperty("width",`${a}px`),t.style.setProperty("height",`${o}px`)),t.width!==a&&(t.width=a),t.height!==o&&(t.height=o))}onSlotChange(t){let i=t.target.assignedElements({flatten:!0}).find(s=>s instanceof HTMLCanvasElement);i&&this.setCanvasElement(i)}setCanvasElement(t){t.width=this._width,t.height=this._height,t.style.imageRendering="pixelated",this.canvasElement=t}getContext(t="2d",n=void 0){return this.canvasElement.getContext(t,n)}};function Ne(e,t){if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];delete e[t],e[t]=n}}var xt=class{get polling(){return performance.now()-this._lastPollingTime<1e3}get value(){return 0}get size(){return this._size}constructor(t){this._size=t,this._lastPollingTime=Number.MIN_SAFE_INTEGER}resize(t){this._size=t}getState(t){throw new Error("Missing implementation.")}onUpdate(t,n,r){throw new Error("Missing implementation.")}onStatus(t,n){throw new Error("Missing implementation.")}onPoll(t){this._lastPollingTime=t}onBind(t,n=void 0){t>=this._size&&this.resize(t+1)}onUnbind(){this.resize(0)}},Pe=class extends xt{static createAxisBindingState(){return{value:0,delta:0,inverted:!1}}get delta(){return this._delta}get value(){return this._value}constructor(t=0){super(t);let n=new Array,r=this.constructor;for(let i=0;i<t;++i)n.push(r.createAxisBindingState());this._state=n,this._value=0,this._delta=0}resize(t){let n=this._state,r=n.length,i;if(t<=r)i=n.slice(0,t);else{i=n;let s=this.constructor;for(let a=r;a<t;++a)i.push(s.createAxisBindingState())}this._state=i,super.resize(t)}getState(t){return this._state[t].value}onPoll(t){let n=this._state,r=0,i=0,s=n.length;for(let a=0;a<s;++a){let o=n[a];r+=o.value*(o.inverted?-1:1),i+=o.delta,n[a].delta=0}this._value=r,this._delta=i,super.onPoll(t)}onUpdate(t,n,r){typeof n=="undefined"?this.onAxisChange(t,r):this.onAxisMove(t,n,r)}onStatus(t,n){this.onAxisStatus(t,n)}onBind(t,n=void 0){super.onBind(t,n);let{inverted:r=!1}=n||{},i=this._state;i[t].inverted=r}onAxisMove(t,n,r){let i=this._state[t];i.value=n,i.delta+=r}onAxisChange(t,n){let r=this._state[t];r.value+=n,r.delta+=n}onAxisStatus(t,n){let r=this._state[t],i=r.value;r.value=n,r.delta=n-i}},ki=241,gn=254,$i=239,Me=1,yt=2,wt=4,Et=8,Mt=16,We=class extends xt{get pressed(){return this._pressed}get repeated(){return this._repeated}get released(){return this._released}get down(){return this._down}get value(){return this._value}constructor(t=0){super(t);this._state=new Uint8Array(t),this._value=0,this._down=!1,this._pressed=!1,this._repeated=!1,this._released=!1}resize(t){let n=this._state,r=n.length,i;t<=r?i=n.slice(0,t):(i=new Uint8Array(t),i.set(n)),this._state=i,super.resize(t)}getState(t){let n=this._state[t],r=n&Mt?-1:1;return(n&Me?1:0)*r}onPoll(t){let n=this._state,r=0,i=0,s=0,a=0,o=0,l=n.length;for(let h=0;h<l;++h){let c=n[h],f=c&Me,u=c&Mt;i|=f,s|=c&yt,a|=c&wt,o|=c&Et,r+=(f?1:0)*(u?-1:1),n[h]&=ki}this._value=r,this._down=i!==0,this._pressed=s!==0,this._repeated=a!==0,this._released=o!==0,super.onPoll(t)}onUpdate(t,n,r){r>0?this.onButtonPressed(t):this.onButtonReleased(t)}onStatus(t,n){this.onButtonStatus(t,n!==0)}onBind(t,n={inverted:!1}){super.onBind(t,n);let{inverted:r=!1}=n,i=this._state;r?i[t]|=Mt:i[t]&=$i}onButtonPressed(t){let n=this._state,r=n[t];r&Me||(r|=yt,r|=Me),r|=wt,n[t]=r}onButtonReleased(t){let n=this._state,r=n[t];r&Me&&(r|=Et,r&=gn),n[t]=r}onButtonStatus(t,n){let r=this._state,i=r[t],s=Boolean(i&Me);n?i|=Me:i&=gn,s&&!n&&(i|=Et),!s&&n&&(i|=yt,i|=wt),r[t]=i}},b=class{static parse(t){t=t.trim();let n=t.indexOf(".");if(n<0)throw new Error("Missing device separator for key code.");let r=t.substring(0,n);if(r.length<0)throw new Error("Missing device for key code.");let i=t.substring(n+1);if(i.length<0)throw new Error("Missing code for key code.");return new b(r,i)}constructor(t,n){this.device=t,this.code=n}toString(){return`${this.device}.${this.code}`}};var I="Keyboard",le="Mouse",xl=new b(I,"KeyA"),yl=new b(I,"KeyB"),wl=new b(I,"KeyC"),El=new b(I,"KeyD"),Ml=new b(I,"KeyE"),_l=new b(I,"KeyF"),bl=new b(I,"KeyG"),Al=new b(I,"KeyH"),Sl=new b(I,"KeyI"),Rl=new b(I,"KeyJ"),Tl=new b(I,"KeyK"),Cl=new b(I,"KeyL"),Il=new b(I,"KeyM"),Ll=new b(I,"KeyN"),Ol=new b(I,"KeyO"),Nl=new b(I,"KeyP"),Pl=new b(I,"KeyQ"),Dl=new b(I,"KeyR"),Bl=new b(I,"KeyS"),zl=new b(I,"KeyT"),Hl=new b(I,"KeyU"),kl=new b(I,"KeyV"),$l=new b(I,"KeyW"),Kl=new b(I,"KeyX"),Ul=new b(I,"KeyY"),Fl=new b(I,"KeyZ"),Yl=new b(I,"Digit0"),jl=new b(I,"Digit1"),Gl=new b(I,"Digit2"),ql=new b(I,"Digit3"),Wl=new b(I,"Digit4"),Xl=new b(I,"Digit5"),Vl=new b(I,"Digit6"),Zl=new b(I,"Digit7"),Ql=new b(I,"Digit8"),Jl=new b(I,"Digit9"),eh=new b(I,"Minus"),th=new b(I,"Equal"),nh=new b(I,"BracketLeft"),rh=new b(I,"BracketRight"),ih=new b(I,"Semicolon"),sh=new b(I,"Quote"),ah=new b(I,"Backquote"),oh=new b(I,"Backslash"),lh=new b(I,"Comma"),hh=new b(I,"Period"),ch=new b(I,"Slash"),fh=new b(I,"Escape"),uh=new b(I,"Space"),ph=new b(I,"CapsLock"),dh=new b(I,"Backspace"),vh=new b(I,"Delete"),gh=new b(I,"Tab"),mh=new b(I,"Enter"),xh=new b(I,"ArrowUp"),yh=new b(I,"ArrowDown"),wh=new b(I,"ArrowLeft"),Eh=new b(I,"ArrowRight"),Mh=new b(le,"Button0"),_h=new b(le,"Button1"),bh=new b(le,"Button2"),Ah=new b(le,"Button3"),Sh=new b(le,"Button4"),Rh=new b(le,"PosX"),Th=new b(le,"PosY"),Ch=new b(le,"WheelX"),Ih=new b(le,"WheelY"),Lh=new b(le,"WheelZ");var _t=class{static isAxis(t){return!1}static isButton(t){return!1}constructor(t,n){if(!n)throw new Error(`Missing event target for device ${t}.`);this.name=t,this.eventTarget=n,this.listeners={input:[]}}setEventTarget(t){if(!t)throw new Error(`Missing event target for device ${this.name}.`);this.eventTarget=t}destroy(){let t=this.listeners;for(let n in t)t[n].length=0}addEventListener(t,n){let r=this.listeners;t in r?r[t].push(n):r[t]=[n]}removeEventListener(t,n){let r=this.listeners;if(t in r){let i=r[t],s=i.indexOf(n);s>=0&&i.splice(s,1)}}dispatchInputEvent(t){let n=0;for(let r of this.listeners.input)n|=r(t);return Boolean(n)}},mn=class extends _t{static isAxis(t){return!1}static isButton(t){return!0}constructor(t,n,r={}){super(t,n);let{ignoreRepeat:i=!0}=r;this.ignoreRepeat=i,this._eventObject={target:n,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),n.addEventListener("keydown",this.onKeyDown),n.addEventListener("keyup",this.onKeyUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let t=this.eventTarget;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(t){if(t.repeat&&this.ignoreRepeat)return t.preventDefault(),t.stopPropagation(),!1;let n=this._eventObject;if(n.code=t.code,n.event="pressed",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n))return t.preventDefault(),t.stopPropagation(),!1}onKeyUp(t){let n=this._eventObject;if(n.code=t.code,n.event="released",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n))return t.preventDefault(),t.stopPropagation(),!1}},bt=10,At=100,xn=class extends _t{static isAxis(t){return t==="PosX"||t==="PosY"||t==="WheelX"||t==="WheelY"||t==="WheelZ"}static isButton(t){return!this.isAxis(t)}constructor(t,n,r={}){super(t,n);let{eventsOnFocus:i=!0}=r;this.eventsOnFocus=i,this.canvasTarget=this.getCanvasFromEventTarget(n),this._downHasFocus=!1,this._eventObject={target:n,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:n,device:t,code:"",event:"move",value:0,movement:0},this._wheelObject={target:n,device:t,code:"",event:"wheel",movement:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("contextmenu",this.onContextMenu),n.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),this.canvasTarget=this.getCanvasFromEventTarget(t),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let t=this.eventTarget;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("contextmenu",this.onContextMenu),t.removeEventListener("wheel",this.onWheel),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(t=!0){t?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(t){this._downHasFocus=!0;let n=this._eventObject;if(n.code="Button"+t.button,n.event="pressed",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n)&&document.activeElement===this.eventTarget)return t.preventDefault(),t.stopPropagation(),!1}onContextMenu(t){return t.preventDefault(),t.stopPropagation(),!1}onWheel(t){let n,r,i;switch(t.deltaMode){case WheelEvent.DOM_DELTA_LINE:n=t.deltaX*bt,r=t.deltaY*bt,i=t.deltaZ*bt;break;case WheelEvent.DOM_DELTA_PAGE:n=t.deltaX*At,r=t.deltaY*At,i=t.deltaZ*At;break;case WheelEvent.DOM_DELTA_PIXEL:default:n=t.deltaX,r=t.deltaY,i=t.deltaZ;break}let s=0,a=this._wheelObject;if(a.code="WheelX",a.movement=n,s|=this.dispatchInputEvent(a),a.code="WheelY",a.movement=r,s|=this.dispatchInputEvent(a),a.code="WheelZ",a.movement=i,s|=this.dispatchInputEvent(a),s)return t.preventDefault(),t.stopPropagation(),!1}onMouseUp(t){if(!this._downHasFocus)return;this._downHasFocus=!1;let n=this._eventObject;if(n.code="Button"+t.button,n.event="released",n.value=1,n.control=t.ctrlKey,n.shift=t.shiftKey,n.alt=t.altKey,this.dispatchInputEvent(n))return t.preventDefault(),t.stopPropagation(),!1}onMouseMove(t){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;let n=this.canvasTarget,{clientWidth:r,clientHeight:i}=n,s=n.getBoundingClientRect(),a=t.movementX/r,o=t.movementY/i,l=(t.clientX-s.left)/r,h=(t.clientY-s.top)/i,c=this._positionObject;c.code="PosX",c.value=l,c.movement=a,this.dispatchInputEvent(c),c.code="PosY",c.value=h,c.movement=o,this.dispatchInputEvent(c)}getCanvasFromEventTarget(t){return t instanceof HTMLCanvasElement?t:t.canvas||t.querySelector("canvas")||t.shadowRoot&&t.shadowRoot.querySelector("canvas")||t}},Ki=`<kbd>
  <span id="name"><slot></slot></span>
  <span id="value" class="hidden"></span>
</kbd>
`,Ui=`kbd {
  position: relative;
  display: inline-block;
  border-radius: 3px;
  border: 1px solid #888888;
  font-size: 0.85em;
  font-weight: 700;
  text-rendering: optimizeLegibility;
  line-height: 12px;
  height: 14px;
  padding: 2px 4px;
  color: #444444;
  background-color: #eeeeee;
  box-shadow: inset 0 -3px 0 #aaaaaa;
  overflow: hidden;
}

kbd:empty::after {
  content: '<?>';
  opacity: 0.6;
}

.disabled {
  opacity: 0.6;
  box-shadow: none;
  background-color: #aaaaaa;
}

.hidden {
  display: none;
}

#value {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  font-size: 0.85em;
  padding: 0 4px;
  padding-top: 2px;
  color: #cccccc;
  background-color: #333333;
  box-shadow: inset 0 3px 0 #222222;
}
`,St=class extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Ki,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=Ui,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-code",this)}static get observedAttributes(){return["name","value","disabled"]}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get value(){return this._value}set value(t){this.setAttribute("value",t)}get name(){return this._name}set name(t){this.setAttribute("name",t)}constructor(){super();let t=this.constructor,n=this.attachShadow({mode:"open"});n.appendChild(t[Symbol.for("templateNode")].content.cloneNode(!0)),n.appendChild(t[Symbol.for("styleNode")].cloneNode(!0)),this._name="",this._value="",this._disabled=!1,this._kbdElement=n.querySelector("kbd"),this._nameElement=n.querySelector("#name"),this._valueElement=n.querySelector("#value")}attributeChangedCallback(t,n,r){switch(t){case"name":this._name=r,this._nameElement.textContent=r;break;case"value":this._value=r,r!==null?(this._valueElement.classList.toggle("hidden",!1),this._valueElement.textContent=r,this._kbdElement.style.paddingRight=`${this._valueElement.clientWidth+4}px`):this._valueElement.classList.toggle("hidden",!0);break;case"disabled":this._disabled=r!==null,this._kbdElement.classList.toggle("disabled",r!==null);break}}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"name")){let t=this.name;delete this.name,this.name=t}if(Object.prototype.hasOwnProperty.call(this,"value")){let t=this.value;delete this.value,this.value=t}if(Object.prototype.hasOwnProperty.call(this,"disabled")){let t=this.disabled;delete this.disabled,this.disabled=t}}};St.define();var Fi=`<table>
  <thead>
    <tr class="tableHeader">
      <th colspan="3">
        <span class="tableTitle">
          <label id="title"> input-source </label>
          <span id="slotContainer">
            <slot></slot>
          </span>
          <p>
            <label for="poll">poll</label>
            <output id="poll"></output>
          </p>
          <p>
            <label for="focus">focus</label>
            <output id="focus"></output>
          </p>
        </span>
      </th>
    </tr>
    <tr class="colHeader">
      <th>name</th>
      <th>value</th>
      <th>key</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
`,Yi=`:host {
  display: block;
}

table {
  border-collapse: collapse;
  font-family: monospace;
}

table,
th,
td {
  border: 1px solid #666666;
}

th,
td {
  padding: 5px 10px;
}

td {
  text-align: center;
}

thead th {
  padding: 0;
}

.colHeader > th {
  font-size: 0.8em;
  padding: 0 10px;
  letter-spacing: 3px;
  background-color: #aaaaaa;
  color: #666666;
}

tbody output {
  border-radius: 0.3em;
  padding: 3px;
}

tr:not(.primary) .name,
tr:not(.primary) .value {
  opacity: 0.3;
}

tr:nth-child(2n) {
  background-color: #eeeeee;
}

.tableHeader {
  color: #666666;
}

.tableTitle {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px;
}

#slotContainer {
  flex: 1;
}

p {
  display: inline;
  margin: 0;
  padding: 0;
  padding-right: 10px;
}

#poll:empty::after,
#focus:empty::after {
  content: '\u2717';
  color: #ff0000;
}
`,yn=class{constructor(t){this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null,this.pollable=t}get running(){return this.animationFrameHandle!==null}start(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}stop(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=null}onAnimationFrame(t){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.pollable.onPoll(t)}},wn=class{constructor(t){this.onInput=this.onInput.bind(this),this.onPoll=this.onPoll.bind(this),this.bindings=t}onPoll(t){for(let n of this.bindings.getInputs())n.onPoll(t)}onInput(t){let{device:n,code:r,event:i,value:s,movement:a,control:o,shift:l,alt:h}=t,c=this.bindings.getBindings(n,r);switch(i){case"pressed":for(let{input:f,index:u}of c)f.onUpdate(u,1,1);break;case"released":for(let{input:f,index:u}of c)f.onUpdate(u,0,-1);break;case"move":for(let{input:f,index:u}of c)f.onUpdate(u,s,a);break;case"wheel":for(let{input:f,index:u}of c)f.onUpdate(u,void 0,a);break}return c.length>0}},Rt=class{constructor(t,n,r,i){this.device=t,this.code=n,this.input=r,this.index=i}},En=class{constructor(){this.bindingMap={},this.inputMap=new Map}clear(){for(let t of this.inputMap.keys())t.onUnbind();this.inputMap.clear(),this.bindingMap={}}bind(t,n,r,i={inverted:!1}){let s,a=this.inputMap;if(a.has(t)){let l=a.get(t),h=t.size;t.onBind(h,i),s=new Rt(n,r,t,h),l.push(s)}else{let l=[];a.set(t,l);let h=0;t.onBind(h,i),s=new Rt(n,r,t,h),l.push(s)}let o=this.bindingMap;n in o?r in o[n]?o[n][r].push(s):o[n][r]=[s]:o[n]={[r]:[s]}}unbind(t){let n=this.inputMap;if(n.has(t)){let r=this.bindingMap,i=n.get(t);for(let s of i){let{device:a,code:o}=s,l=r[a][o],h=l.indexOf(s);l.splice(h,1)}i.length=0,t.onUnbind(),n.delete(t)}}isBound(t){return this.inputMap.has(t)}getInputs(){return this.inputMap.keys()}getBindingsByInput(t){return this.inputMap.get(t)}getBindings(t,n){let r=this.bindingMap;if(t in r){let i=r[t];if(n in i)return i[n]}return[]}},Mn=class{constructor(t,n=void 0){this.inputs={},this.devices=[new xn("Mouse",t),new mn("Keyboard",t)],this.bindings=new En,this.adapter=new wn(this.bindings),this.autopoller=new yn(this.adapter),this.eventTarget=t,this.anyButton=new We(1),this.anyButtonDevice="",this.anyButtonCode="",this.anyAxis=new Pe(1),this.anyAxisDevice="",this.anyAxisCode="",this.listeners={bind:[],unbind:[],focus:[],blur:[]},this.onInput=this.onInput.bind(this),this.onEventTargetBlur=this.onEventTargetBlur.bind(this),this.onEventTargetFocus=this.onEventTargetFocus.bind(this),t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur);for(let r of this.devices)r.addEventListener("input",this.onInput)}get autopoll(){return this.autopoller.running}set autopoll(t){this.toggleAutoPoll(t)}destroy(){let t=this.listeners;for(let r in t)t[r].length=0;this.autopoller.running&&this.autopoller.stop();for(let r of this.devices)r.removeEventListener("input",this.onInput),r.destroy();let n=this.eventTarget;n.removeEventListener("focus",this.onEventTargetFocus),n.removeEventListener("blur",this.onEventTargetBlur)}setEventTarget(t){let n=this.eventTarget;n.removeEventListener("focus",this.onEventTargetFocus),n.removeEventListener("blur",this.onEventTargetBlur),this.eventTarget=t;for(let r of this.devices)r.setEventTarget(t);t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur)}toggleAutoPoll(t=void 0){let n=this.autopoller.running,r=typeof t=="undefined"?!n:Boolean(t);r!==n&&(r?this.autopoller.start():this.autopoller.stop())}addEventListener(t,n){let r=this.listeners;t in r?r[t].push(n):r[t]=[n]}removeEventListener(t,n){let r=this.listeners;if(t in r){let i=r[t],s=i.indexOf(n);s>=0&&i.splice(s,1)}}dispatchEvent(t){let{type:n}=t,r=0;for(let i of this.listeners[n])r|=i(t)?1:0;return Boolean(r)}poll(t=performance.now()){if(this.autopoller.running)throw new Error("Should not manually poll() while autopolling.");this.onPoll(t)}onInput(t){let n=this.adapter.onInput(t);switch(t.event){case"pressed":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,1,1);break;case"released":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,0,-1);break;case"move":case"wheel":this.anyAxisDevice=t.device,this.anyAxisCode=t.code,this.anyAxis.onUpdate(0,t.value,t.movement);break}return n}onPoll(t){this.adapter.onPoll(t),this.anyButton.onPoll(t),this.anyAxis.onPoll(t)}onBind(){this.dispatchEvent({type:"bind"})}onUnbind(){this.dispatchEvent({type:"unbind"})}onEventTargetFocus(){this.dispatchEvent({type:"focus"})}onEventTargetBlur(){for(let t of this.bindings.getInputs())t.onStatus(0,0);this.anyButton.onStatus(0,0),this.anyAxis.onStatus(0,0),this.dispatchEvent({type:"blur"})}bindKeys(t){if(Array.isArray(t))for(let n of t)n.bindKeys(this);else if(typeof t.bindKeys=="function")t.bindKeys(this);else{t=Object.values(t);for(let n of t)n.bindKeys(this)}}bindButton(t,n,r,i=void 0){let s;this.hasButton(t)?s=this.getButton(t):(s=new We(1),this.inputs[t]=s),this.bindings.bind(s,n,r,i),this.onBind()}bindAxis(t,n,r,i=void 0){let s;this.hasAxis(t)?s=this.getAxis(t):(s=new Pe(1),this.inputs[t]=s),this.bindings.bind(s,n,r,i),this.onBind()}bindAxisButtons(t,n,r,i){let s;this.hasAxis(t)?s=this.getAxis(t):(s=new Pe(2),this.inputs[t]=s),this.bindings.bind(s,n,i),this.bindings.bind(s,n,r,{inverted:!0}),this.onBind()}unbindButton(t){if(this.hasButton(t)){let n=this.getButton(t);delete this.inputs[t],this.bindings.unbind(n),this.onUnbind()}}unbindAxis(t){if(this.hasAxis(t)){let n=this.getAxis(t);delete this.inputs[t],this.bindings.unbind(n),this.onUnbind()}}getInput(t){return this.inputs[t]}getButton(t){return this.inputs[t]}getAxis(t){return this.inputs[t]}hasButton(t){return t in this.inputs&&this.inputs[t]instanceof We}hasAxis(t){return t in this.inputs&&this.inputs[t]instanceof Pe}isButtonDown(t){return this.inputs[t].down}isButtonPressed(t){return this.inputs[t].pressed}isButtonReleased(t){return this.inputs[t].released}getInputValue(t){return this.inputs[t].value}getButtonValue(t){return this.inputs[t].value}getAxisValue(t){return this.inputs[t].value}getAxisDelta(t){return this.inputs[t].delta}isAnyButtonDown(t=void 0){if(typeof t=="undefined")return this.anyButton.down;{let n=this.inputs;for(let r of t)if(n[r].down)return!0}return!1}isAnyButtonPressed(t=void 0){if(typeof t=="undefined")return this.anyButton.pressed;{let n=this.inputs;for(let r of t)if(n[r].pressed)return!0}return!1}isAnyButtonReleased(t=void 0){if(typeof t=="undefined")return this.anyButton.released;{let n=this.inputs;for(let r of t)if(n[r].released)return!0}return!1}getAnyAxisValue(t=void 0){if(typeof t=="undefined")return this.anyAxis.value;{let n=this.inputs;for(let r of t){let i=n[r];if(i.value)return i.value}}return 0}getAnyAxisDelta(t=void 0){if(typeof t=="undefined")return this.anyAxis.delta;{let n=this.inputs;for(let r of t){let i=n[r];if(i.delta)return i.delta}}return 0}getLastButtonDevice(){return this.anyButtonDevice}getLastButtonCode(){return this.anyButtonCode}getLastAxisDevice(){return this.anyAxisDevice}getLastAxisCode(){return this.anyAxisCode}getMouse(){return this.devices[0]}getKeyboard(){return this.devices[1]}},Xe=class extends HTMLElement{static create(t={}){let{root:n=document.body,id:r=void 0,for:i=void 0,autopoll:s=!1}=t||{},a=new Xe;return a.id=r,a.for=i,a.autopoll=s,n.appendChild(a),a}static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML=Fi,Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=Yi,Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-port",this)}static get observedAttributes(){return["autopoll","for"]}get autopoll(){return this._autopoll}set autopoll(t){this.toggleAttribute("autopoll",t)}get for(){return this._for}set for(t){this.setAttribute("for",t)}constructor(){super();let t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._titleElement=t.querySelector("#title"),this._pollElement=t.querySelector("#poll"),this._focusElement=t.querySelector("#focus"),this._bodyElement=t.querySelector("tbody"),this._outputElements={},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null;let n=this;this._for="",this._eventTarget=n,this._autopoll=!1,this._context=null,this.onInputContextBind=this.onInputContextBind.bind(this),this.onInputContextUnbind=this.onInputContextUnbind.bind(this),this.onInputContextFocus=this.onInputContextFocus.bind(this),this.onInputContextBlur=this.onInputContextBlur.bind(this)}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"for")){let t=this.for;delete this.for,this.for=t}if(Object.prototype.hasOwnProperty.call(this,"autopoll")){let t=this.autopoll;delete this.autopoll,this.autopoll=t}this.updateTable(),this.updateTableValues(),this.animationFrameHandle=window.requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){let t=this._context;t&&(t.removeEventListener("bind",this.onInputContextBind),t.removeEventListener("unbind",this.onInputContextUnbind),t.removeEventListener("blur",this.onInputContextBlur),t.removeEventListener("focus",this.onInputContextFocus),t.destroy(),this._context=null)}attributeChangedCallback(t,n,r){switch(t){case"for":{this._for=r;let i,s;r?(i=document.getElementById(r),s=`${i.tagName.toLowerCase()}#${r}`):(i=this,s="input-port"),this._eventTarget=i,this._context&&this._context.setEventTarget(this._eventTarget),this._titleElement.innerHTML=`for ${s}`}break;case"autopoll":this._autopoll=r!==null,this._context&&this._context.toggleAutoPoll(this._autopoll);break}}onAnimationFrame(){this.animationFrameHandle=window.requestAnimationFrame(this.onAnimationFrame),this.updateTableValues(),this.updatePollStatus()}onInputContextBind(){return this.updateTable(),!0}onInputContextUnbind(){return this.updateTable(),!0}onInputContextFocus(){return this._focusElement.innerHTML="\u2713",!0}onInputContextBlur(){return this._focusElement.innerHTML="",!0}getContext(t="axisbutton",n=void 0){switch(t){case"axisbutton":if(!this._context){let r=new Mn(this._eventTarget,n);r.addEventListener("bind",this.onInputContextBind),r.addEventListener("unbind",this.onInputContextUnbind),r.addEventListener("blur",this.onInputContextBlur),r.addEventListener("focus",this.onInputContextFocus),this._autopoll&&r.toggleAutoPoll(!0),this._context=r}return this._context;default:throw new Error(`Input context id '${t}' is not supported.`)}}updateTable(){if(this.isConnected)if(this._context){let t=this._context,n=t.inputs,r=t.bindings,i={},s=[];for(let a of Object.keys(n)){let o=n[a],l=!0;for(let h of r.getBindingsByInput(o)){let c=ji(`${o.constructor.name}.${a}`,`${h.device}.${h.code}`,0,l);s.push(c),l&&(i[a]=c.querySelector("output"),l=!1)}}this._outputElements=i,this._bodyElement.innerHTML="";for(let a of s)this._bodyElement.appendChild(a)}else{this._outputElements={},this._bodyElement.innerHTML="";return}else return}updateTableValues(){if(this.isConnected)if(this._context){let n=this._context.inputs;for(let r of Object.keys(this._outputElements)){let i=this._outputElements[r],s=n[r].value;i.innerText=Number(s).toFixed(2)}}else{for(let t of Object.keys(this._outputElements)){let n=this._outputElements[t];n.innerText="---"}return}else return}updatePollStatus(){if(this.isConnected)if(this._context){let n=this._context.inputs;for(let r of Object.values(n))if(!r.polling){this._pollElement.innerHTML="";return}this._pollElement.innerHTML="\u2713"}else{this._pollElement.innerHTML="-";return}else return}};Xe.define();function ji(e,t,n,r=!0){let i=document.createElement("tr");r&&i.classList.add("primary");{let s=document.createElement("td");s.textContent=e,s.classList.add("name"),i.appendChild(s)}{let s=document.createElement("td"),a=document.createElement("output");r?a.innerText=Number(n).toFixed(2):a.innerText="---",a.classList.add("value"),s.appendChild(a),i.appendChild(s)}{let s=document.createElement("td");s.classList.add("key");let a=new St;a.innerText=t,s.appendChild(a),i.appendChild(s)}return i}var Oh=Symbol("keyboardSource");var Nh=Symbol("mouseSource");window.addEventListener("error",Ve,!0);window.addEventListener("unhandledrejection",Ve,!0);function Ve(e){typeof e=="object"?e instanceof PromiseRejectionEvent?Ve(e.reason):e instanceof ErrorEvent?Ve(e.error):e instanceof Error?window.alert(e.stack):window.alert(JSON.stringify(e)):window.alert(e)}var gr=Oi(Qn());var Jn={},Ts=function(e,t,n,r,i){var s=new Worker(Jn[t]||(Jn[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(a){var o=a.data,l=o.$e$;if(l){var h=new Error(l[0]);h.code=l[1],h.stack=l[2],i(h,null)}else i(null,o)},s.postMessage(n,r),s},J=Uint8Array,ge=Uint16Array,Ut=Uint32Array,Ft=new J([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yt=new J([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),er=new J([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tr=function(e,t){for(var n=new ge(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new Ut(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},nr=tr(Ft,2),jt=nr[0],Cs=nr[1];jt[28]=258,Cs[258]=28;var rr=tr(Yt,0),ir=rr[0],Fh=rr[1],it=new ge(32768);for(var U=0;U<32768;++U)pe=(U&43690)>>>1|(U&21845)<<1,pe=(pe&52428)>>>2|(pe&13107)<<2,pe=(pe&61680)>>>4|(pe&3855)<<4,it[U]=((pe&65280)>>>8|(pe&255)<<8)>>>1;var pe,Te=function(e,t,n){for(var r=e.length,i=0,s=new ge(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new ge(t);for(i=0;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new ge(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var h=i<<4|e[i],c=t-e[i],f=a[e[i]-1]++<<c,u=f|(1<<c)-1;f<=u;++f)o[it[f]>>>l]=h}else for(o=new ge(r),i=0;i<r;++i)e[i]&&(o[i]=it[a[e[i]-1]++]>>>15-e[i]);return o},ze=new J(288);for(var U=0;U<144;++U)ze[U]=8;for(var U=144;U<256;++U)ze[U]=9;for(var U=256;U<280;++U)ze[U]=7;for(var U=280;U<288;++U)ze[U]=8;var sr=new J(32);for(var U=0;U<32;++U)sr[U]=5;var ar=Te(ze,9,1);var or=Te(sr,5,1),st=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},re=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},at=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},lr=function(e){return(e+7)/8|0},ot=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var r=new(e.BYTES_PER_ELEMENT==2?ge:e.BYTES_PER_ELEMENT==4?Ut:J)(n-t);return r.set(e.subarray(t,n)),r};var hr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],te=function(e,t,n){var r=new Error(t||hr[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,te),!n)throw r;return r},cr=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new J(0);var i=!t||n,s=!n||n.i;n||(n={}),t||(t=new J(r*3));var a=function(z){var we=t.length;if(z>we){var Fe=new J(Math.max(we*2,z));Fe.set(t),t=Fe}},o=n.f||0,l=n.p||0,h=n.b||0,c=n.l,f=n.d,u=n.m,d=n.n,y=r*8;do{if(!c){o=re(e,l,1);var v=re(e,l+1,3);if(l+=3,v)if(v==1)c=ar,f=or,u=9,d=5;else if(v==2){var M=re(e,l,31)+257,R=re(e,l+10,15)+4,A=M+re(e,l+5,31)+1;l+=14;for(var T=new J(A),B=new J(19),E=0;E<R;++E)B[er[E]]=re(e,l+E*3,7);l+=R*3;for(var C=st(B),D=(1<<C)-1,g=Te(B,C,1),E=0;E<A;){var O=g[re(e,l,D)];l+=O&15;var p=O>>>4;if(p<16)T[E++]=p;else{var N=0,P=0;for(p==16?(P=3+re(e,l,3),l+=2,N=T[E-1]):p==17?(P=3+re(e,l,7),l+=3):p==18&&(P=11+re(e,l,127),l+=7);P--;)T[E++]=N}}var m=T.subarray(0,M),x=T.subarray(M);u=st(m),d=st(x),c=Te(m,u,1),f=Te(x,d,1)}else te(1);else{var p=lr(l)+4,w=e[p-4]|e[p-3]<<8,L=p+w;if(L>r){s&&te(0);break}i&&a(h+w),t.set(e.subarray(p,L),h),n.b=h+=w,n.p=l=L*8,n.f=o;continue}if(l>y){s&&te(0);break}}i&&a(h+131072);for(var F=(1<<u)-1,k=(1<<d)-1,X=l;;X=l){var N=c[at(e,l)&F],V=N>>>4;if(l+=N&15,l>y){s&&te(0);break}if(N||te(2),V<256)t[h++]=V;else if(V==256){X=l,c=null;break}else{var Z=V-254;if(V>264){var E=V-257,ae=Ft[E];Z=re(e,l,(1<<ae)-1)+jt[E],l+=ae}var Le=f[at(e,l)&k],ve=Le>>>4;Le||te(3),l+=Le&15;var x=ir[ve];if(ve>3){var ae=Yt[ve];x+=at(e,l)&(1<<ae)-1,l+=ae}if(l>y){s&&te(0);break}i&&a(h+131072);for(var oe=h+Z;h<oe;h+=4)t[h]=t[h-x],t[h+1]=t[h+1-x],t[h+2]=t[h+2-x],t[h+3]=t[h+3-x];h=oe}}n.l=c,n.p=X,n.b=h,n.f=o,c&&(o=1,n.m=u,n.d=f,n.n=d)}while(!o);return h==t.length?t:ot(t,0,h)};var Is=new J(0);var Ls=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},fr=function(e,t,n){for(var r=e(),i=e.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<r.length;++a){var o=r[a],l=s[a];if(typeof o=="function"){t+=";"+l+"=";var h=o.toString();if(o.prototype)if(h.indexOf("[native code]")!=-1){var c=h.indexOf(" ",8)+1;t+=h.slice(c,h.indexOf("(",c))}else{t+=h;for(var f in o.prototype)t+=";"+l+".prototype."+f+"="+o.prototype[f].toString()}else t+=h}else n[l]=o}return[t,n]},lt=[],Os=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},Ns=function(e,t,n,r){var i;if(!lt[n]){for(var s="",a={},o=e.length-1,l=0;l<o;++l)i=fr(e[l],s,a),s=i[0],a=i[1];lt[n]=fr(e[o],s,a)}var h=Ls({},lt[n][1]);return Ts(lt[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,h,Os(h),r)},Ps=function(){return[J,ge,Ut,Ft,Yt,er,jt,ir,ar,or,it,hr,Te,st,re,at,lr,ot,te,cr,qt,ur,pr]};var ur=function(e){return postMessage(e,[e.buffer])},pr=function(e){return e&&e.size&&new J(e.size)},Ds=function(e,t,n,r,i,s){var a=Ns(n,r,i,function(o,l){a.terminate(),s(o,l)});return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}};var ce=function(e,t){return e[t]|e[t+1]<<8},ie=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Gt=function(e,t){return ie(e,t)+ie(e,t+4)*4294967296};function Bs(e,t,n){return n||(n=t,t={}),typeof n!="function"&&te(7),Ds(e,t,[Ps],function(r){return ur(qt(r.data[0],pr(r.data[1])))},1,n)}function qt(e,t){return cr(e,t)}var Yh=typeof TextEncoder!="undefined"&&new TextEncoder,Wt=typeof TextDecoder!="undefined"&&new TextDecoder,zs=0;try{Wt.decode(Is,{stream:!0}),zs=1}catch(e){}var Hs=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,ot(e,n-1)];i?i==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}};function ks(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Wt)return Wt.decode(e);var i=Hs(e),s=i[0],a=i[1];return a.length&&te(8),s}}var $s=function(e,t){return t+30+ce(e,t+26)+ce(e,t+28)},Ks=function(e,t,n){var r=ce(e,t+28),i=ks(e.subarray(t+46,t+46+r),!(ce(e,t+8)&2048)),s=t+46+r,a=ie(e,t+20),o=n&&a==4294967295?Us(e,s):[a,ie(e,t+24),ie(e,t+42)],l=o[0],h=o[1],c=o[2];return[ce(e,t+10),l,h,i,s+ce(e,t+30)+ce(e,t+32),c]},Us=function(e,t){for(;ce(e,t)!=1;t+=4+ce(e,t+2));return[Gt(e,t+12),Gt(e,t+4),Gt(e,t+20)]};var dr=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function vr(e,t,n){n||(n=t,t={}),typeof n!="function"&&te(7);var r=[],i=function(){for(var p=0;p<r.length;++p)r[p]()},s={},a=function(p,w){dr(function(){n(p,w)})};dr(function(){a=n});for(var o=e.length-22;ie(e,o)!=101010256;--o)if(!o||e.length-o>65558)return a(te(13,0,1),null),i;var l=ce(e,o+8);if(l){var h=l,c=ie(e,o+16),f=c==4294967295||h==65535;if(f){var u=ie(e,o-12);f=ie(e,u)==101075792,f&&(h=l=ie(e,u+32),c=ie(e,u+48))}for(var d=t&&t.filter,y=function(p){var w=Ks(e,c,f),L=w[0],M=w[1],R=w[2],A=w[3],T=w[4],B=w[5],E=$s(e,B);c=T;var C=function(g,O){g?(i(),a(g,null)):(O&&(s[A]=O),--l||a(null,s))};if(!d||d({name:A,size:M,originalSize:R,compression:L}))if(!L)C(null,ot(e,E,E+M));else if(L==8){var D=e.subarray(E,E+M);if(M<32e4)try{C(null,qt(D,new J(R)))}catch(g){C(g,null)}else r.push(Bs(D,{size:R},C))}else C(te(14,"unknown compression type "+L,1),null);else C(null,null)},v=0;v<h;++v)y(v)}else a(null,{});return i}var He=class{constructor(t){let n;typeof t=="object"&&t instanceof He?n=t.source:n=String(t),this.source=n,this._re=(0,gr.makeRe)(n)}test(t){return this._re.test(t)}},Fs=/^([_\w\d]+)\:\/\//;async function mr(e,t,n,r,i,s){let{loadings:a}=e,o;t in a?o=a[t]:(o=new Ce(s),a[t]=o);let l=Ce.nextAttempt(o),h=[o.promise];return Fs.test(n)?h.push(xr(e,n,s).then(c=>r(c,i)).then(c=>Ce.isCurrentAttempt(o,l)?ke(e,t,c):void 0)):h.push(r(n).then(c=>Ce.isCurrentAttempt(o,l)?ke(e,t,c):void 0)),await Promise.race(h)}function ke(e,t,n){let{store:r,loadings:i}=e;return r[t]=n,t in i&&(i[t].resolve(n),delete i[t]),n}function Ys(e,t,n){let{defaults:r}=e;typeof t=="string"&&(t=new He(t));let i=`__default://[${r.length}]`;return ke(e,i,n),r.push(new Er(t,i)),n}function js(e,t){let{store:n,loadings:r}=e;t in r&&(r[t].reject(new Error("Stop loading to delete asset.")),delete r[t]),t in n&&delete n[t]}function Gs(e,t){typeof t=="string"&&(t=new He(t));let{store:n,loadings:r}=e;for(let[i,s]of Object.entries(r))t.test(i)&&(s.reject(new Error(`Stop loading to clear assets matching ${t}`)),delete r[i]);for(let i of Object.keys(n))t.test(i)&&delete n[i]}function qs(e){let{store:t,loadings:n,defaults:r}=e;for(let[i,s]of Object.entries(n))s.reject(new Error("Stop loading to clear all assets.")),delete n[i];for(let i of Object.keys(t))delete t[i];r.length=0}function Ws(e,t){let{loadings:n}=e;return t in n?n[t].promise:null}async function xr(e,t,n){let{store:r,loadings:i}=e;if(t in r)return r[t];if(t in i)return i[t].promise;{let s=new Ce(n);return i[t]=s,s.promise}}function Xs(e,t){let{defaults:n}=e;for(let r of n)if(r.glob.test(t))return ht(e,r.uri);return null}function ht(e,t){return e.store[t]}function Vs(e,t){return Boolean(e.store[t])}function Zs(e){return Object.keys(e.store)}function yr(e,t){return t in e.store}function wr(e,t){return t in e.loadings}var Er=class{constructor(t,n){this.glob=t,this.uri=n}},Ce=class{static nextAttempt(t){return++t._promiseHandle}static isCurrentAttempt(t,n){return t._promiseHandle===n}constructor(t){this._promiseHandle=0,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(t)&&t>0?setTimeout(()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)},t):null,this._promise=new Promise((n,r)=>{this._value?n(this._value):this._resolve=n,this._reason?r(this._reason):this._reject=r})}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}},Xt=class{constructor(t=null){this.parent=t,this.store={},this.loadings={},this.defaults=[]}get(t){let n=this;if(yr(n,t))return ht(n,t);let r=Xs(n,t);return r||null}async resolve(t,n,r,i,s){return this.get(t)||await this.load(t,n,r,i,s)}fallback(t,n){return Ys(this,t,n)}cache(t,n){return ke(this,t,n)}async load(t,n,r,i,s){let a=this;return yr(a,t)?ht(a,t):wr(a,t)?await xr(a,t,s):await mr(a,t,n,r,i,s)}async reload(t,n,r,i,s){return await mr(this,t,n,r,i,s)}unload(t){js(this,t)}clear(t){Gs(this,t)}current(t){return ht(this,t)}exists(t){return Vs(this,t)}loading(t){let n=this;return wr(n,t)?Ws(n,t):null}keys(){return Zs(this)}reset(){qs(this)}};async function Mr(e,t,n=void 0){let r=e,i="raw://",a=await(await fetch(t)).arrayBuffer();await new Promise((o,l)=>{vr(new Uint8Array(a),(h,c)=>{if(h)l(h);else{for(let[f,u]of Object.entries(c)){f=f.replaceAll("\\","/");let d=f.indexOf("/");d>=0&&(f=f.substring(d+1));let y=i+f;ke(r,y,u),n&&n(u,y,f)}o()}})})}async function $e(e,t=void 0){let{imageType:n=void 0}=t||{};if(typeof e=="string"){let l=await(await fetch(e)).arrayBuffer();if(typeof n=="undefined"){let h=e.lastIndexOf(".");if(h<0)throw new Error("Cannot load from url - unknown image type.");n="image/"+e.slice(h+1)}return $e(l,{...t,imageType:n})}else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw new Error("Cannot load from source - must be an array buffer or fetchable url");let r=e;typeof n=="undefined"&&(n="image/png");let i=new Blob([r],{type:n}),s=URL.createObjectURL(i),a=new Image;return new Promise((o,l)=>{a.addEventListener("load",()=>{o(a)}),a.addEventListener("error",h=>{l(h)}),a.src=s})}var Qs=5,Js=4,ea=3,ta=2,na=1,ra=0,Wh={[Qs]:Ke("#7F8C8D"),[Js]:Ke("#2ECC71"),[ea]:Ke("#4794C8"),[ta]:Ke("#F39C12"),[na]:Ke("#C0392B"),[ra]:[""]};function Ke(e){return[`background: ${e}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em"]}var Xh=Symbol("level"),Vh=Symbol("domain");var Ie=0,ia=class{constructor(t){this._heap=[],this._comparator=t}get size(){return this._heap.length}clear(){this._heap.length=0}push(...t){for(let n of t)this._heap.push(n),this._shiftUp()}pop(){let t=this.peek(),n=sa(this);return n>Ie&&this._swap(Ie,n),this._heap.pop(),this._shiftDown(),t}replace(t){let n=this.peek();return this._heap[Ie]=t,this._shiftDown(),n}peek(){return this._heap[Ie]}at(t){return this._heap[t]}indexOf(t,n=void 0){return this._heap.indexOf(t,n)}splice(t,n=void 0){return this._heap.splice(t,n)}_compare(t,n){return this._comparator(this._heap[t],this._heap[n])}_swap(t,n){let r=this._heap[t];this._heap[t]=this._heap[n],this._heap[n]=r}_shiftUp(){let t=this._heap.length-1,n;for(;t>Ie&&this._compare(t,n=aa(t));)this._swap(t,n),t=n}_shiftDown(){let t=this._heap.length,n=Ie,r,i=_r(n),s=i<t,a=br(n),o=a<t;for(;s&&this._compare(i,n)||o&&this._compare(a,n);)r=o&&this._compare(a,i)?a:i,this._swap(n,r),n=r,i=_r(n),s=i<t,a=br(n),o=a<t}values(){return this._heap}[Symbol.iterator](){return this._heap[Symbol.iterator]()}};function sa(e){return e._heap.length-1}function aa(e){return(e+1>>>1)-1}function _r(e){return(e<<1)+1}function br(e){return e+1<<1}function me(e,t,n){return Math.min(n,Math.max(t,e))}var Zh=Math.PI/180,Qh=180/Math.PI;var Vt=class{next(){return 0}},Ar=class extends Vt{next(){return Math.random()}},Sr=class extends Vt{constructor(t){super();this.seed=t,this.a=t}next(){var t=this.a+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}},Zt=class{static get RAND(){let t=new this;return this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this),Object.defineProperty(this,"RAND",{value:t}),t}constructor(t=void 0){typeof t=="number"?this.generator=new Sr(t):t?this.generator=t:this.generator=new Ar,this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this)}static next(){return this.RAND.next()}next(){return this.generator.next()}static choose(t){return this.RAND.choose(t)}choose(t){return t[Math.floor(this.generator.next()*t.length)]}static range(t,n){return this.RAND.range(t,n)}range(t,n){return(n-t)*this.generator.next()+t}static rangeInt(t,n){return this.RAND.rangeInt(t,n)}rangeInt(t,n){return Math.trunc(this.range(t,n))}static sign(){return this.RAND.sign()}sign(){return this.generator.next()<.5?-1:1}};var Qt=class{constructor(t,n,r=new Zt){this.width=t,this.height=n,this.length=t*n,this.rand=r,this.dangerCount=this.length*.2,this.data={tiles:new Array(length),overlay:new Array(length),regions:new Array(length),solids:new Array(length),marks:new Array(length)},Rr(this,this.dangerCount,this.rand)}dig(t,n){let r=this.width,i=this.height,s=this.data,a=t+n*r;if(s.solids[a]<=0||s.marks[a]>0)return!0;if(s.tiles[a]>0)return s.solids[a]=0,!1;let o=new Set,l=[];for(l.push(a);l.length>0;){let h=l.pop();o.add(h);let c=h%r,f=Math.floor(h/r);if(s.solids[h]=0,s.overlay[h]<=0){let u=Jt(c,f,r,i);for(let d of u)!o.has(d)&&s.marks[d]<=0&&l.push(d)}}return!0}mark(t,n){let r=this.width,i=this.data,s=t+n*r;return i.solids[s]<=0?!1:(i.marks[s]>0?i.marks[s]=0:i.marks[s]=1,!0)}checkWinCondition(){let t=this.data;for(let n=0;n<t.tiles.length;++n)if(t.solids[n]>0&&t.tiles[n]<=0)return!1;return!0}reset(){Rr(this,this.dangerCount,this.rand)}clear(){let t=this.data;for(let n=0;n<this.length;++n)t.tiles[n]=0,t.overlay[n]=0,t.solids[n]=1,t.regions[n]=0,t.marks[n]=0}};function Rr(e,t,n){e.clear();let r=e.width,i=e.height,s=e.rand,a=e.data;for(let v=0;v<t;++v){let p=Math.floor(n.range(0,r)),w=Math.floor(n.range(0,i)),L=p+w*r,M=1;if(a.tiles[L]===0){a.tiles[L]+=M,a.overlay[L]=Infinity;for(let R of Jt(p,w,r,i))a.overlay[R]+=M}else--v}let o=Array.from(oa(a,r,i,v=>a.overlay[v]>0).values()).sort((v,p)=>v.count-p.count),l=[[o[0]]],h=0;for(let v of o)l[h][0].count!==v.count?l[++h]=[v]:l[h].push(v);let c=l[Math.floor(l.length/2)],u=s.choose(c).tileIndex,d=u%r,y=Math.floor(u/r);e.dig(d,y)}function oa(e,t,n,r){let i=e.tiles.length,s=new Map,a=new Map,o=1;for(let l=0;l<i;++l)if(r(l))e.regions[l]=-1;else{let h=la(e,t,n,l,o++,r);if(h){if(a.has(h.tileIndex)){let c=a.get(h.tileIndex);s.delete(c),a.delete(h.tileIndex)}a.set(h.tileIndex,h.regionIndex),s.set(h.regionIndex,h)}}return s}function la(e,t,n,r,i,s){let a=Infinity,o=new Set,l=[];for(l.push(r);l.length>0;){let h=l.pop();if(s(h))continue;o.add(h);let c=h%t,f=Math.floor(h/t);e.regions[h]=i,h<a&&(a=h);let u=Jt(c,f,t,n);for(let d of u)o.has(d)||l.push(d)}return a<Infinity?{tileIndex:a,regionIndex:i,count:o.size}:null}function Jt(e,t,n,r){let i=[],s=e+t*n;return e>0&&i.push(s-1),e<n-1&&i.push(s+1),t>0&&i.push(s-n),t<r-1&&i.push(s+n),e>0&&t>0&&i.push(s-1-n),e<n-1&&t>0&&i.push(s+1-n),e>0&&t<r-1&&i.push(s-1+n),e<n-1&&t<r-1&&i.push(s+1+n),i}var W={};function Tr(e){e.bindAxis("CursorX","Mouse","PosX"),e.bindAxis("CursorY","Mouse","PosY"),e.bindButton("Activate","Mouse","Button0"),e.bindButton("Mark","Mouse","Button2"),e.bindButton("Restart","Keyboard","KeyR"),W.CursorX=e.getInput("CursorX"),W.CursorY=e.getInput("CursorY"),W.Activate=e.getInput("Activate"),W.Mark=e.getInput("Mark"),W.Restart=e.getInput("Restart")}var $=1e-6,j=typeof Float32Array!="undefined"?Float32Array:Array,xe=Math.random;var ic=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Cr(){var e=new j(9);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}var fe={};Ge(fe,{add:()=>Ga,adjoint:()=>ga,clone:()=>ca,copy:()=>fa,create:()=>ha,determinant:()=>ma,equals:()=>Va,exactEquals:()=>Xa,frob:()=>ja,fromQuat:()=>Da,fromQuat2:()=>Ia,fromRotation:()=>Sa,fromRotationTranslation:()=>Or,fromRotationTranslationScale:()=>Na,fromRotationTranslationScaleOrigin:()=>Pa,fromScaling:()=>Aa,fromTranslation:()=>ba,fromValues:()=>ua,fromXRotation:()=>Ra,fromYRotation:()=>Ta,fromZRotation:()=>Ca,frustum:()=>Ba,getRotation:()=>Oa,getScaling:()=>Nr,getTranslation:()=>La,identity:()=>Ir,invert:()=>va,lookAt:()=>Ua,mul:()=>Za,multiply:()=>Lr,multiplyScalar:()=>qa,multiplyScalarAndAdd:()=>Wa,ortho:()=>$a,orthoNO:()=>Dr,orthoZO:()=>Ka,perspective:()=>za,perspectiveFromFieldOfView:()=>ka,perspectiveNO:()=>Pr,perspectiveZO:()=>Ha,rotate:()=>wa,rotateX:()=>Ea,rotateY:()=>Ma,rotateZ:()=>_a,scale:()=>ya,set:()=>pa,str:()=>Ya,sub:()=>Qa,subtract:()=>Br,targetTo:()=>Fa,translate:()=>xa,transpose:()=>da});function ha(){var e=new j(16);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ca(e){var t=new j(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fa(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ua(e,t,n,r,i,s,a,o,l,h,c,f,u,d,y,v){var p=new j(16);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=a,p[7]=o,p[8]=l,p[9]=h,p[10]=c,p[11]=f,p[12]=u,p[13]=d,p[14]=y,p[15]=v,p}function pa(e,t,n,r,i,s,a,o,l,h,c,f,u,d,y,v,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=l,e[8]=h,e[9]=c,e[10]=f,e[11]=u,e[12]=d,e[13]=y,e[14]=v,e[15]=p,e}function Ir(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function da(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function va(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],h=t[7],c=t[8],f=t[9],u=t[10],d=t[11],y=t[12],v=t[13],p=t[14],w=t[15],L=n*o-r*a,M=n*l-i*a,R=n*h-s*a,A=r*l-i*o,T=r*h-s*o,B=i*h-s*l,E=c*v-f*y,C=c*p-u*y,D=c*w-d*y,g=f*p-u*v,O=f*w-d*v,N=u*w-d*p,P=L*N-M*O+R*g+A*D-T*C+B*E;return P?(P=1/P,e[0]=(o*N-l*O+h*g)*P,e[1]=(i*O-r*N-s*g)*P,e[2]=(v*B-p*T+w*A)*P,e[3]=(u*T-f*B-d*A)*P,e[4]=(l*D-a*N-h*C)*P,e[5]=(n*N-i*D+s*C)*P,e[6]=(p*R-y*B-w*M)*P,e[7]=(c*B-u*R+d*M)*P,e[8]=(a*O-o*D+h*E)*P,e[9]=(r*D-n*O-s*E)*P,e[10]=(y*T-v*R+w*L)*P,e[11]=(f*R-c*T-d*L)*P,e[12]=(o*C-a*g-l*E)*P,e[13]=(n*g-r*C+i*E)*P,e[14]=(v*M-y*A-p*L)*P,e[15]=(c*A-f*M+u*L)*P,e):null}function ga(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],h=t[7],c=t[8],f=t[9],u=t[10],d=t[11],y=t[12],v=t[13],p=t[14],w=t[15];return e[0]=o*(u*w-d*p)-f*(l*w-h*p)+v*(l*d-h*u),e[1]=-(r*(u*w-d*p)-f*(i*w-s*p)+v*(i*d-s*u)),e[2]=r*(l*w-h*p)-o*(i*w-s*p)+v*(i*h-s*l),e[3]=-(r*(l*d-h*u)-o*(i*d-s*u)+f*(i*h-s*l)),e[4]=-(a*(u*w-d*p)-c*(l*w-h*p)+y*(l*d-h*u)),e[5]=n*(u*w-d*p)-c*(i*w-s*p)+y*(i*d-s*u),e[6]=-(n*(l*w-h*p)-a*(i*w-s*p)+y*(i*h-s*l)),e[7]=n*(l*d-h*u)-a*(i*d-s*u)+c*(i*h-s*l),e[8]=a*(f*w-d*v)-c*(o*w-h*v)+y*(o*d-h*f),e[9]=-(n*(f*w-d*v)-c*(r*w-s*v)+y*(r*d-s*f)),e[10]=n*(o*w-h*v)-a*(r*w-s*v)+y*(r*h-s*o),e[11]=-(n*(o*d-h*f)-a*(r*d-s*f)+c*(r*h-s*o)),e[12]=-(a*(f*p-u*v)-c*(o*p-l*v)+y*(o*u-l*f)),e[13]=n*(f*p-u*v)-c*(r*p-i*v)+y*(r*u-i*f),e[14]=-(n*(o*p-l*v)-a*(r*p-i*v)+y*(r*l-i*o)),e[15]=n*(o*u-l*f)-a*(r*u-i*f)+c*(r*l-i*o),e}function ma(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],c=e[9],f=e[10],u=e[11],d=e[12],y=e[13],v=e[14],p=e[15],w=t*a-n*s,L=t*o-r*s,M=t*l-i*s,R=n*o-r*a,A=n*l-i*a,T=r*l-i*o,B=h*y-c*d,E=h*v-f*d,C=h*p-u*d,D=c*v-f*y,g=c*p-u*y,O=f*p-u*v;return w*O-L*g+M*D+R*C-A*E+T*B}function Lr(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],h=t[6],c=t[7],f=t[8],u=t[9],d=t[10],y=t[11],v=t[12],p=t[13],w=t[14],L=t[15],M=n[0],R=n[1],A=n[2],T=n[3];return e[0]=M*r+R*o+A*f+T*v,e[1]=M*i+R*l+A*u+T*p,e[2]=M*s+R*h+A*d+T*w,e[3]=M*a+R*c+A*y+T*L,M=n[4],R=n[5],A=n[6],T=n[7],e[4]=M*r+R*o+A*f+T*v,e[5]=M*i+R*l+A*u+T*p,e[6]=M*s+R*h+A*d+T*w,e[7]=M*a+R*c+A*y+T*L,M=n[8],R=n[9],A=n[10],T=n[11],e[8]=M*r+R*o+A*f+T*v,e[9]=M*i+R*l+A*u+T*p,e[10]=M*s+R*h+A*d+T*w,e[11]=M*a+R*c+A*y+T*L,M=n[12],R=n[13],A=n[14],T=n[15],e[12]=M*r+R*o+A*f+T*v,e[13]=M*i+R*l+A*u+T*p,e[14]=M*s+R*h+A*d+T*w,e[15]=M*a+R*c+A*y+T*L,e}function xa(e,t,n){var r=n[0],i=n[1],s=n[2],a,o,l,h,c,f,u,d,y,v,p,w;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],h=t[3],c=t[4],f=t[5],u=t[6],d=t[7],y=t[8],v=t[9],p=t[10],w=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=h,e[4]=c,e[5]=f,e[6]=u,e[7]=d,e[8]=y,e[9]=v,e[10]=p,e[11]=w,e[12]=a*r+c*i+y*s+t[12],e[13]=o*r+f*i+v*s+t[13],e[14]=l*r+u*i+p*s+t[14],e[15]=h*r+d*i+w*s+t[15]),e}function ya(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function wa(e,t,n,r){var i=r[0],s=r[1],a=r[2],o=Math.hypot(i,s,a),l,h,c,f,u,d,y,v,p,w,L,M,R,A,T,B,E,C,D,g,O,N,P,m;return o<$?null:(o=1/o,i*=o,s*=o,a*=o,l=Math.sin(n),h=Math.cos(n),c=1-h,f=t[0],u=t[1],d=t[2],y=t[3],v=t[4],p=t[5],w=t[6],L=t[7],M=t[8],R=t[9],A=t[10],T=t[11],B=i*i*c+h,E=s*i*c+a*l,C=a*i*c-s*l,D=i*s*c-a*l,g=s*s*c+h,O=a*s*c+i*l,N=i*a*c+s*l,P=s*a*c-i*l,m=a*a*c+h,e[0]=f*B+v*E+M*C,e[1]=u*B+p*E+R*C,e[2]=d*B+w*E+A*C,e[3]=y*B+L*E+T*C,e[4]=f*D+v*g+M*O,e[5]=u*D+p*g+R*O,e[6]=d*D+w*g+A*O,e[7]=y*D+L*g+T*O,e[8]=f*N+v*P+M*m,e[9]=u*N+p*P+R*m,e[10]=d*N+w*P+A*m,e[11]=y*N+L*P+T*m,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Ea(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=t[9],f=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+h*r,e[5]=a*i+c*r,e[6]=o*i+f*r,e[7]=l*i+u*r,e[8]=h*i-s*r,e[9]=c*i-a*r,e[10]=f*i-o*r,e[11]=u*i-l*r,e}function Ma(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],h=t[8],c=t[9],f=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-h*r,e[1]=a*i-c*r,e[2]=o*i-f*r,e[3]=l*i-u*r,e[8]=s*r+h*i,e[9]=a*r+c*i,e[10]=o*r+f*i,e[11]=l*r+u*i,e}function _a(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],h=t[4],c=t[5],f=t[6],u=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+h*r,e[1]=a*i+c*r,e[2]=o*i+f*r,e[3]=l*i+u*r,e[4]=h*i-s*r,e[5]=c*i-a*r,e[6]=f*i-o*r,e[7]=u*i-l*r,e}function ba(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Aa(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Sa(e,t,n){var r=n[0],i=n[1],s=n[2],a=Math.hypot(r,i,s),o,l,h;return a<$?null:(a=1/a,r*=a,i*=a,s*=a,o=Math.sin(t),l=Math.cos(t),h=1-l,e[0]=r*r*h+l,e[1]=i*r*h+s*o,e[2]=s*r*h-i*o,e[3]=0,e[4]=r*i*h-s*o,e[5]=i*i*h+l,e[6]=s*i*h+r*o,e[7]=0,e[8]=r*s*h+i*o,e[9]=i*s*h-r*o,e[10]=s*s*h+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ra(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ta(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ca(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Or(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=r+r,l=i+i,h=s+s,c=r*o,f=r*l,u=r*h,d=i*l,y=i*h,v=s*h,p=a*o,w=a*l,L=a*h;return e[0]=1-(d+v),e[1]=f+L,e[2]=u-w,e[3]=0,e[4]=f-L,e[5]=1-(c+v),e[6]=y+p,e[7]=0,e[8]=u+w,e[9]=y-p,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ia(e,t){var n=new j(3),r=-t[0],i=-t[1],s=-t[2],a=t[3],o=t[4],l=t[5],h=t[6],c=t[7],f=r*r+i*i+s*s+a*a;return f>0?(n[0]=(o*a+c*r+l*s-h*i)*2/f,n[1]=(l*a+c*i+h*r-o*s)*2/f,n[2]=(h*a+c*s+o*i-l*r)*2/f):(n[0]=(o*a+c*r+l*s-h*i)*2,n[1]=(l*a+c*i+h*r-o*s)*2,n[2]=(h*a+c*s+o*i-l*r)*2),Or(e,t,n),e}function La(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Nr(e,t){var n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],l=t[8],h=t[9],c=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,h,c),e}function Oa(e,t){var n=new j(3);Nr(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],a=t[0]*r,o=t[1]*i,l=t[2]*s,h=t[4]*r,c=t[5]*i,f=t[6]*s,u=t[8]*r,d=t[9]*i,y=t[10]*s,v=a+c+y,p=0;return v>0?(p=Math.sqrt(v+1)*2,e[3]=.25*p,e[0]=(f-d)/p,e[1]=(u-l)/p,e[2]=(o-h)/p):a>c&&a>y?(p=Math.sqrt(1+a-c-y)*2,e[3]=(f-d)/p,e[0]=.25*p,e[1]=(o+h)/p,e[2]=(u+l)/p):c>y?(p=Math.sqrt(1+c-a-y)*2,e[3]=(u-l)/p,e[0]=(o+h)/p,e[1]=.25*p,e[2]=(f+d)/p):(p=Math.sqrt(1+y-a-c)*2,e[3]=(o-h)/p,e[0]=(u+l)/p,e[1]=(f+d)/p,e[2]=.25*p),e}function Na(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=t[3],l=i+i,h=s+s,c=a+a,f=i*l,u=i*h,d=i*c,y=s*h,v=s*c,p=a*c,w=o*l,L=o*h,M=o*c,R=r[0],A=r[1],T=r[2];return e[0]=(1-(y+p))*R,e[1]=(u+M)*R,e[2]=(d-L)*R,e[3]=0,e[4]=(u-M)*A,e[5]=(1-(f+p))*A,e[6]=(v+w)*A,e[7]=0,e[8]=(d+L)*T,e[9]=(v-w)*T,e[10]=(1-(f+y))*T,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Pa(e,t,n,r,i){var s=t[0],a=t[1],o=t[2],l=t[3],h=s+s,c=a+a,f=o+o,u=s*h,d=s*c,y=s*f,v=a*c,p=a*f,w=o*f,L=l*h,M=l*c,R=l*f,A=r[0],T=r[1],B=r[2],E=i[0],C=i[1],D=i[2],g=(1-(v+w))*A,O=(d+R)*A,N=(y-M)*A,P=(d-R)*T,m=(1-(u+w))*T,x=(p+L)*T,F=(y+M)*B,k=(p-L)*B,X=(1-(u+v))*B;return e[0]=g,e[1]=O,e[2]=N,e[3]=0,e[4]=P,e[5]=m,e[6]=x,e[7]=0,e[8]=F,e[9]=k,e[10]=X,e[11]=0,e[12]=n[0]+E-(g*E+P*C+F*D),e[13]=n[1]+C-(O*E+m*C+k*D),e[14]=n[2]+D-(N*E+x*C+X*D),e[15]=1,e}function Da(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,l=i+i,h=n*a,c=r*a,f=r*o,u=i*a,d=i*o,y=i*l,v=s*a,p=s*o,w=s*l;return e[0]=1-f-y,e[1]=c+w,e[2]=u-p,e[3]=0,e[4]=c-w,e[5]=1-h-y,e[6]=d+v,e[7]=0,e[8]=u+p,e[9]=d-v,e[10]=1-h-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ba(e,t,n,r,i,s,a){var o=1/(n-t),l=1/(i-r),h=1/(s-a);return e[0]=s*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*l,e[10]=(a+s)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*h,e[15]=0,e}function Pr(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==Infinity?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}var za=Pr;function Ha(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==Infinity?(a=1/(r-i),e[10]=i*a,e[14]=i*r*a):(e[10]=-1,e[14]=-r),e}function ka(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+o),h=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-((a-o)*l*.5),e[9]=(i-s)*h*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Dr(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),h=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=(a+s)*h,e[15]=1,e}var $a=Dr;function Ka(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),h=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=h,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=s*h,e[15]=1,e}function Ua(e,t,n,r){var i,s,a,o,l,h,c,f,u,d,y=t[0],v=t[1],p=t[2],w=r[0],L=r[1],M=r[2],R=n[0],A=n[1],T=n[2];return Math.abs(y-R)<$&&Math.abs(v-A)<$&&Math.abs(p-T)<$?Ir(e):(c=y-R,f=v-A,u=p-T,d=1/Math.hypot(c,f,u),c*=d,f*=d,u*=d,i=L*u-M*f,s=M*c-w*u,a=w*f-L*c,d=Math.hypot(i,s,a),d?(d=1/d,i*=d,s*=d,a*=d):(i=0,s=0,a=0),o=f*a-u*s,l=u*i-c*a,h=c*s-f*i,d=Math.hypot(o,l,h),d?(d=1/d,o*=d,l*=d,h*=d):(o=0,l=0,h=0),e[0]=i,e[1]=o,e[2]=c,e[3]=0,e[4]=s,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=h,e[10]=u,e[11]=0,e[12]=-(i*y+s*v+a*p),e[13]=-(o*y+l*v+h*p),e[14]=-(c*y+f*v+u*p),e[15]=1,e)}function Fa(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=r[0],l=r[1],h=r[2],c=i-n[0],f=s-n[1],u=a-n[2],d=c*c+f*f+u*u;d>0&&(d=1/Math.sqrt(d),c*=d,f*=d,u*=d);var y=l*u-h*f,v=h*c-o*u,p=o*f-l*c;return d=y*y+v*v+p*p,d>0&&(d=1/Math.sqrt(d),y*=d,v*=d,p*=d),e[0]=y,e[1]=v,e[2]=p,e[3]=0,e[4]=f*p-u*v,e[5]=u*y-c*p,e[6]=c*v-f*y,e[7]=0,e[8]=c,e[9]=f,e[10]=u,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function Ya(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ja(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Ga(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Br(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function qa(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Wa(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Xa(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Va(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],c=e[8],f=e[9],u=e[10],d=e[11],y=e[12],v=e[13],p=e[14],w=e[15],L=t[0],M=t[1],R=t[2],A=t[3],T=t[4],B=t[5],E=t[6],C=t[7],D=t[8],g=t[9],O=t[10],N=t[11],P=t[12],m=t[13],x=t[14],F=t[15];return Math.abs(n-L)<=$*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(r-M)<=$*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-R)<=$*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(s-A)<=$*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(a-T)<=$*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-B)<=$*Math.max(1,Math.abs(o),Math.abs(B))&&Math.abs(l-E)<=$*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-C)<=$*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(c-D)<=$*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(f-g)<=$*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(u-O)<=$*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(d-N)<=$*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(y-P)<=$*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(v-m)<=$*Math.max(1,Math.abs(v),Math.abs(m))&&Math.abs(p-x)<=$*Math.max(1,Math.abs(p),Math.abs(x))&&Math.abs(w-F)<=$*Math.max(1,Math.abs(w),Math.abs(F))}var Za=Lr,Qa=Br;var dt={};Ge(dt,{add:()=>Jo,calculateW:()=>Uo,clone:()=>Xo,conjugate:()=>Go,copy:()=>Zo,create:()=>nn,dot:()=>hi,equals:()=>sl,exactEquals:()=>il,exp:()=>si,fromEuler:()=>qo,fromMat3:()=>oi,fromValues:()=>Vo,getAngle:()=>Ho,getAxisAngle:()=>zo,identity:()=>Bo,invert:()=>jo,len:()=>nl,length:()=>ci,lerp:()=>tl,ln:()=>ai,mul:()=>el,multiply:()=>ii,normalize:()=>rn,pow:()=>Fo,random:()=>Yo,rotateX:()=>ko,rotateY:()=>$o,rotateZ:()=>Ko,rotationTo:()=>al,scale:()=>li,set:()=>Qo,setAxes:()=>ll,setAxisAngle:()=>ri,slerp:()=>pt,sqlerp:()=>ol,sqrLen:()=>rl,squaredLength:()=>fi,str:()=>Wo});var se={};Ge(se,{add:()=>no,angle:()=>_o,bezier:()=>vo,ceil:()=>ro,clone:()=>Ja,copy:()=>eo,create:()=>ct,cross:()=>Ue,dist:()=>Lo,distance:()=>Kr,div:()=>Io,divide:()=>$r,dot:()=>ut,equals:()=>Ro,exactEquals:()=>So,floor:()=>io,forEach:()=>Po,fromValues:()=>ft,hermite:()=>po,inverse:()=>fo,len:()=>tn,length:()=>zr,lerp:()=>uo,max:()=>ao,min:()=>so,mul:()=>Co,multiply:()=>kr,negate:()=>co,normalize:()=>en,random:()=>go,rotateX:()=>wo,rotateY:()=>Eo,rotateZ:()=>Mo,round:()=>oo,scale:()=>lo,scaleAndAdd:()=>ho,set:()=>to,sqrDist:()=>Oo,sqrLen:()=>No,squaredDistance:()=>Ur,squaredLength:()=>Fr,str:()=>Ao,sub:()=>To,subtract:()=>Hr,transformMat3:()=>xo,transformMat4:()=>mo,transformQuat:()=>yo,zero:()=>bo});function ct(){var e=new j(3);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ja(e){var t=new j(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function zr(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function ft(e,t,n){var r=new j(3);return r[0]=e,r[1]=t,r[2]=n,r}function eo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function to(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function no(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Hr(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function kr(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function $r(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function ro(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function io(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function so(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function ao(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function oo(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function lo(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function ho(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Kr(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function Ur(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function Fr(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function co(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function fo(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function en(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function ut(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ue(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function uo(e,t,n,r){var i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function po(e,t,n,r,i,s){var a=s*s,o=a*(2*s-3)+1,l=a*(s-2)+s,h=a*(s-1),c=a*(3-2*s);return e[0]=t[0]*o+n[0]*l+r[0]*h+i[0]*c,e[1]=t[1]*o+n[1]*l+r[1]*h+i[1]*c,e[2]=t[2]*o+n[2]*l+r[2]*h+i[2]*c,e}function vo(e,t,n,r,i,s){var a=1-s,o=a*a,l=s*s,h=o*a,c=3*s*o,f=3*l*a,u=l*s;return e[0]=t[0]*h+n[0]*c+r[0]*f+i[0]*u,e[1]=t[1]*h+n[1]*c+r[1]*f+i[1]*u,e[2]=t[2]*h+n[2]*c+r[2]*f+i[2]*u,e}function go(e,t){t=t||1;var n=xe()*2*Math.PI,r=xe()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function mo(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function xo(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function yo(e,t,n){var r=n[0],i=n[1],s=n[2],a=n[3],o=t[0],l=t[1],h=t[2],c=i*h-s*l,f=s*o-r*h,u=r*l-i*o,d=i*u-s*f,y=s*c-r*u,v=r*f-i*c,p=a*2;return c*=p,f*=p,u*=p,d*=2,y*=2,v*=2,e[0]=o+c+d,e[1]=l+f+y,e[2]=h+u+v,e}function wo(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Eo(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Mo(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function _o(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2],l=Math.sqrt(n*n+r*r+i*i),h=Math.sqrt(s*s+a*a+o*o),c=l*h,f=c&&ut(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function bo(e){return e[0]=0,e[1]=0,e[2]=0,e}function Ao(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function So(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Ro(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2];return Math.abs(n-s)<=$*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=$*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-o)<=$*Math.max(1,Math.abs(i),Math.abs(o))}var To=Hr,Co=kr,Io=$r,Lo=Kr,Oo=Ur,tn=zr,No=Fr,Po=function(){var e=ct();return function(t,n,r,i,s,a){var o,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,o=r;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],s(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}}();function Do(){var e=new j(4);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Yr(e){var t=new j(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function jr(e,t,n,r){var i=new j(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Gr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function qr(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Wr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Xr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Vr(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function Zr(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function Qr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=n*n+r*r+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=s*a,e}function Jr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ei(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e[3]=o+r*(n[3]-o),e}function ti(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ni(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=t[0],o=t[1],l=t[2],h=t[3];return Math.abs(n-a)<=$*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=$*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=$*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-h)<=$*Math.max(1,Math.abs(s),Math.abs(h))}var fc=function(){var e=Do();return function(t,n,r,i,s,a){var o,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,o=r;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],s(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}}();function nn(){var e=new j(4);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Bo(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ri(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function zo(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>$?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Ho(e,t){var n=hi(e,t);return Math.acos(2*n*n-1)}function ii(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=n[0],l=n[1],h=n[2],c=n[3];return e[0]=r*c+a*o+i*h-s*l,e[1]=i*c+a*l+s*o-r*h,e[2]=s*c+a*h+r*l-i*o,e[3]=a*c-r*o-i*l-s*h,e}function ko(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*o,e[1]=i*l+s*o,e[2]=s*l-i*o,e[3]=a*l-r*o,e}function $o(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);return e[0]=r*l-s*o,e[1]=i*l+a*o,e[2]=s*l+r*o,e[3]=a*l-i*o,e}function Ko(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*o,e[1]=i*l-r*o,e[2]=s*l+a*o,e[3]=a*l-s*o,e}function Uo(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function si(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=Math.sqrt(n*n+r*r+i*i),o=Math.exp(s),l=a>0?o*Math.sin(a)/a:0;return e[0]=n*l,e[1]=r*l,e[2]=i*l,e[3]=o*Math.cos(a),e}function ai(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=Math.sqrt(n*n+r*r+i*i),o=a>0?Math.atan2(a,s)/a:0;return e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=.5*Math.log(n*n+r*r+i*i+s*s),e}function Fo(e,t,n){return ai(e,t),li(e,e,n),si(e,e),e}function pt(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=t[3],l=n[0],h=n[1],c=n[2],f=n[3],u,d,y,v,p;return d=i*l+s*h+a*c+o*f,d<0&&(d=-d,l=-l,h=-h,c=-c,f=-f),1-d>$?(u=Math.acos(d),y=Math.sin(u),v=Math.sin((1-r)*u)/y,p=Math.sin(r*u)/y):(v=1-r,p=r),e[0]=v*i+p*l,e[1]=v*s+p*h,e[2]=v*a+p*c,e[3]=v*o+p*f,e}function Yo(e){var t=xe(),n=xe(),r=xe(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function jo(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=n*n+r*r+i*i+s*s,o=a?1/a:0;return e[0]=-n*o,e[1]=-r*o,e[2]=-i*o,e[3]=s*o,e}function Go(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function oi(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[a*3+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+a]-t[a*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[a]=(t[a*3+i]+t[i*3+a])*r}return e}function qo(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var s=Math.sin(t),a=Math.cos(t),o=Math.sin(n),l=Math.cos(n),h=Math.sin(r),c=Math.cos(r);return e[0]=s*l*c-a*o*h,e[1]=a*o*c+s*l*h,e[2]=a*l*h-s*o*c,e[3]=a*l*c+s*o*h,e}function Wo(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Xo=Yr,Vo=jr,Zo=Gr,Qo=qr,Jo=Wr,el=ii,li=Xr,hi=Jr,tl=ei,ci=Vr,nl=ci,fi=Zr,rl=fi,rn=Qr,il=ti,sl=ni,al=function(){var e=ct(),t=ft(1,0,0),n=ft(0,1,0);return function(r,i,s){var a=ut(i,s);return a<-.999999?(Ue(e,t,i),tn(e)<1e-6&&Ue(e,n,i),en(e,e),ri(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Ue(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,rn(r,r))}}(),ol=function(){var e=nn(),t=nn();return function(n,r,i,s,a,o){return pt(e,r,a,o),pt(t,i,s,o),pt(n,e,t,2*o*(1-o)),n}}(),ll=function(){var e=Cr();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],rn(t,oi(t,e))}}();var be=class{static screenToWorld(t,n,r,i){let s=fe.multiply(fe.create(),i,r);fe.invert(s,s);let a=se.fromValues(t,n,0);return se.transformMat4(a,a,s),a}constructor(t=-1,n=1,r=-1,i=1,s=0,a=1){this.position=se.create(),this.rotation=dt.create(),this.scale=se.fromValues(1,1,1),this.clippingPlane={left:t,right:n,top:r,bottom:i,near:s,far:a},this._viewMatrix=fe.create(),this._projectionMatrix=fe.create()}get x(){return this.position[0]}set x(t){this.position[0]=t}get y(){return this.position[1]}set y(t){this.position[1]=t}get z(){return this.position[2]}set z(t){this.position[2]=t}moveTo(t,n,r=0,i=1){let s=se.fromValues(t,n,r);se.lerp(this.position,this.position,s,Math.min(1,i))}getViewMatrix(t=this._viewMatrix){let n=-Math.round(this.x),r=-Math.round(this.y),i=this.z===0?1:1/this.z,s=se.fromValues(n,r,0),a=se.fromValues(this.scale[0]*i,this.scale[1]*i,1);return fe.fromRotationTranslationScale(t,this.rotation,s,a),t}getProjectionMatrix(t=this._projectionMatrix){let{left:n,right:r,top:i,bottom:s,near:a,far:o}=this.clippingPlane;return fe.ortho(t,n,r,i,s,a,o),t}};var sn=class{constructor(){this.prevTransformMatrix=null,this.domProjectionMatrix=new DOMMatrix,this.domViewMatrix=new DOMMatrix,this.ctx=null}begin(t,n,r){if(this.ctx)throw new Error("View already begun - maybe missing end() call?");n&&ui(this.domViewMatrix,n),r&&ui(this.domProjectionMatrix,r),this.prevTransformMatrix=t.getTransform(),t.setTransform(this.domProjectionMatrix);let{a:i,b:s,c:a,d:o,e:l,f:h}=this.domViewMatrix;t.transform(i,s,a,o,l,h),this.ctx=t}end(t){t.setTransform(this.prevTransformMatrix),this.ctx=null}};function ui(e,t){return e.a=t[0],e.b=t[1],e.c=t[4],e.d=t[5],e.e=t[12],e.f=t[13],e}var vt=3,Ae=16,pi=32,di=32;function vi(){this.mines=new Qt(16,16),this.minesView=new sn,this.camera=new be,this.camera.x=-32,this.camera.y=-32,this.firstAction=!1,this.health=vt,this.gameOver=!1,this.gameWin=!1,this.gameTime=0}function gi(e){}function mi(e){if(W.Restart.released){xi(this);return}if(this.gameOver||this.gameWin){if(W.Activate.value||W.Mark.value){xi(this);return}}else{let t=this.display.width,n=this.display.height;this.firstAction&&(this.gameTime+=e);let r=!1;if(W.Activate.released){let i=W.CursorX.value*t,s=W.CursorY.value*n,a=be.screenToWorld(i,s,this.camera.getViewMatrix(),this.camera.getProjectionMatrix()),o=me(Math.floor(a[0]/Ae),0,this.mines.width-1),l=me(Math.floor(a[1]/Ae),0,this.mines.height-1);this.mines.dig(o,l)||hl(this,1),this.mines.checkWinCondition()&&cl(this),r=!0}if(W.Mark.released){let i=W.CursorX.value*t,s=W.CursorY.value*n,a=be.screenToWorld(i,s,this.camera.getViewMatrix(),this.camera.getProjectionMatrix()),o=me(Math.floor(a[0]/Ae),0,this.mines.width-1),l=me(Math.floor(a[1]/Ae),0,this.mines.height-1);this.mines.mark(o,l),r=!0}r&&!this.firstAction&&(this.firstAction=!0)}}function hl(e,t){e.health-=t,e.health<=0&&fl(e)}function xi(e){e.mines.reset(),e.gameOver=!1,e.gameWin=!1,e.gameTime=0,e.firstAction=!1,e.health=vt}function cl(e){e.gameWin=!0}function fl(e){e.gameOver=!0}var ye={LOADED:!1,TILE_IMAGE:null,NUMS_IMAGE:null,MARK_IMAGE:null};async function yi(e){ye.TILE_IMAGE=await $e(e.get("raw://tile.png")),ye.NUMS_IMAGE=await $e(e.get("raw://nums.png")),ye.MARK_IMAGE=await $e(e.get("raw://flag.png")),ye.LOADED=!0}function wi(e,t,n=16){if(!ye.LOADED)throw new Error("Assets for this renderer have not yet been loaded.");let r=t.width,i=t.height,s=t.data,a=n/2;e.fillStyle="#777777",e.fillRect(0,0,r*n,i*n),ul(e,0,0,r*n,i*n,n,n);for(let o=0;o<i;++o)for(let l=0;l<r;++l){let h=l*n,c=o*n,f=l+o*r;if(s.solids[f]>0)e.drawImage(ye.TILE_IMAGE,h,c,n,n),s.marks[f]>0&&e.drawImage(ye.MARK_IMAGE,h,c,n,n);else if(s.tiles[f]>0)e.fillStyle="rgba(0, 0, 0, 0.2)",e.fillRect(h,c,n,n),e.textAlign="center",e.textBaseline="middle",e.font="10px sans-serif",e.fillStyle="#000000",e.fillText("X",h+a,c+a);else if(s.overlay[f]>0){let u=s.overlay[f]-1;e.drawImage(ye.NUMS_IMAGE,32*u,0,32,32,h,c,n,n)}}}function ul(e,t,n,r,i,s,a){e.strokeStyle="#888888",e.beginPath();for(let o=0;o<i;o+=a)e.moveTo(t,o+n),e.lineTo(t+r,o+n);for(let o=0;o<r;o+=s)e.moveTo(o+t,n),e.lineTo(o+t,n+i);e.stroke()}var pl=0,dl=0;async function Ei(e){await yi(e)}function Mi(e,t){let n=e.context,r=t.camera.getViewMatrix(),i=t.camera.getProjectionMatrix();t.minesView.begin(n,r,i),wi(n,t.mines,Ae),t.minesView.end(n);let s=t.mines.width,a=t.mines.height,o=pi,l=di,h=Ae,c=W.CursorX.value*e.width,f=W.CursorY.value*e.height,u=be.screenToWorld(c,f,r,i),d=me(Math.floor(u[0]/h),0,s-1),y=me(Math.floor(u[1]/h),0,a-1);n.fillStyle="rgba(0, 0, 0, 0.2)",n.fillRect(o+d*h,l+y*h,h,h),n.fillStyle="rgba(0, 0, 0, 0.3)",n.fillRect(0,0,e.width,l),n.fillRect(0,e.height-l,e.width,l),n.fillRect(0,l,o,e.height-l*2),n.fillRect(e.width-o,l,o,e.height-l*2);for(let v=0;v<vt;++v){let p=v<t.health?"salmon":"darkgray";n.fillStyle=p,n.fillRect(pl+v*h,dl,h-3,h-3)}t.gameOver?(_i(n,e.width/2,e.height/2,e.width*.7,8,"black"),de(n,e.width/2+1,e.height/2+1,"Game Over",32,"black"),de(n,e.width/2-1,e.height/2-1,"Game Over",32,"white"),de(n,e.width/2+1,e.height/2+24+1,"Click to continue",16,"black"),de(n,e.width/2-1,e.height/2+24-1,"Click to continue",16,"white")):t.gameWin&&(_i(n,e.width/2,e.height/2,e.width*.7,8,"black"),de(n,e.width/2+1,e.height/2+1,"Success!",32,"black"),de(n,e.width/2-1,e.height/2-1,"Success!",32,"gold"),de(n,e.width/2+1,e.height/2+24+1,"Click to continue",16,"black"),de(n,e.width/2-1,e.height/2+24-1,"Click to continue",16,"white")),de(n,e.width/2,e.height-h,`Time: ${Math.floor(t.gameTime)}`,16,"white")}function _i(e,t,n,r,i,s){e.translate(t,n);{let a=r/2,o=i/2;e.fillStyle=s,e.fillRect(-a,-o,r,i)}e.translate(-t,-n)}function de(e,t,n,r,i,s){e.translate(t,n),e.textAlign="center",e.textBaseline="middle",e.font=`${i}px sans-serif`,e.fillStyle=s,e.fillText(r,0,0),e.translate(-t,-n)}Oe.define();document.addEventListener("DOMContentLoaded",vl);async function vl(){let e=document.querySelector("display-port"),t=e.canvas.getContext("2d");t.imageSmoothingEnabled=!1;let n=document.querySelector("input-port").getContext("axisbutton");Tr(n);let r=new Xt;await Mr(r,"res.pack");let i={display:e};await Ei.call(i,r),vi.call(i),e.addEventListener("frame",s=>{let a=s.detail.deltaTime/1e3;gi.call(i,a),n.poll(),mi.call(i,a);let o={context:t,width:e.width,height:e.height};t.clearRect(0,0,o.width,o.height),Mi.call(i,o,i)})}})();
//# sourceMappingURL=main.js.map
