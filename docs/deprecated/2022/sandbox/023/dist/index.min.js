!function(){"use strict";var t=1e-6,e="undefined"!=typeof Float32Array?Float32Array:Array;function n(){var t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t,e,n,i){var s=e[0],r=e[1],o=e[2],a=e[3],u=s+s,h=r+r,l=o+o,d=s*u,p=s*h,c=s*l,m=r*h,v=r*l,f=o*l,y=a*u,b=a*h,g=a*l,E=i[0],_=i[1],w=i[2];return t[0]=(1-(m+f))*E,t[1]=(p+g)*E,t[2]=(c-b)*E,t[3]=0,t[4]=(p-g)*_,t[5]=(1-(d+f))*_,t[6]=(v+y)*_,t[7]=0,t[8]=(c+b)*w,t[9]=(v-y)*w,t[10]=(1-(d+m))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function s(){var t=new e(3);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function r(t,n,i){var s=new e(3);return s[0]=t,s[1]=n,s[2]=i,s}function o(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function a(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function u(t,e){var n=e[0],i=e[1],s=e[2],r=n*n+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function h(t,e,n){var i=e[0],s=e[1],r=e[2],o=n[0],a=n[1],u=n[2];return t[0]=s*u-r*a,t[1]=r*o-i*u,t[2]=i*a-s*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var l,d=function(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)};l=s();function p(t,n,i,s){var r=new e(4);return r[0]=t,r[1]=n,r[2]=i,r[3]=s,r}!function(){var t,n=(t=new e(4),e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function c(){var t=new e(4);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function m(e,n,i,s){var r,o,a,u,h,l=n[0],d=n[1],p=n[2],c=n[3],m=i[0],v=i[1],f=i[2],y=i[3];return(o=l*m+d*v+p*f+c*y)<0&&(o=-o,m=-m,v=-v,f=-f,y=-y),1-o>t?(r=Math.acos(o),a=Math.sin(r),u=Math.sin((1-s)*r)/a,h=Math.sin(s*r)/a):(u=1-s,h=s),e[0]=u*l+h*m,e[1]=u*d+h*v,e[2]=u*p+h*f,e[3]=u*c+h*y,e}var v,f,y,b,g,E,_,w=function(t,e){var n=e[0],i=e[1],s=e[2],r=e[3],o=n*n+i*i+s*s+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=s*o,t[3]=r*o,t};v=s(),f=r(1,0,0),y=r(0,1,0),b=c(),g=c(),E=new e(9),e!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,_=E;const A="noscale",T="stretch",N=Symbol("template"),x=Symbol("style");class L extends HTMLElement{static get[N](){let t=document.createElement("template");return t.innerHTML='\n<div class="container">\n    <label class="hidden" id="title">display-port</label>\n    <label class="hidden" id="fps">00</label>\n    <label class="hidden" id="dimension">0x0</label>\n    <canvas></canvas>\n    <slot></slot>\n</div>',Object.defineProperty(this,N,{value:t}),t}static get[x](){let t=document.createElement("style");return t.innerHTML='\n:host {\n    display: inline-block;\n    color: #555555;\n}\n.container {\n    display: flex;\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    background: #000000;\n    margin: auto;\n    image-rendering: pixelated;\n}\nlabel {\n    font-family: monospace;\n    color: currentColor;\n    position: absolute;\n}\n#title {\n    left: 0.5rem;\n    top: 0.5rem;\n}\n#fps {\n    right: 0.5rem;\n    top: 0.5rem;\n}\n#dimension {\n    left: 0.5rem;\n    bottom: 0.5rem;\n}\n.hidden {\n    display: none;\n}\n:host([debug]) .container {\n    outline: 6px dashed rgba(0, 0, 0, 0.1);\n    outline-offset: -4px;\n    background-color: rgba(0, 0, 0, 0.1);\n}\n:host([mode="noscale"]) canvas {\n    margin: 0;\n    top: 0;\n    left: 0;\n}\n:host([mode="fit"]), :host([mode="center"]), :host([mode="stretch"]) {\n    width: 100%;\n    height: 100%;\n}\n:host([full]) {\n    width: 100vw!important;\n    height: 100vh!important;\n}\n:host([disabled]) {\n    display: none;\n}\nslot {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n\n    pointer-events: none;\n}\n::slotted(*) {\n    pointer-events: auto;\n}',Object.defineProperty(this,x,{value:t}),t}static get observedAttributes(){return["width","height","disabled","onframe","debug","id","class"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[N].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[x].cloneNode(!0)),this._canvasElement=this.shadowRoot.querySelector("canvas"),this._titleElement=this.shadowRoot.querySelector("#title"),this._fpsElement=this.shadowRoot.querySelector("#fps"),this._dimensionElement=this.shadowRoot.querySelector("#dimension"),this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._width=300,this._height=150,this._onframe=null,this.update=this.update.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){this.hasAttribute("mode")||(this.mode="noscale"),this.hasAttribute("tabindex")||this.setAttribute("tabindex",0),this.updateCanvasSize(),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(t,e,n){switch(t){case"width":this._width=n;break;case"height":this._height=n;break;case"disabled":n?(this.update(0),this.pause()):this.resume();break;case"onframe":this.onframe=new Function("event",`with(document){with(this){${n}}}`).bind(this);break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",n),this._fpsElement.classList.toggle("hidden",n),this._dimensionElement.classList.toggle("hidden",n)}}update(t){this._animationRequestHandle=requestAnimationFrame(this.update),this.updateCanvasSize();const e=t-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=t,this.debug){const t=e<=0?"--":String(Math.round(1e3/e)).padStart(2,"0");if(this._fpsElement.innerText!==t&&(this._fpsElement.innerText=t),this.mode===A){let t=`${this._width}x${this._height}`;this._dimensionElement.innerText!==t&&(this._dimensionElement.innerText=t)}else{let t=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.innerText!==t&&(this._dimensionElement.innerText=t)}}this.dispatchEvent(new CustomEvent("frame",{detail:{now:t,prevTime:this._prevAnimationFrameTime,deltaTime:e,canvas:this._canvasElement,get context(){let t=this.canvas.getContext("2d");return t.imageSmoothingEnabled=!1,t}},bubbles:!1,composed:!0}))}pause(){cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=requestAnimationFrame(this.update)}updateCanvasSize(){let t=this.shadowRoot.host.getBoundingClientRect();const e=t.width,n=t.height;let i=this._canvasElement,s=this._width,r=this._height;const o=this.mode;if(o===T)s=e,r=n;else if(o!==A){if(e<s||n<r||"fit"===o){let t=e/s,i=n/r;t<i?(s=e,r*=t):(s*=i,r=n)}}s=Math.floor(s),r=Math.floor(r),i.clientWidth===s&&i.clientHeight===r||(i.width=this._width,i.height=this._height,i.style=`width: ${s}px; height: ${r}px`,this.dispatchEvent(new CustomEvent("resize",{detail:{width:s,height:r},bubbles:!1,composed:!0})))}get onframe(){return this._onframe}set onframe(t){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=t,this._onframe&&this.addEventListener("frame",t)}get width(){return this._width}set width(t){this.setAttribute("width",t)}get height(){return this._height}set height(t){this.setAttribute("height",t)}get mode(){return this.getAttribute("mode")}set mode(t){this.setAttribute("mode",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get debug(){return this.hasAttribute("debug")}set debug(t){t?this.setAttribute("debug",""):this.removeAttribute("debug")}}window.customElements.define("display-port",L);class I{static addInputEventListener(t,e){}static removeInputEventListener(t,e){}constructor(t){this.eventTarget=t}}class k{constructor(){this.down=0,this.up=0,this.value=0,this.next={up:0,down:0}}update(t,e){"down"===t?this.next.down=e:this.next.up=e}poll(){this.value?this.up&&!this.next.up&&(this.value=0):this.next.down&&(this.value=1),this.down=this.next.down,this.up=this.next.up,this.next.down=0,this.next.up=0}toString(){return this.value}}class M{constructor(){this.value=0}update(t,e){this.value=e}poll(){}toString(){return this.value}}class S extends M{constructor(){super(),this.next=0}update(t,e){this.next+=e}poll(){this.value=this.next,this.next=0}}const C=Symbol("keyboardEventContext");class F extends I{static addInputEventListener(t,e){let n;if(C in e)n=e[C];else{n={handler:e,target:t,down:null,up:null,_keyEvent:{type:"key",target:t,device:"keyboard",key:null,event:null,value:null,control:!1,shift:!1,alt:!1}};let i=R.bind(n),s=P.bind(n);n.down=i,n.up=s,e[C]=n}return t.addEventListener("keyup",n.up),t.addEventListener("keydown",n.down),t}static removeInputEventListener(t,e){if(C in e){let n=e[C];t.removeEventListener("keyup",n.up),t.removeEventListener("keydown",n.down)}return t}constructor(t,e){if(super(t),this._buttons=[],this._managed=Array.isArray(e),this.onManagedKeyEvent=this.onManagedKeyEvent.bind(this),this.onUnmanagedKeyEvent=this.onUnmanagedKeyEvent.bind(this),this._managed){for(let t of e){let e=new k;this[t]=e,this._buttons.push(e)}F.addInputEventListener(t,this.onManagedKeyEvent)}else F.addInputEventListener(t,this.onUnmanagedKeyEvent)}get Up(){return Math.min((this.ArrowUp||0)+(this.KeyW||0),1)}get Down(){return Math.min((this.ArrowDown||0)+(this.KeyS||0),1)}get Left(){return Math.min((this.ArrowLeft||0)+(this.KeyA||0),1)}get Right(){return Math.min((this.ArrowRight||0)+(this.KeyD||0),1)}destroy(){this._managed?F.removeInputEventListener(this.eventTarget,this.onManagedKeyEvent):F.removeInputEventListener(this.eventTarget,this.onUnmanagedKeyEvent),this.eventTarget=null}poll(){for(let t of this._buttons)t.poll();return this}onUnmanagedKeyEvent(t){if(!(t.key in this)){let e=new k;this[t.key]=e,this._buttons.push(e)}return this[t.key].update(t.event,t.value),!0}onManagedKeyEvent(t){if(t.key in this)return this[t.key].update(t.event,t.value),!0}}function R(t){if(t.repeat)return t.preventDefault(),t.stopPropagation(),!1;let e=this._keyEvent;return e.key=t.code,e.event="down",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.handler.call(void 0,e)?(t.preventDefault(),t.stopPropagation(),!1):void 0}function P(t){let e=this._keyEvent;if(e.key=t.code,e.event="up",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.handler.call(void 0,e))return t.preventDefault(),t.stopPropagation(),!1}const U=Symbol("mouseEventContext");class O extends I{static addInputEventListener(t,e){let n;if(U in e)n=e[U];else{n={handler:e,target:t,down:null,up:null,move:null,contextmenu:null,_down:!1,_keyEvent:{type:"key",target:t,device:"mouse",key:null,event:null,value:null},_posEvent:{type:"pos",target:t,device:"mouse",key:"pos",event:"move",x:0,y:0,dx:0,dy:0}};let i=D.bind(n),s=z.bind(n),r=K.bind(n),o=B.bind(n);n.down=i,n.up=s,n.move=r,n.contextmenu=o,e[U]=n}return t.addEventListener("mousedown",n.down),document.addEventListener("mouseup",n.up),t.addEventListener("contextmenu",n.contextmenu),document.addEventListener("mousemove",n.move),t}static removeInputEventListener(t,e){if(U in e){let n=e[U];t.removeEventListener("mousedown",n.down),document.removeEventListener("mouseup",n.up),t.removeEventListener("contextmenu",n.contextmenu),document.removeEventListener("mousemove",n.move)}return t}constructor(t){super(t),this.x=new M,this.y=new M,this.dx=new S,this.dy=new S,this.Button0=new k,this.Button1=new k,this.Button2=new k,this.Button3=new k,this.Button4=new k,this.onMouseEvent=this.onMouseEvent.bind(this),O.addInputEventListener(t,this.onMouseEvent)}get Left(){return this.Button0}get Middle(){return this.Button1}get Right(){return this.Button2}destroy(){O.removeInputEventListener(this.eventTarget,this.onMouseEvent),this.eventTarget=null}poll(){return this.x.poll(),this.y.poll(),this.dx.poll(),this.dy.poll(),this.Button0.poll(),this.Button1.poll(),this.Button2.poll(),this.Button3.poll(),this.Button4.poll(),this}onMouseEvent(t){let{key:e,event:n}=t;switch(e){case 0:this.Button0.update(n,t.value);break;case 1:this.Button1.update(n,t.value);break;case 2:this.Button2.update(n,t.value);break;case 3:this.Button3.update(n,t.value);break;case 4:this.Button4.update(n,t.value);break;case"pos":return this.x.update(n,t.x),this.y.update(n,t.y),this.dx.update(n,t.dx),void this.dy.update(n,t.dy)}return!0}}function D(t){this._down=!0;let e=this._keyEvent;if(e.key=t.button,e.event="down",e.value=1,this.handler.call(void 0,e)&&document.activeElement===this.target)return t.preventDefault(),t.stopPropagation(),!1}function z(t){if(this._down){this._down=!1;let e=this._keyEvent;if(e.key=t.button,e.event="up",e.value=1,this.handler.call(void 0,e))return t.preventDefault(),t.stopPropagation(),!1}}function K(t){let e=this.target,{clientWidth:n,clientHeight:i}=e,s=this.target.getBoundingClientRect(),r=t.movementX/n,o=t.movementY/i,a=(t.clientX-s.left)/n,u=(t.clientY-s.top)/i,h=this._posEvent;if(h.x=a,h.y=u,h.dx=r,h.dy=o,void 0!==this.handler.call(void 0,h))throw new Error("Return value must be 'undefined'. Mouse position and movement events cannot be consumed.")}function B(t){return t.preventDefault(),t.stopPropagation(),!1}const H=Symbol("template"),X=Symbol("style");class W extends HTMLElement{static toInputMap(t){let e={};for(let n of t)if(n instanceof W){let t,i=n.input;switch(i in e?t=e[i]:e[i]=t=[],n.type){case"action":t.push({key:n.key,event:n.event});break;case"range":t.push({key:n.key,scale:n.scale});break;default:throw new Error("Unknown input type.")}}return e}static get[H](){let t=document.createElement("template");return t.innerHTML="\n<kbd></kbd>",Object.defineProperty(this,H,{value:t}),t}static get[X](){let t=document.createElement("style");return t.innerHTML="\n:host {\n    display: inline-block;\n}\nkbd {\n    background-color: #EEEEEE;\n    border-radius: 3px;\n    border: 1px solid #B4B4B4;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset;\n    color: #333333;\n    font-size: 0.85em;\n    font-weight: 700;\n    line-height: 1;\n    padding: 2px 4px;\n    white-space: nowrap;\n}\n",Object.defineProperty(this,X,{value:t}),t}static get observedAttributes(){return["input","key","scale","event"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[H].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[X].cloneNode(!0)),this.keyElement=this.shadowRoot.querySelector("kbd")}attributeChangedCallback(t,e,n){switch(t){case"key":this.keyElement.textContent=n}}get type(){return this.hasAttribute("event")?"action":"range"}get input(){return this.getAttribute("input")}set input(t){this.setAttribute("input",t)}get key(){return this.getAttribute("key")}set key(t){this.setAttribute("key",t)}get scale(){return Number(this.getAttribute("scale"))}set scale(t){this.setAttribute("scale",t)}get event(){return this.getAttribute("event")}set event(t){this.setAttribute("event",t)}}window.customElements.define("input-key",W);class V{constructor(t,e){this.inputName=t,this.inputType=e,this.value=0,this._onchange=null,this._eventListeners=new Map}update(t){if(this.value!==t){if(this.value=t,this._eventListeners.has("change"))for(let t of this._eventListeners.get("change"))t.call(void 0,this);return!0}return!1}get onchange(){return this._onchange}set onchange(t){this._onchange&&this.removeEventListener("change",this._onchange),this._onchange=t,this.addEventListener("change",t)}addEventListener(t,e){if(this._eventListeners.has(t)){this._eventListeners.get(t).push(e)}else this._eventListeners.set(t,[e])}removeEventListener(t,e){if(this._eventListeners.has(t)){let n=this._eventListeners.get(t);n.splice(n.indexOf(e),1)}}toString(){return this.value}}class Y{constructor(t,e,n){this.keyName=t,this.keyEvent=e,this.scale=n,this.value=0}consumeKey(){this.value=0}updateKey(t,e){if(e===this.keyName)if(this.keyEvent){if(this.keyEvent===t.event)return this.value=t.value*this.scale,!0}else switch(t.event){case"down":return this.value=this.scale,!0;case"up":return this.value=0,!0;default:return void(this.value=t.value*this.scale)}}}const j=Symbol("template"),q=Symbol("style");class G extends HTMLElement{static get[j](){let t=document.createElement("template");return t.innerHTML='\n<table>\n    <thead>\n        <tr class="header">\n            <th id="title" colspan=3>input-context</th>\n            <th id="poll">&nbsp;</th>\n        </tr>\n        <tr class="hint">\n            <th>input</th>\n            <th>key</th>\n            <th>mod</th>\n            <th>value</th>\n        </tr>\n    </thead>\n    <tbody>\n    </tbody>\n</table>\n<slot></slot>',Object.defineProperty(this,j,{value:t}),t}static get[q](){let t=document.createElement("style");return t.innerHTML='\n:host {\n    display: inline-block;\n}\nslot {\n    display: none;\n}\ntable {\n    border-collapse: collapse;\n}\ntable, th, td {\n    border: 1px solid gray;\n}\n#poll {\n    position: relative;\n    font-size: 0.9em;\n}\n#poll:after {\n    content: "(poll)";\n    position: absolute;\n    left: 0;\n    right: 0;\n    z-index: -1;\n    opacity: 0.1;\n    font-family: monospace;\n    letter-spacing: 3px;\n    overflow: hidden;\n}\n.hint > th {\n    font-size: 0.5em;\n    font-family: monospace;\n    padding: 0 10px;\n    letter-spacing: 3px;\n    background-color: #AAA;\n    color: #666666;\n}\nth, td {\n    padding: 5px 10px;\n}\ntd {\n    text-align: center;\n}\nkbd {\n    display: inline-block;\n    background-color: #EEEEEE;\n    border-radius: 3px;\n    border: 1px solid #B4B4B4;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset;\n    color: #333333;\n    font-size: 0.85em;\n    font-weight: 700;\n    line-height: 1;\n    padding: 2px 4px;\n    white-space: nowrap;\n}\noutput {\n    font-family: monospace;\n    border-radius: 0.3em;\n    padding: 3px;\n}\n.flash {\n    animation: fadein 4s;\n}\n@keyframes fadein {\n    0%, 10% { background-color: rgba(0, 0, 255, 0.3); }\n    100% { background-color: rgba(0, 0, 255, 0); }\n}\n',Object.defineProperty(this,q,{value:t}),t}static get observedAttributes(){return["for","strict","onattach","ondetach","id","class"]}constructor(t=null){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[j].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[q].cloneNode(!0)),this._onattach=null,this._ondetach=null,this._titleElement=this.shadowRoot.querySelector("#title"),this._pollElement=this.shadowRoot.querySelector("#poll"),this._tableBody=this.shadowRoot.querySelector("tbody"),this._children=this.shadowRoot.querySelector("slot"),this._tableInputs={},this._lastPollTime=0,this._pollWarningTimeoutHandle=0,this._animationFrameHandle=0,this._inputTarget=null,this._inputMap=t,this._inputs={},this._inputKeys={},this._keys={},this.onInputEvent=this.onInputEvent.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),t&&$(this,t)}connectedCallback(){if(this.hasAttribute("for")||this.setAttribute("for",""),!this._inputMap){this._inputMap={};const t=W.toInputMap(this._children.assignedNodes()),e=this.src;e?fetch(e).then(t=>t.json()).then(e=>{this._inputMap={...e,...t},$(this,this._inputMap)}):(this._inputMap={...t},$(this,this._inputMap))}this._lastPollTime=0,this._pollWarningTimeoutHandle=setTimeout(()=>{this._lastPollTime<=0?(this._pollElement.textContent="✗",console.warn("[INPUT] No input updated. Did you forget to poll() the input context?")):this._pollElement.textContent="✓"},3e3),this._animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){cancelAnimationFrame(this._animationFrameHandle),clearTimeout(this._pollWarningTimeoutHandle)}attributeChangedCallback(t,e,n){switch(t){case"for":let t;t=n?document.getElementById(n):document.querySelector("display-port")||document.querySelector("canvas"),this._inputTarget&&this.detach(),t&&this.attach(t);break;case"onattach":this.onattach=new Function("event",`with(document){with(this){${n}}}`).bind(this);break;case"ondetach":this.ondetach=new Function("event",`with(document){with(this){${n}}}`).bind(this);break;case"id":case"class":this._titleElement.innerHTML=`input-context${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`}}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}get for(){return this.getAttribute("for")}set for(t){this.setAttribute("for",t)}get strict(){return this.hasAttribute("strict")}set strict(t){t?this.setAttribute("strict",""):this.removeAttribute("strict")}get auto(){return this.hasAttribute("auto")}set auto(t){t?this.setAttribute("auto",""):this.removeAttribute("auto")}get onattach(){return this._onattach}set onattach(t){this._onattach&&this.removeEventListener("attach",this._onattach),this._onattach=t,this._onattach&&this.addEventListener("attach",t)}get ondetach(){return this._ondetach}set ondetach(t){this._ondetach&&this.removeEventListener("detach",this._ondetach),this._ondetach=t,this._ondetach&&this.addEventListener("detach",t)}attach(t){if(!t)throw new Error("Cannot attach input context to null.");if(this._inputTarget){if(this._inputTarget!==t)throw new Error("Input context already attached to another element.");return this}let e=t;return e&&(e.canvas?(F.addInputEventListener(e,this.onInputEvent),O.addInputEventListener(e.canvas,this.onInputEvent)):(F.addInputEventListener(e,this.onInputEvent),O.addInputEventListener(e,this.onInputEvent)),this.dispatchEvent(new CustomEvent("attach",{composed:!0,bubbles:!1,detail:{eventTarget:e,inputCallback:this.onInputEvent}}))),this._inputTarget=e,this}detach(){if(!this._inputTarget)return this;let t=this._inputTarget;return this._inputTarget=null,t.canvas?(F.removeInputEventListener(t,this.onInputEvent),O.removeInputEventListener(t.canvas,this.onInputEvent)):(F.removeInputEventListener(t,this.onInputEvent),O.removeInputEventListener(t,this.onInputEvent)),this.dispatchEvent(new CustomEvent("detach",{composed:!0,bubbles:!1,detail:{eventTarget:t,inputCallback:this.onInputEvent}})),this}poll(){this._lastPollTime=performance.now();for(let t in this._inputs){let e=this._inputs[t];switch(e.inputType){case"action":let n=!1;for(let i of this._inputKeys[t]){let t=i.value;if(t){e.update(t,i),i.consumeKey(),n=!0;break}}n||e.update(0,null);break;case"range":let i=0;for(let e of this._inputKeys[t])i+=e.value;e.update(i,null);break;default:throw new Error("Unknown input type.")}}}onInputEvent(t){let e=t.type;switch(e){case"key":{const e=t.device+":"+t.key;if(e in this._keys){let n=!1;for(let i of this._keys[e])i.updateKey(t,e)&&(n=!0);if(n)return!0}}break;case"pos":{const e=["x","y","dx","dy"];for(let n of e){t.value=t[n];const e=t.device+":"+t.key+"."+n;if(e in this._keys){let n=!1;for(let i of this._keys[e])i.updateKey(t,e)&&(n=!0);if(n)return!0}}}break;default:throw new Error(`Unknown input event type '${e}'.`)}}onAnimationFrame(t){this._animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.auto&&this.poll();for(let t in this._inputs){let e,n=this._inputs[t];e=n.value?Number(n.value).toFixed(2):0;let i=this._tableInputs[t];if(i.textContent!=e){i.textContent=e;let t=i.parentNode;i.parentNode.removeChild(i),t.appendChild(i)}}}getInput(t){if(t in this._inputs)return this._inputs[t];if(this.strict)throw new Error(`Cannot find input with name '${t}'.`);{let e=new V(t,"range");return this._inputs[t]=e,e}}getInputValue(t){if(t in this._inputs)return this._inputs[t].value;if(this.strict)throw new Error(`Cannot find input with name '${t}'.`);return 0}}function $(t,e){for(let n in e){let i=e[n];if(Array.isArray(i))for(let e of i)Q(t,n,e),"string"==typeof e&&(e={key:e,event:"down"}),J(t,n,e);else Q(t,n,i),"string"==typeof i&&(i={key:i,event:"down"}),J(t,n,i)}}function Z(t){if("object"==typeof t){if("type"in t)return t.type;if("scale"in t)return"range";if("event"in t)return"action";throw new Error(`Missing 'scale' or 'event' for input option '${inputName}'.`)}if("string"==typeof t)return"action";throw new Error("Invalid type for input mapping option.")}function J(t,e,n){let i=document.createElement("tr");{let t=document.createElement("td");t.textContent=e,t.classList.add("name"),i.appendChild(t)}{let t=document.createElement("td");t.classList.add("key");let e=document.createElement("kbd");e.textContent=n.key,t.appendChild(e),i.appendChild(t)}{let t=document.createElement("td"),e=document.createElement("samp");switch(Z(n)){case"action":e.textContent=n.event;break;case"range":e.textContent=Number(n.scale).toFixed(2);break;default:e.textContent="<?>"}t.classList.add("mod"),t.appendChild(e),i.appendChild(t)}if(e in t._tableInputs){let t=document.createElement("td");t.classList.add("value"),i.appendChild(t)}else{let n=document.createElement("td"),s=document.createElement("output");s.textContent=0,s.classList.add("flash"),n.classList.add("value"),n.appendChild(s),i.appendChild(n),t._tableInputs[e]=s}t._tableBody.appendChild(i)}function Q(t,e,n){let i=Z(n);switch(i){case"action":tt(t,e,"string"==typeof n?{key:n,event:"down"}:n);break;case"range":!function(t,e,n){const{key:i,scale:s}=n;let r,o,a;if(e in t._inputs){if(r=t._inputs[e],o=t._inputKeys[e],"range"!==r.inputType)throw new Error(`Cannot register mismatched 'range' type input for '${r.inputType}' type input '${e}'.`)}else r=new V(e,"range"),o=[],t._inputs[e]=r,t._inputKeys[e]=o;i in t._keys?a=t._keys[i]:(a=[],t._keys[i]=a);let u=new Y(i,null,s);a.push(u),o.push(u)}(t,e,n);break;default:throw new Error(`Unknown input type '${i}'.`)}}function tt(t,e,n){const{key:i,event:s}=n;let r,o,a;if(e in t._inputs){if(r=t._inputs[e],o=t._inputKeys[e],"action"!==r.inputType)throw new Error(`Cannot register mismatched 'action' type input for '${r.inputType}' type input '${e}'.`)}else r=new V(e,"action"),o=[],t._inputs[e]=r,t._inputKeys[e]=o;i in t._keys?a=t._keys[i]:(a=[],t._keys[i]=a);let u=new Y(i,s,1);a.push(u),o.push(u)}window.customElements.define("input-context",G);var et=Object.freeze({__proto__:null,loadText:async function(t,e){return(await fetch(t)).text()}});function nt(t){const e=[],n=[],i=[],s=[],r=[],o=[],a=/v\s+(\S+)\s+(\S+)\s+(\S+)/g,u=/vn\s+(\S+)\s+(\S+)\s+(\S+)/g,h=/vt\s+(\S+)\s+(\S+)/g,l=/f\s+(([^\/\s]*)\/([^\/\s]*)\/?([^\/\s]*))\s+(([^\/\s]*)\/([^\/\s]*)\/?([^\/\s]*))\s+(([^\/\s]*)\/([^\/\s]*)\/?([^\/\s]*))(\s+(([^\/\s]*)\/([^\/\s]*)\/?([^\/\s]*)))?/g,d=/f\s+([^\/\s]+)\s+([^\/\s]+)\s+([^\/\s]+)/g;let p,c,m,v,f,y,b=!1,g=null;for(t=t.replace(/^#.*/g,"");null!=(g=a.exec(t));)p=Number.parseFloat(g[1]),c=Number.parseFloat(g[2]),m=Number.parseFloat(g[3]),e.push(p),e.push(c),e.push(m);for(;null!=(g=u.exec(t));)p=Number.parseFloat(g[1]),c=Number.parseFloat(g[2]),m=Number.parseFloat(g[3]),i.push(p),i.push(c),i.push(m);for(;null!=(g=h.exec(t));)p=Number.parseFloat(g[1]),c=Number.parseFloat(g[2]),n.push(p),n.push(c);for(;null!=(g=l.exec(t));)p=Number.parseInt(g[2]),Number.isNaN(p)&&(p=1),c=Number.parseInt(g[6]),Number.isNaN(c)&&(c=1),m=Number.parseInt(g[10]),Number.isNaN(m)&&(m=1),s.push(p),s.push(c),s.push(m),p=Number.parseInt(g[4]),Number.isNaN(p)?(p=Number.parseInt(g[3]),c=Number.parseInt(g[7]),m=Number.parseInt(g[11]),o.push(p),o.push(c),o.push(m),r.push(1),r.push(1),r.push(1)):(c=Number.parseInt(g[8]),Number.isNaN(c)&&(c=1),m=Number.parseInt(g[12]),Number.isNaN(m)&&(m=1),o.push(p),o.push(c),o.push(m),p=Number.parseInt(g[3]),Number.isNaN(p)&&(p=1),c=Number.parseInt(g[7]),Number.isNaN(c)&&(c=1),m=Number.parseInt(g[11]),Number.isNaN(m)&&(m=1),r.push(p),r.push(c),r.push(m)),void 0!==g[13]&&(v=Number.parseInt(g[15]),Number.isNaN(v)&&(v=1),s.push(v),v=Number.parseInt(g[17]),Number.isNaN(v)?(v=Number.parseInt(g[16]),o.push(v),r.push(1)):(o.push(v),v=Number.parseInt(g[16]),r.push(v)),b=!0);for(;null!=(g=d.exec(t));)p=Number.parseInt(g[2]),c=Number.parseInt(g[6]),m=Number.parseInt(g[10]),s.push(p),s.push(c),s.push(m),r.push(1),r.push(1),r.push(1),o.push(1),o.push(1),o.push(1),void 0!==g[13]&&(v=Number.parseInt(g[14]),s.push(v),r.push(1),o.push(1),b=!0);y=s.length;const E=new Float32Array(3*y);for(let t=0;t<y;++t)f=s[t]-1,E[3*t+0]=e[3*f+0],E[3*t+1]=e[3*f+1],E[3*t+2]=e[3*f+2];y=r.length;const _=new Float32Array(2*y);for(let t=0;t<y;++t)f=r[t]-1,_[2*t+0]=n[2*f+0],_[2*t+1]=n[2*f+1];y=o.length;const w=new Float32Array(3*y);for(let t=0;t<y;++t)f=o[t]-1,w[3*t+0]=i[3*f+0],w[3*t+1]=i[3*f+1],w[3*t+2]=i[3*f+2];y=s.length;const A=new Uint16Array(y);for(let t=0;t<y;++t)A[t]=t;return b&&console.warn("WebGL does not support quad faces, only triangles."),{positions:E,texcoords:_,normals:w,indices:A}}function it(t){const e=[],n=[],i=[],s=[],r=[],o=[],a=/v( +[\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)/g,u=/vn( +[\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)/g,h=/vt( +[\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)/g,l=/f( +([\d]*)\/([\d]*)\/([\d]*))( ([\d]*)\/([\d]*)\/([\d]*))( ([\d]*)\/([\d]*)\/([\d]*))( ([\d]*)\/([\d]*)\/([\d]*))?/g,d=/f( +[\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)( [\d|\.|\+|\-|e]+)/g;let p,c,m,v,f,y,b=!1,g=null;for(t=t.replace(/^#.*/g,"");null!=(g=a.exec(t));)p=Number.parseFloat(g[1]),c=Number.parseFloat(g[2]),m=Number.parseFloat(g[3]),e.push(p),e.push(c),e.push(m);for(;null!=(g=u.exec(t));)p=Number.parseFloat(g[1]),c=Number.parseFloat(g[2]),m=Number.parseFloat(g[3]),i.push(p),i.push(c),i.push(m);for(;null!=(g=h.exec(t));)p=Number.parseFloat(g[1]),c=Number.parseFloat(g[2]),n.push(p),n.push(c);for(;null!=(g=l.exec(t));)p=Number.parseInt(g[2]),Number.isNaN(p)&&(p=1),c=Number.parseInt(g[6]),Number.isNaN(c)&&(c=1),m=Number.parseInt(g[10]),Number.isNaN(m)&&(m=1),s.push(p),s.push(c),s.push(m),p=Number.parseInt(g[3]),Number.isNaN(p)&&(p=1),c=Number.parseInt(g[7]),Number.isNaN(c)&&(c=1),m=Number.parseInt(g[11]),Number.isNaN(m)&&(m=1),r.push(p),r.push(c),r.push(m),p=Number.parseInt(g[4]),Number.isNaN(p)&&(p=1),c=Number.parseInt(g[8]),Number.isNaN(c)&&(c=1),m=Number.parseInt(g[12]),Number.isNaN(m)&&(m=1),o.push(p),o.push(c),o.push(m),void 0!==g[13]&&(v=Number.parseInt(g[14]),Number.isNaN(v)&&(v=1),s.push(v),v=Number.parseInt(g[15]),Number.isNaN(v)&&(v=1),r.push(v),v=Number.parseInt(g[16]),Number.isNaN(v)&&(v=1),o.push(v),b=!0);for(;null!=(g=d.exec(t));)p=Number.parseInt(g[2]),c=Number.parseInt(g[6]),m=Number.parseInt(g[10]),s.push(p),s.push(c),s.push(m),r.push(1),r.push(1),r.push(1),o.push(1),o.push(1),o.push(1),void 0!==g[13]&&(v=Number.parseInt(g[14]),s.push(v),r.push(1),o.push(1),b=!0);y=s.length;const E=new Float32Array(3*y);for(let t=0;t<y;++t)f=s[t]-1,E[3*t+0]=e[3*f+0],E[3*t+1]=e[3*f+1],E[3*t+2]=e[3*f+2];y=r.length;const _=new Float32Array(2*y);for(let t=0;t<y;++t)f=r[t]-1,_[2*t+0]=n[2*f+0],_[2*t+1]=n[2*f+1];y=o.length;const w=new Float32Array(3*y);for(let t=0;t<y;++t)f=o[t]-1,w[3*t+0]=i[3*f+0],w[3*t+1]=i[3*f+1],w[3*t+2]=i[3*f+2];y=s.length;const A=new Uint16Array(y);for(let t=0;t<y;++t)A[t]=t;return b&&console.warn("WebGL does not support quad faces, only triangles."),{positions:E,texcoords:_,normals:w,indices:A}}var st=Object.freeze({__proto__:null,loadOBJ:async function(t,e){let n=await fetch(t),i=await n.text();{const t=10;for(let e=0;e<t;++e){performance.now();it(i);performance.now()}}{const t=10;for(let e=0;e<t;++e){performance.now();nt(i);performance.now()}}return nt(i)}});!async function(t){document.addEventListener("click",()=>{"suspended"===t.state&&t.resume()})}(new AudioContext);const rt=Math.PI/180;function ot(t){return t*rt}let at=null;function ut(t,e){return at||(at=function(t){let e={};if(!(t instanceof WebGLRenderingContext))throw new Error("Unknown gl context provided.");e[t.FLOAT]={TypedArray:Float32Array,size:4,uniform:t.uniform1f,arrayUniform:t.uniform1fv},e[t.FLOAT_VEC2]={TypedArray:Float32Array,size:8,uniform:t.uniform2fv,arrayType:t.FLOAT},e[t.FLOAT_VEC3]={TypedArray:Float32Array,size:12,uniform:t.uniform3fv,arrayType:t.FLOAT},e[t.FLOAT_VEC4]={TypedArray:Float32Array,size:16,uniform:t.uniform4fv,arrayType:t.FLOAT},e[t.INT]={TypedArray:Int32Array,size:4,uniform:t.uniform1i,arrayUniform:t.uniform1iv},e[t.INT_VEC2]={TypedArray:Int32Array,size:8,uniform:t.uniform2iv,arrayType:t.INT},e[t.INT_VEC3]={TypedArray:Int32Array,size:12,uniform:t.uniform3iv,arrayType:t.INT},e[t.INT_VEC4]={TypedArray:Int32Array,size:16,uniform:t.uniform4iv,arrayType:t.INT},e[t.UNSIGNED_INT]={TypedArray:Uint32Array,size:4,uniform:t.uniform1ui,arrayUniform:t.uniform1uiv},e[t.UNSIGNED_INT_VEC2]={TypedArray:Uint32Array,size:8,uniform:t.uniform2uiv,arrayType:t.UNSIGNED_INT},e[t.UNSIGNED_INT_VEC3]={TypedArray:Uint32Array,size:12,uniform:t.uniform3uiv,arrayType:t.UNSIGNED_INT},e[t.UNSIGNED_INT_VEC4]={TypedArray:Uint32Array,size:16,uniform:t.uniform4uiv,arrayType:t.UNSIGNED_INT},e[t.BOOL]={TypedArray:Uint32Array,size:4,uniform:t.uniform1i,arrayUniform:t.uniform1iv},e[t.BOOL_VEC2]={TypedArray:Uint32Array,size:8,uniform:t.uniform2iv,arrayType:t.BOOL},e[t.BOOL_VEC3]={TypedArray:Uint32Array,size:12,uniform:t.uniform3iv,arrayType:t.BOOL},e[t.BOOL_VEC4]={TypedArray:Uint32Array,size:16,uniform:t.uniform4iv,arrayType:t.BOOL},e[t.FLOAT_MAT2]={TypedArray:Float32Array,size:16,uniform:ct,arrayType:t.FLOAT},e[t.FLOAT_MAT3]={TypedArray:Float32Array,size:36,uniform:mt,arrayType:t.FLOAT},e[t.FLOAT_MAT4]={TypedArray:Float32Array,size:64,uniform:vt,arrayType:t.FLOAT},e[t.UNSIGNED_BYTE]={TypedArray:Uint8Array,size:1},e[t.UNSIGNED_SHORT]={TypedArray:Uint16Array,size:2};"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?(e[t.FLOAT_MAT2x3]={TypedArray:Float32Array,size:24,uniform:ft,arrayType:t.FLOAT},e[t.FLOAT_MAT2x4]={TypedArray:Float32Array,size:32,uniform:bt,arrayType:t.FLOAT},e[t.FLOAT_MAT3x2]={TypedArray:Float32Array,size:24,uniform:yt,arrayType:t.FLOAT},e[t.FLOAT_MAT3x4]={TypedArray:Float32Array,size:48,uniform:Et,arrayType:t.FLOAT},e[t.FLOAT_MAT4x2]={TypedArray:Float32Array,size:32,uniform:gt,arrayType:t.FLOAT},e[t.FLOAT_MAT4x3]={TypedArray:Float32Array,size:48,uniform:_t,arrayType:t.FLOAT},pt(t,e,Tt,Nt)):pt(t,e,wt,At);return e}(t)),at[e]}function ht(t,e){return"sampler"in ut(t,e)}function lt(t,e){return ut(t,e).uniform}function dt(t,e,n){let i=ut(t,e);return i.sampler(i.bindPoint,n)}function pt(t,e,n,i){return e[t.SAMPLER_2D]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D},e[t.SAMPLER_CUBE]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_CUBE_MAP},e[t.SAMPLER_3D]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_3D},e[t.SAMPLER_2D_SHADOW]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D},e[t.SAMPLER_2D_ARRAY]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D_ARRAY},e[t.SAMPLER_2D_ARRAY_SHADOW]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D_ARRAY},e[t.SAMPLER_CUBE_SHADOW]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_CUBE_MAP},e[t.INT_SAMPLER_2D]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D},e[t.INT_SAMPLER_3D]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_3D},e[t.INT_SAMPLER_CUBE]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_CUBE_MAP},e[t.INT_SAMPLER_2D_ARRAY]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D_ARRAY},e[t.UNSIGNED_INT_SAMPLER_2D]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D},e[t.UNSIGNED_INT_SAMPLER_3D]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_3D},e[t.UNSIGNED_INT_SAMPLER_CUBE]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_CUBE_MAP},e[t.UNSIGNED_INT_SAMPLER_2D_ARRAY]={TypedArray:null,size:0,sampler:n,arraySampler:i,bindPoint:t.TEXTURE_2D_ARRAY},e}function ct(t,e){this.uniformMatrix2fv(t,!1,e)}function mt(t,e){this.uniformMatrix3fv(t,!1,e)}function vt(t,e){this.uniformMatrix4fv(t,!1,e)}function ft(t,e){this.uniformMatrix2x3fv(t,!1,e)}function yt(t,e){this.uniformMatrix3x2fv(t,!1,e)}function bt(t,e){this.uniformMatrix2x4fv(t,!1,e)}function gt(t,e){this.uniformMatrix4x2fv(t,!1,e)}function Et(t,e){this.uniformMatrix3x4fv(t,!1,e)}function _t(t,e){this.uniformMatrix4x3fv(t,!1,e)}function wt(t,e){return function(n,i){this.uniform1i(n,e),this.activeTexture(this.TEXTURE0+e),this.bindTexture(t,i)}}function At(t,e,n){const i=new Int32Array(n);for(let t=0;t<n;++t)i[t]=e+t;return function(e,n){this.uniform1iv(e,i),n.forEach((function(e,n){this.activeTexture(this.TEXTURE0+i[n]),this.bindTexture(t,e)}))}}function Tt(t,e){return function(n,i){let s,r;i instanceof WebGLTexture?(s=i,r=null):(s=i.texture,r=i.sampler),this.uniform1i(n,e),this.activeTexture(this.TEXTURE0+e),this.bindTexture(t,s),this.bindSampler(e,r)}}function Nt(t,e,n){const i=new Int32Array(n);for(let t=0;t<n;++t)i[t]=e+t;return function(n,s){this.uniform1iv(n,i),s.forEach((function(n,s){let r,o;this.activeTexture(this.TEXTURE0+i[s]),n instanceof WebGLTexture?(r=n,o=null):(r=n.texture,o=n.sampler),this.bindSampler(e,o),this.bindTexture(t,r)}))}}function xt(t,e,n){let{TypedArray:i}=ut(t,e);return new i(n)}class Lt{constructor(t){this.handle=t.createProgram(),this.shaders=[],this.gl=t}shader(t,e){let n=function(t,e,n){let i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return i;console.error(t.getShaderInfoLog(i)+"\nFailed to compile shader:\n"+n),t.deleteShader(i)}(this.gl,t,e);return this.shaders.push(n),this}link(){return function(t,e,n){for(let i of n)t.attachShader(e,i);t.linkProgram(e);for(let i of n)t.detachShader(e,i),t.deleteShader(i);if(t.getProgramParameter(e,t.LINK_STATUS))return e;console.error(t.getProgramInfoLog(e)),t.deleteProgram(e)}(this.gl,this.handle,this.shaders),this.shaders.length=0,this.handle}}class It{constructor(t,e){this.handle=e,this.activeUniforms=function(t,e){let n={},i=function(t,e){let n=[];const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){let i=t.getActiveUniform(e,s);if(!i)break;n.push(i)}return n}(t,e);for(let s of i){let i,r=s.type,o=s.name,a=s.size,u=t.getUniformLocation(e,o);if(ht(t,r)){let e=dt(t,r,0);throw i=function(t,n,i){e.call(t,n,i)},new Error("Samplers are not yet supported.")}{let e=lt(t,r);i=function(t,n,i){e.call(t,n,i)}}n[o]={type:r,length:a,location:u,set:i}}return n}(t,e),this.activeAttributes=function(t,e){let n={},i=function(t,e){let n=[];const i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;++s){let i=t.getActiveAttrib(e,s);i&&n.push(i)}return n}(t,e);for(let s of i){let i=s.type,r=s.name,o=s.size,a=t.getAttribLocation(e,r);n[r]={type:i,length:o,location:a}}return n}(t,e),this.drawContext=new kt(this)}bind(t){return t.useProgram(this.handle),this.drawContext.gl=t,this.drawContext}}class kt{constructor(t){this.parent=t,this.gl=null}uniform(t,e){const n=this.gl,i=this.parent.activeUniforms;if(t in i){let s=i[t],r=s.location;s.set(n,r,e)}return this}attribute(t,e,n,i=!1,s=0,r=0){const o=this.gl,a=this.parent.activeAttributes;if(t in a){let u=a[t],h=u.location;if(e){let t=function(t,e){let n=ut(t,e);return"arrayType"in n?n.arrayType:e}(o,u.type);o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(h,n,t,i,s,r),o.enableVertexAttribArray(h)}else o.disableVertexAttribArray(h)}return this}draw(t,e,n,i,s=null){return function(t,e,n,i,s=null){s?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.drawElements(e,i,t.UNSIGNED_SHORT,n)):t.drawArrays(e,n,i)}(t,e,n,i,s),this.parent}}r(0,1,0);function Mt(e={}){const{xzlock:n=!1}=e;return{position:s(),forward:r(0,0,-1),right:r(1,0,0),up:r(0,1,0),forwardAmount:0,rightAmount:0,upAmount:0,pitch:0,yaw:-90,look(t,e,n=1){return this.pitch=Math.min(90,Math.max(-90,this.pitch+e*n)),this.yaw=(this.yaw+t*n)%360,this},move(t,e=0,n=0,i=1){return this.forwardAmount+=t*i,this.rightAmount+=e*i,this.upAmount+=n*i,this},apply(e){let{position:i,forward:r,right:l,up:d,forwardAmount:p,rightAmount:c,upAmount:m,pitch:v,yaw:f}=this,y=ot(f),b=ot(v),g=Math.cos(y),E=Math.cos(b),_=Math.sin(y);u(r,function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}(r,g*E,Math.sin(b),_*E)),u(l,h(l,r,d));let w=s(),A=i[1];return a(w,r,p),o(i,i,w),a(w,l,c),o(i,i,w),n&&(i[1]=A),a(w,d,m),o(i,i,w),this.forwardAmount=0,this.rightAmount=0,this.upAmount=0,function(e,n,i,s){var r,o,a,u,h,l,d,p,c,m,v=n[0],f=n[1],y=n[2],b=s[0],g=s[1],E=s[2],_=i[0],w=i[1],A=i[2];Math.abs(v-_)<t&&Math.abs(f-w)<t&&Math.abs(y-A)<t?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(e):(d=v-_,p=f-w,c=y-A,r=g*(c*=m=1/Math.hypot(d,p,c))-E*(p*=m),o=E*(d*=m)-b*c,a=b*p-g*d,(m=Math.hypot(r,o,a))?(r*=m=1/m,o*=m,a*=m):(r=0,o=0,a=0),u=p*a-c*o,h=c*r-d*a,l=d*o-p*r,(m=Math.hypot(u,h,l))?(u*=m=1/m,h*=m,l*=m):(u=0,h=0,l=0),e[0]=r,e[1]=u,e[2]=d,e[3]=0,e[4]=o,e[5]=h,e[6]=p,e[7]=0,e[8]=a,e[9]=l,e[10]=c,e[11]=0,e[12]=-(r*v+o*f+a*y),e[13]=-(u*v+h*f+l*y),e[14]=-(d*v+p*f+c*y),e[15]=1)}(e,i,o(w,i,r),d),e}}}const St=Math.PI/3;class Ct{constructor(t,e=St,i=.1,s=1e3){this.canvas=t,this.fieldOfView=e,this.clippingPlane={near:i,far:s},this.projectionMatrix=n(),this.viewMatrix=n(),this.resize=this.resize.bind(this),t.addEventListener("resize",this.resize),this.resize()}destroy(){this.canvas.removeEventListener("resize",this.resize)}resize(){const t=this.canvas.width/this.canvas.height,{near:e,far:n}=this.clippingPlane;!function(t,e,n,i,s){var r,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=s&&s!==1/0?(r=1/(i-s),t[10]=(s+i)*r,t[14]=2*s*i*r):(t[10]=-1,t[14]=-2*i)}(this.projectionMatrix,this.fieldOfView,t,e,n)}}const Ft=1,Rt=2,Pt=3,Ut={NULL:0,DOWN:1,UP:2,MOVE:3,parse(t){if("string"!=typeof t)return Ut.NULL;switch(t.toLowerCase()){case"down":return Ut.DOWN;case"up":return Ut.UP;case"move":return Ut.MOVE;default:return Ut.NULL}}},Ot="*";class Dt{constructor(t,e){this.deviceName=t,this.eventTarget=e,this.listeners={}}destroy(){this.listeners={}}addInputListener(t,e){let n=this.listeners[t];n?n.push(e):(n=[e],this.listeners[t]=n)}removeInputListener(t,e){let n=this.listeners[t];n&&(n.indexOf(e),n.splice(e,1))}dispatchInput(t){const{keyCode:e}=t,n=this.listeners[e];let i=!1;if(n){for(let e of n)i|=e(t);return i}for(let e of this.listeners["*"])i|=e(t);return i}}class zt extends Dt{constructor(t,e={}){super("Keyboard",t);const{repeat:n=!1}=e;this.repeat=n,this._eventObject={target:t,deviceName:this.deviceName,keyCode:"",event:Ut.NULL,type:Ft,value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let t=this.eventTarget;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(t){if(t.repeat)return t.preventDefault(),t.stopPropagation(),!1;let e=this._eventObject;return e.keyCode=t.code,e.event=Ut.DOWN,e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInput(e)?(t.preventDefault(),t.stopPropagation(),!1):void 0}onKeyUp(t){let e=this._eventObject;if(e.keyCode=t.code,e.event=Ut.UP,e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInput(e))return t.preventDefault(),t.stopPropagation(),!1}}class Kt extends Dt{constructor(t,e={eventsOnFocus:!0}){super("Mouse",t),this.canvasTarget=t instanceof HTMLCanvasElement&&t||t.canvas||t.querySelector("canvas")||t.shadowRoot&&t.shadowRoot.querySelector("canvas"),this.eventsOnFocus=e.eventsOnFocus,this._downHasFocus=!1,this._eventObject={target:t,deviceName:this.deviceName,keyCode:"",event:Ut.NULL,type:Ft,value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:t,deviceName:this.deviceName,keyCode:"Position",event:Ut.MOVE,type:Rt,x:0,y:0,dx:0,dy:0},this._wheelObject={target:t,deviceName:this.deviceName,keyCode:"Wheel",event:Ut.MOVE,type:Pt,dx:0,dy:0,dz:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onMouseDown),t.addEventListener("wheel",this.onWheel),t.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let t=this.eventTarget;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("contextmenu",this.onMouseDown),t.removeEventListener("wheel",this.onWheel),t.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(t=!0){t?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(t){this._downHasFocus=!0;let e=this._eventObject;if(e.keyCode="Button"+t.button,e.event=Ut.DOWN,e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInput(e)&&document.activeElement===this.eventTarget)return t.preventDefault(),t.stopPropagation(),!1}onContextMenu(t){return t.preventDefault(),t.stopPropagation(),!1}onWheel(t){let e=this._wheelObject;switch(t.deltaMode){case WheelEvent.DOM_DELTA_LINE:e.dx=10*t.deltaX,e.dy=10*t.deltaY,e.dz=10*t.deltaZ;break;case WheelEvent.DOM_DELTA_PAGE:e.dx=100*t.deltaX,e.dy=100*t.deltaY,e.dz=100*t.deltaZ;break;case WheelEvent.DOM_DELTA_PIXEL:default:e.dx=t.deltaX,e.dy=t.deltaY,e.dz=t.deltaZ}if(this.dispatchInput(e))return t.preventDefault(),t.stopPropagation(),!1}onMouseUp(t){if(!this._downHasFocus)return;this._downHasFocus=!1;let e=this._eventObject;return e.keyCode="Button"+t.button,e.event=Ut.UP,e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInput(e)?(t.preventDefault(),t.stopPropagation(),!1):void 0}onMouseMove(t){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;const e=this.canvasTarget,{clientWidth:n,clientHeight:i}=e,s=e.getBoundingClientRect();let r=t.movementX/n,o=t.movementY/i,a=(t.clientX-s.left)/n,u=(t.clientY-s.top)/i,h=this._positionObject;h.x=a,h.y=u,h.dx=r,h.dy=o,this.dispatchInput(h)}}class Bt{constructor(){this.value=0}update(t){this.value=t}poll(){this.value=0}getEvent(t){return 0}getState(){return this.value}}class Ht extends Bt{constructor(){super(),this.delta=0,this.next={delta:0}}update(t,e){this.value=t,this.next.delta+=e}poll(){this.delta=this.next.delta,this.next.delta=0}getEvent(t){switch(t){case Ut.MOVE:return this.delta;default:return super.getEvent(t)}}}class Xt extends Bt{constructor(){super(),this.down=!1,this.up=!1,this.next={down:!1,up:!1}}update(t){t?this.next.down=!0:this.next.up=!0}poll(){const{up:t,down:e}=this.next;this.value?this.up&&!t&&(this.value=0):e&&(this.value=1),this.down=e,this.up=t,this.next.down=!1,this.next.up=!1}getEvent(t){switch(t){case Ut.DOWN:return 1&this.down;case Ut.UP:return 1&this.up;default:return super.getEvent(t)}}}const Wt=1,Vt=2;class Yt{static from(t){return new Yt([new zt(t),new Kt(t)])}constructor(t){this.onInputEvent=this.onInputEvent.bind(this);let e={},n={};for(let i of t){const t=i.deviceName;e[t]=i,n[t]={},i.addInputListener(Ot,this.onInputEvent)}this.devices=e,this.inputs=n,this.listeners={poll:[],update:[]}}destroy(){this.clear();for(let t in this.devices){let e=this.devices[t];e.removeInputListener(Ot,this.onInputEvent),e.destroy()}}addEventListener(t,e){t in this.listeners?this.listeners[t].unshift(e):this.listeners[t]=[e]}removeEventListener(t,e){if(t in this.listeners){let n=this.listeners[t],i=n.indexOf(e);n.splice(i,1)}}dispatchEvent(t,e){for(let n of this.listeners[t])n(e)}_dispatchInputEvent(t,e,n,i){this.dispatchEvent("input",{stage:t,deviceName:e,keyCode:n,input:i})}_dispatchPollEvent(){this.dispatchEvent("poll",{})}poll(){for(const t in this.inputs){const e=this.inputs[t];for(const n in e){let i=e[n];i.poll(),this._dispatchInputEvent(Vt,t,n,i)}}this._dispatchPollEvent()}onInputEvent(t){const e=t.deviceName;switch(t.type){case Ft:{const n=t.keyCode;let i=this.inputs[e][n];i&&(i.update(t.event===Ut.DOWN),this._dispatchInputEvent(Wt,e,n,i))}break;case Rt:{let n=this.inputs[e],i=n.PosX;i&&(i.update(t.x,t.dx),this._dispatchInputEvent(Wt,e,"PosX",i));let s=n.PosY;s&&(s.update(t.y,t.dy),this._dispatchInputEvent(Wt,e,"PosY",s))}break;case Pt:{let n=this.inputs[e],i=n.ScrollX;i&&(i.update(t.dx,t.dx),this._dispatchInputEvent(Wt,e,"ScrollX",i));let s=n.ScrollY;s&&(s.update(t.dy,t.dy),this._dispatchInputEvent(Wt,e,"ScrollY",s));let r=n.ScrollZ;r&&(r.update(t.dz,t.dz),this._dispatchInputEvent(Wt,e,"ScrollZ",r))}}}add(t,e){if(!(t in this.devices))throw new Error("Invalid device name - missing device with name in source.");let n=function(t,e){return"Mouse"===t&&("PosX"===e||"PosY"===e||"ScrollX"===e||"ScrollY"===e||"ScrollZ"===e)}(t,e)?new Ht:new Xt;return this.inputs[t][e]=n,this}delete(t,e){delete this.inputs[t][e]}get(t,e){return this.inputs[t][e]}has(t,e){return t in this.inputs&&e in this.inputs[t]}clear(){for(let t in this.devices)this.inputs[t]={}}}class jt{static createAdapter(t,e,n,i,s,r){return{target:t,adapterId:e,deviceName:n,keyCode:i,scale:s,eventCode:r}}constructor(){this.adapters={"*":qt()}}add(t){for(let e of t){const{deviceName:t,keyCode:n}=e;let i;t in this.adapters?i=this.adapters[t]:(i=qt(),this.adapters[t]=i),n in i?i[n].push(e):i[n]=[e]}}delete(t){for(let e of t){const{deviceName:t,keyCode:n}=e;if(t in this.adapters){let i=this.adapters[t];if(n in i){let t=i[n],s=t.indexOf(e);s>=0&&t.splice(s,1)}}}}clear(){for(let t in this.adapters)this.adapters[t]=qt()}poll(t,e,n){const i=this.findAdapters(t,e);for(let t of i){const e=t.eventCode;if(e===Ut.NULL){const{target:e,scale:i}=t,s=n.value*i;e.poll(s,t)}else{const{target:i,scale:s}=t,r=n.getEvent(e)*s;i.poll(r,t)}}return i.length>0}update(t,e,n){let i=!1;for(let s of this.findAdapters(t,e)){const t=s.eventCode;if(t!==Ut.NULL){const{target:e,scale:r}=s,o=n.getEvent(t)*r;e.update(o,s),i=!0}}return i}reset(t,e,n){let i=!1;for(let n of this.findAdapters(t,e))n.target.reset(),i=!0;return i}findAdapters(t,e){let n=[];if(t in this.adapters){let i=this.adapters[t];e in i&&n.push(...i[e]),n.push(...i["*"])}let i=this.adapters["*"];return e in i&&n.push(...i[e]),n.push(...i["*"]),n}}function qt(){return{[Ot]:[]}}class Gt extends Bt{constructor(t){super(),this.update=this.update.bind(this),Array.isArray(t)||(t=[t]);let e=[],n=0;for(let i of t){"string"==typeof i&&(i={key:i});const{key:t,scale:s=1,event:r="null"}=i,{deviceName:o,keyCode:a}=$t(t),u=Ut.parse(r),h=Number(s);let l=jt.createAdapter(this,n,o,a,h,u);e.push(l),++n}this.adapters=e,this.values=new Array(e.length).fill(0),this.next={values:new Array(e.length).fill(0),value:0}}poll(t,e){const n=e.adapterId;let i=this.values[n];this.values[n]=t,this.value=this.value-i+t,this.next.values[n]=0,this.next.value+=t-i}update(t,e){const n=e.adapterId;let i=this.next.values[n];this.next.values[n]=t,this.next.value+=t-i}reset(){this.values.fill(0),this.value=0,this.next.values.fill(0),this.next.value=0}}function $t(t){let e=t.indexOf(":");if(e>=0)return{deviceName:t.substring(0,e),keyCode:t.substring(e+1)};throw new Error("Invalid key string - missing device separator ':'.")}function Zt(t,e){return`${t}:${e}`}const Jt=Symbol("inputRefCounts");function Qt(t,e,n){const i=Zt(e,n);let s=t[Jt],r=s[i]+1||1;return s[i]=r,r}function te(t,e,n){const i=Zt(e,n);let s=t[Jt],r=s[i]-1||0;return s[i]=Math.max(r,0),r}const ee=Yt.from(document.querySelector("#main")),ne=(new class{constructor(t={}){const{disabled:e=!0}=t;this.inputSource=null,this._disabled=e,this._ignoreInput=e,this.adapters=new jt,this.inputs={},this.onSourceInput=this.onSourceInput.bind(this),this.onSourcePoll=this.onSourcePoll.bind(this)}get disabled(){return this._disabled}set disabled(t){this.toggle(!t)}setInputMap(t){return this._setupInputs(this.inputSource,t),this}attach(t){return this._setupInputs(t,null),this.toggle(!0),this}detach(){return this.toggle(!1),this._setupInputs(null,null),this}_setupInputs(t,e){const n=this.disabled;this.disabled=!0;const i=this.inputSource,s=this.inputs,r=i!==t&&i,o=this.inputs&&e;if(r||o){r&&(i.removeEventListener("poll",this.onSourcePoll),i.removeEventListener("input",this.onSourceInput));for(let t in s){let{adapters:e}=s[t];for(let t of e){const{deviceName:e,keyCode:n}=t;0===te(i,e,n)&&i.delete(e,n)}}o&&(this.adapters.clear(),this.inputs={})}if(e){let t={};for(let n in e){let i=e[n],s=new Gt(i),r=s.adapters;this.adapters.add(r),t[n]=s}this.inputs=t}if(t){!function(t){Jt in t||(t[Jt]={})}(t);const e=this.inputs;for(let n in e){let{adapters:i}=e[n];for(let e of i){const{deviceName:n,keyCode:i}=e;1===Qt(t,n,i)&&t.add(n,i)}}this.inputSource!==t&&(t.addEventListener("poll",this.onSourcePoll),t.addEventListener("input",this.onSourceInput),this.inputSource=t)}this.disabled=n}onSourceInput(t){if(t.consumed||this._ignoreInput){const{deviceName:e,keyCode:n,input:i}=t;this.adapters.reset(e,n,i)}else{const{stage:e,deviceName:n,keyCode:i,input:s}=t;switch(e){case Vt:this.adapters.poll(n,i,s);break;case Wt:this.adapters.update(n,i,s)}t.consumed=!0}}onSourcePoll(t){this._ignoreInput!==this.disabled&&(this._ignoreInput=this.disabled)}toggle(t=this._disabled){if(t){if(!this.inputSource)throw new Error("Input source must be set before enabling input context.");Object.keys(this.inputs).length<=0&&console.warn("No inputs found for enabled input context - did you forget to setInputMap()?")}return this._disabled=!t,this}getInput(t){return this.inputs[t]}getInputValue(t){return t in this.inputs?this.inputs[t].value:0}}).setInputMap({PointerX:{key:"Mouse:PosX",scale:1},PointerY:{key:"Mouse:PosY",scale:1},PointerMovementX:{key:"Mouse:PosX",event:"move"},PointerMovementY:{key:"Mouse:PosY",event:"move"},PointerDown:[{key:"Mouse:Button0",scale:1},{key:"Mouse:Button2",scale:1}],MoveLeft:[{key:"Keyboard:ArrowLeft",scale:1},{key:"Keyboard:KeyA",scale:1}],MoveRight:[{key:"Keyboard:ArrowLeft",scale:1},{key:"Keyboard:KeyD",scale:1}],MoveUp:[{key:"Keyboard:ArrowUp",scale:1},{key:"Keyboard:KeyW",scale:1}],MoveDown:[{key:"Keyboard:ArrowDown",scale:1},{key:"Keyboard:KeyS",scale:1}]}).attach(ee);document.addEventListener("DOMContentLoaded",(async function(){const t=document.querySelector("display-port"),e=ne;t.addEventListener("focus",()=>{document.pointerLockElement!==t&&t.requestPointerLock()}),document.addEventListener("pointerlockchange",()=>{document.pointerLockElement!==t&&t.blur()});const s=t.canvas.getContext("webgl");if(!s)throw new Error("Your browser does not support WebGL.");s.enable(s.DEPTH_TEST);const o={mainVertexShaderSource:await et.loadText("main.vert"),mainFragmentShaderSource:await et.loadText("main.frag"),cubeObj:await st.loadOBJ("cube.obj")},a=function(t,e){return new It(t,e)}(s,function(t){return new Lt(t)}(s).shader(s.VERTEX_SHADER,o.mainVertexShaderSource).shader(s.FRAGMENT_SHADER,o.mainFragmentShaderSource).link()),u=xt(s,s.FLOAT,o.cubeObj.positions),h=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW);const l=xt(s,s.UNSIGNED_SHORT,o.cubeObj.indices),d=s.createBuffer();s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,d),s.bufferData(s.ELEMENT_ARRAY_BUFFER,l,s.STATIC_DRAW);const m=function(t,e=St,n=.1,i=1e3){return new Ct(t,e,n,i)}(s.canvas),v=Mt({xzlock:!0});function f(t=0,e=0,s=0,o=1,a=1,u=1){return{transform:i(n(),c(),r(t,e,s),r(o,a,u)),color:p(Math.random(),Math.random(),Math.random(),1)}}let y=[f(-1,-1,-1),f(1,1,1)];t.addEventListener("frame",t=>{t.detail.deltaTime;e.inputSource.poll();const n=e.getInputValue("PointerMovementX"),i=e.getInputValue("PointerMovementY"),r=e.getInputValue("MoveRight")-e.getInputValue("MoveLeft"),o=e.getInputValue("MoveUp")-e.getInputValue("MoveDown");s.viewport(0,0,s.canvas.width,s.canvas.height),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT);let u=a,p=m;v.look(100*n,60*-i),v.move(o,r),v.apply(p.viewMatrix);const c=u.bind(s);c.uniform("u_projection",p.projectionMatrix),c.uniform("u_view",p.viewMatrix),c.attribute("a_position",h,3);for(let t of y)c.uniform("u_model",t.transform),c.uniform("u_color",t.color),c.draw(s,s.TRIANGLES,0,l.length,d)})}))}();
