!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).milque={})}(this,(function(t){"use strict";function e(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e}function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return i.exec(t).slice(1)};function s(){for(var t="",e=!1,i=arguments.length-1;i>=-1&&!e;i--){var r=i>=0?arguments[i]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=n(f(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function o(t){var e=a(t),i="/"===_(t,-1);return(t=n(f(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&i&&(t+="/"),(e?"/":"")+t}function a(t){return"/"===t.charAt(0)}function u(){var t=Array.prototype.slice.call(arguments,0);return o(f(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))}function l(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=s(t).substr(1),e=s(e).substr(1);for(var i=n(t.split("/")),r=n(e.split("/")),o=Math.min(i.length,r.length),a=o,u=0;u<o;u++)if(i[u]!==r[u]){a=u;break}var l=[];for(u=a;u<i.length;u++)l.push("..");return(l=l.concat(r.slice(a))).join("/")}function h(t){var e=r(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."}function c(t,e){var n=r(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function d(t){return r(t)[3]}var p={extname:d,basename:c,dirname:h,sep:"/",delimiter:":",relative:l,join:u,isAbsolute:a,normalize:o,resolve:s};function f(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var _="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},g=e(Object.freeze({__proto__:null,resolve:s,normalize:o,isAbsolute:a,join:u,relative:l,sep:"/",delimiter:":",dirname:h,basename:c,extname:d,default:p})),m={};const v=g,A="[^\\\\/]",E="\\.",b="\\/",y="[^/]",w="(?:\\/|$)",T="(?:^|\\/)",S="\\.{1,2}(?:\\/|$)",x={DOT_LITERAL:E,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:b,ONE_CHAR:"(?=.)",QMARK:y,END_ANCHOR:w,DOTS_SLASH:S,NO_DOT:"(?!\\.)",NO_DOTS:`(?!(?:^|\\/)${S})`,NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:`(?!${S})`,QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:T},R={...x,SLASH_LITERAL:"[\\\\/]",QMARK:A,STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};var C={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:v.sep,extglobChars:t=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:t=>!0===t?R:x};!function(t){const e=g,n="win32"===process.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:r,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:o}=C;t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),t.hasRegexChars=t=>s.test(t),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=t=>t.replace(o,"\\$1"),t.toPosixSlashes=t=>t.replace(i,"/"),t.removeBackslashes=t=>t.replace(r,(t=>"\\"===t?"":t)),t.supportsLookbehinds=()=>{const t=process.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=t=>t&&"boolean"==typeof t.windows?t.windows:!0===n||"\\"===e.sep,t.escapeLast=(e,n,i)=>{const r=e.lastIndexOf(n,i);return-1===r?e:"\\"===e[r-1]?t.escapeLast(e,n,r-1):`${e.slice(0,r)}\\${e.slice(r)}`},t.removePrefix=(t,e={})=>{let n=t;return n.startsWith("./")&&(n=n.slice(2),e.prefix="./"),n},t.wrapOutput=(t,e={},n={})=>{let i=`${n.contains?"":"^"}(?:${t})${n.contains?"":"$"}`;return!0===e.negated&&(i=`(?:^(?!${i}).*$)`),i}}(m);const L=m,{CHAR_ASTERISK:O,CHAR_AT:M,CHAR_BACKWARD_SLASH:I,CHAR_COMMA:N,CHAR_DOT:B,CHAR_EXCLAMATION_MARK:D,CHAR_FORWARD_SLASH:P,CHAR_LEFT_CURLY_BRACE:k,CHAR_LEFT_PARENTHESES:H,CHAR_LEFT_SQUARE_BRACKET:F,CHAR_PLUS:U,CHAR_QUESTION_MARK:$,CHAR_RIGHT_CURLY_BRACE:K,CHAR_RIGHT_PARENTHESES:G,CHAR_RIGHT_SQUARE_BRACKET:j}=C,z=t=>t===P||t===I,V=t=>{!0!==t.isPrefix&&(t.depth=t.isGlobstar?1/0:1)};var Y=(t,e)=>{const n=e||{},i=t.length-1,r=!0===n.parts||!0===n.scanToEnd,s=[],o=[],a=[];let u,l,h=t,c=-1,d=0,p=0,f=!1,_=!1,g=!1,m=!1,v=!1,A=!1,E=!1,b=!1,y=!1,w=!1,T=0,S={value:"",depth:0,isGlob:!1};const x=()=>c>=i,R=()=>(u=l,h.charCodeAt(++c));for(;c<i;){let t;if(l=R(),l!==I){if(!0===A||l===k){for(T++;!0!==x()&&(l=R());)if(l!==I)if(l!==k){if(!0!==A&&l===B&&(l=R())===B){if(f=S.isBrace=!0,g=S.isGlob=!0,w=!0,!0===r)continue;break}if(!0!==A&&l===N){if(f=S.isBrace=!0,g=S.isGlob=!0,w=!0,!0===r)continue;break}if(l===K&&(T--,0===T)){A=!1,f=S.isBrace=!0,w=!0;break}}else T++;else E=S.backslashes=!0,R();if(!0===r)continue;break}if(l!==P){if(!0!==n.noext){if(!0===(l===U||l===M||l===O||l===$||l===D)&&h.charCodeAt(c+1)===H){if(g=S.isGlob=!0,m=S.isExtglob=!0,w=!0,l===D&&c===d&&(y=!0),!0===r){for(;!0!==x()&&(l=R());)if(l!==I){if(l===G){g=S.isGlob=!0,w=!0;break}}else E=S.backslashes=!0,l=R();continue}break}}if(l===O){if(u===O&&(v=S.isGlobstar=!0),g=S.isGlob=!0,w=!0,!0===r)continue;break}if(l===$){if(g=S.isGlob=!0,w=!0,!0===r)continue;break}if(l===F){for(;!0!==x()&&(t=R());)if(t!==I){if(t===j){_=S.isBracket=!0,g=S.isGlob=!0,w=!0;break}}else E=S.backslashes=!0,R();if(!0===r)continue;break}if(!0===n.nonegate||l!==D||c!==d){if(!0!==n.noparen&&l===H){if(g=S.isGlob=!0,!0===r){for(;!0!==x()&&(l=R());)if(l!==H){if(l===G){w=!0;break}}else E=S.backslashes=!0,l=R();continue}break}if(!0===g){if(w=!0,!0===r)continue;break}}else b=S.negated=!0,d++}else{if(s.push(c),o.push(S),S={value:"",depth:0,isGlob:!1},!0===w)continue;if(u===B&&c===d+1){d+=2;continue}p=c+1}}else E=S.backslashes=!0,l=R(),l===k&&(A=!0)}!0===n.noext&&(m=!1,g=!1);let C=h,Y="",W="";d>0&&(Y=h.slice(0,d),h=h.slice(d),p-=d),C&&!0===g&&p>0?(C=h.slice(0,p),W=h.slice(p)):!0===g?(C="",W=h):C=h,C&&""!==C&&"/"!==C&&C!==h&&z(C.charCodeAt(C.length-1))&&(C=C.slice(0,-1)),!0===n.unescape&&(W&&(W=L.removeBackslashes(W)),C&&!0===E&&(C=L.removeBackslashes(C)));const q={prefix:Y,input:t,start:d,base:C,glob:W,isBrace:f,isBracket:_,isGlob:g,isExtglob:m,isGlobstar:v,negated:b,negatedExtglob:y};if(!0===n.tokens&&(q.maxDepth=0,z(l)||o.push(S),q.tokens=o),!0===n.parts||!0===n.tokens){let e;for(let i=0;i<s.length;i++){const r=e?e+1:d,u=s[i],l=t.slice(r,u);n.tokens&&(0===i&&0!==d?(o[i].isPrefix=!0,o[i].value=Y):o[i].value=l,V(o[i]),q.maxDepth+=o[i].depth),0===i&&""===l||a.push(l),e=u}if(e&&e+1<t.length){const i=t.slice(e+1);a.push(i),n.tokens&&(o[o.length-1].value=i,V(o[o.length-1]),q.maxDepth+=o[o.length-1].depth)}q.slashes=s,q.parts=a}return q};const W=C,q=m,{MAX_LENGTH:X,POSIX_REGEX_SOURCE:Q,REGEX_NON_SPECIAL_CHARS:Z,REGEX_SPECIAL_CHARS_BACKREF:J,REPLACEMENTS:tt}=W,et=(t,e)=>{if("function"==typeof e.expandRange)return e.expandRange(...t,e);t.sort();const n=`[${t.join("-")}]`;try{new RegExp(n)}catch(e){return t.map((t=>q.escapeRegex(t))).join("..")}return n},nt=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,it=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");t=tt[t]||t;const n={...e},i="number"==typeof n.maxLength?Math.min(X,n.maxLength):X;let r=t.length;if(r>i)throw new SyntaxError(`Input length: ${r}, exceeds maximum allowed length: ${i}`);const s={type:"bos",value:"",output:n.prepend||""},o=[s],a=n.capture?"":"?:",u=q.isWindows(e),l=W.globChars(u),h=W.extglobChars(l),{DOT_LITERAL:c,PLUS_LITERAL:d,SLASH_LITERAL:p,ONE_CHAR:f,DOTS_SLASH:_,NO_DOT:g,NO_DOT_SLASH:m,NO_DOTS_SLASH:v,QMARK:A,QMARK_NO_DOT:E,STAR:b,START_ANCHOR:y}=l,w=t=>`(${a}(?:(?!${y}${t.dot?_:c}).)*?)`,T=n.dot?"":g,S=n.dot?A:E;let x=!0===n.bash?w(n):b;n.capture&&(x=`(${x})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const R={input:t,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};t=q.removePrefix(t,R),r=t.length;const C=[],L=[],O=[];let M,I=s;const N=()=>R.index===r-1,B=R.peek=(e=1)=>t[R.index+e],D=R.advance=()=>t[++R.index]||"",P=()=>t.slice(R.index+1),k=(t="",e=0)=>{R.consumed+=t,R.index+=e},H=t=>{R.output+=null!=t.output?t.output:t.value,k(t.value)},F=()=>{let t=1;for(;"!"===B()&&("("!==B(2)||"?"===B(3));)D(),R.start++,t++;return t%2!=0&&(R.negated=!0,R.start++,!0)},U=t=>{R[t]++,O.push(t)},$=t=>{R[t]--,O.pop()},K=t=>{if("globstar"===I.type){const e=R.braces>0&&("comma"===t.type||"brace"===t.type),n=!0===t.extglob||C.length&&("pipe"===t.type||"paren"===t.type);"slash"===t.type||"paren"===t.type||e||n||(R.output=R.output.slice(0,-I.output.length),I.type="star",I.value="*",I.output=x,R.output+=I.output)}if(C.length&&"paren"!==t.type&&(C[C.length-1].inner+=t.value),(t.value||t.output)&&H(t),I&&"text"===I.type&&"text"===t.type)return I.value+=t.value,void(I.output=(I.output||"")+t.value);t.prev=I,o.push(t),I=t},G=(t,e)=>{const i={...h[e],conditions:1,inner:""};i.prev=I,i.parens=R.parens,i.output=R.output;const r=(n.capture?"(":"")+i.open;U("parens"),K({type:t,value:e,output:R.output?"":f}),K({type:"paren",extglob:!0,value:D(),output:r}),C.push(i)},j=t=>{let e,i=t.close+(n.capture?")":"");if("negate"===t.type){let r=x;t.inner&&t.inner.length>1&&t.inner.includes("/")&&(r=w(n)),(r!==x||N()||/^\)+$/.test(P()))&&(i=t.close=`)$))${r}`),t.inner.includes("*")&&(e=P())&&/^\.[^\\/.]+$/.test(e)&&(i=t.close=`)${e})${r})`),"bos"===t.prev.type&&(R.negatedExtglob=!0)}K({type:"paren",extglob:!0,value:M,output:i}),$("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(t)){let i=!1,r=t.replace(J,((t,e,n,r,s,o)=>"\\"===r?(i=!0,t):"?"===r?e?e+r+(s?A.repeat(s.length):""):0===o?S+(s?A.repeat(s.length):""):A.repeat(n.length):"."===r?c.repeat(n.length):"*"===r?e?e+r+(s?x:""):x:e?t:`\\${t}`));return!0===i&&(r=!0===n.unescape?r.replace(/\\/g,""):r.replace(/\\+/g,(t=>t.length%2==0?"\\\\":t?"\\":""))),r===t&&!0===n.contains?(R.output=t,R):(R.output=q.wrapOutput(r,R,e),R)}for(;!N();){if(M=D(),"\0"===M)continue;if("\\"===M){const t=B();if("/"===t&&!0!==n.bash)continue;if("."===t||";"===t)continue;if(!t){M+="\\",K({type:"text",value:M});continue}const e=/^\\+/.exec(P());let i=0;if(e&&e[0].length>2&&(i=e[0].length,R.index+=i,i%2!=0&&(M+="\\")),!0===n.unescape?M=D():M+=D(),0===R.brackets){K({type:"text",value:M});continue}}if(R.brackets>0&&("]"!==M||"["===I.value||"[^"===I.value)){if(!1!==n.posix&&":"===M){const t=I.value.slice(1);if(t.includes("[")&&(I.posix=!0,t.includes(":"))){const t=I.value.lastIndexOf("["),e=I.value.slice(0,t),n=I.value.slice(t+2),i=Q[n];if(i){I.value=e+i,R.backtrack=!0,D(),s.output||1!==o.indexOf(I)||(s.output=f);continue}}}("["===M&&":"!==B()||"-"===M&&"]"===B())&&(M=`\\${M}`),"]"!==M||"["!==I.value&&"[^"!==I.value||(M=`\\${M}`),!0===n.posix&&"!"===M&&"["===I.value&&(M="^"),I.value+=M,H({value:M});continue}if(1===R.quotes&&'"'!==M){M=q.escapeRegex(M),I.value+=M,H({value:M});continue}if('"'===M){R.quotes=1===R.quotes?0:1,!0===n.keepQuotes&&K({type:"text",value:M});continue}if("("===M){U("parens"),K({type:"paren",value:M});continue}if(")"===M){if(0===R.parens&&!0===n.strictBrackets)throw new SyntaxError(nt("opening","("));const t=C[C.length-1];if(t&&R.parens===t.parens+1){j(C.pop());continue}K({type:"paren",value:M,output:R.parens?")":"\\)"}),$("parens");continue}if("["===M){if(!0!==n.nobracket&&P().includes("]"))U("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(nt("closing","]"));M=`\\${M}`}K({type:"bracket",value:M});continue}if("]"===M){if(!0===n.nobracket||I&&"bracket"===I.type&&1===I.value.length){K({type:"text",value:M,output:`\\${M}`});continue}if(0===R.brackets){if(!0===n.strictBrackets)throw new SyntaxError(nt("opening","["));K({type:"text",value:M,output:`\\${M}`});continue}$("brackets");const t=I.value.slice(1);if(!0===I.posix||"^"!==t[0]||t.includes("/")||(M=`/${M}`),I.value+=M,H({value:M}),!1===n.literalBrackets||q.hasRegexChars(t))continue;const e=q.escapeRegex(I.value);if(R.output=R.output.slice(0,-I.value.length),!0===n.literalBrackets){R.output+=e,I.value=e;continue}I.value=`(${a}${e}|${I.value})`,R.output+=I.value;continue}if("{"===M&&!0!==n.nobrace){U("braces");const t={type:"brace",value:M,output:"(",outputIndex:R.output.length,tokensIndex:R.tokens.length};L.push(t),K(t);continue}if("}"===M){const t=L[L.length-1];if(!0===n.nobrace||!t){K({type:"text",value:M,output:M});continue}let e=")";if(!0===t.dots){const t=o.slice(),i=[];for(let e=t.length-1;e>=0&&(o.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&i.unshift(t[e].value);e=et(i,n),R.backtrack=!0}if(!0!==t.comma&&!0!==t.dots){const n=R.output.slice(0,t.outputIndex),i=R.tokens.slice(t.tokensIndex);t.value=t.output="\\{",M=e="\\}",R.output=n;for(const t of i)R.output+=t.output||t.value}K({type:"brace",value:M,output:e}),$("braces"),L.pop();continue}if("|"===M){C.length>0&&C[C.length-1].conditions++,K({type:"text",value:M});continue}if(","===M){let t=M;const e=L[L.length-1];e&&"braces"===O[O.length-1]&&(e.comma=!0,t="|"),K({type:"comma",value:M,output:t});continue}if("/"===M){if("dot"===I.type&&R.index===R.start+1){R.start=R.index+1,R.consumed="",R.output="",o.pop(),I=s;continue}K({type:"slash",value:M,output:p});continue}if("."===M){if(R.braces>0&&"dot"===I.type){"."===I.value&&(I.output=c);const t=L[L.length-1];I.type="dots",I.output+=M,I.value+=M,t.dots=!0;continue}if(R.braces+R.parens===0&&"bos"!==I.type&&"slash"!==I.type){K({type:"text",value:M,output:c});continue}K({type:"dot",value:M,output:c});continue}if("?"===M){if(!(I&&"("===I.value)&&!0!==n.noextglob&&"("===B()&&"?"!==B(2)){G("qmark",M);continue}if(I&&"paren"===I.type){const t=B();let e=M;if("<"===t&&!q.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===I.value&&!/[!=<:]/.test(t)||"<"===t&&!/<([!=]|\w+>)/.test(P()))&&(e=`\\${M}`),K({type:"text",value:M,output:e});continue}if(!0!==n.dot&&("slash"===I.type||"bos"===I.type)){K({type:"qmark",value:M,output:E});continue}K({type:"qmark",value:M,output:A});continue}if("!"===M){if(!0!==n.noextglob&&"("===B()&&("?"!==B(2)||!/[!=<:]/.test(B(3)))){G("negate",M);continue}if(!0!==n.nonegate&&0===R.index){F();continue}}if("+"===M){if(!0!==n.noextglob&&"("===B()&&"?"!==B(2)){G("plus",M);continue}if(I&&"("===I.value||!1===n.regex){K({type:"plus",value:M,output:d});continue}if(I&&("bracket"===I.type||"paren"===I.type||"brace"===I.type)||R.parens>0){K({type:"plus",value:M});continue}K({type:"plus",value:d});continue}if("@"===M){if(!0!==n.noextglob&&"("===B()&&"?"!==B(2)){K({type:"at",extglob:!0,value:M,output:""});continue}K({type:"text",value:M});continue}if("*"!==M){"$"!==M&&"^"!==M||(M=`\\${M}`);const t=Z.exec(P());t&&(M+=t[0],R.index+=t[0].length),K({type:"text",value:M});continue}if(I&&("globstar"===I.type||!0===I.star)){I.type="star",I.star=!0,I.value+=M,I.output=x,R.backtrack=!0,R.globstar=!0,k(M);continue}let e=P();if(!0!==n.noextglob&&/^\([^?]/.test(e)){G("star",M);continue}if("star"===I.type){if(!0===n.noglobstar){k(M);continue}const i=I.prev,r=i.prev,s="slash"===i.type||"bos"===i.type,o=r&&("star"===r.type||"globstar"===r.type);if(!0===n.bash&&(!s||e[0]&&"/"!==e[0])){K({type:"star",value:M,output:""});continue}const a=R.braces>0&&("comma"===i.type||"brace"===i.type),u=C.length&&("pipe"===i.type||"paren"===i.type);if(!s&&"paren"!==i.type&&!a&&!u){K({type:"star",value:M,output:""});continue}for(;"/**"===e.slice(0,3);){const n=t[R.index+4];if(n&&"/"!==n)break;e=e.slice(3),k("/**",3)}if("bos"===i.type&&N()){I.type="globstar",I.value+=M,I.output=w(n),R.output=I.output,R.globstar=!0,k(M);continue}if("slash"===i.type&&"bos"!==i.prev.type&&!o&&N()){R.output=R.output.slice(0,-(i.output+I.output).length),i.output=`(?:${i.output}`,I.type="globstar",I.output=w(n)+(n.strictSlashes?")":"|$)"),I.value+=M,R.globstar=!0,R.output+=i.output+I.output,k(M);continue}if("slash"===i.type&&"bos"!==i.prev.type&&"/"===e[0]){const t=void 0!==e[1]?"|$":"";R.output=R.output.slice(0,-(i.output+I.output).length),i.output=`(?:${i.output}`,I.type="globstar",I.output=`${w(n)}${p}|${p}${t})`,I.value+=M,R.output+=i.output+I.output,R.globstar=!0,k(M+D()),K({type:"slash",value:"/",output:""});continue}if("bos"===i.type&&"/"===e[0]){I.type="globstar",I.value+=M,I.output=`(?:^|${p}|${w(n)}${p})`,R.output=I.output,R.globstar=!0,k(M+D()),K({type:"slash",value:"/",output:""});continue}R.output=R.output.slice(0,-I.output.length),I.type="globstar",I.output=w(n),I.value+=M,R.output+=I.output,R.globstar=!0,k(M);continue}const i={type:"star",value:M,output:x};!0!==n.bash?!I||"bracket"!==I.type&&"paren"!==I.type||!0!==n.regex?(R.index!==R.start&&"slash"!==I.type&&"dot"!==I.type||("dot"===I.type?(R.output+=m,I.output+=m):!0===n.dot?(R.output+=v,I.output+=v):(R.output+=T,I.output+=T),"*"!==B()&&(R.output+=f,I.output+=f)),K(i)):(i.output=M,K(i)):(i.output=".*?","bos"!==I.type&&"slash"!==I.type||(i.output=T+i.output),K(i))}for(;R.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(nt("closing","]"));R.output=q.escapeLast(R.output,"["),$("brackets")}for(;R.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(nt("closing",")"));R.output=q.escapeLast(R.output,"("),$("parens")}for(;R.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(nt("closing","}"));R.output=q.escapeLast(R.output,"{"),$("braces")}if(!0===n.strictSlashes||"star"!==I.type&&"bracket"!==I.type||K({type:"maybe_slash",value:"",output:`${p}?`}),!0===R.backtrack){R.output="";for(const t of R.tokens)R.output+=null!=t.output?t.output:t.value,t.suffix&&(R.output+=t.suffix)}return R};it.fastpaths=(t,e)=>{const n={...e},i="number"==typeof n.maxLength?Math.min(X,n.maxLength):X,r=t.length;if(r>i)throw new SyntaxError(`Input length: ${r}, exceeds maximum allowed length: ${i}`);t=tt[t]||t;const s=q.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:l,NO_DOT:h,NO_DOTS:c,NO_DOTS_SLASH:d,STAR:p,START_ANCHOR:f}=W.globChars(s),_=n.dot?c:h,g=n.dot?d:h,m=n.capture?"":"?:";let v=!0===n.bash?".*?":p;n.capture&&(v=`(${v})`);const A=t=>!0===t.noglobstar?v:`(${m}(?:(?!${f}${t.dot?l:o}).)*?)`,E=t=>{switch(t){case"*":return`${_}${u}${v}`;case".*":return`${o}${u}${v}`;case"*.*":return`${_}${v}${o}${u}${v}`;case"*/*":return`${_}${v}${a}${u}${g}${v}`;case"**":return _+A(n);case"**/*":return`(?:${_}${A(n)}${a})?${g}${u}${v}`;case"**/*.*":return`(?:${_}${A(n)}${a})?${g}${v}${o}${u}${v}`;case"**/.*":return`(?:${_}${A(n)}${a})?${o}${u}${v}`;default:{const e=/^(.*?)\.(\w+)$/.exec(t);if(!e)return;const n=E(e[1]);if(!n)return;return n+o+e[2]}}},b=q.removePrefix(t,{negated:!1,prefix:""});let y=E(b);return y&&!0!==n.strictSlashes&&(y+=`${a}?`),y};const rt=g,st=Y,ot=it,at=m,ut=C,lt=(t,e,n=!1)=>{if(Array.isArray(t)){const i=t.map((t=>lt(t,e,n)));return t=>{for(const e of i){const n=e(t);if(n)return n}return!1}}const i=(r=t)&&"object"==typeof r&&!Array.isArray(r)&&t.tokens&&t.input;var r;if(""===t||"string"!=typeof t&&!i)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},o=at.isWindows(e),a=i?lt.compileRe(t,e):lt.makeRe(t,e,!1,!0),u=a.state;delete a.state;let l=()=>!1;if(s.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};l=lt(s.ignore,t,n)}const h=(n,i=!1)=>{const{isMatch:r,match:h,output:c}=lt.test(n,a,e,{glob:t,posix:o}),d={glob:t,state:u,regex:a,posix:o,input:n,output:c,match:h,isMatch:r};return"function"==typeof s.onResult&&s.onResult(d),!1===r?(d.isMatch=!1,!!i&&d):l(n)?("function"==typeof s.onIgnore&&s.onIgnore(d),d.isMatch=!1,!!i&&d):("function"==typeof s.onMatch&&s.onMatch(d),!i||d)};return n&&(h.state=u),h};lt.test=(t,e,n,{glob:i,posix:r}={})=>{if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(""===t)return{isMatch:!1,output:""};const s=n||{},o=s.format||(r?at.toPosixSlashes:null);let a=t===i,u=a&&o?o(t):t;return!1===a&&(u=o?o(t):t,a=u===i),!1!==a&&!0!==s.capture||(a=!0===s.matchBase||!0===s.basename?lt.matchBase(t,e,n,r):e.exec(u)),{isMatch:Boolean(a),match:a,output:u}},lt.matchBase=(t,e,n,i=at.isWindows(n))=>(e instanceof RegExp?e:lt.makeRe(e,n)).test(rt.basename(t)),lt.isMatch=(t,e,n)=>lt(e,n)(t),lt.parse=(t,e)=>Array.isArray(t)?t.map((t=>lt.parse(t,e))):ot(t,{...e,fastpaths:!1}),lt.scan=(t,e)=>st(t,e),lt.compileRe=(t,e,n=!1,i=!1)=>{if(!0===n)return t.output;const r=e||{},s=r.contains?"":"^",o=r.contains?"":"$";let a=`${s}(?:${t.output})${o}`;t&&!0===t.negated&&(a=`^(?!${a}).*$`);const u=lt.toRegex(a,e);return!0===i&&(u.state=t),u},lt.makeRe=(t,e={},n=!1,i=!1)=>{if(!t||"string"!=typeof t)throw new TypeError("Expected a non-empty string");let r={negated:!1,fastpaths:!0};return!1===e.fastpaths||"."!==t[0]&&"*"!==t[0]||(r.output=ot.fastpaths(t,e)),r.output||(r=ot(t,e)),lt.compileRe(r,e,n,i)},lt.toRegex=(t,e)=>{try{const n=e||{};return new RegExp(t,n.flags||(n.nocase?"i":""))}catch(t){if(e&&!0===e.debug)throw t;return/$^/}},lt.constants=ut;var ht=lt,ct={},dt=Uint8Array,pt=Uint16Array,ft=Uint32Array,_t=new dt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gt=new dt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mt=new dt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vt=function(t,e){for(var n=new pt(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new ft(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},At=vt(_t,2),Et=At[0],bt=At[1];Et[28]=258,bt[258]=28;for(var yt=vt(gt,0)[0],wt=new pt(32768),Tt=0;Tt<32768;++Tt){var St=(43690&Tt)>>>1|(21845&Tt)<<1;St=(61680&(St=(52428&St)>>>2|(13107&St)<<2))>>>4|(3855&St)<<4,wt[Tt]=((65280&St)>>>8|(255&St)<<8)>>>1}var xt=function(t,e,n){for(var i=t.length,r=0,s=new pt(e);r<i;++r)++s[t[r]-1];var o,a=new pt(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(n){o=new pt(1<<e);var u=15-e;for(r=0;r<i;++r)if(t[r])for(var l=r<<4|t[r],h=e-t[r],c=a[t[r]-1]++<<h,d=c|(1<<h)-1;c<=d;++c)o[wt[c]>>>u]=l}else for(o=new pt(i),r=0;r<i;++r)t[r]&&(o[r]=wt[a[t[r]-1]++]>>>15-t[r]);return o},Rt=new dt(288);for(Tt=0;Tt<144;++Tt)Rt[Tt]=8;for(Tt=144;Tt<256;++Tt)Rt[Tt]=9;for(Tt=256;Tt<280;++Tt)Rt[Tt]=7;for(Tt=280;Tt<288;++Tt)Rt[Tt]=8;var Ct=new dt(32);for(Tt=0;Tt<32;++Tt)Ct[Tt]=5;var Lt=xt(Rt,9,1),Ot=xt(Ct,5,1),Mt=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},It=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&n},Nt=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Bt=function(t){return(t/8|0)+(7&t&&1)},Dt=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var i=new(t instanceof pt?pt:t instanceof ft?ft:dt)(n-e);return i.set(t.subarray(e,n)),i},Pt=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new dt(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new dt(3*i));var o=function(t){var n=e.length;if(t>n){var i=new dt(Math.max(2*n,t));i.set(e),e=i}},a=n.f||0,u=n.p||0,l=n.b||0,h=n.l,c=n.d,d=n.m,p=n.n,f=8*i;do{if(!h){n.f=a=It(t,u,1);var _=It(t,u+1,3);if(u+=3,!_){var g=t[(R=Bt(u)+4)-4]|t[R-3]<<8,m=R+g;if(m>i){if(s)throw"unexpected EOF";break}r&&o(l+g),e.set(t.subarray(R,m),l),n.b=l+=g,n.p=u=8*m;continue}if(1==_)h=Lt,c=Ot,d=9,p=5;else{if(2!=_)throw"invalid block type";var v=It(t,u,31)+257,A=It(t,u+10,15)+4,E=v+It(t,u+5,31)+1;u+=14;for(var b=new dt(E),y=new dt(19),w=0;w<A;++w)y[mt[w]]=It(t,u+3*w,7);u+=3*A;var T=Mt(y),S=(1<<T)-1,x=xt(y,T,1);for(w=0;w<E;){var R,C=x[It(t,u,S)];if(u+=15&C,(R=C>>>4)<16)b[w++]=R;else{var L=0,O=0;for(16==R?(O=3+It(t,u,3),u+=2,L=b[w-1]):17==R?(O=3+It(t,u,7),u+=3):18==R&&(O=11+It(t,u,127),u+=7);O--;)b[w++]=L}}var M=b.subarray(0,v),I=b.subarray(v);d=Mt(M),p=Mt(I),h=xt(M,d,1),c=xt(I,p,1)}if(u>f){if(s)throw"unexpected EOF";break}}r&&o(l+131072);for(var N=(1<<d)-1,B=(1<<p)-1,D=u;;D=u){var P=(L=h[Nt(t,u)&N])>>>4;if((u+=15&L)>f){if(s)throw"unexpected EOF";break}if(!L)throw"invalid length/literal";if(P<256)e[l++]=P;else{if(256==P){D=u,h=null;break}var k=P-254;if(P>264){var H=_t[w=P-257];k=It(t,u,(1<<H)-1)+Et[w],u+=H}var F=c[Nt(t,u)&B],U=F>>>4;if(!F)throw"invalid distance";u+=15&F;I=yt[U];if(U>3){H=gt[U];I+=Nt(t,u)&(1<<H)-1,u+=H}if(u>f){if(s)throw"unexpected EOF";break}r&&o(l+131072);for(var $=l+k;l<$;l+=4)e[l]=e[l-I],e[l+1]=e[l+1-I],e[l+2]=e[l+2-I],e[l+3]=e[l+3-I];l=$}}n.l=h,n.p=D,n.b=l,h&&(a=1,n.m=d,n.d=c,n.n=p)}while(!a);return l==e.length?e:Dt(e,0,l)},kt=new dt(0),Ht=function(t,e,n){for(var i=t(),r=t.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<i.length;++o){var a=i[o],u=s[o];if("function"==typeof a){e+=";"+u+"=";var l=a.toString();if(a.prototype)if(-1!=l.indexOf("[native code]")){var h=l.indexOf(" ",8)+1;e+=l.slice(h,l.indexOf("(",h))}else for(var c in e+=l,a.prototype)e+=";"+u+".prototype."+c+"="+a.prototype[c].toString();else e+=l}else n[u]=a}return[e,n]},Ft=[],Ut=function(t,e,n,i){var r;if(!Ft[n]){for(var s="",o={},a=t.length-1,u=0;u<a;++u)s=(r=Ht(t[u],s,o))[0],o=r[1];Ft[n]=Ht(t[a],s,o)}var l=function(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n}({},Ft[n][1]);return function(t,e,n,i,r){var s=new Worker(ct[e]||(ct[e]=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))));return s.onerror=function(t){return r(t.error,null)},s.onmessage=function(t){return r(null,t.data)},s.postMessage(n,i),s}(Ft[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,l,function(t){var e=[];for(var n in t)(t[n]instanceof dt||t[n]instanceof pt||t[n]instanceof ft)&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e}(l),i)},$t=function(){return[dt,pt,ft,_t,gt,mt,Et,yt,Lt,Ot,wt,xt,Mt,It,Nt,Bt,Dt,Pt,Wt,Kt,Gt]},Kt=function(t){return postMessage(t,[t.buffer])},Gt=function(t){return t&&t.size&&new dt(t.size)},jt=function(t,e){return t[e]|t[e+1]<<8},zt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Vt=function(t,e){return zt(t,e)+4294967296*zt(t,e+4)};function Yt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return function(t,e,n,i,r,s){var o=Ut(n,i,r,(function(t,e){o.terminate(),s(t,e)}));return o.postMessage([t,e],e.consume?[t.buffer]:[]),function(){o.terminate()}}(t,e,[$t],(function(t){return Kt(Wt(t.data[0],Gt(t.data[1])))}),1,n)}function Wt(t,e){return Pt(t,e)}var qt="undefined"!=typeof TextDecoder&&new TextDecoder;try{qt.decode(kt,{stream:!0}),1}catch(t){}function Xt(t,e){if(e){for(var n="",i=0;i<t.length;i+=16384)n+=String.fromCharCode.apply(null,t.subarray(i,i+16384));return n}if(qt)return qt.decode(t);var r=function(t){for(var e="",n=0;;){var i=t[n++],r=(i>127)+(i>223)+(i>239);if(n+r>t.length)return[e,Dt(t,n-1)];r?3==r?(i=((15&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|i>>10,56320|1023&i)):e+=1&r?String.fromCharCode((31&i)<<6|63&t[n++]):String.fromCharCode((15&i)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(i)}}(t),s=r[0];if(r[1].length)throw"invalid utf-8 data";return s}var Qt=function(t,e){for(;1!=jt(t,e);e+=4+jt(t,e+2));return[Vt(t,e+12),Vt(t,e+4),Vt(t,e+20)]};function Zt(t,e){if("function"!=typeof e)throw"no callback";for(var n=[],i=function(){for(var t=0;t<n.length;++t)n[t]()},r={},s=t.length-22;101010256!=zt(t,s);--s)if(!s||t.length-s>65558)return void e("invalid zip file",null);var o=jt(t,s+8);o||e(null,{});var a=o,u=zt(t,s+16),l=4294967295==u;if(l){if(s=zt(t,s-12),101075792!=zt(t,s))return void e("invalid zip file",null);a=o=zt(t,s+32),u=zt(t,s+48)}for(var h=function(s){var a=function(t,e,n){var i=jt(t,e+28),r=Xt(t.subarray(e+46,e+46+i),!(2048&jt(t,e+8))),s=e+46+i,o=zt(t,e+20),a=n&&4294967295==o?Qt(t,s):[o,zt(t,e+24),zt(t,e+42)],u=a[0],l=a[1],h=a[2];return[jt(t,e+10),u,l,r,s+jt(t,e+30)+jt(t,e+32),h]}(t,u,l),h=a[0],c=a[1],d=a[2],p=a[3],f=a[4],_=a[5],g=function(t,e){return e+30+jt(t,e+26)+jt(t,e+28)}(t,_);u=f;var m=function(t,n){t?(i(),e(t,null)):(r[p]=n,--o||e(null,r))};if(h)if(8==h){var v=t.subarray(g,g+c);if(c<32e4)try{m(null,Wt(v,new dt(d)))}catch(t){m(t,null)}else n.push(Yt(v,{size:d},m))}else m("unknown compression type "+h,null);else m(null,Dt(t,g,g+c))},c=0;c<a;++c)h();return i}class Jt{constructor(t){let e;e="object"==typeof t&&t instanceof Jt?t.source:String(t),this.source=e,this._re=ht.makeRe(e)}test(t){return this._re.test(t)}}const te=/^([_\w\d]+)\:\/\//;function ee(t,e,n){const{cache:i,loadings:r}=t;return i[e]=n,e in r&&(r[e].resolve(n),delete r[e]),n}async function ne(t,e,n=5e3){const{cache:i,loadings:r}=t;if(e in i)return i[e];if(e in r)return r[e].promise;{let t=new re(n);return r[e]=t,t.promise}}function ie(t,e){return t.cache[e]}class re{constructor(t){this.active=!1,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(t)&&t>0?setTimeout((()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)}),t):null,this._promise=new Promise(((t,e)=>{this._value?t(this._value):this._resolve=t,this._reason?e(this._reason):this._reject=e}))}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}}const se={cache:{},loadings:{},defaults:[]};var oe=Object.freeze({__proto__:null,loadAssetPack:async function(t,e){let n=await fetch(t),i=await n.arrayBuffer();await new Promise(((t,n)=>{Zt(new Uint8Array(i),((i,r)=>{if(i)n(i);else{for(let[t,n]of Object.entries(r)){t=t.replaceAll("\\","/");let i=t.indexOf("/");i>=0&&(t=t.substring(i+1));let r="raw://"+t;ee(se,r,n),e&&e(n,r,t)}t()}}))}))},loadAssetRefs:async function(t,e=5e3){let n=[];for(let i of t)n.push(i.load(se,e));await Promise.allSettled(n)},cache:function(t,e){return ee(se,t,e)},keys:function(){return t=se,Object.keys(t.cache);var t},current:function(t){return ie(se,t)}}),ae=Object.freeze({__proto__:null,AssetManager:oe,AssetRef:class{constructor(t,e,n){this.uri=t,this.source=e,this.loader=n,this.store=null}get current(){return ie(this.store,this.uri)}get default(){return function(t,e){const{defaults:n}=t;for(let i of n)if(i.glob.test(e))return ie(t,i.uri);return null}(this.store,this.uri)}get loaded(){return ne(this.store,this.uri)}async load(t,e){return this.store=t,await async function(t,e,n,i,r=5e3){const{cache:s,loadings:o}=t;if(e in s)return s[e];let a;if(e in o){if(a=o[e],a.active)return o[e].promise}else a=new re(r),o[e]=a;let u=[a.promise];return te.test(n)?u.push(ne(t,n,r).then((t=>i(t))).then((n=>ee(t,e,n)))):u.push(fetch(n).then((t=>t.arrayBuffer())).then((t=>i(t))).then((n=>ee(t,e,n)))),await Promise.race(u)}(this.store,this.uri,this.source,this.loader,e),this}unload(){return function(t,e){const{cache:n,loadings:i}=t;e in i&&(i[e].reject(new Error("Stop loading to delete asset.")),delete i[e]),e in n&&delete n[e]}(this.store,this.uri),this.store=null,this}cache(t){return ee(this.store,this.uri,t),this}},GlobExp:Jt});const ue="noscale",le="fit",he="scale",ce="fill",de="stretch";class pe extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML='<div class="container">\n  <label class="hidden" id="title">display-port</label>\n  <label class="hidden" id="fps">00</label>\n  <label class="hidden" id="dimension">0x0</label>\n  <div class="content">\n    <canvas> Oh no! Your browser does not support canvas. </canvas>\n    <slot id="inner"></slot>\n  </div>\n  <slot name="frame"></slot>\n</div>\n',Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=":host {\n  display: inline-block;\n  color: #555555;\n}\n\n.container {\n  display: flex;\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.content {\n  position: relative;\n  margin: auto;\n}\n\n.content > *:not(canvas) {\n  width: 100%;\n  height: 100%;\n}\n\ncanvas {\n  background: #000000;\n  image-rendering: pixelated;\n}\n\nlabel {\n  position: absolute;\n  font-family: monospace;\n  color: currentColor;\n}\n\n#inner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n#title {\n  left: 0.5rem;\n  top: 0.5rem;\n}\n\n#fps {\n  right: 0.5rem;\n  top: 0.5rem;\n}\n\n#dimension {\n  left: 0.5rem;\n  bottom: 0.5rem;\n}\n\n.hidden {\n  display: none;\n}\n\n:host([debug]) .container {\n  outline: 6px dashed rgba(0, 0, 0, 0.1);\n  outline-offset: -4px;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n:host([mode='noscale']) canvas {\n  margin: 0;\n  top: 0;\n  left: 0;\n}\n\n:host([mode='stretch']) canvas,\n:host([mode='scale']) canvas {\n  width: 100%;\n  height: 100%;\n}\n\n:host([mode='fit']),\n:host([mode='scale']),\n:host([mode='center']),\n:host([mode='stretch']),\n:host([mode='fill']) {\n  width: 100%;\n  height: 100%;\n}\n\n:host([full]) {\n  width: 100vw !important;\n  height: 100vh !important;\n}\n\n:host([disabled]) {\n  display: none;\n}\n\nslot {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n::slotted(*) {\n  pointer-events: auto;\n}\n",Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("display-port",this)}static get observedAttributes(){return["debug","disabled","width","height","onframe","id","class"]}get mode(){return this.getAttribute("mode")}set mode(t){this.setAttribute("mode",t)}get debug(){return this._debug}set debug(t){this.toggleAttribute("debug",t)}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get width(){return this._width}set width(t){this.setAttribute("width",String(t))}get height(){return this._height}set height(t){this.setAttribute("height",String(t))}get onframe(){return this._onframe}set onframe(t){this._onframe&&this.removeEventListener("frame",this._onframe),this._onframe=t,this._onframe&&this.addEventListener("frame",t)}constructor(){super();const t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._canvasElement=t.querySelector("canvas"),this._contentElement=t.querySelector(".content"),this._innerElement=t.querySelector("#inner"),this._titleElement=t.querySelector("#title"),this._fpsElement=t.querySelector("#fps"),this._dimensionElement=t.querySelector("#dimension"),this._debug=!1,this._disabled=!1,this._width=300,this._height=150,this._onframe=void 0,this._animationRequestHandle=0,this._prevAnimationFrameTime=0,this._resizeTimeoutHandle=0,this._resizeCanvasWidth=0,this._resizeCanvasHeight=0,this._frameEvent=new CustomEvent("frame",{composed:!0,bubbles:!1,detail:{now:0,prevTime:0,deltaTime:0,canvas:this._canvasElement}}),this._resizeEvent=new CustomEvent("resize",{composed:!0,bubbles:!1,detail:{width:0,height:0}}),this.update=this.update.bind(this),this.onDelayCanvasResize=this.onDelayCanvasResize.bind(this)}get canvas(){return this._canvasElement}connectedCallback(){fe(this,"mode"),fe(this,"debug"),fe(this,"disabled"),fe(this,"width"),fe(this,"height"),fe(this,"onframe"),this.hasAttribute("mode")||this.setAttribute("mode","fit"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.updateCanvasSize(!0),this.resume()}disconnectedCallback(){this.pause()}attributeChangedCallback(t,e,n){switch(t){case"debug":this._debug=null!==n;break;case"disabled":this._disabled=null!==n;break;case"width":this._width=Number(n);break;case"height":this._height=Number(n);break;case"onframe":this.onframe=new Function("event","with(document){with(this){"+n+"}}").bind(this)}switch(t){case"disabled":n?(this.update(0),this.pause()):this.resume();break;case"id":case"class":this._titleElement.innerHTML=`display-port${this.className?"."+this.className:""}${this.hasAttribute("id")?"#"+this.getAttribute("id"):""}`;break;case"debug":this._titleElement.classList.toggle("hidden",n),this._fpsElement.classList.toggle("hidden",n),this._dimensionElement.classList.toggle("hidden",n)}}getContext(t="2d",e){return this._canvasElement.getContext(t,e)}pause(){cancelAnimationFrame(this._animationRequestHandle)}resume(){this._animationRequestHandle=requestAnimationFrame(this.update)}update(t){this._animationRequestHandle=requestAnimationFrame(this.update),this.updateCanvasSize(!1);const e=t-this._prevAnimationFrameTime;if(this._prevAnimationFrameTime=t,this._debug){const t=e<=0?"--":String(Math.round(1e3/e)).padStart(2,"0");this._fpsElement.textContent!==t&&(this._fpsElement.textContent=t);if(this.mode===ue){let t=`${this._width}x${this._height}`;this._dimensionElement.textContent!==t&&(this._dimensionElement.textContent=t)}else{let t=`${this._width}x${this._height}|${this.shadowRoot.host.clientWidth}x${this.shadowRoot.host.clientHeight}`;this._dimensionElement.textContent!==t&&(this._dimensionElement.textContent=t)}}let n=this._frameEvent.detail;n.now=t,n.prevTime=this._prevAnimationFrameTime,n.deltaTime=e,this.dispatchEvent(this._frameEvent)}onDelayCanvasResize(){this._resizeTimeoutHandle=0,this.updateCanvasSize(!0)}delayCanvasResize(t,e){t===this._resizeCanvasWidth&&e===this._resizeCanvasHeight||(this._resizeCanvasWidth=t,this._resizeCanvasHeight=e,this._resizeTimeoutHandle&&clearTimeout(this._resizeTimeoutHandle),this._resizeTimeoutHandle=setTimeout(this.onDelayCanvasResize,200))}updateCanvasSize(t=!0){const e=this.shadowRoot.host.getBoundingClientRect(),n=e.width,i=e.height;let r=this._canvasElement,s=this._width,o=this._height;const a=this.mode;if(a===de||a===ce)s=n,o=i;else if(a!==ue&&(n<s||i<o||a===le||a==he)){let t=n/s,e=i/o;t<e?(s=n,o*=t):(s*=e,o=i)}if(s=Math.floor(s),o=Math.floor(o),void 0===t&&(t=r.clientWidth!==s||r.clientHeight!==o),!t)return void this.delayCanvasResize(s,o);let u=.5*Math.min(s/this._width,o/this._height);if(this._innerElement.style.fontSize=`font-size: ${u}em`,t){a===he?(r.width=this._width,r.height=this._height):a!==de&&(r.width=s,r.height=o);let t=this._contentElement.style;t.width=`${s}px`,t.height=`${o}px`,a!==le&&a!==ce||(this._width=s,this._height=o);let e=this._resizeEvent.detail;e.width=s,e.height=o,this.dispatchEvent(this._resizeEvent)}}}function fe(t,e){if(Object.prototype.hasOwnProperty.call(t,e)){let n=t[e];delete t[e],t[e]=n}}pe.define();var _e=Object.freeze({__proto__:null,DisplayPort:pe});class ge{get polling(){return performance.now()-this._lastPollingTime<1e3}get value(){return 0}get size(){return this._size}constructor(t){this._size=t,this._lastPollingTime=Number.MIN_SAFE_INTEGER}resize(t){this._size=t}getState(t){throw new Error("Missing implementation.")}onUpdate(t,e,n){throw new Error("Missing implementation.")}onStatus(t,e){throw new Error("Missing implementation.")}onPoll(t){this._lastPollingTime=t}onBind(t,e={}){t>=this._size&&this.resize(t+1)}onUnbind(){this.resize(0)}}class me extends ge{static createAxisBindingState(){return{value:0,delta:0,inverted:!1}}get delta(){return this._delta}get value(){return this._value}constructor(t=0){super(t);let e=new Array;for(let n=0;n<t;++n)e.push(this.constructor.createAxisBindingState());this._state=e,this._value=0,this._delta=0}resize(t){let e,n=this._state,i=n.length;if(t<=i)e=n.slice(0,t);else{e=n;for(let n=i;n<t;++n)e.push(this.constructor.createAxisBindingState())}this._state=e,super.resize(t)}getState(t){return this._state[t].value}onPoll(t){let e=this._state,n=0,i=0;const r=e.length;for(let t=0;t<r;++t){let r=e[t];n+=r.value*(r.inverted?-1:1),i+=r.delta,e[t].delta=0}this._value=n,this._delta=i,super.onPoll(t)}onUpdate(t,e,n){void 0===e?this.onAxisChange(t,n):this.onAxisMove(t,e,n)}onStatus(t,e){this.onAxisStatus(t,e)}onBind(t,e={}){super.onBind(t,e);const{inverted:n=!1}=e;this._state[t].inverted=n}onAxisMove(t,e,n){let i=this._state[t];i.value=e,i.delta+=n}onAxisChange(t,e){let n=this._state[t];n.value+=e,n.delta+=e}onAxisStatus(t,e){let n=this._state[t],i=n.value;n.value=e,n.delta=e-i}}class ve extends ge{get pressed(){return this._pressed}get repeated(){return this._repeated}get released(){return this._released}get down(){return this._down}get value(){return this._value}constructor(t=0){super(t),this._state=new Uint8Array(t),this._value=0,this._down=!1,this._pressed=!1,this._repeated=!1,this._released=!1}resize(t){let e,n=this._state;t<=n.length?e=n.slice(0,t):(e=new Uint8Array(t),e.set(n)),this._state=e,super.resize(t)}getState(t){let e=this._state[t];return(1&e?1:0)*(16&e?-1:1)}onPoll(t){let e=this._state,n=0,i=0,r=0,s=0,o=0;const a=e.length;for(let t=0;t<a;++t){let a=e[t],u=1&a;i|=u,r|=2&a,s|=4&a,o|=8&a,n+=(u?1:0)*(16&a?-1:1),e[t]&=241}this._value=n,this._down=0!==i,this._pressed=0!==r,this._repeated=0!==s,this._released=0!==o,super.onPoll(t)}onUpdate(t,e,n){n>0?this.onButtonPressed(t):this.onButtonReleased(t)}onStatus(t,e){this.onButtonStatus(t,0!==e)}onBind(t,e={}){super.onBind(t,e);const{inverted:n=!1}=e;let i=this._state;n?i[t]|=16:i[t]&=239}onButtonPressed(t){let e=this._state,n=e[t];1&n||(n|=2,n|=1),n|=4,e[t]=n}onButtonReleased(t){let e=this._state,n=e[t];1&n&&(n|=8,n&=254),e[t]=n}onButtonStatus(t,e){let n=this._state,i=n[t],r=Boolean(1&i);e?i|=1:i&=254,r&&!e&&(i|=8),!r&&e&&(i|=2,i|=4),n[t]=i}}class Ae{static parse(t){let e=(t=t.trim()).indexOf(".");if(e<0)throw new Error("Missing device separator for key code.");let n=t.substring(0,e);if(n.length<0)throw new Error("Missing device for key code.");let i=t.substring(e+1);if(i.length<0)throw new Error("Missing code for key code.");return new Ae(n,i)}constructor(t,e){this.device=t,this.code=e}toString(){return`${this.device}.${this.code}`}}function Ee(t,e){return new Ae(t,e)}const be="Keyboard",ye="Mouse",we=new Ae(be,"KeyA"),Te=new Ae(be,"KeyB"),Se=new Ae(be,"KeyC"),xe=new Ae(be,"KeyD"),Re=new Ae(be,"KeyE"),Ce=new Ae(be,"KeyF"),Le=new Ae(be,"KeyG"),Oe=new Ae(be,"KeyH"),Me=new Ae(be,"KeyI"),Ie=new Ae(be,"KeyJ"),Ne=new Ae(be,"KeyK"),Be=new Ae(be,"KeyL"),De=new Ae(be,"KeyM"),Pe=new Ae(be,"KeyN"),ke=new Ae(be,"KeyO"),He=new Ae(be,"KeyP"),Fe=new Ae(be,"KeyQ"),Ue=new Ae(be,"KeyR"),$e=new Ae(be,"KeyS"),Ke=new Ae(be,"KeyT"),Ge=new Ae(be,"KeyU"),je=new Ae(be,"KeyV"),ze=new Ae(be,"KeyW"),Ve=new Ae(be,"KeyX"),Ye=new Ae(be,"KeyY"),We=new Ae(be,"KeyZ"),qe=new Ae(be,"Digit0"),Xe=new Ae(be,"Digit1"),Qe=new Ae(be,"Digit2"),Ze=new Ae(be,"Digit3"),Je=new Ae(be,"Digit4"),tn=new Ae(be,"Digit5"),en=new Ae(be,"Digit6"),nn=new Ae(be,"Digit7"),rn=new Ae(be,"Digit8"),sn=new Ae(be,"Digit9"),on=new Ae(be,"Minus"),an=new Ae(be,"Equal"),un=new Ae(be,"BracketLeft"),ln=new Ae(be,"BracketRight"),hn=new Ae(be,"Semicolon"),cn=new Ae(be,"Quote"),dn=new Ae(be,"Backquote"),pn=new Ae(be,"Backslash"),fn=new Ae(be,"Comma"),_n=new Ae(be,"Period"),gn=new Ae(be,"Slash"),mn=new Ae(be,"Escape"),vn=new Ae(be,"Space"),An=new Ae(be,"CapsLock"),En=new Ae(be,"Backspace"),bn=new Ae(be,"Delete"),yn=new Ae(be,"Tab"),wn=new Ae(be,"Enter"),Tn=new Ae(be,"ArrowUp"),Sn=new Ae(be,"ArrowDown"),xn=new Ae(be,"ArrowLeft"),Rn=new Ae(be,"ArrowRight"),Cn=new Ae(ye,"Button0"),Ln=new Ae(ye,"Button1"),On=new Ae(ye,"Button2"),Mn=new Ae(ye,"Button3"),In=new Ae(ye,"Button4"),Nn=new Ae(ye,"PosX"),Bn=new Ae(ye,"PosY"),Dn=new Ae(ye,"WheelX"),Pn=new Ae(ye,"WheelY"),kn=new Ae(ye,"WheelZ");var Hn=Object.freeze({__proto__:null,from:Ee,isKeyCode:function(t){return"device"in t&&"code"in t},KEYBOARD:be,MOUSE:ye,KEY_A:we,KEY_B:Te,KEY_C:Se,KEY_D:xe,KEY_E:Re,KEY_F:Ce,KEY_G:Le,KEY_H:Oe,KEY_I:Me,KEY_J:Ie,KEY_K:Ne,KEY_L:Be,KEY_M:De,KEY_N:Pe,KEY_O:ke,KEY_P:He,KEY_Q:Fe,KEY_R:Ue,KEY_S:$e,KEY_T:Ke,KEY_U:Ge,KEY_V:je,KEY_W:ze,KEY_X:Ve,KEY_Y:Ye,KEY_Z:We,DIGIT_0:qe,DIGIT_1:Xe,DIGIT_2:Qe,DIGIT_3:Ze,DIGIT_4:Je,DIGIT_5:tn,DIGIT_6:en,DIGIT_7:nn,DIGIT_8:rn,DIGIT_9:sn,MINUS:on,EQUAL:an,BRACKET_LEFT:un,BRACKET_RIGHT:ln,SEMICOLON:hn,QUOTE:cn,BACKQUOTE:dn,BACKSLASH:pn,COMMA:fn,PERIOD:_n,SLASH:gn,ESCAPE:mn,SPACE:vn,CAPS_LOCK:An,BACKSPACE:En,DELETE:bn,TAB:yn,ENTER:wn,ARROW_UP:Tn,ARROW_DOWN:Sn,ARROW_LEFT:xn,ARROW_RIGHT:Rn,MOUSE_BUTTON_0:Cn,MOUSE_BUTTON_1:Ln,MOUSE_BUTTON_2:On,MOUSE_BUTTON_3:Mn,MOUSE_BUTTON_4:In,MOUSE_POS_X:Nn,MOUSE_POS_Y:Bn,MOUSE_WHEEL_X:Dn,MOUSE_WHEEL_Y:Pn,MOUSE_WHEEL_Z:kn});class Fn{get polling(){return!!this.ref&&this.ref.polling}get value(){return!this.ref||this.disabled?0:this.ref.value}constructor(t){this.name=t,this.ref=null,this.disabled=!1}register(t){throw new Error("Unsupported operation.")}disable(t=!0){return this.disabled=t,this}getState(t){return!this.ref||this.disabled?0:this.ref.getState(t)}}function Un(t){Array.isArray(t)||(t=[t]);let e=[];for(let n of t){let t;try{t=Ae.parse(n)}catch(e){let i=$n(n).toUpperCase();if(!(i in Hn))throw new Error("Invalid key code string - "+e);t=Hn[i]}e.push(t)}return e}function $n(t){return t.replace(/([a-z]|(?:[A-Z0-9]+))([A-Z0-9]|$)/g,(function(t,e,n){return e+(n&&"_"+n)})).toLowerCase()}class Kn extends Fn{static fromBind(t,e,n,i){return new Kn(t,Ee(e,n),i)}static fromString(t,...e){let n=Un(e);return new Kn(t,n)}get delta(){return!this.ref||this.disabled?0:this.ref.delta}constructor(t,e,n){super(t),this.keyCodes=Array.isArray(e)?e:[e],this.opts=n}register(t){let e=this.name,n=this.opts;for(let i of this.keyCodes)t.bindAxis(e,i.device,i.code,n);return this.ref=t.getAxis(e),this}}class Gn extends Fn{static fromBind(t,e,n,i){return new Gn(t,Ee(e,n),i)}static fromString(t,...e){let n=Un(e);return new Gn(t,n)}get pressed(){return!(!this.ref||this.disabled)&&this.ref.pressed}get repeated(){return!(!this.ref||this.disabled)&&this.ref.repeated}get released(){return!(!this.ref||this.disabled)&&this.ref.released}get down(){return!(!this.ref||this.disabled)&&this.ref.down}constructor(t,e,n){super(t),this.keyCodes=Array.isArray(e)?e:[e],this.opts=n}register(t){let e=this.name,n=this.opts;for(let i of this.keyCodes)t.bindButton(e,i.device,i.code,n);return this.ref=t.getButton(e),this}}class jn extends Kn{static fromBind(t,e,n,i){return new jn(t,Ee(e,n),Ee(e,i))}constructor(t,e,n){if(super(t,[]),e.device!==n.device)throw new Error("Cannot create axis-button codes for different devices.");this.negativeKeyCode=e,this.positiveKeyCode=n}register(t){let e=this.name,n=this.negativeKeyCode,i=this.positiveKeyCode;return t.bindAxisButtons(e,n.device,n.code,i.code),this.ref=t.getAxis(e),this}}class zn{static isAxis(t){return!1}static isButton(t){return!1}constructor(t,e){if(!e)throw new Error(`Missing event target for device ${t}.`);this.name=t,this.eventTarget=e,this.listeners={input:[]}}setEventTarget(t){if(!t)throw new Error(`Missing event target for device ${this.name}.`);this.eventTarget=t}destroy(){let t=this.listeners;for(let e in t)t[e].length=0}addEventListener(t,e){let n=this.listeners;t in n?n[t].push(e):n[t]=[e]}removeEventListener(t,e){let n=this.listeners;if(t in n){let i=n[t],r=i.indexOf(e);r>=0&&i.splice(r,1)}}dispatchInputEvent(t){let e=0;for(let n of this.listeners.input)e|=n(t);return Boolean(e)}}class Vn extends zn{static isAxis(t){return!1}static isButton(t){return!0}constructor(t,e,n={}){super(t,e);const{ignoreRepeat:i=!0}=n;this.ignoreRepeat=i,this._eventObject={target:e,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let t=this.eventTarget;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),super.destroy()}onKeyDown(t){if(t.repeat&&this.ignoreRepeat)return t.preventDefault(),t.stopPropagation(),!1;let e=this._eventObject;return e.code=t.code,e.event="pressed",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e)?(t.preventDefault(),t.stopPropagation(),!1):void 0}onKeyUp(t){let e=this._eventObject;if(e.code=t.code,e.event="released",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e))return t.preventDefault(),t.stopPropagation(),!1}}class Yn extends zn{static isAxis(t){return"PosX"===t||"PosY"===t||"WheelX"===t||"WheelY"===t||"WheelZ"===t}static isButton(t){return!this.isAxis(t)}constructor(t,e,n={}){super(t,e);const{eventsOnFocus:i=!0}=n;this.eventsOnFocus=i,this.canvasTarget=this.getCanvasFromEventTarget(e),this._downHasFocus=!1,this._eventObject={target:e,device:t,code:"",event:"",value:0,control:!1,shift:!1,alt:!1},this._positionObject={target:e,device:t,code:"",event:"move",value:0,movement:0},this._wheelObject={target:e,device:t,code:"",event:"wheel",movement:0},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("contextmenu",this.onContextMenu),e.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}setEventTarget(t){this.eventTarget&&this.destroy(),super.setEventTarget(t),this.canvasTarget=this.getCanvasFromEventTarget(t),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("wheel",this.onWheel),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}destroy(){let t=this.eventTarget;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("contextmenu",this.onContextMenu),t.removeEventListener("wheel",this.onWheel),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),super.destroy()}setPointerLock(t=!0){t?this.eventTarget.requestPointerLock():this.eventTarget.exitPointerLock()}hasPointerLock(){return document.pointerLockElement===this.eventTarget}onMouseDown(t){this._downHasFocus=!0;let e=this._eventObject;if(e.code="Button"+t.button,e.event="pressed",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e)&&document.activeElement===this.eventTarget)return t.preventDefault(),t.stopPropagation(),!1}onContextMenu(t){return t.preventDefault(),t.stopPropagation(),!1}onWheel(t){let e,n,i;switch(t.deltaMode){case WheelEvent.DOM_DELTA_LINE:e=10*t.deltaX,n=10*t.deltaY,i=10*t.deltaZ;break;case WheelEvent.DOM_DELTA_PAGE:e=100*t.deltaX,n=100*t.deltaY,i=100*t.deltaZ;break;case WheelEvent.DOM_DELTA_PIXEL:default:e=t.deltaX,n=t.deltaY,i=t.deltaZ}let r=0,s=this._wheelObject;if(s.code="WheelX",s.movement=e,r|=this.dispatchInputEvent(s),s.code="WheelY",s.movement=n,r|=this.dispatchInputEvent(s),s.code="WheelZ",s.movement=i,r|=this.dispatchInputEvent(s),r)return t.preventDefault(),t.stopPropagation(),!1}onMouseUp(t){if(!this._downHasFocus)return;this._downHasFocus=!1;let e=this._eventObject;return e.code="Button"+t.button,e.event="released",e.value=1,e.control=t.ctrlKey,e.shift=t.shiftKey,e.alt=t.altKey,this.dispatchInputEvent(e)?(t.preventDefault(),t.stopPropagation(),!1):void 0}onMouseMove(t){if(this.eventsOnFocus&&document.activeElement!==this.eventTarget)return;const e=this.canvasTarget,{clientWidth:n,clientHeight:i}=e,r=e.getBoundingClientRect();let s=t.movementX/n,o=t.movementY/i,a=(t.clientX-r.left)/n,u=(t.clientY-r.top)/i,l=this._positionObject;l.code="PosX",l.value=a,l.movement=s,this.dispatchInputEvent(l),l.code="PosY",l.value=u,l.movement=o,this.dispatchInputEvent(l)}getCanvasFromEventTarget(t){return t instanceof HTMLCanvasElement?t:t.canvas||t.querySelector("canvas")||t.shadowRoot&&t.shadowRoot.querySelector("canvas")||t}}class Wn extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML='<kbd>\n  <span id="name"><slot></slot></span>\n  <span id="value" class="hidden"></span>\n</kbd>\n',Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML="kbd {\n  position: relative;\n  display: inline-block;\n  border-radius: 3px;\n  border: 1px solid #888888;\n  font-size: 0.85em;\n  font-weight: 700;\n  text-rendering: optimizeLegibility;\n  line-height: 12px;\n  height: 14px;\n  padding: 2px 4px;\n  color: #444444;\n  background-color: #eeeeee;\n  box-shadow: inset 0 -3px 0 #aaaaaa;\n  overflow: hidden;\n}\n\nkbd:empty::after {\n  content: '<?>';\n  opacity: 0.6;\n}\n\n.disabled {\n  opacity: 0.6;\n  box-shadow: none;\n  background-color: #aaaaaa;\n}\n\n.hidden {\n  display: none;\n}\n\n#value {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  font-size: 0.85em;\n  padding: 0 4px;\n  padding-top: 2px;\n  color: #cccccc;\n  background-color: #333333;\n  box-shadow: inset 0 3px 0 #222222;\n}\n",Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-code",this)}static get observedAttributes(){return["name","value","disabled"]}get disabled(){return this._disabled}set disabled(t){this.toggleAttribute("disabled",t)}get value(){return this._value}set value(t){this.setAttribute("value",t)}get name(){return this._name}set name(t){this.setAttribute("name",t)}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),this.shadowRoot.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._name="",this._value="",this._disabled=!1,this._kbdElement=this.shadowRoot.querySelector("kbd"),this._nameElement=this.shadowRoot.querySelector("#name"),this._valueElement=this.shadowRoot.querySelector("#value")}attributeChangedCallback(t,e,n){switch(t){case"name":this._name=n,this._nameElement.textContent=n;break;case"value":this._value=n,null!==n?(this._valueElement.classList.toggle("hidden",!1),this._valueElement.textContent=n,this._kbdElement.style.paddingRight=`${this._valueElement.clientWidth+4}px`):this._valueElement.classList.toggle("hidden",!0);break;case"disabled":this._disabled=null!==n,this._kbdElement.classList.toggle("disabled",null!==n)}}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"name")){let t=this.name;delete this.name,this.name=t}if(Object.prototype.hasOwnProperty.call(this,"value")){let t=this.value;delete this.value,this.value=t}if(Object.prototype.hasOwnProperty.call(this,"disabled")){let t=this.disabled;delete this.disabled,this.disabled=t}}}Wn.define();class qn{constructor(t){this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null,this.pollable=t}get running(){return null!==this.animationFrameHandle}start(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}stop(){let t=this.animationFrameHandle;t&&cancelAnimationFrame(t),this.animationFrameHandle=null}onAnimationFrame(t){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.pollable.onPoll(t)}}class Xn{constructor(t){this.onInput=this.onInput.bind(this),this.onPoll=this.onPoll.bind(this),this.bindings=t}onPoll(t){for(let e of this.bindings.getInputs())e.onPoll(t)}onInput(t){const{device:e,code:n,event:i,value:r,movement:s,control:o,shift:a,alt:u}=t;let l=this.bindings.getBindings(e,n);switch(i){case"pressed":for(let{input:t,index:e}of l)t.onUpdate(e,1,1);break;case"released":for(let{input:t,index:e}of l)t.onUpdate(e,0,-1);break;case"move":for(let{input:t,index:e}of l)t.onUpdate(e,r,s);break;case"wheel":for(let{input:t,index:e}of l)t.onUpdate(e,void 0,s)}return l.length>0}}class Qn{constructor(t,e,n,i){this.device=t,this.code=e,this.input=n,this.index=i}}class Zn{constructor(){this.bindingMap={},this.inputMap=new Map}clear(){for(let t of this.inputMap.keys())t.onUnbind();this.inputMap.clear(),this.bindingMap={}}bind(t,e,n,i={inverted:!1}){let r,s=this.inputMap;if(s.has(t)){let o=s.get(t),a=t.size;t.onBind(a,i),r=new Qn(e,n,t,a),o.push(r)}else{let o=[];s.set(t,o);let a=0;t.onBind(a,i),r=new Qn(e,n,t,a),o.push(r)}let o=this.bindingMap;e in o?n in o[e]?o[e][n].push(r):o[e][n]=[r]:o[e]={[n]:[r]}}unbind(t){let e=this.inputMap;if(e.has(t)){let n=this.bindingMap,i=e.get(t);for(let t of i){let{device:e,code:i}=t,r=n[e][i],s=r.indexOf(t);r.splice(s,1)}i.length=0,t.onUnbind(),e.delete(t)}}isBound(t){return this.inputMap.has(t)}getInputs(){return this.inputMap.keys()}getBindingsByInput(t){return this.inputMap.get(t)}getBindings(t,e){let n=this.bindingMap;if(t in n){let i=n[t];if(e in i)return i[e]}return[]}}class Jn{constructor(t,e={}){this.inputs={},this.devices=[new Yn("Mouse",t),new Vn("Keyboard",t)],this.bindings=new Zn,this.adapter=new Xn(this.bindings),this.autopoller=new qn(this.adapter),this.eventTarget=t,this.anyButton=new ve(1),this.anyButtonDevice="",this.anyButtonCode="",this.anyAxis=new me(1),this.anyAxisDevice="",this.anyAxisCode="",this.listeners={bind:[],unbind:[],focus:[],blur:[]},this.onInput=this.onInput.bind(this),this.onEventTargetBlur=this.onEventTargetBlur.bind(this),this.onEventTargetFocus=this.onEventTargetFocus.bind(this),t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur);for(let t of this.devices)t.addEventListener("input",this.onInput)}get autopoll(){return this.autopoller.running}set autopoll(t){this.toggleAutoPoll(t)}destroy(){let t=this.listeners;for(let e in t)t[e].length=0;this.autopoller.running&&this.autopoller.stop();for(let t of this.devices)t.removeEventListener("input",this.onInput),t.destroy();let e=this.eventTarget;e.removeEventListener("focus",this.onEventTargetFocus),e.removeEventListener("blur",this.onEventTargetBlur)}setEventTarget(t){let e=this.eventTarget;e.removeEventListener("focus",this.onEventTargetFocus),e.removeEventListener("blur",this.onEventTargetBlur),this.eventTarget=t;for(let e of this.devices)e.setEventTarget(t);t.addEventListener("focus",this.onEventTargetFocus),t.addEventListener("blur",this.onEventTargetBlur)}toggleAutoPoll(t){let e=this.autopoller.running,n=void 0===t?!e:Boolean(t);n!==e&&(n?this.autopoller.start():this.autopoller.stop())}addEventListener(t,e){let n=this.listeners;t in n?n[t].push(e):n[t]=[e]}removeEventListener(t,e){let n=this.listeners;if(t in n){let i=n[t],r=i.indexOf(e);r>=0&&i.splice(r,1)}}dispatchEvent(t){const{type:e}=t;let n=0;for(let i of this.listeners[e])n|=i(t)?1:0;return Boolean(n)}poll(t=performance.now()){if(this.autopoller.running)throw new Error("Should not manually poll() while autopolling.");this.onPoll(t)}onInput(t){let e=this.adapter.onInput(t);switch(t.event){case"pressed":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,1,1);break;case"released":this.anyButtonDevice=t.device,this.anyButtonCode=t.code,this.anyButton.onUpdate(0,0,-1);break;case"move":case"wheel":this.anyAxisDevice=t.device,this.anyAxisCode=t.code,this.anyAxis.onUpdate(0,t.value,t.movement)}return e}onPoll(t){this.adapter.onPoll(t),this.anyButton.onPoll(t),this.anyAxis.onPoll(t)}onBind(){this.dispatchEvent({type:"bind"})}onUnbind(){this.dispatchEvent({type:"unbind"})}onEventTargetFocus(){this.dispatchEvent({type:"focus"})}onEventTargetBlur(){for(let t of this.bindings.getInputs())t.onStatus(0,0);this.anyButton.onStatus(0,0),this.anyAxis.onStatus(0,0),this.dispatchEvent({type:"blur"})}bindBindings(t){for(let e of t)e.register(this)}bindButton(t,e,n,i){let r;this.hasButton(t)?r=this.getButton(t):(r=new ve(1),this.inputs[t]=r),this.bindings.bind(r,e,n,i),this.onBind()}bindAxis(t,e,n,i){let r;this.hasAxis(t)?r=this.getAxis(t):(r=new me(1),this.inputs[t]=r),this.bindings.bind(r,e,n,i),this.onBind()}bindAxisButtons(t,e,n,i){let r;this.hasAxis(t)?r=this.getAxis(t):(r=new me(2),this.inputs[t]=r),this.bindings.bind(r,e,i),this.bindings.bind(r,e,n,{inverted:!0}),this.onBind()}unbindButton(t){if(this.hasButton(t)){let e=this.getButton(t);delete this.inputs[t],this.bindings.unbind(e),this.onUnbind()}}unbindAxis(t){if(this.hasAxis(t)){let e=this.getAxis(t);delete this.inputs[t],this.bindings.unbind(e),this.onUnbind()}}getInput(t){return this.inputs[t]}getButton(t){return this.inputs[t]}getAxis(t){return this.inputs[t]}hasButton(t){return t in this.inputs&&this.inputs[t]instanceof ve}hasAxis(t){return t in this.inputs&&this.inputs[t]instanceof me}isButtonDown(t){return this.inputs[t].down}isButtonPressed(t){return this.inputs[t].pressed}isButtonReleased(t){return this.inputs[t].released}getInputValue(t){return this.inputs[t].value}getButtonValue(t){return this.inputs[t].value}getAxisValue(t){return this.inputs[t].value}getAxisDelta(t){return this.inputs[t].delta}isAnyButtonDown(t){if(void 0===t)return this.anyButton.down;{let e=this.inputs;for(let n of t){if(e[n].down)return!0}}return!1}isAnyButtonPressed(t){if(void 0===t)return this.anyButton.pressed;{let e=this.inputs;for(let n of t){if(e[n].pressed)return!0}}return!1}isAnyButtonReleased(t){if(void 0===t)return this.anyButton.released;{let e=this.inputs;for(let n of t){if(e[n].released)return!0}}return!1}getAnyAxisValue(t){if(void 0===t)return this.anyAxis.value;{let e=this.inputs;for(let n of t){let t=e[n];if(t.value)return t.value}}return 0}getAnyAxisDelta(t){if(void 0===t)return this.anyAxis.delta;{let e=this.inputs;for(let n of t){let t=e[n];if(t.delta)return t.delta}}return 0}getLastButtonDevice(){return this.anyButtonDevice}getLastButtonCode(){return this.anyButtonCode}getLastAxisDevice(){return this.anyAxisDevice}getLastAxisCode(){return this.anyAxisCode}getMouse(){return this.devices[0]}getKeyboard(){return this.devices[1]}}class ti extends HTMLElement{static get[Symbol.for("templateNode")](){let t=document.createElement("template");return t.innerHTML='<table>\n  <thead>\n    <tr class="tableHeader">\n      <th colspan="3">\n        <span class="tableTitle">\n          <label id="title"> input-source </label>\n          <span id="slotContainer">\n            <slot></slot>\n          </span>\n          <p>\n            <label for="poll">poll</label>\n            <output id="poll"></output>\n          </p>\n          <p>\n            <label for="focus">focus</label>\n            <output id="focus"></output>\n          </p>\n        </span>\n      </th>\n    </tr>\n    <tr class="colHeader">\n      <th>name</th>\n      <th>value</th>\n      <th>key</th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>\n',Object.defineProperty(this,Symbol.for("templateNode"),{value:t}),t}static get[Symbol.for("styleNode")](){let t=document.createElement("style");return t.innerHTML=":host {\n  display: block;\n}\n\ntable {\n  border-collapse: collapse;\n  font-family: monospace;\n}\n\ntable,\nth,\ntd {\n  border: 1px solid #666666;\n}\n\nth,\ntd {\n  padding: 5px 10px;\n}\n\ntd {\n  text-align: center;\n}\n\nthead th {\n  padding: 0;\n}\n\n.colHeader > th {\n  font-size: 0.8em;\n  padding: 0 10px;\n  letter-spacing: 3px;\n  background-color: #aaaaaa;\n  color: #666666;\n}\n\ntbody output {\n  border-radius: 0.3em;\n  padding: 3px;\n}\n\ntr:not(.primary) .name,\ntr:not(.primary) .value {\n  opacity: 0.3;\n}\n\ntr:nth-child(2n) {\n  background-color: #eeeeee;\n}\n\n.tableHeader {\n  color: #666666;\n}\n\n.tableTitle {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px;\n}\n\n#slotContainer {\n  flex: 1;\n}\n\np {\n  display: inline;\n  margin: 0;\n  padding: 0;\n  padding-right: 10px;\n}\n\n#poll:empty::after,\n#focus:empty::after {\n  content: '✗';\n  color: #ff0000;\n}\n",Object.defineProperty(this,Symbol.for("styleNode"),{value:t}),t}static define(t=window.customElements){t.define("input-port",this)}static get observedAttributes(){return["autopoll","for"]}get autopoll(){return this._autopoll}set autopoll(t){this.toggleAttribute("autopoll",t)}get for(){return this._for}set for(t){this.setAttribute("for",t)}constructor(){super();const t=this.attachShadow({mode:"open"});t.appendChild(this.constructor[Symbol.for("templateNode")].content.cloneNode(!0)),t.appendChild(this.constructor[Symbol.for("styleNode")].cloneNode(!0)),this._titleElement=t.querySelector("#title"),this._pollElement=t.querySelector("#poll"),this._focusElement=t.querySelector("#focus"),this._bodyElement=t.querySelector("tbody"),this._outputElements={},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.animationFrameHandle=null;this._for="",this._eventTarget=this,this._autopoll=!1,this._context=null,this.onInputContextBind=this.onInputContextBind.bind(this),this.onInputContextUnbind=this.onInputContextUnbind.bind(this),this.onInputContextFocus=this.onInputContextFocus.bind(this),this.onInputContextBlur=this.onInputContextBlur.bind(this)}connectedCallback(){if(Object.prototype.hasOwnProperty.call(this,"for")){let t=this.for;delete this.for,this.for=t}if(Object.prototype.hasOwnProperty.call(this,"autopoll")){let t=this.autopoll;delete this.autopoll,this.autopoll=t}this.updateTable(),this.updateTableValues(),this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame)}disconnectedCallback(){let t=this._context;t&&(t.removeEventListener("bind",this.onInputContextBind),t.removeEventListener("unbind",this.onInputContextUnbind),t.removeEventListener("blur",this.onInputContextBlur),t.removeEventListener("focus",this.onInputContextFocus),t.destroy(),this._context=null)}attributeChangedCallback(t,e,n){switch(t){case"for":{let t,e;this._for=n,n?(t=document.getElementById(n),e=`${t.tagName.toLowerCase()}#${n}`):(t=this,e="input-port"),this._eventTarget=t,this._context&&this._context.setEventTarget(this._eventTarget),this._titleElement.innerHTML=`for ${e}`}break;case"autopoll":this._autopoll=null!==n,this._context&&this._context.toggleAutoPoll(this._autopoll)}}onAnimationFrame(){this.animationFrameHandle=requestAnimationFrame(this.onAnimationFrame),this.updateTableValues(),this.updatePollStatus()}onInputContextBind(){return this.updateTable(),!0}onInputContextUnbind(){return this.updateTable(),!0}onInputContextFocus(){return this._focusElement.innerHTML="✓",!0}onInputContextBlur(){return this._focusElement.innerHTML="",!0}getContext(t="axisbutton",e){switch(t){case"axisbutton":if(!this._context){let t=new Jn(this._eventTarget,e);t.addEventListener("bind",this.onInputContextBind),t.addEventListener("unbind",this.onInputContextUnbind),t.addEventListener("blur",this.onInputContextBlur),t.addEventListener("focus",this.onInputContextFocus),this._autopoll&&t.toggleAutoPoll(!0),this._context=t}return this._context;default:throw new Error(`Input context id '${t}' is not supported.`)}}updateTable(){if(this.isConnected){if(!this._context)return this._outputElements={},void(this._bodyElement.innerHTML="");{let t=this._context,e=t.inputs,n=t.bindings,i={},r=[];for(let t of Object.keys(e)){let s=e[t],o=!0;for(let e of n.getBindingsByInput(s)){let n=ei(`${s.constructor.name}.${t}`,`${e.device}.${e.code}`,0,o);r.push(n),o&&(i[t]=n.querySelector("output"),o=!1)}}this._outputElements=i,this._bodyElement.innerHTML="";for(let t of r)this._bodyElement.appendChild(t)}}}updateTableValues(){if(this.isConnected)if(this._context){let t=this._context.inputs;for(let e of Object.keys(this._outputElements)){let n=this._outputElements[e],i=t[e].value;n.innerText=Number(i).toFixed(2)}}else for(let t of Object.keys(this._outputElements)){this._outputElements[t].innerText="---"}}updatePollStatus(){if(this.isConnected)if(this._context){let t=this._context.inputs;for(let e of Object.values(t))if(!e.polling)return void(this._pollElement.innerHTML="");this._pollElement.innerHTML="✓"}else this._pollElement.innerHTML="-"}}function ei(t,e,n,i=!0){let r=document.createElement("tr");i&&r.classList.add("primary");{let e=document.createElement("td");e.textContent=t,e.classList.add("name"),r.appendChild(e)}{let t=document.createElement("td"),e=document.createElement("output");e.innerText=i?Number(n).toFixed(2):"---",e.classList.add("value"),t.appendChild(e),r.appendChild(t)}{let t=document.createElement("td");t.classList.add("key");let n=new Wn;n.innerText=e,t.appendChild(n),r.appendChild(t)}return r}ti.define();const ni=Symbol("keyboardSource");const ii=Symbol("mouseSource");var ri=Object.freeze({__proto__:null,AutoPoller:qn,Axis:me,AxisBinding:Kn,AxisButtonBinding:jn,Button:ve,ButtonBinding:Gn,CLEAR_DOWN_STATE_BITS:254,CLEAR_INVERTED_MODIFIER_BITS:239,CLEAR_POLL_BITS:241,DOWN_STATE_BIT:1,DeviceInputAdapter:Xn,INVERTED_MODIFIER_BIT:16,InputBase:ge,InputBindings:Zn,InputCode:Wn,InputContext:Jn,InputDevice:zn,InputPort:ti,KeyCodes:Hn,Keyboard:class{constructor(t,e){this.KeyA=new ve,this.KeyB=new ve,this.KeyC=new ve,this.KeyD=new ve,this.KeyE=new ve,this.KeyF=new ve,this.KeyG=new ve,this.KeyH=new ve,this.KeyI=new ve,this.KeyJ=new ve,this.KeyK=new ve,this.KeyL=new ve,this.KeyM=new ve,this.KeyN=new ve,this.KeyO=new ve,this.KeyP=new ve,this.KeyQ=new ve,this.KeyR=new ve,this.KeyS=new ve,this.KeyT=new ve,this.KeyU=new ve,this.KeyV=new ve,this.KeyW=new ve,this.KeyX=new ve,this.KeyY=new ve,this.KeyZ=new ve,this.Digit0=new ve,this.Digit1=new ve,this.Digit2=new ve,this.Digit3=new ve,this.Digit4=new ve,this.Digit5=new ve,this.Digit6=new ve,this.Digit7=new ve,this.Digit8=new ve,this.Digit9=new ve,this.Minus=new ve,this.Equal=new ve,this.BracketLeft=new ve,this.BracketRight=new ve,this.Semicolon=new ve,this.Quote=new ve,this.Backquote=new ve,this.Backslash=new ve,this.Comma=new ve,this.Period=new ve,this.Slash=new ve,this.Escape=new ve,this.Space=new ve,this.CapsLock=new ve,this.Backspace=new ve,this.Delete=new ve,this.Tab=new ve,this.Enter=new ve,this.ArrowUp=new ve,this.ArrowDown=new ve,this.ArrowLeft=new ve,this.ArrowRight=new ve;const n=be,i=new Vn(n,t,e),r=new Zn;for(let t in this)if(Object.prototype.hasOwnProperty.call(this,t)){let e=this[t];r.bind(e,n,t)}const s=new Xn(r);i.addEventListener("input",s.onInput);const o=new qn(s);o.start(),this[ni]={device:i,bindings:r,adapter:s,autopoller:o}}destroy(){const t=this[ni];t.autopoller.stop(),t.device.removeEventListener("input",t.adapter.onInput),t.device.destroy(),t.bindings.clear()}},KeyboardDevice:Vn,Mouse:class{constructor(t,e){this.PosX=new me,this.PosY=new me,this.WheelX=new me,this.WheelY=new me,this.WheelZ=new me,this.Button0=new ve,this.Button1=new ve,this.Button2=new ve,this.Button3=new ve,this.Button4=new ve;const n=ye,i=new Yn(n,t,e),r=new Zn;for(let t in this)if(Object.prototype.hasOwnProperty.call(this,t)){let e=this[t];r.bind(e,n,t)}const s=new Xn(r);i.addEventListener("input",s.onInput);const o=new qn(s);o.start(),this[ii]={device:i,bindings:r,adapter:s,autopoller:o}}destroy(){const t=this[ii];t.autopoller.stop(),t.device.removeEventListener("input",t.adapter.onInput),t.device.destroy(),t.bindings.clear()}},MouseDevice:Yn,PRESSED_STATE_BIT:2,RELEASED_STATE_BIT:8,REPEATED_STATE_BIT:4,stringsToKeyCodes:Un});function si(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext}var oi=Object.freeze({__proto__:null,isWebGL2Supported:si});class ai{constructor(t,e){this.gl=t,this.target=e}data(t,e){const n=this.gl,i=this.target;if("number"==typeof t)n.bufferData(i,t,e||n.STATIC_DRAW);else{if(!ArrayBuffer.isView(t))throw new Error("Source data must be a typed array.");n.bufferData(i,t,e||n.STATIC_DRAW)}return this}subData(t,e=0,n,i){const r=this.gl,s=this.target;if(!ArrayBuffer.isView(t))throw new Error("Source data must be a typed array.");if(n)if(si(r))r.bufferSubData(s,e,t,n,i);else{const o=i?t.subarray(n,n+i):t.subarray(n);r.bufferSubData(s,e,o)}else r.bufferSubData(s,e,t);return this}}class ui{constructor(t,e,n){this.dataContext=new ai(t,e),this.handle=n||t.createBuffer(),t.bindBuffer(e,this.handle)}get gl(){return this.dataContext.gl}get target(){return this.dataContext.target}data(t,e){return this.dataContext.data(t,e),this}subData(t,e=0,n,i){return this.dataContext.subData(t,e,n,i),this}build(){return this.handle}}class li{constructor(t,e,n,i){this.gl=t,this.target=e,this.handle=i,this.type=n,this.bindContext=new ai(t,this.target)}bind(t){return t.bindBuffer(this.target,this.handle),this.bindContext.gl=t,this.bindContext}}function hi(t,e){switch(e){case t.BYTE:return Int8Array;case t.UNSIGNED_BYTE:return Uint8Array;case t.SHORT:return Int16Array;case t.UNSIGNED_SHORT:return Uint16Array;case t.INT:return Int32Array;case t.UNSIGNED_INT:return Uint32Array;case t.FLOAT:return Float32Array;default:throw new Error("Cannot find valid typed array for buffer type.")}}function ci(t,e){switch(e){case Int8Array:return t.BYTE;case Uint8Array:return t.UNSIGNED_BYTE;case Int16Array:return t.SHORT;case Uint16Array:return t.UNSIGNED_SHORT;case Int32Array:return t.INT;case Uint32Array:return t.UNSIGNED_INT;case Float32Array:return t.FLOAT;default:throw new Error("Cannot find valid buffer type for typed array.")}}var di=Object.freeze({__proto__:null,createBufferSource:function(t,e,n){return new(hi(t,e))(n)},createBuffer:function(t,e,n,i){let r=t.createBuffer();if(t.bindBuffer(e,r),!ArrayBuffer.isView(n))throw new Error("Source data must be a typed array.");return t.bufferData(e,n,i||t.STATIC_DRAW),r},getBufferTypedArray:hi,getTypedArrayBufferType:ci,getBufferUsage:function(t,e,n){return t.bindBuffer(e,n),t.getBufferParameter(e,t.BUFFER_USAGE)}});function pi(t,e){switch(e){case t.FLOAT:return t.uniform1f;case t.FLOAT_VEC2:return t.uniform2fv;case t.FLOAT_VEC3:return t.uniform3fv;case t.FLOAT_VEC4:return t.uniform4fv;case t.INT:return t.uniform1i;case t.INT_VEC2:return t.uniform2iv;case t.INT_VEC3:return t.uniform3iv;case t.INT_VEC4:return t.uniform4iv;case t.BOOL:return t.uniform1i;case t.BOOL_VEC2:return t.uniform2iv;case t.BOOL_VEC3:return t.uniform3iv;case t.BOOL_VEC4:return t.uniform4iv;case t.FLOAT_MAT2:return _i;case t.FLOAT_MAT3:return mi;case t.FLOAT_MAT4:return Ai;case t.SAMPLER_2D:case t.SAMPLER_CUBE:return t.uniform1i}if(si(t))switch(e){case t.UNSIGNED_INT:return t.uniform1ui;case t.UNSIGNED_INT_VEC2:return t.uniform2uiv;case t.UNSIGNED_INT_VEC3:return t.uniform3uiv;case t.UNSIGNED_INT_VEC4:return t.uniform4uiv;case t.FLOAT_MAT2x3:return bi;case t.FLOAT_MAT2x4:return wi;case t.FLOAT_MAT3x2:return Si;case t.FLOAT_MAT3x4:return Ri;case t.FLOAT_MAT4x2:return Li;case t.FLOAT_MAT4x3:return Mi;case t.SAMPLER_3D:case t.SAMPLER_2D_SHADOW:case t.SAMPLER_2D_ARRAY:case t.SAMPLER_2D_ARRAY_SHADOW:case t.SAMPLER_CUBE_SHADOW:case t.INT_SAMPLER_2D:case t.INT_SAMPLER_3D:case t.INT_SAMPLER_CUBE:case t.INT_SAMPLER_2D_ARRAY:case t.UNSIGNED_INT_SAMPLER_2D:case t.UNSIGNED_INT_SAMPLER_3D:case t.UNSIGNED_INT_SAMPLER_CUBE:case t.UNSIGNED_INT_SAMPLER_2D_ARRAY:return t.uniform1i}throw new Error("Cannot find uniform function for gl enum.")}function fi(t,e){switch(e){case t.FLOAT:return t.uniform1fv;case t.FLOAT_VEC2:return t.uniform2fv;case t.FLOAT_VEC3:return t.uniform3fv;case t.FLOAT_VEC4:return t.uniform4fv;case t.INT:return t.uniform1iv;case t.INT_VEC2:return t.uniform2iv;case t.INT_VEC3:return t.uniform3iv;case t.INT_VEC4:return t.uniform4iv;case t.BOOL:return t.uniform1iv;case t.BOOL_VEC2:return t.uniform2iv;case t.BOOL_VEC3:return t.uniform3iv;case t.BOOL_VEC4:return t.uniform4iv;case t.FLOAT_MAT2:return _i;case t.FLOAT_MAT3:return mi;case t.FLOAT_MAT4:return Ai;case t.SAMPLER_2D:case t.SAMPLER_CUBE:return t.uniform1iv}if(si(t))switch(e){case t.UNSIGNED_INT:return t.uniform1uiv;case t.UNSIGNED_INT_VEC2:return t.uniform2uiv;case t.UNSIGNED_INT_VEC3:return t.uniform3uiv;case t.UNSIGNED_INT_VEC4:return t.uniform4uiv;case t.FLOAT_MAT2x3:return bi;case t.FLOAT_MAT2x4:return wi;case t.FLOAT_MAT3x2:return Si;case t.FLOAT_MAT3x4:return Ri;case t.FLOAT_MAT4x2:return Li;case t.FLOAT_MAT4x3:return Mi;case t.SAMPLER_3D:case t.SAMPLER_2D_SHADOW:case t.SAMPLER_2D_ARRAY:case t.SAMPLER_2D_ARRAY_SHADOW:case t.SAMPLER_CUBE_SHADOW:case t.INT_SAMPLER_2D:case t.INT_SAMPLER_3D:case t.INT_SAMPLER_CUBE:case t.INT_SAMPLER_2D_ARRAY:case t.UNSIGNED_INT_SAMPLER_2D:case t.UNSIGNED_INT_SAMPLER_3D:case t.UNSIGNED_INT_SAMPLER_CUBE:case t.UNSIGNED_INT_SAMPLER_2D_ARRAY:return t.uniform1iv}throw new Error("Cannot find array uniform function for gl enum.")}function _i(t,e){this.uniformMatrix2fv(t,!1,e)}function gi(t,e,n,i,r){this.uniformMatrix2fv(t,!1,[e,n,i,r])}function mi(t,e){this.uniformMatrix3fv(t,!1,e)}function vi(t,e,n,i,r,s,o,a,u,l){this.uniformMatrix3fv(t,!1,[e,n,i,r,s,o,a,u,l])}function Ai(t,e){this.uniformMatrix4fv(t,!1,e)}function Ei(t,e,n,i,r,s,o,a,u,l,h,c,d,p,f,_,g){this.uniformMatrix4fv(t,!1,[e,n,i,r,s,o,a,u,l,h,c,d,p,f,_,g])}function bi(t,e){this.uniformMatrix2x3fv(t,!1,e)}function yi(t,e,n,i,r,s,o){this.uniformMatrix2x3fv(t,!1,[e,n,i,r,s,o])}function wi(t,e){this.uniformMatrix2x4fv(t,!1,e)}function Ti(t,e,n,i,r,s,o,a,u){this.uniformMatrix2x4fv(t,!1,[e,n,i,r,s,o,a,u])}function Si(t,e){this.uniformMatrix3x2fv(t,!1,e)}function xi(t,e,n,i,r,s,o){this.uniformMatrix3x2fv(t,!1,[e,n,i,r,s,o])}function Ri(t,e){this.uniformMatrix3x4fv(t,!1,e)}function Ci(t,e,n,i,r,s,o,a,u,l,h,c,d){this.uniformMatrix3x4fv(t,!1,[e,n,i,r,s,o,a,u,l,h,c,d])}function Li(t,e){this.uniformMatrix4x2fv(t,!1,e)}function Oi(t,e,n,i,r,s,o,a,u){this.uniformMatrix4x2fv(t,!1,[e,n,i,r,s,o,a,u])}function Mi(t,e){this.uniformMatrix4x3fv(t,!1,e)}function Ii(t,e,n,i,r,s,o,a,u,l,h,c,d){this.uniformMatrix4x3fv(t,!1,[e,n,i,r,s,o,a,u,l,h,c,d])}var Ni=Object.freeze({__proto__:null,getUniformFunction:pi,getUniformFunctionForComponent:function(t,e){switch(e){case t.FLOAT:return t.uniform1f;case t.FLOAT_VEC2:return t.uniform2f;case t.FLOAT_VEC3:return t.uniform3f;case t.FLOAT_VEC4:return t.uniform4f;case t.INT:return t.uniform1i;case t.INT_VEC2:return t.uniform2i;case t.INT_VEC3:return t.uniform3i;case t.INT_VEC4:return t.uniform4i;case t.BOOL:return t.uniform1i;case t.BOOL_VEC2:return t.uniform2i;case t.BOOL_VEC3:return t.uniform3i;case t.BOOL_VEC4:return t.uniform4i;case t.FLOAT_MAT2:return gi;case t.FLOAT_MAT3:return vi;case t.FLOAT_MAT4:return Ei;case t.SAMPLER_2D:case t.SAMPLER_CUBE:return t.uniform1i}if(si(t))switch(e){case t.UNSIGNED_INT:return t.uniform1ui;case t.UNSIGNED_INT_VEC2:return t.uniform2ui;case t.UNSIGNED_INT_VEC3:return t.uniform3ui;case t.UNSIGNED_INT_VEC4:return t.uniform4ui;case t.FLOAT_MAT2x3:return yi;case t.FLOAT_MAT2x4:return Ti;case t.FLOAT_MAT3x2:return xi;case t.FLOAT_MAT3x4:return Ci;case t.FLOAT_MAT4x2:return Oi;case t.FLOAT_MAT4x3:return Ii;case t.SAMPLER_3D:case t.SAMPLER_2D_SHADOW:case t.SAMPLER_2D_ARRAY:case t.SAMPLER_2D_ARRAY_SHADOW:case t.SAMPLER_CUBE_SHADOW:case t.INT_SAMPLER_2D:case t.INT_SAMPLER_3D:case t.INT_SAMPLER_CUBE:case t.INT_SAMPLER_2D_ARRAY:case t.UNSIGNED_INT_SAMPLER_2D:case t.UNSIGNED_INT_SAMPLER_3D:case t.UNSIGNED_INT_SAMPLER_CUBE:case t.UNSIGNED_INT_SAMPLER_2D_ARRAY:return t.uniform1i}throw new Error("Cannot find per component uniform function for gl enum.")},getUniformFunctionForArray:fi});function Bi(t,e){let n=[];const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let i=t.getActiveUniform(e,r);if(!i)break;n.push(i)}return n}function Di(t,e){let n=[];const i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;++r){let i=t.getActiveAttrib(e,r);i&&n.push(i)}return n}function Pi(t,e){let n={};const i=Bi(t,e);for(let r of i){const i=r.name,s=r.size,o=r.type,a=t.getUniformLocation(e,i);let u;u=s<=1?pi(t,o):fi(t,o),n[i]={type:o,length:s,location:a,set:u}}return n}function ki(t,e){switch(e){case t.FLOAT:return 1;case t.FLOAT_VEC2:return 2;case t.FLOAT_VEC3:return 3;case t.FLOAT_VEC4:case t.FLOAT_MAT2:return 4;case t.FLOAT_MAT3:return 9;case t.FLOAT_MAT4:return 16;default:throw new Error("Invalid vertex attribute type.")}}function Hi(t,e){let n={};const i=Di(t,e);for(let r of i){const i=r.name,s=r.size,o=r.type,a=t.getAttribLocation(e,i),u=ki(t,o);n[i]={type:o,length:s,location:a,size:u}}return n}function Fi(t,e,n){let i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)||(console.error(t.getShaderInfoLog(i)+`\nFailed to compile shader:\n${n}`),t.deleteShader(i)),i}function Ui(t,e,n){for(let i of n)t.attachShader(e,i);t.linkProgram(e);for(let i of n)t.detachShader(e,i),t.deleteShader(i);return t.getProgramParameter(e,t.LINK_STATUS)||(console.error(t.getProgramInfoLog(e)),t.deleteProgram(e)),e}function $i(t,e,n,i,r){r?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),t.drawElements(e,i,t.UNSIGNED_SHORT,n)):t.drawArrays(e,n,i)}var Ki=Object.freeze({__proto__:null,createShader:Fi,createShaderProgram:Ui,draw:$i,getProgramInfo:function(t,e){return{linkStatus:t.getProgramParameter(e,t.LINK_STATUS),deleteStatus:t.getProgramParameter(e,t.DELETE_STATUS),validateStatus:t.getProgramParameter(e,t.VALIDATE_STATUS),validationLog:t.getProgramInfoLog(e),activeUniforms:Pi(t,e),activeAttributes:Hi(t,e)}},getActiveUniforms:Bi,getActiveAttribs:Di});class Gi{constructor(t,e){this.handle=e,this.activeUniforms=Pi(t,e),this.activeAttributes=Hi(t,e),this.drawContext=new ji(t,this)}bind(t){return t.useProgram(this.handle),this.drawContext.gl=t,this.drawContext}}class ji{constructor(t,e){this.gl=t,this.parent=e}uniform(t,e){const n=this.parent.activeUniforms;if(t in n){let i=n[t],r=i.location;i.set.call(this.gl,r,e)}return this}attribute(t,e,n,i=!1,r=0,s=0){const o=this.gl,a=this.parent.activeAttributes;if(t in a){let u=a[t],l=u.location,h=u.size;n?(o.bindBuffer(o.ARRAY_BUFFER,n),o.vertexAttribPointer(l,h,e,i,r,s),o.enableVertexAttribArray(l)):o.disableVertexAttribArray(l)}return this}draw(t,e,n,i,r=null){return $i(t,e,n,i,r),this.parent}}class zi{constructor(t,e){this.handle=e||t.createProgram(),this.shaders=[],this.gl=t}shader(t,e){let n=Fi(this.gl,t,e);return this.shaders.push(n),this}link(){return Ui(this.gl,this.handle,this.shaders),this.shaders.length=0,this.handle}}var Vi=Object.freeze({__proto__:null,BufferBuilder:ui,BufferDataContext:ai,BufferEnums:{BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},BufferHelper:di,BufferInfo:li,BufferInfoBuilder:class{constructor(t,e,n){this.bufferBuilder=new ui(t,e,n),this.bufferType=t.FLOAT}get gl(){return this.bufferBuilder.gl}get handle(){return this.bufferBuilder.handle}get target(){return this.bufferBuilder.target}data(t,e){if(this.bufferBuilder.data(t,e),"number"!=typeof t){const e=t.constructor;this.bufferType=ci(this.gl,e)}return this}subData(t,e,n,i){this.bufferBuilder.subData(t,e,n,i);const r=t.constructor;return this.bufferType=ci(this.gl,r),this}build(){const t=this.bufferBuilder.build(),e=this.gl,n=this.target,i=this.bufferType;return new li(e,n,i,t)}},GLHelper:oi,ProgramAttributeEnums:{BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126,HALF_FLOAT:5131},ProgramBuilder:zi,ProgramHelper:Ki,ProgramInfo:Gi,ProgramInfoBuilder:class{constructor(t,e){this.programBuilder=new zi(t,e)}get gl(){return this.programBuilder.gl}get handle(){return this.programBuilder.handle}get shaders(){return this.programBuilder.shaders}shader(t,e){return this.programBuilder.shader(t,e),this}link(){const t=this.programBuilder.link();return new Gi(this.gl,t)}},ProgramInfoDrawContext:ji,ProgramUniformEnums:{FLOAT:5126,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,UNSIGNED_INT:5125,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311},ProgramUniformFunctions:Ni});class Yi{next(){return 0}}class Wi extends Yi{next(){return Math.random()}}class qi extends Yi{constructor(t){super(),this.seed=t,this.a=t}next(){var t=this.a+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}var Xi=Object.freeze({__proto__:null,MathRandom:Wi,Mulberry32:qi,Random:class{static get RAND(){let t=new this;return this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this),Object.defineProperty(this,"RAND",{value:t}),t}constructor(t){this.generator="number"==typeof t?new qi(t):t||new Wi,this.next=this.next.bind(this),this.choose=this.choose.bind(this),this.range=this.range.bind(this),this.rangeInt=this.rangeInt.bind(this),this.sign=this.sign.bind(this)}static next(){return this.RAND.next()}next(){return this.generator.next()}static choose(t){return this.RAND.choose(t)}choose(t){return t[Math.floor(this.generator.next()*t.length)]}static range(t,e){return this.RAND.range(t,e)}range(t,e){return(e-t)*this.generator.next()+t}static rangeInt(t,e){return this.RAND.rangeInt(t,e)}rangeInt(t,e){return Math.trunc(this.range(t,e))}static sign(){return this.RAND.sign()}sign(){return this.generator.next()<.5?-1:1}},RandomBase:Yi,SmallFastCounter32:class extends Yi{constructor(t,e,n,i){super(),this.a=t,this.b=e,this.c=n,this.d=i}next(){let{a:t,b:e,c:n,d:i}=this;t|=0,e|=0,n|=0,i|=0;let r=(t+e|0)+i|0;return i=i+1|0,t=e^e>>>9,e=n+(n<<3)|0,n=n<<21|n>>>11,n=n+r|0,this.a=t,this.b=e,this.c=n,this.d=i,(r>>>0)/4294967296}}}),Qi=1e-6,Zi="undefined"!=typeof Float32Array?Float32Array:Array;function Ji(){var t=new Zi(16);return Zi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function tr(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],d=e[10],p=e[11],f=e[12],_=e[13],g=e[14],m=e[15],v=n*a-i*o,A=n*u-r*o,E=n*l-s*o,b=i*u-r*a,y=i*l-s*a,w=r*l-s*u,T=h*_-c*f,S=h*g-d*f,x=h*m-p*f,R=c*g-d*_,C=c*m-p*_,L=d*m-p*g,O=v*L-A*C+E*R+b*x-y*S+w*T;return O?(O=1/O,t[0]=(a*L-u*C+l*R)*O,t[1]=(r*C-i*L-s*R)*O,t[2]=(_*w-g*y+m*b)*O,t[3]=(d*y-c*w-p*b)*O,t[4]=(u*x-o*L-l*S)*O,t[5]=(n*L-r*x+s*S)*O,t[6]=(g*E-f*w-m*A)*O,t[7]=(h*w-d*E+p*A)*O,t[8]=(o*C-a*x+l*T)*O,t[9]=(i*x-n*C-s*T)*O,t[10]=(f*y-_*E+m*v)*O,t[11]=(c*E-h*y-p*v)*O,t[12]=(a*S-o*R-u*T)*O,t[13]=(n*R-i*S+r*T)*O,t[14]=(_*A-f*b-g*v)*O,t[15]=(h*b-c*A+d*v)*O,t):null}function er(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function nr(t,e){var n=new Zi(3);!function(t,e){var n=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],u=e[8],l=e[9],h=e[10];t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(u,l,h)}(n,e);var i=1/n[0],r=1/n[1],s=1/n[2],o=e[0]*i,a=e[1]*r,u=e[2]*s,l=e[4]*i,h=e[5]*r,c=e[6]*s,d=e[8]*i,p=e[9]*r,f=e[10]*s,_=o+h+f,g=0;return _>0?(g=2*Math.sqrt(_+1),t[3]=.25*g,t[0]=(c-p)/g,t[1]=(d-u)/g,t[2]=(a-l)/g):o>h&&o>f?(g=2*Math.sqrt(1+o-h-f),t[3]=(c-p)/g,t[0]=.25*g,t[1]=(a+l)/g,t[2]=(d+u)/g):h>f?(g=2*Math.sqrt(1+h-o-f),t[3]=(d-u)/g,t[0]=(a+l)/g,t[1]=.25*g,t[2]=(c+p)/g):(g=2*Math.sqrt(1+f-o-h),t[3]=(a-l)/g,t[0]=(d+u)/g,t[1]=(c+p)/g,t[2]=.25*g),t}function ir(t,e,n,i,r,s,o){var a=1/(e-n),u=1/(i-r),l=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*u,t[14]=(o+s)*l,t[15]=1,t}function rr(t,e,n,i){var r,s,o,a,u,l,h,c,d,p,f=e[0],_=e[1],g=e[2],m=i[0],v=i[1],A=i[2],E=n[0],b=n[1],y=n[2];return Math.abs(f-E)<Qi&&Math.abs(_-b)<Qi&&Math.abs(g-y)<Qi?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(h=f-E,c=_-b,d=g-y,r=v*(d*=p=1/Math.hypot(h,c,d))-A*(c*=p),s=A*(h*=p)-m*d,o=m*c-v*h,(p=Math.hypot(r,s,o))?(r*=p=1/p,s*=p,o*=p):(r=0,s=0,o=0),a=c*o-d*s,u=d*r-h*o,l=h*s-c*r,(p=Math.hypot(a,u,l))?(a*=p=1/p,u*=p,l*=p):(a=0,u=0,l=0),t[0]=r,t[1]=a,t[2]=h,t[3]=0,t[4]=s,t[5]=u,t[6]=c,t[7]=0,t[8]=o,t[9]=l,t[10]=d,t[11]=0,t[12]=-(r*f+s*_+o*g),t[13]=-(a*f+u*_+l*g),t[14]=-(h*f+c*_+d*g),t[15]=1,t)}function sr(){var t=new Zi(3);return Zi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function or(t,e,n){var i=new Zi(3);return i[0]=t,i[1]=e,i[2]=n,i}function ar(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function ur(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function lr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function hr(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function cr(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],u=n[2];return t[0]=r*u-s*a,t[1]=s*o-i*u,t[2]=i*a-r*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function dr(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}function pr(){var t=new Zi(4);return Zi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function fr(t,e,n,i){var r,s,o,a,u,l=e[0],h=e[1],c=e[2],d=e[3],p=n[0],f=n[1],_=n[2],g=n[3];return(s=l*p+h*f+c*_+d*g)<0&&(s=-s,p=-p,f=-f,_=-_,g=-g),1-s>Qi?(r=Math.acos(s),o=Math.sin(r),a=Math.sin((1-i)*r)/o,u=Math.sin(i*r)/o):(a=1-i,u=i),t[0]=a*l+u*p,t[1]=a*h+u*f,t[2]=a*c+u*_,t[3]=a*d+u*g,t}sr(),function(){var t,e=(t=new Zi(4),Zi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();var _r;sr(),or(1,0,0),or(0,1,0),pr(),pr(),_r=new Zi(9),Zi!=Float32Array&&(_r[1]=0,_r[2]=0,_r[3]=0,_r[5]=0,_r[6]=0,_r[7]=0),_r[0]=1,_r[4]=1,_r[8]=1;const gr=or(0,1,0);class mr{constructor(t,e){this.projectionMatrix=t,this.viewMatrix=e}resize(t,e){return this}}const vr=Math.PI/3;const Ar=Math.PI/180;function Er(t,e,n){t?(n.nodes[t].children.push(e),n.nodes[e].parent=t):(n.roots.push(e),n.nodes[e].parent=0)}function br(t,e,n){if(t){let i=n.nodes[t].children,r=i.indexOf(e);i.splice(r,1),n.nodes[e].parentNode=0}else{let t=n.roots,i=t.indexOf(e);t.splice(i,1),n.nodes[e].parentNode=0}}function yr(t,e,n,i,r){if(n>=100)return;let s=i(e,t);if(!1===s)return;let o=t.nodes[e],a=r?r(o.children,e,t):o.children;for(let e of a)yr(t,e,n+1,i,r);"function"==typeof s&&s(e,t)}function wr(t,e){delete e.nodes[t]}var Tr=Object.freeze({__proto__:null,Camera:mr,FirstPersonCameraController:class{constructor(t={locky:!1}){this.locky=t.locky,this.position=sr(),this.forward=or(0,0,-1),this.right=or(1,0,0),this.up=or(0,1,0),this.forwardAmount=0,this.rightAmount=0,this.upAmount=0,this.pitch=0,this.yaw=-90}look(t,e,n=1){return this.pitch=Math.min(89.9,Math.max(-89.9,this.pitch+e*n)),this.yaw=(this.yaw+t*n)%360,this}move(t,e=0,n=0,i=1){return this.forwardAmount+=t*i,this.rightAmount+=e*i,this.upAmount+=n*i,this}apply(t){let{position:e,forward:n,right:i,up:r,forwardAmount:s,rightAmount:o,upAmount:a,pitch:u,yaw:l}=this,h=l*Ar,c=u*Ar,d=Math.cos(h),p=Math.cos(c),f=Math.sin(h),_=d*p,g=Math.sin(c),m=f*p;hr(n,ar(n,_,this.locky?0:g,m)),hr(i,cr(i,n,r));let v=sr();return lr(v,n,s),ur(e,e,v),lr(v,i,o),ur(e,e,v),lr(v,r,a),ur(e,e,v),this.forwardAmount=0,this.rightAmount=0,this.upAmount=0,this.locky&&ar(n,_,g,m),rr(t,e,ur(v,e,n),r),t}},OrthographicCamera:class extends mr{constructor(t,e,n,i,r=-1e3,s=1e3){super(Ji(),Ji()),this.orthoBounds={left:void 0===t?void 0:Number(t),top:void 0===e?void 0:Number(e),right:void 0===n?void 0:Number(n),bottom:void 0===i?void 0:Number(i)},this.clippingPlane={near:Number(r),far:Number(s)}}resize(t,e){const{near:n,far:i}=this.clippingPlane,{left:r,top:s,right:o,bottom:a}=this.orthoBounds;let u=this.projectionMatrix,l=void 0!==r;if(void 0!==t)if(l){const l=t/e;ir(u,r*l,o*l,a,s,n,i)}else ir(u,0,t,e,0,n,i);else l?ir(u,r,o,a,s,n,i):ir(u,-1,1,1,-1,-1,1);return this}},PerspectiveCamera:class extends mr{constructor(t=vr,e=.1,n=1e3){super(Ji(),Ji()),this.fieldOfView=Number(t),this.clippingPlane={near:Number(e),far:Number(n)}}resize(t,e){const n=void 0===t?1:t/e,{near:i,far:r}=this.clippingPlane;return function(t,e,n,i,r){var s,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(s=1/(i-r),t[10]=(r+i)*s,t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i)}(this.projectionMatrix,this.fieldOfView,n,i,r),this}},SceneGraph:class{constructor(){this.nodes={},this.roots=[],this._nextAvailableSceneNodeId=1}createSceneNode(t){let e=this._nextAvailableSceneNodeId++,n={parent:0,children:[]};return this.nodes[e]=n,Er(t,e,this),e}createSceneNodes(t,e){let n=[];for(let i=0;i<t;++i)n.push(this.createSceneNode(e));return n}deleteSceneNode(t){if(!(t in this.nodes))throw new Error("Cannot delete non-existant scene node for scene graph.");br(this.nodes[t].parent,t,this),yr(this,t,0,wr)}deleteSceneNodes(t){for(let e of t)this.deleteSceneNode(e)}getSceneNodeInfo(t){return this.nodes[t]}parentSceneNode(t,e){br(this.nodes[t].parent,t,this),Er(e,t,this)}replaceSceneNode(t,e){let n=this.nodes[t],i=n.parent,r=n.children.slice();if(br(i,t,this),n.children.length=0,e){let t=this.nodes[e];br(t.parent,e,this),t.children.push(...r),Er(i,e,this)}else if(i){this.nodes[i].children.push(...r)}else this.roots.push(...r);for(let t of r)this.nodes[t].parent=i}walk(t,e={}){const{from:n,childFilter:i}=e;let r;r=n?Array.isArray(n)?n:[n]:this.roots,i&&(r=i(r,0,this));for(let e of r)yr(this,e,0,t,i)}},lookAt:function(t,e,n,i=0,r=1){let s=sr(),o=pr();er(s,t),nr(o,t),rr(t,s,or(e,n,i),gr);let a=pr();nr(a,t),fr(o,o,a,r),function(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=i+i,u=r+r,l=s+s,h=i*a,c=i*u,d=i*l,p=r*u,f=r*l,_=s*l,g=o*a,m=o*u,v=o*l;t[0]=1-(p+_),t[1]=c+v,t[2]=d-m,t[3]=0,t[4]=c-v,t[5]=1-(h+_),t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-(h+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1}(t,o,s)},panTo:function(t,e,n,i=0,r=1){let s=sr();er(s,t),function(t,e,n){var i,r,s,o,a,u,l,h,c,d,p,f,_=n[0],g=n[1],m=n[2];e===t?(t[12]=e[0]*_+e[4]*g+e[8]*m+e[12],t[13]=e[1]*_+e[5]*g+e[9]*m+e[13],t[14]=e[2]*_+e[6]*g+e[10]*m+e[14],t[15]=e[3]*_+e[7]*g+e[11]*m+e[15]):(i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],d=e[9],p=e[10],f=e[11],t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=d,t[10]=p,t[11]=f,t[12]=i*_+a*g+c*m+e[12],t[13]=r*_+u*g+d*m+e[13],t[14]=s*_+l*g+p*m+e[14],t[15]=o*_+h*g+f*m+e[15])}(t,t,or((e-s[0])*r,(n-s[1])*r,(i-s[2])*r))},screenToWorldRay:function(t,e,n,i,r,s=!1){let o=function(t,e,n,i){var r=new Zi(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}(e,n,-1,1),a=Ji();return tr(a,i),dr(o,o,a),o[2]=-1,o[3]=0,tr(a,r),dr(o,o,a),t[0]=o[0],t[1]=o[1],t[2]=o[2],s&&hr(t,t),t}});const Sr={on(t,e,n=e){let i;if(this.__events.has(t)?i=this.__events.get(t):(i=new Map,this.__events.set(t,i)),i.has(n))throw new Error(`Found callback for event '${t}' with the same handle '${n}'.`);return i.set(n,e),this},off(t,e){if(!this.__events.has(t))throw new Error(`Unable to find event '${t}'.`);{const n=this.__events.get(t);if(!n.has(e))throw new Error(`Unable to find callback for event '${t}' with handle '${e}'.`);n.delete(e)}return this},once(t,e,n=e){return this.on(t,((...i)=>{this.off(t,n),e.apply(this.__context||this,i)}),n)},emit(t,...e){if(this.__events.has(t)){let n=[];const i=Array.from(this.__events.get(t).values());for(const t of i){let i=t.apply(this.__context||this,e);i&&n.push(i)}return n}return this.__events.set(t,new Map),[]}};const xr={create:function(t){const e=Object.create(Sr);return e.__events=new Map,e.__context=t,e},assign:function(t,e){const n=Object.assign(t,Sr);return n.__events=new Map,n.__context=e,n},mixin:function(t,e){const n=t.prototype;return Object.assign(n,Sr),n.__events=new Map,n.__context=e,n}},Rr={5:Lr("#7F8C8D"),4:Lr("#2ECC71"),3:Lr("#4794C8"),2:Lr("#F39C12"),1:Lr("#C0392B"),0:[""]};function Cr(t,e){return t-e}function Lr(t){return[`background: ${t}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em"]}function Or(){}function Mr(t){switch(t){case 5:return console.trace;case 4:case 3:return console.log;case 2:return console.warn;case 1:return console.error;case 0:return Or;default:return console.log}}function Ir(t,e,n,i){if(e&&t.unshift(`[${e}]`),n){let e=[`%c${n}`,Rr[i].join(";")];t.unshift(e[0],e[1])}return t}const Nr=Symbol("level"),Br=Symbol("domain"),Dr={};let Pr=2,kr="app";class Hr{static get TRACE(){return 5}static get DEBUG(){return 4}static get INFO(){return 3}static get WARN(){return 2}static get ERROR(){return 1}static get OFF(){return 0}static getLogger(t){return t in Dr?Dr[t]:Dr[t]=new Hr(t)}static useDefaultLevel(t){return Pr=t,this}static useDefaultDomain(t){return kr=t,this}constructor(t){this.name=t,this[Nr]=Pr,this[Br]=kr}setLevel(t){return this[Nr]=t,this}getLevel(){return this[Nr]}setDomain(t){return this[Br]=t,this}getDomain(){return this[Br]}log(t,...e){if(Cr(this[Nr],t)<0)return this;Ir(e,this.name,this[Br],t),Mr(t)(...e)}trace(...t){if(Cr(this[Nr],5)<0)return this;Ir(t,this.name,this[Br],5),Mr(5)(...t)}debug(...t){if(Cr(this[Nr],4)<0)return this;Ir(t,this.name,this[Br],4),Mr(4)(...t)}info(...t){if(Cr(this[Nr],3)<0)return this;Ir(t,this.name,this[Br],3),Mr(3)(...t)}warn(...t){if(Cr(this[Nr],2)<0)return this;Ir(t,this.name,this[Br],2),Mr(2)(...t)}error(...t){if(Cr(this[Nr],1)<0)return this;Ir(t,this.name,this[Br],1),Mr(1)(...t)}}function Fr(t,e){const n=document.createElement("a"),i=e.indexOf(";");e=e.substring(0,i+1)+"headers=Content-Disposition%3A%20attachment%3B%20filename="+t+";"+e.substring(i+1),n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}const Ur=["svg","g"];function $r(t,e=t.cloneNode(!0)){let n=t.childNodes,i=e.childNodes;for(var r=0;r<i.length;r++){let t=i[r],e=t.tagName;if(-1!=Ur.indexOf(e))$r(n[r],t);else if(n[r]instanceof Element){const e=window.getComputedStyle(n[r]);let i=[];for(let t of Object.keys(e))i.push(`${t}:${e.getPropertyValue(t)};`);t.setAttribute("style",i.join(""))}}return e}class Kr{constructor(t){this._heap=[],this._comparator=t}get size(){return this._heap.length}clear(){this._heap.length=0}push(...t){for(const e of t)this._heap.push(e),this._shiftUp()}pop(){const t=this.peek();let e=this._heap.length-1;return e>0&&this._swap(0,e),this._heap.pop(),this._shiftDown(),t}replace(t){const e=this.peek();return this._heap[0]=t,this._shiftDown(),e}peek(){return this._heap[0]}_compare(t,e){return this._comparator(this._heap[t],this._heap[e])}_swap(t,e){let n=this._heap[t];this._heap[t]=this._heap[e],this._heap[e]=n}_shiftUp(){let t,e=this._heap.length-1;for(;e>0&&this._compare(e,t=Gr(e));)this._swap(e,t),e=t}_shiftDown(){const t=this._heap.length;let e,n=0,i=jr(n),r=i<t,s=zr(n),o=s<t;for(;r&&this._compare(i,n)||o&&this._compare(s,n);)e=o&&this._compare(s,i)?s:i,this._swap(n,e),n=e,i=jr(n),r=i<t,s=zr(n),o=s<t}values(){return this._heap}[Symbol.iterator](){return this._heap[Symbol.iterator]()}}function Gr(t){return(t+1>>>1)-1}function jr(t){return 1+(t<<1)}function zr(t){return t+1<<1}function Vr(t,e,n){return Math.min(n,Math.max(e,t))}function Yr(t,e,n){let i=n-e,r=(t-e)%i;return r<0&&(r+=i),r+e}const Wr=Math.PI/180,qr=180/Math.PI;function Xr(t,e,n){if(n.has(e))throw new Error(`Found cyclic dependency for '${e.name||e}'.`);if(!t.visited.has(e)){if(t.visited.add(e),t.edgeMap.has(e)){let i=t.edgeMap.get(e);if(i.size>0){n.add(e);for(let e of i)Xr(t,e,n);n.delete(e)}}t.dst.push(e)}}function Qr(t,e,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NaN,s=null){return t.fscore[e]=n,t.gscore[e]=i,t.hscore[e]=r,t.parents[e]=s,e}var Zr=Object.freeze({__proto__:null,Eventable:xr,FILE_TYPE_PNG:"png",FILE_TYPE_SVG:"svg",Logger:Hr,PriorityQueue:Kr,astarSearch:function(t,e,n,i){let r={fscore:{},gscore:{},hscore:{},parents:{}};Qr(r,t);let s=new Set,o=new Set;for(s.add(t);s.size>0;){let t;for(let e of s)t?r.fscore[e]<r.fscore[t]&&(t=e):t=e;let a=t;if(a===e){let t=[];for(;r.parents[a];)t.push(a),a=r.parents[a];return t.push(a),t.reverse()}o.add(a),s.delete(a);for(let t of n(a)){if(o.has(t))continue;let n=r.gscore[a]+1,u=!1;s.has(t)?n<r.gscore[t]&&(u=!0):(u=!0,Qr(r,t),r.hscore[t]=i(t,e),s.add(t)),u&&(r.parents[t]=a,r.gscore[t]=n,r.fscore[t]=n+r.hscore[t])}}return[]},bitCount:function(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24},bresenhamLine:function(t,e,n,i,r){let s=Math.floor(t),o=Math.floor(e),a=Math.floor(n),u=Math.floor(i),l=Math.abs(n-t),h=t<n?1:-1,c=-Math.abs(i-e),d=e<i?1:-1,p=l+c,f=s,_=o,g=r(f,_);if(void 0!==g)return g;let m=l*l+c*c,v=0;for(;v<m&&(f!==a||_!==u);){++v;let t=2*p;if(t>=c&&(p+=c,f+=h),t<=l&&(p+=l,_+=d),g=r(f,_),void 0!==g)return g}},clamp:Vr,cycle:Yr,direction2:function(t,e,n,i){let r=n-t,s=i-e;return Math.atan2(s,r)},distance2:function(t,e,n,i){let r=n-t,s=i-e;return Math.sqrt(r*r+s*s)},downloadImageFromSVG:function(t,e,n,i,r){const s=function(t){const e=$r(t),n=(new XMLSerializer).serializeToString(e);return new Blob([n],{type:"image/svg+xml"})}(n);switch(e){case"png":{const n=URL.createObjectURL(s),o=document.createElement("canvas"),a=o.getContext("2d"),u=window.devicePixelRatio||1;o.width=i*u,o.height=r*u,o.style.width=i+"px",o.style.height=r+"px",a.setTransform(u,0,0,u,0,0);const l=new Image;l.onload=()=>{a.drawImage(l,0,0),URL.revokeObjectURL(n);const i=o.toDataURL("image/"+e).replace("image/"+e,"image/octet-stream");Fr(t,i)},l.src=n}break;case"svg":{const e=new FileReader;e.onload=()=>{Fr(t,e.result)},e.readAsDataURL(s)}break;default:throw new Error("Unknown file type '"+e+"'")}},downloadText:function(t,e){Fr(t,"data:text/plain; charset=utf-8,"+encodeURIComponent(e))},downloadURL:Fr,fisherYatesShuffle:function(t){for(let e=t.length-1;e>0;--e){let n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}return t},lerp:function(t,e,n){return t+(e-t)*n},lookAt2:function(t,e,n){return Vr(t+Yr(e-t,-Math.PI,Math.PI),t-n,t+n)},toDegrees:function(t){return t*qr},toRadians:function(t){return t*Wr},topoSort:function(t,e){let n=[];for(let i of t){let t=e(i);if(Array.isArray(t))n.push([i,...t]);else if(t)throw new Error("Dependency callback must return an array.")}return function(t,e,n=[]){let i=new Map;for(let t of e)if(t.length>1){let e=t[0],n=t[1];i.has(e)||i.set(e,new Set),i.has(n)||i.set(n,new Set),i.get(e).add(n)}let r={edgeMap:i,index:t.length,visited:new Set,dst:n};for(let e of t)Xr(r,e,new Set);return n}(function(t){let e=new Set;for(let n of t)for(let t of n)e.add(t);return Array.from(e)}(n),function(t){let e=[];for(let n of t){let t=n[0];for(let i=1;i<n.length;++i){let r=n[i];e.push([t,r])}}return e}(n))},uploadFile:async function(t=[],e=!1){return new Promise(((n,i)=>{const r=document.createElement("input");r.addEventListener("change",(t=>{n(e?t.target.files:t.target.files[0])})),r.type="file",r.accept=t.join(","),r.style.display="none",r.toggleAttribute("multiple",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}))},uuid:function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)},withinRadius:function(t,e,n,i,r){const s=t-n,o=e-i;return s*s+o*o<=r*r}});t.asset=ae,t.display=_e,t.input=ri,t.mogli=Vi,t.random=Xi,t.scene=Tr,t.util=Zr,Object.defineProperty(t,"__esModule",{value:!0})}));
