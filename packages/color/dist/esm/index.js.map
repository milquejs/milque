{"version":3,"file":"index.js","sources":["../../src/rgba.js","../../src/grayscale.js"],"sourcesContent":["/**\n * @typedef {ReturnType<create>} RGBA\n */\n\nexport function create() {\n  return 0x0;\n}\n\n/**\n * @param {number} red\n * @param {number} green\n * @param {number} blue\n * @param {number} [alpha]\n */\nexport function fromBytes(red, green, blue, alpha = 0xff) {\n  return (\n    ((alpha & 0xff) << 24) | ((red & 0xff) << 16) | ((green & 0xff) << 8) | (blue & 0xff)\n  );\n}\n\n/**\n * @param {number} redf\n * @param {number} greenf\n * @param {number} bluef\n * @param {number} alphaf\n */\nexport function fromFloats(redf, greenf, bluef, alphaf = 1.0) {\n  let r = Math.floor(Math.max(Math.min(redf, 1), 0) * 255);\n  let g = Math.floor(Math.max(Math.min(greenf, 1), 0) * 255);\n  let b = Math.floor(Math.max(Math.min(bluef, 1), 0) * 255);\n  let a = Math.floor(Math.max(Math.min(alphaf, 1), 0) * 255);\n  return fromBytes(r, g, b, a);\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function red(hexValue) {\n  return (hexValue >> 16) & 0xff;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function redf(hexValue) {\n  return ((hexValue >> 16) & 0xff) / 255.0;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function green(hexValue) {\n  return (hexValue >> 8) & 0xff;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function greenf(hexValue) {\n  return ((hexValue >> 8) & 0xff) / 255.0;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function blue(hexValue) {\n  return hexValue & 0xff;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function bluef(hexValue) {\n  return (hexValue & 0xff) / 255.0;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function alpha(hexValue) {\n  let result = (hexValue >> 24) & 0xff;\n  if (result === 0x00) {\n    return 0xff;\n  }\n  return result;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function alphaf(hexValue) {\n  return alpha(hexValue) / 255.0;\n}\n\nconst OPACITY_EPSILON = 0.01;\n\n/**\n * @param {RGBA} from\n * @param {RGBA} to\n * @param {number} delta\n */\nexport function mix(from = 0x000000, to = 0xffffff, delta = 0.5) {\n  const rm = redf(from);\n  const gm = greenf(from);\n  const bm = bluef(from);\n  const am = alphaf(from);\n  const rf = (redf(to) - rm) * delta + rm;\n  const gf = (greenf(to) - gm) * delta + gm;\n  const bf = (bluef(to) - bm) * delta + bm;\n  /** @type {number|undefined} */\n  let af = (alphaf(to) - am) * delta + am;\n  if (af < OPACITY_EPSILON) {\n    af = undefined;\n  }\n  return fromFloats(rf, gf, bf, af);\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function toCSSColorString(hexValue) {\n  if (typeof hexValue !== 'number') {\n    throw new Error('Not a valid number for hex color value.');\n  }\n  let r = red(hexValue).toString(16).padStart(2, '0');\n  let g = green(hexValue).toString(16).padStart(2, '0');\n  let b = blue(hexValue).toString(16).padStart(2, '0');\n  return `#${r}${g}${b}`;\n}\n\n/**\n * @param {RGBA} hexValue\n */\nexport function toFloatVector(hexValue) {\n  if (typeof hexValue !== 'number') {\n    throw new Error('Not a valid number for hex color value.');\n  }\n  return [redf(hexValue), greenf(hexValue), bluef(hexValue), alphaf(hexValue)];\n}\n","/**\n * @typedef {ReturnType<create>} Grayscale\n */\n\nexport function create() {\n  return 0x0;\n}\n\n/**\n * @param {number} gray\n * @param {number} alpha\n */\nexport function fromBytes(gray, alpha = 0xff) {\n  return (\n    ((alpha & 0xff) << 8) | (gray & 0xff)\n  );\n}\n\n/**\n * @param {number} grayf\n * @param {number} alphaf\n */\nexport function fromFloats(grayf, alphaf = 1.0) {\n  let g = Math.floor(Math.max(Math.min(grayf, 1), 0) * 255);\n  let a = Math.floor(Math.max(Math.min(alphaf, 1), 0) * 255);\n  return fromBytes(g, a);\n}\n\n/**\n * @param {Grayscale} hexValue\n */\nexport function gray(hexValue) {\n  return hexValue & 0xff;\n}\n\n/**\n * @param {Grayscale} hexValue\n */\nexport function grayf(hexValue) {\n  return (hexValue & 0xff) / 255.0;\n}\n\n/**\n * @param {Grayscale} hexValue\n */\nexport function alpha(hexValue) {\n  let result = (hexValue >> 8) & 0xff;\n  if (result === 0x00) {\n    return 0xff;\n  }\n  return result;\n}\n\n/**\n * @param {Grayscale} hexValue\n */\nexport function alphaf(hexValue) {\n  return alpha(hexValue) / 255.0;\n}\n\nconst OPACITY_EPSILON = 0.01;\n\n/**\n * @param {Grayscale} from\n * @param {Grayscale} to\n * @param {number} delta\n */\nexport function mix(from = 0x0000, to = 0xffff, delta = 0.5) {\n  const gm = grayf(from);\n  const am = alphaf(from);\n  const gf = (grayf(to) - gm) * delta + gm;\n  /** @type {number|undefined} */\n  let af = (alphaf(to) - am) * delta + am;\n  if (af < OPACITY_EPSILON) {\n    af = undefined;\n  }\n  return fromFloats(gf, af);\n}\n\n/**\n * @param {Grayscale} hexValue\n */\nexport function toCSSColorString(hexValue) {\n  if (typeof hexValue !== 'number') {\n    throw new Error('Not a valid number for hex color value.');\n  }\n  let g = gray(hexValue).toString(16).padStart(2, '0');\n  return `#${g}${g}${g}`;\n}\n\n/**\n * @param {Grayscale} hexValue\n */\nexport function toFloatVector(hexValue) {\n  if (typeof hexValue !== 'number') {\n    throw new Error('Not a valid number for hex color value.');\n  }\n  return [grayf(hexValue), alphaf(hexValue)];\n}\n"],"names":["create","fromBytes","fromFloats","alpha","alphaf","OPACITY_EPSILON","mix","toCSSColorString","toFloatVector"],"mappings":"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"}