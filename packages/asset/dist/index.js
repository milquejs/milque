!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).milque=t.milque||{},t.milque.asset={}))}(this,(function(t){"use strict";function e(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};function u(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var o=r>=0?arguments[r]:"/";if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,e="/"===o.charAt(0))}return(e?"/":"")+(t=n(A(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function s(t){var e=a(t),r="/"===_(t,-1);return(t=n(A(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function a(t){return"/"===t.charAt(0)}function i(){var t=Array.prototype.slice.call(arguments,0);return s(A(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))}function l(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=u(t).substr(1),e=u(e).substr(1);for(var r=n(t.split("/")),o=n(e.split("/")),s=Math.min(r.length,o.length),a=s,i=0;i<s;i++)if(r[i]!==o[i]){a=i;break}var l=[];for(i=a;i<r.length;i++)l.push("..");return(l=l.concat(o.slice(a))).join("/")}function c(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function p(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function f(t){return o(t)[3]}var h={extname:f,basename:p,dirname:c,sep:"/",delimiter:":",relative:l,join:i,isAbsolute:a,normalize:s,resolve:u};function A(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var _="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},g=e(Object.freeze({__proto__:null,resolve:u,normalize:s,isAbsolute:a,join:i,relative:l,sep:"/",delimiter:":",dirname:c,basename:p,extname:f,default:h})),v={};const R=g,b="[^\\\\/]",d="\\.",y="\\/",E="[^/]",C="(?:\\/|$)",x="(?:^|\\/)",S="\\.{1,2}(?:\\/|$)",m={DOT_LITERAL:d,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:y,ONE_CHAR:"(?=.)",QMARK:E,END_ANCHOR:C,DOTS_SLASH:S,NO_DOT:"(?!\\.)",NO_DOTS:`(?!(?:^|\\/)${S})`,NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:`(?!${S})`,QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:x},H={...m,SLASH_LITERAL:"[\\\\/]",QMARK:b,STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};var $={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars:t=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:t=>!0===t?H:m};!function(t){const e=g,n="win32"===process.platform,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_GLOBAL:s}=$;t.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t),t.hasRegexChars=t=>u.test(t),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=t=>t.replace(s,"\\$1"),t.toPosixSlashes=t=>t.replace(r,"/"),t.removeBackslashes=t=>t.replace(o,(t=>"\\"===t?"":t)),t.supportsLookbehinds=()=>{const t=process.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=t=>t&&"boolean"==typeof t.windows?t.windows:!0===n||"\\"===e.sep,t.escapeLast=(e,n,r)=>{const o=e.lastIndexOf(n,r);return-1===o?e:"\\"===e[o-1]?t.escapeLast(e,n,o-1):`${e.slice(0,o)}\\${e.slice(o)}`},t.removePrefix=(t,e={})=>{let n=t;return n.startsWith("./")&&(n=n.slice(2),e.prefix="./"),n},t.wrapOutput=(t,e={},n={})=>{let r=`${n.contains?"":"^"}(?:${t})${n.contains?"":"$"}`;return!0===e.negated&&(r=`(?:^(?!${r}).*$)`),r}}(v);const O=v,{CHAR_ASTERISK:w,CHAR_AT:T,CHAR_BACKWARD_SLASH:k,CHAR_COMMA:L,CHAR_DOT:N,CHAR_EXCLAMATION_MARK:I,CHAR_FORWARD_SLASH:M,CHAR_LEFT_CURLY_BRACE:B,CHAR_LEFT_PARENTHESES:P,CHAR_LEFT_SQUARE_BRACKET:G,CHAR_PLUS:D,CHAR_QUESTION_MARK:j,CHAR_RIGHT_CURLY_BRACE:U,CHAR_RIGHT_PARENTHESES:K,CHAR_RIGHT_SQUARE_BRACKET:F}=$,X=t=>t===M||t===k,Q=t=>{!0!==t.isPrefix&&(t.depth=t.isGlobstar?1/0:1)};var W=(t,e)=>{const n=e||{},r=t.length-1,o=!0===n.parts||!0===n.scanToEnd,u=[],s=[],a=[];let i,l,c=t,p=-1,f=0,h=0,A=!1,_=!1,g=!1,v=!1,R=!1,b=!1,d=!1,y=!1,E=!1,C=!1,x=0,S={value:"",depth:0,isGlob:!1};const m=()=>p>=r,H=()=>(i=l,c.charCodeAt(++p));for(;p<r;){let t;if(l=H(),l!==k){if(!0===b||l===B){for(x++;!0!==m()&&(l=H());)if(l!==k)if(l!==B){if(!0!==b&&l===N&&(l=H())===N){if(A=S.isBrace=!0,g=S.isGlob=!0,C=!0,!0===o)continue;break}if(!0!==b&&l===L){if(A=S.isBrace=!0,g=S.isGlob=!0,C=!0,!0===o)continue;break}if(l===U&&(x--,0===x)){b=!1,A=S.isBrace=!0,C=!0;break}}else x++;else d=S.backslashes=!0,H();if(!0===o)continue;break}if(l!==M){if(!0!==n.noext){if(!0===(l===D||l===T||l===w||l===j||l===I)&&c.charCodeAt(p+1)===P){if(g=S.isGlob=!0,v=S.isExtglob=!0,C=!0,l===I&&p===f&&(E=!0),!0===o){for(;!0!==m()&&(l=H());)if(l!==k){if(l===K){g=S.isGlob=!0,C=!0;break}}else d=S.backslashes=!0,l=H();continue}break}}if(l===w){if(i===w&&(R=S.isGlobstar=!0),g=S.isGlob=!0,C=!0,!0===o)continue;break}if(l===j){if(g=S.isGlob=!0,C=!0,!0===o)continue;break}if(l===G){for(;!0!==m()&&(t=H());)if(t!==k){if(t===F){_=S.isBracket=!0,g=S.isGlob=!0,C=!0;break}}else d=S.backslashes=!0,H();if(!0===o)continue;break}if(!0===n.nonegate||l!==I||p!==f){if(!0!==n.noparen&&l===P){if(g=S.isGlob=!0,!0===o){for(;!0!==m()&&(l=H());)if(l!==P){if(l===K){C=!0;break}}else d=S.backslashes=!0,l=H();continue}break}if(!0===g){if(C=!0,!0===o)continue;break}}else y=S.negated=!0,f++}else{if(u.push(p),s.push(S),S={value:"",depth:0,isGlob:!1},!0===C)continue;if(i===N&&p===f+1){f+=2;continue}h=p+1}}else d=S.backslashes=!0,l=H(),l===B&&(b=!0)}!0===n.noext&&(v=!1,g=!1);let $=c,W="",z="";f>0&&(W=c.slice(0,f),c=c.slice(f),h-=f),$&&!0===g&&h>0?($=c.slice(0,h),z=c.slice(h)):!0===g?($="",z=c):$=c,$&&""!==$&&"/"!==$&&$!==c&&X($.charCodeAt($.length-1))&&($=$.slice(0,-1)),!0===n.unescape&&(z&&(z=O.removeBackslashes(z)),$&&!0===d&&($=O.removeBackslashes($)));const q={prefix:W,input:t,start:f,base:$,glob:z,isBrace:A,isBracket:_,isGlob:g,isExtglob:v,isGlobstar:R,negated:y,negatedExtglob:E};if(!0===n.tokens&&(q.maxDepth=0,X(l)||s.push(S),q.tokens=s),!0===n.parts||!0===n.tokens){let e;for(let r=0;r<u.length;r++){const o=e?e+1:f,i=u[r],l=t.slice(o,i);n.tokens&&(0===r&&0!==f?(s[r].isPrefix=!0,s[r].value=W):s[r].value=l,Q(s[r]),q.maxDepth+=s[r].depth),0===r&&""===l||a.push(l),e=i}if(e&&e+1<t.length){const r=t.slice(e+1);a.push(r),n.tokens&&(s[s.length-1].value=r,Q(s[s.length-1]),q.maxDepth+=s[s.length-1].depth)}q.slashes=u,q.parts=a}return q};const z=$,q=v,{MAX_LENGTH:Z,POSIX_REGEX_SOURCE:Y,REGEX_NON_SPECIAL_CHARS:V,REGEX_SPECIAL_CHARS_BACKREF:J,REPLACEMENTS:tt}=z,et=(t,e)=>{if("function"==typeof e.expandRange)return e.expandRange(...t,e);t.sort();const n=`[${t.join("-")}]`;try{new RegExp(n)}catch(e){return t.map((t=>q.escapeRegex(t))).join("..")}return n},nt=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,rt=(t,e)=>{if("string"!=typeof t)throw new TypeError("Expected a string");t=tt[t]||t;const n={...e},r="number"==typeof n.maxLength?Math.min(Z,n.maxLength):Z;let o=t.length;if(o>r)throw new SyntaxError(`Input length: ${o}, exceeds maximum allowed length: ${r}`);const u={type:"bos",value:"",output:n.prepend||""},s=[u],a=n.capture?"":"?:",i=q.isWindows(e),l=z.globChars(i),c=z.extglobChars(l),{DOT_LITERAL:p,PLUS_LITERAL:f,SLASH_LITERAL:h,ONE_CHAR:A,DOTS_SLASH:_,NO_DOT:g,NO_DOT_SLASH:v,NO_DOTS_SLASH:R,QMARK:b,QMARK_NO_DOT:d,STAR:y,START_ANCHOR:E}=l,C=t=>`(${a}(?:(?!${E}${t.dot?_:p}).)*?)`,x=n.dot?"":g,S=n.dot?b:d;let m=!0===n.bash?C(n):y;n.capture&&(m=`(${m})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const H={input:t,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=q.removePrefix(t,H),o=t.length;const $=[],O=[],w=[];let T,k=u;const L=()=>H.index===o-1,N=H.peek=(e=1)=>t[H.index+e],I=H.advance=()=>t[++H.index]||"",M=()=>t.slice(H.index+1),B=(t="",e=0)=>{H.consumed+=t,H.index+=e},P=t=>{H.output+=null!=t.output?t.output:t.value,B(t.value)},G=()=>{let t=1;for(;"!"===N()&&("("!==N(2)||"?"===N(3));)I(),H.start++,t++;return t%2!=0&&(H.negated=!0,H.start++,!0)},D=t=>{H[t]++,w.push(t)},j=t=>{H[t]--,w.pop()},U=t=>{if("globstar"===k.type){const e=H.braces>0&&("comma"===t.type||"brace"===t.type),n=!0===t.extglob||$.length&&("pipe"===t.type||"paren"===t.type);"slash"===t.type||"paren"===t.type||e||n||(H.output=H.output.slice(0,-k.output.length),k.type="star",k.value="*",k.output=m,H.output+=k.output)}if($.length&&"paren"!==t.type&&($[$.length-1].inner+=t.value),(t.value||t.output)&&P(t),k&&"text"===k.type&&"text"===t.type)return k.value+=t.value,void(k.output=(k.output||"")+t.value);t.prev=k,s.push(t),k=t},K=(t,e)=>{const r={...c[e],conditions:1,inner:""};r.prev=k,r.parens=H.parens,r.output=H.output;const o=(n.capture?"(":"")+r.open;D("parens"),U({type:t,value:e,output:H.output?"":A}),U({type:"paren",extglob:!0,value:I(),output:o}),$.push(r)},F=t=>{let e,r=t.close+(n.capture?")":"");if("negate"===t.type){let o=m;t.inner&&t.inner.length>1&&t.inner.includes("/")&&(o=C(n)),(o!==m||L()||/^\)+$/.test(M()))&&(r=t.close=`)$))${o}`),t.inner.includes("*")&&(e=M())&&/^\.[^\\/.]+$/.test(e)&&(r=t.close=`)${e})${o})`),"bos"===t.prev.type&&(H.negatedExtglob=!0)}U({type:"paren",extglob:!0,value:T,output:r}),j("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(t)){let r=!1,o=t.replace(J,((t,e,n,o,u,s)=>"\\"===o?(r=!0,t):"?"===o?e?e+o+(u?b.repeat(u.length):""):0===s?S+(u?b.repeat(u.length):""):b.repeat(n.length):"."===o?p.repeat(n.length):"*"===o?e?e+o+(u?m:""):m:e?t:`\\${t}`));return!0===r&&(o=!0===n.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,(t=>t.length%2==0?"\\\\":t?"\\":""))),o===t&&!0===n.contains?(H.output=t,H):(H.output=q.wrapOutput(o,H,e),H)}for(;!L();){if(T=I(),"\0"===T)continue;if("\\"===T){const t=N();if("/"===t&&!0!==n.bash)continue;if("."===t||";"===t)continue;if(!t){T+="\\",U({type:"text",value:T});continue}const e=/^\\+/.exec(M());let r=0;if(e&&e[0].length>2&&(r=e[0].length,H.index+=r,r%2!=0&&(T+="\\")),!0===n.unescape?T=I():T+=I(),0===H.brackets){U({type:"text",value:T});continue}}if(H.brackets>0&&("]"!==T||"["===k.value||"[^"===k.value)){if(!1!==n.posix&&":"===T){const t=k.value.slice(1);if(t.includes("[")&&(k.posix=!0,t.includes(":"))){const t=k.value.lastIndexOf("["),e=k.value.slice(0,t),n=k.value.slice(t+2),r=Y[n];if(r){k.value=e+r,H.backtrack=!0,I(),u.output||1!==s.indexOf(k)||(u.output=A);continue}}}("["===T&&":"!==N()||"-"===T&&"]"===N())&&(T=`\\${T}`),"]"!==T||"["!==k.value&&"[^"!==k.value||(T=`\\${T}`),!0===n.posix&&"!"===T&&"["===k.value&&(T="^"),k.value+=T,P({value:T});continue}if(1===H.quotes&&'"'!==T){T=q.escapeRegex(T),k.value+=T,P({value:T});continue}if('"'===T){H.quotes=1===H.quotes?0:1,!0===n.keepQuotes&&U({type:"text",value:T});continue}if("("===T){D("parens"),U({type:"paren",value:T});continue}if(")"===T){if(0===H.parens&&!0===n.strictBrackets)throw new SyntaxError(nt("opening","("));const t=$[$.length-1];if(t&&H.parens===t.parens+1){F($.pop());continue}U({type:"paren",value:T,output:H.parens?")":"\\)"}),j("parens");continue}if("["===T){if(!0!==n.nobracket&&M().includes("]"))D("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(nt("closing","]"));T=`\\${T}`}U({type:"bracket",value:T});continue}if("]"===T){if(!0===n.nobracket||k&&"bracket"===k.type&&1===k.value.length){U({type:"text",value:T,output:`\\${T}`});continue}if(0===H.brackets){if(!0===n.strictBrackets)throw new SyntaxError(nt("opening","["));U({type:"text",value:T,output:`\\${T}`});continue}j("brackets");const t=k.value.slice(1);if(!0===k.posix||"^"!==t[0]||t.includes("/")||(T=`/${T}`),k.value+=T,P({value:T}),!1===n.literalBrackets||q.hasRegexChars(t))continue;const e=q.escapeRegex(k.value);if(H.output=H.output.slice(0,-k.value.length),!0===n.literalBrackets){H.output+=e,k.value=e;continue}k.value=`(${a}${e}|${k.value})`,H.output+=k.value;continue}if("{"===T&&!0!==n.nobrace){D("braces");const t={type:"brace",value:T,output:"(",outputIndex:H.output.length,tokensIndex:H.tokens.length};O.push(t),U(t);continue}if("}"===T){const t=O[O.length-1];if(!0===n.nobrace||!t){U({type:"text",value:T,output:T});continue}let e=")";if(!0===t.dots){const t=s.slice(),r=[];for(let e=t.length-1;e>=0&&(s.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&r.unshift(t[e].value);e=et(r,n),H.backtrack=!0}if(!0!==t.comma&&!0!==t.dots){const n=H.output.slice(0,t.outputIndex),r=H.tokens.slice(t.tokensIndex);t.value=t.output="\\{",T=e="\\}",H.output=n;for(const t of r)H.output+=t.output||t.value}U({type:"brace",value:T,output:e}),j("braces"),O.pop();continue}if("|"===T){$.length>0&&$[$.length-1].conditions++,U({type:"text",value:T});continue}if(","===T){let t=T;const e=O[O.length-1];e&&"braces"===w[w.length-1]&&(e.comma=!0,t="|"),U({type:"comma",value:T,output:t});continue}if("/"===T){if("dot"===k.type&&H.index===H.start+1){H.start=H.index+1,H.consumed="",H.output="",s.pop(),k=u;continue}U({type:"slash",value:T,output:h});continue}if("."===T){if(H.braces>0&&"dot"===k.type){"."===k.value&&(k.output=p);const t=O[O.length-1];k.type="dots",k.output+=T,k.value+=T,t.dots=!0;continue}if(H.braces+H.parens===0&&"bos"!==k.type&&"slash"!==k.type){U({type:"text",value:T,output:p});continue}U({type:"dot",value:T,output:p});continue}if("?"===T){if(!(k&&"("===k.value)&&!0!==n.noextglob&&"("===N()&&"?"!==N(2)){K("qmark",T);continue}if(k&&"paren"===k.type){const t=N();let e=T;if("<"===t&&!q.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===k.value&&!/[!=<:]/.test(t)||"<"===t&&!/<([!=]|\w+>)/.test(M()))&&(e=`\\${T}`),U({type:"text",value:T,output:e});continue}if(!0!==n.dot&&("slash"===k.type||"bos"===k.type)){U({type:"qmark",value:T,output:d});continue}U({type:"qmark",value:T,output:b});continue}if("!"===T){if(!0!==n.noextglob&&"("===N()&&("?"!==N(2)||!/[!=<:]/.test(N(3)))){K("negate",T);continue}if(!0!==n.nonegate&&0===H.index){G();continue}}if("+"===T){if(!0!==n.noextglob&&"("===N()&&"?"!==N(2)){K("plus",T);continue}if(k&&"("===k.value||!1===n.regex){U({type:"plus",value:T,output:f});continue}if(k&&("bracket"===k.type||"paren"===k.type||"brace"===k.type)||H.parens>0){U({type:"plus",value:T});continue}U({type:"plus",value:f});continue}if("@"===T){if(!0!==n.noextglob&&"("===N()&&"?"!==N(2)){U({type:"at",extglob:!0,value:T,output:""});continue}U({type:"text",value:T});continue}if("*"!==T){"$"!==T&&"^"!==T||(T=`\\${T}`);const t=V.exec(M());t&&(T+=t[0],H.index+=t[0].length),U({type:"text",value:T});continue}if(k&&("globstar"===k.type||!0===k.star)){k.type="star",k.star=!0,k.value+=T,k.output=m,H.backtrack=!0,H.globstar=!0,B(T);continue}let e=M();if(!0!==n.noextglob&&/^\([^?]/.test(e)){K("star",T);continue}if("star"===k.type){if(!0===n.noglobstar){B(T);continue}const r=k.prev,o=r.prev,u="slash"===r.type||"bos"===r.type,s=o&&("star"===o.type||"globstar"===o.type);if(!0===n.bash&&(!u||e[0]&&"/"!==e[0])){U({type:"star",value:T,output:""});continue}const a=H.braces>0&&("comma"===r.type||"brace"===r.type),i=$.length&&("pipe"===r.type||"paren"===r.type);if(!u&&"paren"!==r.type&&!a&&!i){U({type:"star",value:T,output:""});continue}for(;"/**"===e.slice(0,3);){const n=t[H.index+4];if(n&&"/"!==n)break;e=e.slice(3),B("/**",3)}if("bos"===r.type&&L()){k.type="globstar",k.value+=T,k.output=C(n),H.output=k.output,H.globstar=!0,B(T);continue}if("slash"===r.type&&"bos"!==r.prev.type&&!s&&L()){H.output=H.output.slice(0,-(r.output+k.output).length),r.output=`(?:${r.output}`,k.type="globstar",k.output=C(n)+(n.strictSlashes?")":"|$)"),k.value+=T,H.globstar=!0,H.output+=r.output+k.output,B(T);continue}if("slash"===r.type&&"bos"!==r.prev.type&&"/"===e[0]){const t=void 0!==e[1]?"|$":"";H.output=H.output.slice(0,-(r.output+k.output).length),r.output=`(?:${r.output}`,k.type="globstar",k.output=`${C(n)}${h}|${h}${t})`,k.value+=T,H.output+=r.output+k.output,H.globstar=!0,B(T+I()),U({type:"slash",value:"/",output:""});continue}if("bos"===r.type&&"/"===e[0]){k.type="globstar",k.value+=T,k.output=`(?:^|${h}|${C(n)}${h})`,H.output=k.output,H.globstar=!0,B(T+I()),U({type:"slash",value:"/",output:""});continue}H.output=H.output.slice(0,-k.output.length),k.type="globstar",k.output=C(n),k.value+=T,H.output+=k.output,H.globstar=!0,B(T);continue}const r={type:"star",value:T,output:m};!0!==n.bash?!k||"bracket"!==k.type&&"paren"!==k.type||!0!==n.regex?(H.index!==H.start&&"slash"!==k.type&&"dot"!==k.type||("dot"===k.type?(H.output+=v,k.output+=v):!0===n.dot?(H.output+=R,k.output+=R):(H.output+=x,k.output+=x),"*"!==N()&&(H.output+=A,k.output+=A)),U(r)):(r.output=T,U(r)):(r.output=".*?","bos"!==k.type&&"slash"!==k.type||(r.output=x+r.output),U(r))}for(;H.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(nt("closing","]"));H.output=q.escapeLast(H.output,"["),j("brackets")}for(;H.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(nt("closing",")"));H.output=q.escapeLast(H.output,"("),j("parens")}for(;H.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(nt("closing","}"));H.output=q.escapeLast(H.output,"{"),j("braces")}if(!0===n.strictSlashes||"star"!==k.type&&"bracket"!==k.type||U({type:"maybe_slash",value:"",output:`${h}?`}),!0===H.backtrack){H.output="";for(const t of H.tokens)H.output+=null!=t.output?t.output:t.value,t.suffix&&(H.output+=t.suffix)}return H};rt.fastpaths=(t,e)=>{const n={...e},r="number"==typeof n.maxLength?Math.min(Z,n.maxLength):Z,o=t.length;if(o>r)throw new SyntaxError(`Input length: ${o}, exceeds maximum allowed length: ${r}`);t=tt[t]||t;const u=q.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:i,DOTS_SLASH:l,NO_DOT:c,NO_DOTS:p,NO_DOTS_SLASH:f,STAR:h,START_ANCHOR:A}=z.globChars(u),_=n.dot?p:c,g=n.dot?f:c,v=n.capture?"":"?:";let R=!0===n.bash?".*?":h;n.capture&&(R=`(${R})`);const b=t=>!0===t.noglobstar?R:`(${v}(?:(?!${A}${t.dot?l:s}).)*?)`,d=t=>{switch(t){case"*":return`${_}${i}${R}`;case".*":return`${s}${i}${R}`;case"*.*":return`${_}${R}${s}${i}${R}`;case"*/*":return`${_}${R}${a}${i}${g}${R}`;case"**":return _+b(n);case"**/*":return`(?:${_}${b(n)}${a})?${g}${i}${R}`;case"**/*.*":return`(?:${_}${b(n)}${a})?${g}${R}${s}${i}${R}`;case"**/.*":return`(?:${_}${b(n)}${a})?${s}${i}${R}`;default:{const e=/^(.*?)\.(\w+)$/.exec(t);if(!e)return;const n=d(e[1]);if(!n)return;return n+s+e[2]}}},y=q.removePrefix(t,{negated:!1,prefix:""});let E=d(y);return E&&!0!==n.strictSlashes&&(E+=`${a}?`),E};const ot=g,ut=W,st=rt,at=v,it=$,lt=(t,e,n=!1)=>{if(Array.isArray(t)){const r=t.map((t=>lt(t,e,n)));return t=>{for(const e of r){const n=e(t);if(n)return n}return!1}}const r=(o=t)&&"object"==typeof o&&!Array.isArray(o)&&t.tokens&&t.input;var o;if(""===t||"string"!=typeof t&&!r)throw new TypeError("Expected pattern to be a non-empty string");const u=e||{},s=at.isWindows(e),a=r?lt.compileRe(t,e):lt.makeRe(t,e,!1,!0),i=a.state;delete a.state;let l=()=>!1;if(u.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};l=lt(u.ignore,t,n)}const c=(n,r=!1)=>{const{isMatch:o,match:c,output:p}=lt.test(n,a,e,{glob:t,posix:s}),f={glob:t,state:i,regex:a,posix:s,input:n,output:p,match:c,isMatch:o};return"function"==typeof u.onResult&&u.onResult(f),!1===o?(f.isMatch=!1,!!r&&f):l(n)?("function"==typeof u.onIgnore&&u.onIgnore(f),f.isMatch=!1,!!r&&f):("function"==typeof u.onMatch&&u.onMatch(f),!r||f)};return n&&(c.state=i),c};lt.test=(t,e,n,{glob:r,posix:o}={})=>{if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(""===t)return{isMatch:!1,output:""};const u=n||{},s=u.format||(o?at.toPosixSlashes:null);let a=t===r,i=a&&s?s(t):t;return!1===a&&(i=s?s(t):t,a=i===r),!1!==a&&!0!==u.capture||(a=!0===u.matchBase||!0===u.basename?lt.matchBase(t,e,n,o):e.exec(i)),{isMatch:Boolean(a),match:a,output:i}},lt.matchBase=(t,e,n,r=at.isWindows(n))=>(e instanceof RegExp?e:lt.makeRe(e,n)).test(ot.basename(t)),lt.isMatch=(t,e,n)=>lt(e,n)(t),lt.parse=(t,e)=>Array.isArray(t)?t.map((t=>lt.parse(t,e))):st(t,{...e,fastpaths:!1}),lt.scan=(t,e)=>ut(t,e),lt.compileRe=(t,e,n=!1,r=!1)=>{if(!0===n)return t.output;const o=e||{},u=o.contains?"":"^",s=o.contains?"":"$";let a=`${u}(?:${t.output})${s}`;t&&!0===t.negated&&(a=`^(?!${a}).*$`);const i=lt.toRegex(a,e);return!0===r&&(i.state=t),i},lt.makeRe=(t,e={},n=!1,r=!1)=>{if(!t||"string"!=typeof t)throw new TypeError("Expected a non-empty string");let o={negated:!1,fastpaths:!0};return!1===e.fastpaths||"."!==t[0]&&"*"!==t[0]||(o.output=st.fastpaths(t,e)),o.output||(o=st(t,e)),lt.compileRe(o,e,n,r)},lt.toRegex=(t,e)=>{try{const n=e||{};return new RegExp(t,n.flags||(n.nocase?"i":""))}catch(t){if(e&&!0===e.debug)throw t;return/$^/}},lt.constants=it;var ct=lt;class pt{constructor(t){let e;e="object"==typeof t&&t instanceof pt?t.source:String(t),this.source=e,this._re=ct.makeRe(e)}test(t){return this._re.test(t)}}const ft=/^([_\w\d]+)\:\/\//;function ht(t,e,n){const{cache:r,loadings:o}=t;return r[e]=n,e in o&&(o[e].resolve(n),delete o[e]),n}async function At(t,e,n=5e3){const{cache:r,loadings:o}=t;if(e in r)return r[e];if(e in o)return o[e].promise;{let t=new gt(n);return o[e]=t,t.promise}}function _t(t,e){return t.cache[e]}class gt{constructor(t){this.active=!1,this._resolve=null,this._reject=null,this._reason=null,this._value=null,this._timeoutHandle=Number.isFinite(t)&&t>0?setTimeout((()=>{this.reject(`Asset loading exceeded timeout of ${t} ms.`)}),t):null,this._promise=new Promise(((t,e)=>{this._value?t(this._value):this._resolve=t,this._reason?e(this._reason):this._reject=e}))}get promise(){return this._promise}resolve(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._resolve?this._resolve(t):this._value=t}reject(t){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null),this._reject?this._reject(t):this._reason=t}}var vt={},Rt=Uint8Array,bt=Uint16Array,dt=Uint32Array,yt=new Rt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Et=new Rt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ct=new Rt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xt=function(t,e){for(var n=new bt(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var o=new dt(n[30]);for(r=1;r<30;++r)for(var u=n[r];u<n[r+1];++u)o[u]=u-n[r]<<5|r;return[n,o]},St=xt(yt,2),mt=St[0],Ht=St[1];mt[28]=258,Ht[258]=28;for(var $t=xt(Et,0)[0],Ot=new bt(32768),wt=0;wt<32768;++wt){var Tt=(43690&wt)>>>1|(21845&wt)<<1;Tt=(61680&(Tt=(52428&Tt)>>>2|(13107&Tt)<<2))>>>4|(3855&Tt)<<4,Ot[wt]=((65280&Tt)>>>8|(255&Tt)<<8)>>>1}var kt=function(t,e,n){for(var r=t.length,o=0,u=new bt(e);o<r;++o)++u[t[o]-1];var s,a=new bt(e);for(o=0;o<e;++o)a[o]=a[o-1]+u[o-1]<<1;if(n){s=new bt(1<<e);var i=15-e;for(o=0;o<r;++o)if(t[o])for(var l=o<<4|t[o],c=e-t[o],p=a[t[o]-1]++<<c,f=p|(1<<c)-1;p<=f;++p)s[Ot[p]>>>i]=l}else for(s=new bt(r),o=0;o<r;++o)t[o]&&(s[o]=Ot[a[t[o]-1]++]>>>15-t[o]);return s},Lt=new Rt(288);for(wt=0;wt<144;++wt)Lt[wt]=8;for(wt=144;wt<256;++wt)Lt[wt]=9;for(wt=256;wt<280;++wt)Lt[wt]=7;for(wt=280;wt<288;++wt)Lt[wt]=8;var Nt=new Rt(32);for(wt=0;wt<32;++wt)Nt[wt]=5;var It=kt(Lt,9,1),Mt=kt(Nt,5,1),Bt=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Pt=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},Gt=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Dt=function(t){return(t/8|0)+(7&t&&1)},jt=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof bt?bt:t instanceof dt?dt:Rt)(n-e);return r.set(t.subarray(e,n)),r},Ut=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new Rt(0);var o=!e||n,u=!n||n.i;n||(n={}),e||(e=new Rt(3*r));var s=function(t){var n=e.length;if(t>n){var r=new Rt(Math.max(2*n,t));r.set(e),e=r}},a=n.f||0,i=n.p||0,l=n.b||0,c=n.l,p=n.d,f=n.m,h=n.n,A=8*r;do{if(!c){n.f=a=Pt(t,i,1);var _=Pt(t,i+1,3);if(i+=3,!_){var g=t[(H=Dt(i)+4)-4]|t[H-3]<<8,v=H+g;if(v>r){if(u)throw"unexpected EOF";break}o&&s(l+g),e.set(t.subarray(H,v),l),n.b=l+=g,n.p=i=8*v;continue}if(1==_)c=It,p=Mt,f=9,h=5;else{if(2!=_)throw"invalid block type";var R=Pt(t,i,31)+257,b=Pt(t,i+10,15)+4,d=R+Pt(t,i+5,31)+1;i+=14;for(var y=new Rt(d),E=new Rt(19),C=0;C<b;++C)E[Ct[C]]=Pt(t,i+3*C,7);i+=3*b;var x=Bt(E),S=(1<<x)-1,m=kt(E,x,1);for(C=0;C<d;){var H,$=m[Pt(t,i,S)];if(i+=15&$,(H=$>>>4)<16)y[C++]=H;else{var O=0,w=0;for(16==H?(w=3+Pt(t,i,3),i+=2,O=y[C-1]):17==H?(w=3+Pt(t,i,7),i+=3):18==H&&(w=11+Pt(t,i,127),i+=7);w--;)y[C++]=O}}var T=y.subarray(0,R),k=y.subarray(R);f=Bt(T),h=Bt(k),c=kt(T,f,1),p=kt(k,h,1)}if(i>A){if(u)throw"unexpected EOF";break}}o&&s(l+131072);for(var L=(1<<f)-1,N=(1<<h)-1,I=i;;I=i){var M=(O=c[Gt(t,i)&L])>>>4;if((i+=15&O)>A){if(u)throw"unexpected EOF";break}if(!O)throw"invalid length/literal";if(M<256)e[l++]=M;else{if(256==M){I=i,c=null;break}var B=M-254;if(M>264){var P=yt[C=M-257];B=Pt(t,i,(1<<P)-1)+mt[C],i+=P}var G=p[Gt(t,i)&N],D=G>>>4;if(!G)throw"invalid distance";i+=15&G;k=$t[D];if(D>3){P=Et[D];k+=Gt(t,i)&(1<<P)-1,i+=P}if(i>A){if(u)throw"unexpected EOF";break}o&&s(l+131072);for(var j=l+B;l<j;l+=4)e[l]=e[l-k],e[l+1]=e[l+1-k],e[l+2]=e[l+2-k],e[l+3]=e[l+3-k];l=j}}n.l=c,n.p=I,n.b=l,c&&(a=1,n.m=f,n.d=p,n.n=h)}while(!a);return l==e.length?e:jt(e,0,l)},Kt=new Rt(0),Ft=function(t,e,n){for(var r=t(),o=t.toString(),u=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),s=0;s<r.length;++s){var a=r[s],i=u[s];if("function"==typeof a){e+=";"+i+"=";var l=a.toString();if(a.prototype)if(-1!=l.indexOf("[native code]")){var c=l.indexOf(" ",8)+1;e+=l.slice(c,l.indexOf("(",c))}else for(var p in e+=l,a.prototype)e+=";"+i+".prototype."+p+"="+a.prototype[p].toString();else e+=l}else n[i]=a}return[e,n]},Xt=[],Qt=function(t,e,n,r){var o;if(!Xt[n]){for(var u="",s={},a=t.length-1,i=0;i<a;++i)u=(o=Ft(t[i],u,s))[0],s=o[1];Xt[n]=Ft(t[a],u,s)}var l=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}({},Xt[n][1]);return function(t,e,n,r,o){var u=new Worker(vt[e]||(vt[e]=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))));return u.onerror=function(t){return o(t.error,null)},u.onmessage=function(t){return o(null,t.data)},u.postMessage(n,r),u}(Xt[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,l,function(t){var e=[];for(var n in t)(t[n]instanceof Rt||t[n]instanceof bt||t[n]instanceof dt)&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e}(l),r)},Wt=function(){return[Rt,bt,dt,yt,Et,Ct,mt,$t,It,Mt,Ot,kt,Bt,Pt,Gt,Dt,jt,Ut,te,zt,qt]},zt=function(t){return postMessage(t,[t.buffer])},qt=function(t){return t&&t.size&&new Rt(t.size)},Zt=function(t,e){return t[e]|t[e+1]<<8},Yt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Vt=function(t,e){return Yt(t,e)+4294967296*Yt(t,e+4)};function Jt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return function(t,e,n,r,o,u){var s=Qt(n,r,o,(function(t,e){s.terminate(),u(t,e)}));return s.postMessage([t,e],e.consume?[t.buffer]:[]),function(){s.terminate()}}(t,e,[Wt],(function(t){return zt(te(t.data[0],qt(t.data[1])))}),1,n)}function te(t,e){return Ut(t,e)}var ee="undefined"!=typeof TextDecoder&&new TextDecoder;try{ee.decode(Kt,{stream:!0}),1}catch(t){}function ne(t,e){if(e){for(var n="",r=0;r<t.length;r+=16384)n+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return n}if(ee)return ee.decode(t);var o=function(t){for(var e="",n=0;;){var r=t[n++],o=(r>127)+(r>223)+(r>239);if(n+o>t.length)return[e,jt(t,n-1)];o?3==o?(r=((15&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|r>>10,56320|1023&r)):e+=1&o?String.fromCharCode((31&r)<<6|63&t[n++]):String.fromCharCode((15&r)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(r)}}(t),u=o[0];if(o[1].length)throw"invalid utf-8 data";return u}var re=function(t,e){for(;1!=Zt(t,e);e+=4+Zt(t,e+2));return[Vt(t,e+12),Vt(t,e+4),Vt(t,e+20)]};function oe(t,e){if("function"!=typeof e)throw"no callback";for(var n=[],r=function(){for(var t=0;t<n.length;++t)n[t]()},o={},u=t.length-22;101010256!=Yt(t,u);--u)if(!u||t.length-u>65558)return void e("invalid zip file",null);var s=Zt(t,u+8);s||e(null,{});var a=s,i=Yt(t,u+16),l=4294967295==i;if(l){if(u=Yt(t,u-12),101075792!=Yt(t,u))return void e("invalid zip file",null);a=s=Yt(t,u+32),i=Yt(t,u+48)}for(var c=function(u){var a=function(t,e,n){var r=Zt(t,e+28),o=ne(t.subarray(e+46,e+46+r),!(2048&Zt(t,e+8))),u=e+46+r,s=Yt(t,e+20),a=n&&4294967295==s?re(t,u):[s,Yt(t,e+24),Yt(t,e+42)],i=a[0],l=a[1],c=a[2];return[Zt(t,e+10),i,l,o,u+Zt(t,e+30)+Zt(t,e+32),c]}(t,i,l),c=a[0],p=a[1],f=a[2],h=a[3],A=a[4],_=a[5],g=function(t,e){return e+30+Zt(t,e+26)+Zt(t,e+28)}(t,_);i=A;var v=function(t,n){t?(r(),e(t,null)):(o[h]=n,--s||e(null,o))};if(c)if(8==c){var R=t.subarray(g,g+p);if(p<32e4)try{v(null,te(R,new Rt(f)))}catch(t){v(t,null)}else n.push(Jt(R,{size:f},v))}else v("unknown compression type "+c,null);else v(null,jt(t,g,g+p))},p=0;p<a;++p)c();return r}const ue={cache:{},loadings:{},defaults:[]};var se=Object.freeze({__proto__:null,loadAssetPackAsRaw:async function(t,e){let n=await fetch(t),r=await n.arrayBuffer();await new Promise(((t,n)=>{oe(new Uint8Array(r),((r,o)=>{if(r)n(r);else{for(let[t,n]of Object.entries(o)){t=t.replaceAll("\\","/");let r=t.indexOf("/");r>=0&&(t=t.substring(r+1));let o="raw://"+t;ht(ue,o,n),e&&e(n,o,t)}t()}}))}))},loadAssetPack:async function(t,e){let n=await fetch(t),r=await n.arrayBuffer();await new Promise(((t,n)=>{oe(new Uint8Array(r),((r,o)=>{if(r)n(r);else{for(let[t,n]of Object.entries(o))t=t.replaceAll("\\","/"),e(n,t);t()}}))}))},loadAssetRefs:async function(t,e=5e3){let n=[];for(let r of t)n.push(r.load(ue,e));await Promise.allSettled(n)},cache:function(t,e){return ht(ue,t,e)},keys:function(){return t=ue,Object.keys(t.cache);var t},current:function(t){return _t(ue,t)}});t.AssetManager=se,t.AssetRef=class{constructor(t,e,n){this.uri=t,this.source=e,this.loader=n,this.store=null}get current(){return _t(this.store,this.uri)}get default(){return function(t,e){const{defaults:n}=t;for(let r of n)if(r.glob.test(e))return _t(t,r.uri);return null}(this.store,this.uri)}get loaded(){return At(this.store,this.uri)}async load(t,e){return this.store=t,await async function(t,e,n,r,o=5e3){const{cache:u,loadings:s}=t;if(e in u)return u[e];let a;if(e in s){if(a=s[e],a.active)return s[e].promise}else a=new gt(o),s[e]=a;let i=[a.promise];return ft.test(n)?i.push(At(t,n,o).then((t=>r(t))).then((n=>ht(t,e,n)))):i.push(fetch(n).then((t=>t.arrayBuffer())).then((t=>r(t))).then((n=>ht(t,e,n)))),await Promise.race(i)}(this.store,this.uri,this.source,this.loader,e),this}unload(){return function(t,e){const{cache:n,loadings:r}=t;e in r&&(r[e].reject(new Error("Stop loading to delete asset.")),delete r[e]),e in n&&delete n[e]}(this.store,this.uri),this.store=null,this}cache(t){return ht(this.store,this.uri,t),this}},t.GlobExp=pt,Object.defineProperty(t,"__esModule",{value:!0})}));
